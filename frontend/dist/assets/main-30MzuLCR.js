var op=Object.defineProperty;var Dl=r=>{throw TypeError(r)};var ap=(r,e,t)=>e in r?op(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var L=(r,e,t)=>ap(r,typeof e!="symbol"?e+"":e,t),oc=(r,e,t)=>e.has(r)||Dl("Cannot "+t);var y=(r,e,t)=>(oc(r,e,"read from private field"),t?t.call(r):e.get(r)),M=(r,e,t)=>e.has(r)?Dl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),k=(r,e,t,n)=>(oc(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),J=(r,e,t)=>(oc(r,e,"access private method"),t);var $s=(r,e,t,n)=>({set _(i){k(r,e,i,t)},get _(){return y(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const cp="modulepreload",lp=function(r){return"/"+r},Rl={},ha=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=lp(c),c in Rl)return;Rl[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":cp,l||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((d,g)=>{f.addEventListener("load",d),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},up="6.15.0";function fp(r,e,t){const n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}async function ht(r){const e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,i,s)=>(n[e[s]]=i,n),{})}function oe(r,e,t){for(let n in e){let i=e[n];const s=t?t[n]:null;s&&fp(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Mi(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>Mi(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let i=0;i<r.length;i++)n+=t[r[i]>>4],n+=t[r[i]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Mi(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(n=>`${Mi(n,e)}: ${Mi(r[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function et(r,e){return r&&r.code===e}function q0(r){return et(r,"CALL_EXCEPTION")}function Oe(r,e,t){let n=r;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Mi(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];s.push(o+"="+Mi(a))}}s.push(`code=${e}`),s.push(`version=${up}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return oe(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&oe(i,{shortMessage:n}),i}function K(r,e,t,n){if(!r)throw Oe(e,t,n)}function P(r,e,t,n){K(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function Df(r,e,t){t==null&&(t=""),t&&(t=": "+t),K(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),K(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(e)}catch{}return r},[]);function Po(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),K(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Rf(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}P(!1,"invalid BytesLike value",e||"value",r)}function ue(r,e){return Rf(r,e,!1)}function dt(r,e){return Rf(r,e,!0)}function Se(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function j0(r){return Se(r,!0)||r instanceof Uint8Array}const Sl="0123456789abcdef";function X(r){const e=ue(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=Sl[(i&240)>>4]+Sl[i&15]}return t}function Me(r){return"0x"+r.map(e=>X(e).substring(2)).join("")}function gi(r){return Se(r,!0)?(r.length-2)/2:ue(r).length}function ze(r,e,t){const n=ue(r);return t!=null&&t>n.length&&K(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),X(n.slice(e??0,t??n.length))}function Sf(r,e,t){const n=ue(r);K(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),X(i)}function Wt(r,e){return Sf(r,e,!0)}function Nf(r,e){return Sf(r,e,!1)}const Ua=BigInt(0),tn=BigInt(1),Ui=9007199254740991;function da(r,e){const t=_a(r,"value"),n=BigInt(fe(e,"width"));if(K(t>>n===Ua,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-tn){const i=(tn<<n)-tn;return-((~t&i)+tn)}return t}function J0(r,e){let t=ne(r,"value");const n=BigInt(fe(e,"width")),i=tn<<n-tn;if(t<Ua){t=-t,K(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(tn<<n)-tn;return(~t&s)+tn}else K(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function Qr(r,e){const t=_a(r,"value"),n=BigInt(fe(e,"bits"));return t&(tn<<n)-tn}function ne(r,e){switch(typeof r){case"bigint":return r;case"number":return P(Number.isInteger(r),"underflow",e||"value",r),P(r>=-Ui&&r<=Ui,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){P(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}P(!1,"invalid BigNumberish value",e||"value",r)}function _a(r,e){const t=ne(r,e);return K(t>=Ua,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const Nl="0123456789abcdef";function Ha(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=Nl[t>>4],e+=Nl[t&15];return BigInt(e)}return ne(r)}function fe(r,e){switch(typeof r){case"bigint":return P(r>=-Ui&&r<=Ui,"overflow",e||"value",r),Number(r);case"number":return P(Number.isInteger(r),"underflow",e||"value",r),P(r>=-Ui&&r<=Ui,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return fe(BigInt(r),e)}catch(t){P(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}P(!1,"invalid numeric value",e||"value",r)}function hp(r){return fe(Ha(r))}function Pr(r,e){let n=_a(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=fe(e,"width");for(K(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function Ve(r){const e=_a(r,"value");if(e===Ua)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function en(r){let e=X(j0(r)?r:Ve(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Ll="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Ol=BigInt(58);function dp(r){const e=ue(r);let t=Ha(e),n="";for(;t;)n=Ll[Number(t%Ol)]+n,t/=Ol;for(let i=0;i<e.length&&!e[i];i++)n=Ll[0]+n;return n}function pp(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return ue(e)}function gp(r){const e=ue(r);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var $i;class Lf{constructor(e,t,n){L(this,"filter");L(this,"emitter");M(this,$i);k(this,$i,t),oe(this,{emitter:e,filter:n})}async removeListener(){y(this,$i)!=null&&await this.emitter.off(this.filter,y(this,$i))}}$i=new WeakMap;function yp(r,e,t,n,i){P(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function Of(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function xp(r,e,t,n,i){return r==="OVERLONG"?(P(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),Of(r,e,t))}const mp=Object.freeze({error:yp,ignore:Of,replace:xp});function wp(r,e){e==null&&(e=mp.error);const t=ue(r,"bytes"),n=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=t[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,n,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,n,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,t,n,c);continue}n.push(c)}}return n}function rn(r,e){P(typeof r=="string","invalid string value","str",r);let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);P(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function bp(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function pa(r,e){return bp(wp(r,e))}function Mf(r){async function e(t,n){K(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();K(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),K(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Oe("request timeout","TIMEOUT"),o.abort()},t.timeout);n&&n.addListener(()=>{s=Oe("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let l;try{l=await fetch(t.url,c)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const u={};l.headers.forEach((g,x)=>{u[x.toLowerCase()]=g});const f=await l.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const Ap=12,Ep=250;let Ml=Mf();const vp=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Bp=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let ac=!1;async function Uf(r,e){try{const t=r.match(vp);if(!t)throw new Error("invalid data");return new kr(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?pp(t[3]):kp(t[3]))}catch{return new kr(599,"BAD REQUEST (invalid data: URI)",{},null,new Kn(r))}}function _f(r){async function e(t,n){try{const i=t.match(Bp);if(!i)throw new Error("invalid link");return new Kn(`${r}${i[2]}`)}catch{return new kr(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Kn(t))}}return e}const Vo={data:Uf,ipfs:_f("https://gateway.ipfs.io/ipfs/")},Hf=new WeakMap;var jr,lr;class Cp{constructor(e){M(this,jr);M(this,lr);k(this,jr,[]),k(this,lr,!1),Hf.set(e,()=>{if(!y(this,lr)){k(this,lr,!0);for(const t of y(this,jr))setTimeout(()=>{t()},0);k(this,jr,[])}})}addListener(e){K(!y(this,lr),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),y(this,jr).push(e)}get cancelled(){return y(this,lr)}checkSignal(){K(!this.cancelled,"cancelled","CANCELLED",{})}}jr=new WeakMap,lr=new WeakMap;function Qo(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var Ki,qi,qt,Sn,ji,Ji,Ke,Tt,Nn,Jr,Zr,Yr,hn,jt,ur,Xr,Zs;const Da=class Da{constructor(e){M(this,Xr);M(this,Ki);M(this,qi);M(this,qt);M(this,Sn);M(this,ji);M(this,Ji);M(this,Ke);M(this,Tt);M(this,Nn);M(this,Jr);M(this,Zr);M(this,Yr);M(this,hn);M(this,jt);M(this,ur);k(this,Ji,String(e)),k(this,Ki,!1),k(this,qi,!0),k(this,qt,{}),k(this,Sn,""),k(this,ji,3e5),k(this,jt,{slotInterval:Ep,maxAttempts:Ap}),k(this,ur,null)}get url(){return y(this,Ji)}set url(e){k(this,Ji,String(e))}get body(){return y(this,Ke)==null?null:new Uint8Array(y(this,Ke))}set body(e){if(e==null)k(this,Ke,void 0),k(this,Tt,void 0);else if(typeof e=="string")k(this,Ke,rn(e)),k(this,Tt,"text/plain");else if(e instanceof Uint8Array)k(this,Ke,e),k(this,Tt,"application/octet-stream");else if(typeof e=="object")k(this,Ke,rn(JSON.stringify(e))),k(this,Tt,"application/json");else throw new Error("invalid body")}hasBody(){return y(this,Ke)!=null}get method(){return y(this,Sn)?y(this,Sn):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),k(this,Sn,String(e).toUpperCase())}get headers(){const e=Object.assign({},y(this,qt));return y(this,Nn)&&(e.authorization=`Basic ${gp(rn(y(this,Nn)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&y(this,Tt)&&(e["content-type"]=y(this,Tt)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){y(this,qt)[String(e).toLowerCase()]=String(t)}clearHeaders(){k(this,qt,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return y(this,Nn)||null}setCredentials(e,t){P(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),k(this,Nn,`${e}:${t}`)}get allowGzip(){return y(this,qi)}set allowGzip(e){k(this,qi,!!e)}get allowInsecureAuthentication(){return!!y(this,Ki)}set allowInsecureAuthentication(e){k(this,Ki,!!e)}get timeout(){return y(this,ji)}set timeout(e){P(e>=0,"timeout must be non-zero","timeout",e),k(this,ji,e)}get preflightFunc(){return y(this,Jr)||null}set preflightFunc(e){k(this,Jr,e)}get processFunc(){return y(this,Zr)||null}set processFunc(e){k(this,Zr,e)}get retryFunc(){return y(this,Yr)||null}set retryFunc(e){k(this,Yr,e)}get getUrlFunc(){return y(this,ur)||Ml}set getUrlFunc(e){k(this,ur,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${y(this,Ke)?X(y(this,Ke)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(y(this,jt).slotInterval=e.slotInterval),e.maxAttempts!=null&&(y(this,jt).maxAttempts=e.maxAttempts)}send(){return K(y(this,hn)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),k(this,hn,new Cp(this)),J(this,Xr,Zs).call(this,0,Ul()+this.timeout,0,this,new kr(0,"",{},null,this))}cancel(){K(y(this,hn)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Hf.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();K(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Da(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,k(i,qt,Object.assign({},y(this,qt))),y(this,Ke)&&k(i,Ke,new Uint8Array(y(this,Ke))),k(i,Tt,y(this,Tt)),i}clone(){const e=new Da(this.url);return k(e,Sn,y(this,Sn)),y(this,Ke)&&k(e,Ke,y(this,Ke)),k(e,Tt,y(this,Tt)),k(e,qt,Object.assign({},y(this,qt))),k(e,Nn,y(this,Nn)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),k(e,Jr,y(this,Jr)),k(e,Zr,y(this,Zr)),k(e,Yr,y(this,Yr)),k(e,jt,Object.assign({},y(this,jt))),k(e,ur,y(this,ur)),e}static lockConfig(){ac=!0}static getGateway(e){return Vo[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(ac)throw new Error("gateways locked");Vo[e]=t}static registerGetUrl(e){if(ac)throw new Error("gateways locked");Ml=e}static createGetUrlFunc(e){return Mf(e)}static createDataGateway(){return Uf}static createIpfsGatewayFunc(e){return _f(e)}};Ki=new WeakMap,qi=new WeakMap,qt=new WeakMap,Sn=new WeakMap,ji=new WeakMap,Ji=new WeakMap,Ke=new WeakMap,Tt=new WeakMap,Nn=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,Yr=new WeakMap,hn=new WeakMap,jt=new WeakMap,ur=new WeakMap,Xr=new WeakSet,Zs=async function(e,t,n,i,s){var u,f,d;if(e>=y(this,jt).maxAttempts)return s.makeServerError("exceeded maximum retry limit");K(Ul()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await Tp(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Vo){const g=await Vo[a](o.url,Qo(y(i,hn)));if(g instanceof kr){let x=g;if(this.processFunc){Qo(y(i,hn));try{x=await this.processFunc(o,x)}catch(m){(m.throttle==null||typeof m.stall!="number")&&x.makeServerError("error in post-processing function",m).assertOk()}}return x}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Qo(y(i,hn)));let l=new kr(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{const g=l.headers.location||"";return J(u=o.redirect(g),Xr,Zs).call(u,e+1,t,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const g=l.headers["retry-after"];let x=y(this,jt).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(x=parseInt(g)),J(f=o.clone(),Xr,Zs).call(f,e+1,t,x,i,l)}if(this.processFunc){Qo(y(i,hn));try{l=await this.processFunc(o,l)}catch(g){(g.throttle==null||typeof g.stall!="number")&&l.makeServerError("error in post-processing function",g).assertOk();let x=y(this,jt).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(x=g.stall),J(d=o.clone(),Xr,Zs).call(d,e+1,t,x,i,l)}}return l};let Kn=Da;var mo,wo,bo,Ft,Zi,ei;const El=class El{constructor(e,t,n,i,s){M(this,mo);M(this,wo);M(this,bo);M(this,Ft);M(this,Zi);M(this,ei);k(this,mo,e),k(this,wo,t),k(this,bo,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),k(this,Ft,i==null?null:new Uint8Array(i)),k(this,Zi,s||null),k(this,ei,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${y(this,Ft)?X(y(this,Ft)):"null"}>`}get statusCode(){return y(this,mo)}get statusMessage(){return y(this,wo)}get headers(){return Object.assign({},y(this,bo))}get body(){return y(this,Ft)==null?null:new Uint8Array(y(this,Ft))}get bodyText(){try{return y(this,Ft)==null?"":pa(y(this,Ft))}catch{K(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{K(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new El(599,n,this.headers,this.body,y(this,Zi)||void 0);return k(i,ei,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:P(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw oe(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return y(this,Ft)!=null}get request(){return y(this,Zi)}ok(){return y(this,ei).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=y(this,ei);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{y(this,Ft)&&(i=pa(y(this,Ft)))}catch{}K(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};mo=new WeakMap,wo=new WeakMap,bo=new WeakMap,Ft=new WeakMap,Zi=new WeakMap,ei=new WeakMap;let kr=El;function Ul(){return new Date().getTime()}function kp(r){return rn(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Tp(r){return new Promise(e=>setTimeout(e,r))}const Fp=BigInt(-1),Qt=BigInt(0),_i=BigInt(1),Ip=BigInt(5),Pi={};let Wi="0000";for(;Wi.length<80;)Wi+=Wi;function Or(r){let e=Wi;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function Ks(r,e,t){const n=BigInt(e.width);if(e.signed){const i=_i<<n-_i;K(t==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>Qt?r=da(Qr(r,n),n):r=-da(Qr(-r,n),n)}else{const i=_i<<n;K(t==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%i+i)%i&i-_i}return r}function cc(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{const s=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);P(s,"invalid fixed format","format",r),e=s[1]!=="u",t=parseInt(s[2]),n=parseInt(s[3])}}else if(r){const s=r,o=(a,c,l)=>s[a]==null?l:(P(typeof s[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),t=o("width","number",t),n=o("decimals","number",n)}P(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),P(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:i}}function Pp(r,e){let t="";r<Qt&&(t="-",r*=Fp);let n=r.toString();if(e===0)return t+n;for(;n.length<=e;)n=Wi+n;const i=n.length-e;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var Jt,Te,ut,Ce,Ur,In,f0,h0,d0,p0;const cr=class cr{constructor(e,t,n){M(this,Ce);L(this,"format");M(this,Jt);M(this,Te);M(this,ut);L(this,"_value");Po(e,Pi,"FixedNumber"),k(this,Te,t),k(this,Jt,n);const i=Pp(t,n.decimals);oe(this,{format:n.name,_value:i}),k(this,ut,Or(n.decimals))}get signed(){return y(this,Jt).signed}get width(){return y(this,Jt).width}get decimals(){return y(this,Jt).decimals}get value(){return y(this,Te)}addUnsafe(e){return J(this,Ce,f0).call(this,e)}add(e){return J(this,Ce,f0).call(this,e,"add")}subUnsafe(e){return J(this,Ce,h0).call(this,e)}sub(e){return J(this,Ce,h0).call(this,e,"sub")}mulUnsafe(e){return J(this,Ce,d0).call(this,e)}mul(e){return J(this,Ce,d0).call(this,e,"mul")}mulSignal(e){J(this,Ce,Ur).call(this,e);const t=y(this,Te)*y(e,Te);return K(t%y(this,ut)===Qt,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),J(this,Ce,In).call(this,t/y(this,ut),"mulSignal")}divUnsafe(e){return J(this,Ce,p0).call(this,e)}div(e){return J(this,Ce,p0).call(this,e,"div")}divSignal(e){K(y(e,Te)!==Qt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),J(this,Ce,Ur).call(this,e);const t=y(this,Te)*y(this,ut);return K(t%y(e,Te)===Qt,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),J(this,Ce,In).call(this,t/y(e,Te),"divSignal")}cmp(e){let t=this.value,n=e.value;const i=this.decimals-e.decimals;return i>0?n*=Or(i):i<0&&(t*=Or(-i)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=y(this,Te);return y(this,Te)<Qt&&(e-=y(this,ut)-_i),e=y(this,Te)/y(this,ut)*y(this,ut),J(this,Ce,In).call(this,e,"floor")}ceiling(){let e=y(this,Te);return y(this,Te)>Qt&&(e+=y(this,ut)-_i),e=y(this,Te)/y(this,ut)*y(this,ut),J(this,Ce,In).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=Ip*Or(t-1);let i=this.value+n;const s=Or(t);return i=i/s*s,Ks(i,y(this,Jt),"round"),new cr(Pi,i,y(this,Jt))}isZero(){return y(this,Te)===Qt}isNegative(){return y(this,Te)<Qt}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return cr.fromString(this.toString(),e)}static fromValue(e,t,n){const i=t==null?0:fe(t),s=cc(n);let o=ne(e,"value");const a=i-s.decimals;if(a>0){const c=Or(a);K(o%c===Qt,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Or(-a));return Ks(o,s,"fromValue"),new cr(Pi,o,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);P(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const i=cc(t);let s=n[2]||"0",o=n[3]||"";for(;o.length<i.decimals;)o+=Wi;K(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(n[1]+s+o);return Ks(a,i,"fromString"),new cr(Pi,a,i)}static fromBytes(e,t){let n=Ha(ue(e,"value"));const i=cc(t);return i.signed&&(n=da(n,i.width)),Ks(n,i,"fromBytes"),new cr(Pi,n,i)}};Jt=new WeakMap,Te=new WeakMap,ut=new WeakMap,Ce=new WeakSet,Ur=function(e){P(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},In=function(e,t){return e=Ks(e,y(this,Jt),t),new cr(Pi,e,y(this,Jt))},f0=function(e,t){return J(this,Ce,Ur).call(this,e),J(this,Ce,In).call(this,y(this,Te)+y(e,Te),t)},h0=function(e,t){return J(this,Ce,Ur).call(this,e),J(this,Ce,In).call(this,y(this,Te)-y(e,Te),t)},d0=function(e,t){return J(this,Ce,Ur).call(this,e),J(this,Ce,In).call(this,y(this,Te)*y(e,Te)/y(this,ut),t)},p0=function(e,t){return K(y(e,Te)!==Qt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),J(this,Ce,Ur).call(this,e),J(this,Ce,In).call(this,y(this,Te)*y(this,ut)/y(e,Te),t)};let ga=cr;function Dp(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function _l(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function Hl(r,e,t,n){const i=[];for(;t<e+1+n;){const s=zf(r,t);i.push(s.result),t+=s.consumed,K(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:i}}function zf(r,e){K(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=n=>{K(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){const n=r[e]-247;t(e+1+n);const i=_l(r,e+1,n);return t(e+1+n+i),Hl(r,e,e+1+n,n+i)}else if(r[e]>=192){const n=r[e]-192;return t(e+1+n),Hl(r,e,e+1,n)}else if(r[e]>=184){const n=r[e]-183;t(e+1+n);const i=_l(r,e+1,n);t(e+1+n+i);const s=X(r.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:s}}else if(r[e]>=128){const n=r[e]-128;t(e+1+n);const i=X(r.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:Dp(r[e])}}function Do(r){const e=ue(r,"data"),t=zf(e,0);return P(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function zl(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function Gf(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(Gf(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=zl(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(ue(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=zl(e.length);return t.unshift(183+t.length),t.concat(e)}const Gl="0123456789abcdef";function Dr(r){let e="0x";for(const t of Gf(r))e+=Gl[t>>4],e+=Gl[t&15];return e}function Rp(r,e){let t=18;return t=fe(e,"unit"),ga.fromValue(r,t,{decimals:t,width:512}).toString()}function Sp(r,e){P(typeof r=="string","value must be a string","value",r);let t=18;return t=fe(e,"unit"),ga.fromString(r,{decimals:t,width:512}).value}function Tr(r){return Rp(r,18)}function Np(r){return Sp(r,18)}const pt=32,g0=new Uint8Array(pt),Lp=["then"],$o={},Wf=new WeakMap;function Hr(r){return Wf.get(r)}function Wl(r,e){Wf.set(r,e)}function qs(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function y0(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof Ss?y0(Hr(n),n,t):n):r.reduce((n,i,s)=>{let o=e.getValue(i);return i in n||(t&&o instanceof Ss&&(o=y0(Hr(o),o,t)),n[i]=o),n},{})}var Yi;const Hi=class Hi extends Array{constructor(...t){const n=t[0];let i=t[1],s=(t[2]||[]).slice(),o=!0;n!==$o&&(i=t,s=[],o=!1);super(i.length);M(this,Yi);i.forEach((l,u)=>{this[u]=l});const a=s.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(Wl(this,Object.freeze(i.map((l,u)=>{const f=s[u];return f!=null&&a.get(f)===1?f:null}))),k(this,Yi,[]),y(this,Yi)==null&&y(this,Yi),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,f)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const g=fe(u,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const x=l[g];return x instanceof Error&&qs(`index ${g}`,x),x}if(Lp.indexOf(u)>=0)return Reflect.get(l,u,f);const d=l[u];if(d instanceof Function)return function(...g){return d.apply(this===f?l:this,g)};if(!(u in l))return l.getValue.apply(this===f?l:this,[u])}return Reflect.get(l,u,f)}});return Wl(c,Hr(this)),c}toArray(t){const n=[];return this.forEach((i,s)=>{i instanceof Error&&qs(`index ${s}`,i),t&&i instanceof Hi&&(i=i.toArray(t)),n.push(i)}),n}toObject(t){const n=Hr(this);return n.reduce((i,s,o)=>(K(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),y0(n,this,t)),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=Hr(this),s=[],o=[];for(let a=t;a<n;a++)s.push(this[a]),o.push(i[a]);return new Hi($o,s,o)}filter(t,n){const i=Hr(this),s=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&qs(`index ${a}`,c),t.call(n,c,a,this)&&(s.push(c),o.push(i[a]))}return new Hi($o,s,o)}map(t,n){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&qs(`index ${s}`,o),i.push(t.call(n,o,s,this))}return i}getValue(t){const n=Hr(this).indexOf(t);if(n===-1)return;const i=this[n];return i instanceof Error&&qs(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,n){return new Hi($o,t,n)}};Yi=new WeakMap;let Ss=Hi;function Vl(r){let e=Ve(r);return K(e.length<=pt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:pt,offset:e.length}),e.length!==pt&&(e=dt(Me([g0.slice(e.length%pt),e]))),e}class Jn{constructor(e,t,n,i){L(this,"name");L(this,"type");L(this,"localName");L(this,"dynamic");oe(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){P(!1,e,this.localName,t)}}var Ln,ti,Xi,na;class x0{constructor(){M(this,Xi);M(this,Ln);M(this,ti);k(this,Ln,[]),k(this,ti,0)}get data(){return Me(y(this,Ln))}get length(){return y(this,ti)}appendWriter(e){return J(this,Xi,na).call(this,dt(e.data))}writeBytes(e){let t=dt(e);const n=t.length%pt;return n&&(t=dt(Me([t,g0.slice(n)]))),J(this,Xi,na).call(this,t)}writeValue(e){return J(this,Xi,na).call(this,Vl(e))}writeUpdatableValue(){const e=y(this,Ln).length;return y(this,Ln).push(g0),k(this,ti,y(this,ti)+pt),t=>{y(this,Ln)[e]=Vl(t)}}}Ln=new WeakMap,ti=new WeakMap,Xi=new WeakSet,na=function(e){return y(this,Ln).push(e),k(this,ti,y(this,ti)+e.length),e.length};var xt,It,ni,ri,fr,Bi,w0,Vf;const vl=class vl{constructor(e,t,n){M(this,Bi);L(this,"allowLoose");M(this,xt);M(this,It);M(this,ni);M(this,ri);M(this,fr);oe(this,{allowLoose:!!t}),k(this,xt,dt(e)),k(this,ni,0),k(this,ri,null),k(this,fr,n??1024),k(this,It,0)}get data(){return X(y(this,xt))}get dataLength(){return y(this,xt).length}get consumed(){return y(this,It)}get bytes(){return new Uint8Array(y(this,xt))}subReader(e){const t=new vl(y(this,xt).slice(y(this,It)+e),this.allowLoose,y(this,fr));return k(t,ri,this),t}readBytes(e,t){let n=J(this,Bi,Vf).call(this,0,e,!!t);return J(this,Bi,w0).call(this,e),k(this,It,y(this,It)+n.length),n.slice(0,e)}readValue(){return Ha(this.readBytes(pt))}readIndex(){return hp(this.readBytes(pt))}};xt=new WeakMap,It=new WeakMap,ni=new WeakMap,ri=new WeakMap,fr=new WeakMap,Bi=new WeakSet,w0=function(e){var t;if(y(this,ri))return J(t=y(this,ri),Bi,w0).call(t,e);k(this,ni,y(this,ni)+e),K(y(this,fr)<1||y(this,ni)<=y(this,fr)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${y(this,fr)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:dt(y(this,xt)),offset:y(this,It),length:e,info:{bytesRead:y(this,ni),dataLength:this.dataLength}})},Vf=function(e,t,n){let i=Math.ceil(t/pt)*pt;return y(this,It)+i>y(this,xt).length&&(this.allowLoose&&n&&y(this,It)+t<=y(this,xt).length?i=t:K(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:dt(y(this,xt)),length:y(this,xt).length,offset:y(this,It)+i})),y(this,xt).slice(y(this,It),y(this,It)+i)};let m0=vl;function ya(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function Z0(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function Op(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ya(r.outputLen),ya(r.blockLen)}function Ns(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Qf(r,e){Z0(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const lc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $f=r=>r instanceof Uint8Array,Mp=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),uc=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),ln=(r,e)=>r<<32-e|r>>>e,Up=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Up)throw new Error("Non little-endian hardware is not supported");function _p(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function za(r){if(typeof r=="string"&&(r=_p(r)),!$f(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Hp(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!$f(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}class Y0{clone(){return this._cloneInto()}}function X0(r){const e=n=>r().update(za(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function zp(r=32){if(lc&&typeof lc.getRandomValues=="function")return lc.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class Kf extends Y0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Op(e);const n=za(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ns(this),this.iHash.update(e),this}digestInto(e){Ns(this),Z0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qf=(r,e,t)=>new Kf(r,e).update(t).digest();qf.create=(r,e)=>new Kf(r,e);function Gp(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}class jf extends Y0{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uc(this.buffer)}update(e){Ns(this);const{view:t,buffer:n,blockLen:i}=this;e=za(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=uc(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ns(this),Qf(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)t[f]=0;Gp(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=uc(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}}const Wp=(r,e,t)=>r&e^~r&t,Vp=(r,e,t)=>r&e^r&t^e&t,Qp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=new Uint32Array(64);class $p extends jf{constructor(){super(64,32,8,!1),this.A=rr[0]|0,this.B=rr[1]|0,this.C=rr[2]|0,this.D=rr[3]|0,this.E=rr[4]|0,this.F=rr[5]|0,this.G=rr[6]|0,this.H=rr[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)ir[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=ir[f-15],g=ir[f-2],x=ln(d,7)^ln(d,18)^d>>>3,m=ln(g,17)^ln(g,19)^g>>>10;ir[f]=m+ir[f-7]+x+ir[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=ln(a,6)^ln(a,11)^ln(a,25),g=u+d+Wp(a,c,l)+Qp[f]+ir[f]|0,m=(ln(n,2)^ln(n,13)^ln(n,22))+Vp(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Jf=X0(()=>new $p),Ko=BigInt(2**32-1),b0=BigInt(32);function Zf(r,e=!1){return e?{h:Number(r&Ko),l:Number(r>>b0&Ko)}:{h:Number(r>>b0&Ko)|0,l:Number(r&Ko)|0}}function Yf(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=Zf(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const Kp=(r,e)=>BigInt(r>>>0)<<b0|BigInt(e>>>0),qp=(r,e,t)=>r>>>t,jp=(r,e,t)=>r<<32-t|e>>>t,Jp=(r,e,t)=>r>>>t|e<<32-t,Zp=(r,e,t)=>r<<32-t|e>>>t,Yp=(r,e,t)=>r<<64-t|e>>>t-32,Xp=(r,e,t)=>r>>>t-32|e<<64-t,eg=(r,e)=>e,tg=(r,e)=>r,Xf=(r,e,t)=>r<<t|e>>>32-t,eh=(r,e,t)=>e<<t|r>>>32-t,th=(r,e,t)=>e<<t-32|r>>>64-t,nh=(r,e,t)=>r<<t-32|e>>>64-t;function ng(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const rg=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),ig=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,sg=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),og=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,ag=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),cg=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,de={fromBig:Zf,split:Yf,toBig:Kp,shrSH:qp,shrSL:jp,rotrSH:Jp,rotrSL:Zp,rotrBH:Yp,rotrBL:Xp,rotr32H:eg,rotr32L:tg,rotlSH:Xf,rotlSL:eh,rotlBH:th,rotlBL:nh,add:ng,add3L:rg,add3H:ig,add4L:sg,add4H:og,add5H:cg,add5L:ag},[lg,ug]=de.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),sr=new Uint32Array(80),or=new Uint32Array(80);class fg extends jf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:g,Gl:x,Hh:m,Hl:w}=this;return[e,t,n,i,s,o,a,c,l,u,f,d,g,x,m,w]}set(e,t,n,i,s,o,a,c,l,u,f,d,g,x,m,w){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=g|0,this.Gl=x|0,this.Hh=m|0,this.Hl=w|0}process(e,t){for(let E=0;E<16;E++,t+=4)sr[E]=e.getUint32(t),or[E]=e.getUint32(t+=4);for(let E=16;E<80;E++){const C=sr[E-15]|0,F=or[E-15]|0,T=de.rotrSH(C,F,1)^de.rotrSH(C,F,8)^de.shrSH(C,F,7),D=de.rotrSL(C,F,1)^de.rotrSL(C,F,8)^de.shrSL(C,F,7),S=sr[E-2]|0,W=or[E-2]|0,I=de.rotrSH(S,W,19)^de.rotrBH(S,W,61)^de.shrSH(S,W,6),N=de.rotrSL(S,W,19)^de.rotrBL(S,W,61)^de.shrSL(S,W,6),z=de.add4L(D,N,or[E-7],or[E-16]),G=de.add4H(z,T,I,sr[E-7],sr[E-16]);sr[E]=G|0,or[E]=z|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:g,Fl:x,Gh:m,Gl:w,Hh:v,Hl:A}=this;for(let E=0;E<80;E++){const C=de.rotrSH(f,d,14)^de.rotrSH(f,d,18)^de.rotrBH(f,d,41),F=de.rotrSL(f,d,14)^de.rotrSL(f,d,18)^de.rotrBL(f,d,41),T=f&g^~f&m,D=d&x^~d&w,S=de.add5L(A,F,D,ug[E],or[E]),W=de.add5H(S,v,C,T,lg[E],sr[E]),I=S|0,N=de.rotrSH(n,i,28)^de.rotrBH(n,i,34)^de.rotrBH(n,i,39),z=de.rotrSL(n,i,28)^de.rotrBL(n,i,34)^de.rotrBL(n,i,39),G=n&s^n&a^s&a,ee=i&o^i&c^o&c;v=m|0,A=w|0,m=g|0,w=x|0,g=f|0,x=d|0,{h:f,l:d}=de.add(l|0,u|0,W|0,I|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const _=de.add3L(I,z,ee);n=de.add3H(_,W,N,G),i=_|0}({h:n,l:i}=de.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=de.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=de.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=de.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=de.add(this.Eh|0,this.El|0,f|0,d|0),{h:g,l:x}=de.add(this.Fh|0,this.Fl|0,g|0,x|0),{h:m,l:w}=de.add(this.Gh|0,this.Gl|0,m|0,w|0),{h:v,l:A}=de.add(this.Hh|0,this.Hl|0,v|0,A|0),this.set(n,i,s,o,a,c,l,u,f,d,g,x,m,w,v,A)}roundClean(){sr.fill(0),or.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hg=X0(()=>new fg);function dg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Ql=dg();Ql.crypto||Ql.msCrypto;function pg(r){switch(r){case"sha256":return Jf.create();case"sha512":return hg.create()}P(!1,"invalid hashing algorithm name","algorithm",r)}const[rh,ih,sh]=[[],[],[]],gg=BigInt(0),js=BigInt(1),yg=BigInt(2),xg=BigInt(7),mg=BigInt(256),wg=BigInt(113);for(let r=0,e=js,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],rh.push(2*(5*n+t)),ih.push((r+1)*(r+2)/2%64);let i=gg;for(let s=0;s<7;s++)e=(e<<js^(e>>xg)*wg)%mg,e&yg&&(i^=js<<(js<<BigInt(s))-js);sh.push(i)}const[bg,Ag]=Yf(sh,!0),$l=(r,e,t)=>t>32?th(r,e,t):Xf(r,e,t),Kl=(r,e,t)=>t>32?nh(r,e,t):eh(r,e,t);function Eg(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],f=$l(l,u,1)^t[a],d=Kl(l,u,1)^t[a+1];for(let g=0;g<50;g+=10)r[o+g]^=f,r[o+g+1]^=d}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=ih[o],c=$l(i,s,a),l=Kl(i,s,a),u=rh[o];i=r[u],s=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=bg[n],r[1]^=Ag[n]}t.fill(0)}class el extends Y0{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ya(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Mp(this.state)}keccak(){Eg(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ns(this);const{blockLen:t,state:n}=this;e=za(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ns(this,!1),Z0(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ya(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Qf(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new el(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const vg=(r,e,t)=>X0(()=>new el(e,r,t)),Bg=vg(1,136,256/8);let oh=!1;const ah=function(r){return Bg(r)};let ch=ah;function He(r){const e=ue(r,"data");return X(ch(e))}He._=ah;He.lock=function(){oh=!0};He.register=function(r){if(oh)throw new TypeError("keccak256 is locked");ch=r};Object.freeze(He);const lh=function(r){return pg("sha256").update(r).digest()};let uh=lh,fh=!1;function Ws(r){const e=ue(r,"data");return X(uh(e))}Ws._=lh;Ws.lock=function(){fh=!0};Ws.register=function(r){if(fh)throw new Error("sha256 is locked");uh=r};Object.freeze(Ws);Object.freeze(Ws);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hh=BigInt(0),Ga=BigInt(1),Cg=BigInt(2),Wa=r=>r instanceof Uint8Array,kg=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ls(r){if(!Wa(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=kg[r[t]];return e}function dh(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function tl(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Os(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,s=r.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function yi(r){return tl(Ls(r))}function nl(r){if(!Wa(r))throw new Error("Uint8Array expected");return tl(Ls(Uint8Array.from(r).reverse()))}function Ms(r,e){return Os(r.toString(16).padStart(e*2,"0"))}function rl(r,e){return Ms(r,e).reverse()}function Tg(r){return Os(dh(r))}function Kt(r,e,t){let n;if(typeof e=="string")try{n=Os(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Wa(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function io(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!Wa(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function Fg(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ig(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Pg(r){let e;for(e=0;r>hh;r>>=Ga,e+=1);return e}function Dg(r,e){return r>>BigInt(e)&Ga}const Rg=(r,e,t)=>r|(t?Ga:hh)<<BigInt(e),il=r=>(Cg<<BigInt(r-1))-Ga,fc=r=>new Uint8Array(r),ql=r=>Uint8Array.from(r);function ph(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=fc(r),i=fc(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...f)=>t(i,n,...f),c=(f=fc())=>{i=a(ql([0]),f),n=a(),f.length!==0&&(i=a(ql([1]),f),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){n=a();const g=n.slice();d.push(g),f+=n.length}return io(...d)};return(f,d)=>{o(),c(f);let g;for(;!(g=d(l()));)c();return o(),g}}const Sg={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ro(r,e,t={}){const n=(i,s,o)=>{const a=Sg[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const Ng=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Dg,bitLen:Pg,bitMask:il,bitSet:Rg,bytesToHex:Ls,bytesToNumberBE:yi,bytesToNumberLE:nl,concatBytes:io,createHmacDrbg:ph,ensureBytes:Kt,equalBytes:Fg,hexToBytes:Os,hexToNumber:tl,numberToBytesBE:Ms,numberToBytesLE:rl,numberToHexUnpadded:dh,numberToVarBytesBE:Tg,utf8ToBytes:Ig,validateObject:Ro},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const je=BigInt(0),We=BigInt(1),zr=BigInt(2),Lg=BigInt(3),A0=BigInt(4),jl=BigInt(5),Jl=BigInt(8);BigInt(9);BigInt(16);function bt(r,e){const t=r%e;return t>=je?t:e+t}function Og(r,e,t){if(t<=je||e<je)throw new Error("Expected power/modulo > 0");if(t===We)return je;let n=We;for(;e>je;)e&We&&(n=n*r%t),r=r*r%t,e>>=We;return n}function St(r,e,t){let n=r;for(;e-- >je;)n*=n,n%=t;return n}function E0(r,e){if(r===je||e<=je)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=bt(r,e),n=e,i=je,s=We;for(;t!==je;){const a=n/t,c=n%t,l=i-s*a;n=t,t=c,i=s,s=l}if(n!==We)throw new Error("invert: does not exist");return bt(i,e)}function Mg(r){const e=(r-We)/zr;let t,n,i;for(t=r-We,n=0;t%zr===je;t/=zr,n++);for(i=zr;i<r&&Og(i,e,r)!==r-We;i++);if(n===1){const o=(r+We)/A0;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(t+We)/zr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,i),t),f=a.pow(c,s),d=a.pow(c,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let g=1;for(let m=a.sqr(d);g<l&&!a.eql(m,a.ONE);g++)m=a.sqr(m);const x=a.pow(u,We<<BigInt(l-g-1));u=a.sqr(x),f=a.mul(f,x),d=a.mul(d,u),l=g}return f}}function Ug(r){if(r%A0===Lg){const e=(r+We)/A0;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Jl===jl){const e=(r-jl)/Jl;return function(n,i){const s=n.mul(i,zr),o=n.pow(s,e),a=n.mul(i,o),c=n.mul(n.mul(a,zr),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return Mg(r)}const _g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hg(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=_g.reduce((n,i)=>(n[i]="function",n),e);return Ro(r,t)}function zg(r,e,t){if(t<je)throw new Error("Expected power > 0");if(t===je)return r.ONE;if(t===We)return e;let n=r.ONE,i=e;for(;t>je;)t&We&&(n=r.mul(n,i)),i=r.sqr(i),t>>=We;return n}function Gg(r,e){const t=new Array(e.length),n=e.reduce((s,o,a)=>r.is0(o)?s:(t[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,a)=>r.is0(o)?s:(t[a]=r.mul(s,t[a]),r.mul(s,o)),i),t}function gh(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Wg(r,e,t=!1,n={}){if(r<=je)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=gh(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ug(r),a=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:il(i),ZERO:je,ONE:We,create:c=>bt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return je<=c&&c<r},is0:c=>c===je,isOdd:c=>(c&We)===We,neg:c=>bt(-c,r),eql:(c,l)=>c===l,sqr:c=>bt(c*c,r),add:(c,l)=>bt(c+l,r),sub:(c,l)=>bt(c-l,r),mul:(c,l)=>bt(c*l,r),pow:(c,l)=>zg(a,c,l),div:(c,l)=>bt(c*E0(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>E0(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Gg(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?rl(c,s):Ms(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?nl(c):yi(c)}});return Object.freeze(a)}function yh(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function xh(r){const e=yh(r);return e+Math.ceil(e/2)}function Vg(r,e,t=!1){const n=r.length,i=yh(e),s=xh(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=t?yi(r):nl(r),a=bt(o,e-We)+We;return t?rl(a,i):Ms(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qg=BigInt(0),hc=BigInt(1);function $g(r,e){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=r.ZERO,a=i;for(;s>Qg;)s&hc&&(o=o.add(a)),a=a.double(),s>>=hc;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),c=[];let l=i,u=l;for(let f=0;f<o;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=n(i);let l=r.ZERO,u=r.BASE;const f=BigInt(2**i-1),d=2**i,g=BigInt(i);for(let x=0;x<a;x++){const m=x*c;let w=Number(o&f);o>>=g,w>c&&(w-=d,o+=hc);const v=m,A=m+Math.abs(w)-1,E=x%2!==0,C=w<0;w===0?u=u.add(t(E,s[v])):l=l.add(t(C,s[A]))}return{p:l,f:u}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function mh(r){return Hg(r.Fp),Ro(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gh(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kg(r){const e=mh(r);Ro(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:qg,hexToBytes:jg}=Ng,$r={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=$r;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:qg(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=$r,t=typeof r=="string"?jg(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=$r._parseInt(t.subarray(2)),{d:o,l:a}=$r._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,o=i.length/2,a=t(s),c=t(o);return`30${t(o+s+4)}02${c}${i}02${a}${n}`}},Vn=BigInt(0),Gt=BigInt(1);BigInt(2);const Zl=BigInt(3);BigInt(4);function Jg(r){const e=Kg(r),{Fp:t}=e,n=e.toBytes||((x,m,w)=>{const v=m.toAffine();return io(Uint8Array.from([4]),t.toBytes(v.x),t.toBytes(v.y))}),i=e.fromBytes||(x=>{const m=x.subarray(1),w=t.fromBytes(m.subarray(0,t.BYTES)),v=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:w,y:v}});function s(x){const{a:m,b:w}=e,v=t.sqr(x),A=t.mul(v,x);return t.add(t.add(A,t.mul(x,m)),w)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(x){return typeof x=="bigint"&&Vn<x&&x<e.n}function a(x){if(!o(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(x){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:v,n:A}=e;if(m&&typeof x!="bigint"){if(x instanceof Uint8Array&&(x=Ls(x)),typeof x!="string"||!m.includes(x.length))throw new Error("Invalid key");x=x.padStart(w*2,"0")}let E;try{E=typeof x=="bigint"?x:yi(Kt("private key",x,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof x}`)}return v&&(E=bt(E,A)),a(E),E}const l=new Map;function u(x){if(!(x instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,w,v){if(this.px=m,this.py=w,this.pz=v,m==null||!t.isValid(m))throw new Error("x required");if(w==null||!t.isValid(w))throw new Error("y required");if(v==null||!t.isValid(v))throw new Error("z required")}static fromAffine(m){const{x:w,y:v}=m||{};if(!m||!t.isValid(w)||!t.isValid(v))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const A=E=>t.eql(E,t.ZERO);return A(w)&&A(v)?f.ZERO:new f(w,v,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=t.invertBatch(m.map(v=>v.pz));return m.map((v,A)=>v.toAffine(w[A])).map(f.fromAffine)}static fromHex(m){const w=f.fromAffine(i(Kt("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return f.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=this.toAffine();if(!t.isValid(m)||!t.isValid(w))throw new Error("bad point: x or y not FE");const v=t.sqr(w),A=s(m);if(!t.eql(v,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:w,py:v,pz:A}=this,{px:E,py:C,pz:F}=m,T=t.eql(t.mul(w,F),t.mul(E,A)),D=t.eql(t.mul(v,F),t.mul(C,A));return T&&D}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,v=t.mul(w,Zl),{px:A,py:E,pz:C}=this;let F=t.ZERO,T=t.ZERO,D=t.ZERO,S=t.mul(A,A),W=t.mul(E,E),I=t.mul(C,C),N=t.mul(A,E);return N=t.add(N,N),D=t.mul(A,C),D=t.add(D,D),F=t.mul(m,D),T=t.mul(v,I),T=t.add(F,T),F=t.sub(W,T),T=t.add(W,T),T=t.mul(F,T),F=t.mul(N,F),D=t.mul(v,D),I=t.mul(m,I),N=t.sub(S,I),N=t.mul(m,N),N=t.add(N,D),D=t.add(S,S),S=t.add(D,S),S=t.add(S,I),S=t.mul(S,N),T=t.add(T,S),I=t.mul(E,C),I=t.add(I,I),S=t.mul(I,N),F=t.sub(F,S),D=t.mul(I,W),D=t.add(D,D),D=t.add(D,D),new f(F,T,D)}add(m){u(m);const{px:w,py:v,pz:A}=this,{px:E,py:C,pz:F}=m;let T=t.ZERO,D=t.ZERO,S=t.ZERO;const W=e.a,I=t.mul(e.b,Zl);let N=t.mul(w,E),z=t.mul(v,C),G=t.mul(A,F),ee=t.add(w,v),_=t.add(E,C);ee=t.mul(ee,_),_=t.add(N,z),ee=t.sub(ee,_),_=t.add(w,A);let j=t.add(E,F);return _=t.mul(_,j),j=t.add(N,G),_=t.sub(_,j),j=t.add(v,A),T=t.add(C,F),j=t.mul(j,T),T=t.add(z,G),j=t.sub(j,T),S=t.mul(W,_),T=t.mul(I,G),S=t.add(T,S),T=t.sub(z,S),S=t.add(z,S),D=t.mul(T,S),z=t.add(N,N),z=t.add(z,N),G=t.mul(W,G),_=t.mul(I,_),z=t.add(z,G),G=t.sub(N,G),G=t.mul(W,G),_=t.add(_,G),N=t.mul(z,_),D=t.add(D,N),N=t.mul(j,_),T=t.mul(ee,T),T=t.sub(T,N),N=t.mul(ee,z),S=t.mul(j,S),S=t.add(S,N),new f(T,D,S)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return g.wNAFCached(this,l,m,w=>{const v=t.invertBatch(w.map(A=>A.pz));return w.map((A,E)=>A.toAffine(v[E])).map(f.fromAffine)})}multiplyUnsafe(m){const w=f.ZERO;if(m===Vn)return w;if(a(m),m===Gt)return this;const{endo:v}=e;if(!v)return g.unsafeLadder(this,m);let{k1neg:A,k1:E,k2neg:C,k2:F}=v.splitScalar(m),T=w,D=w,S=this;for(;E>Vn||F>Vn;)E&Gt&&(T=T.add(S)),F&Gt&&(D=D.add(S)),S=S.double(),E>>=Gt,F>>=Gt;return A&&(T=T.negate()),C&&(D=D.negate()),D=new f(t.mul(D.px,v.beta),D.py,D.pz),T.add(D)}multiply(m){a(m);let w=m,v,A;const{endo:E}=e;if(E){const{k1neg:C,k1:F,k2neg:T,k2:D}=E.splitScalar(w);let{p:S,f:W}=this.wNAF(F),{p:I,f:N}=this.wNAF(D);S=g.constTimeNegate(C,S),I=g.constTimeNegate(T,I),I=new f(t.mul(I.px,E.beta),I.py,I.pz),v=S.add(I),A=W.add(N)}else{const{p:C,f:F}=this.wNAF(w);v=C,A=F}return f.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(m,w,v){const A=f.BASE,E=(F,T)=>T===Vn||T===Gt||!F.equals(A)?F.multiplyUnsafe(T):F.multiply(T),C=E(this,w).add(E(m,v));return C.is0()?void 0:C}toAffine(m){const{px:w,py:v,pz:A}=this,E=this.is0();m==null&&(m=E?t.ONE:t.inv(A));const C=t.mul(w,m),F=t.mul(v,m),T=t.mul(A,m);if(E)return{x:t.ZERO,y:t.ZERO};if(!t.eql(T,t.ONE))throw new Error("invZ was invalid");return{x:C,y:F}}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===Gt)return!0;if(w)return w(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===Gt?this:w?w(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),n(f,this,m)}toHex(m=!0){return Ls(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,g=$g(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function Zg(r){const e=mh(r);return Ro(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Yg(r){const e=Zg(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(_){return Vn<_&&_<t.ORDER}function a(_){return bt(_,n)}function c(_){return E0(_,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=Jg({...e,toBytes(_,j,re){const ie=j.toAffine(),se=t.toBytes(ie.x),ae=io;return re?ae(Uint8Array.from([j.hasEvenY()?2:3]),se):ae(Uint8Array.from([4]),se,t.toBytes(ie.y))},fromBytes(_){const j=_.length,re=_[0],ie=_.subarray(1);if(j===i&&(re===2||re===3)){const se=yi(ie);if(!o(se))throw new Error("Point is not on curve");const ae=f(se);let U=t.sqrt(ae);const H=(U&Gt)===Gt;return(re&1)===1!==H&&(U=t.neg(U)),{x:se,y:U}}else if(j===s&&re===4){const se=t.fromBytes(ie.subarray(0,t.BYTES)),ae=t.fromBytes(ie.subarray(t.BYTES,2*t.BYTES));return{x:se,y:ae}}else throw new Error(`Point of length ${j} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=_=>Ls(Ms(_,e.nByteLength));function x(_){const j=n>>Gt;return _>j}function m(_){return x(_)?a(-_):_}const w=(_,j,re)=>yi(_.slice(j,re));class v{constructor(j,re,ie){this.r=j,this.s=re,this.recovery=ie,this.assertValidity()}static fromCompact(j){const re=e.nByteLength;return j=Kt("compactSignature",j,re*2),new v(w(j,0,re),w(j,re,2*re))}static fromDER(j){const{r:re,s:ie}=$r.toSig(Kt("DER",j));return new v(re,ie)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(j){return new v(this.r,this.s,j)}recoverPublicKey(j){const{r:re,s:ie,recovery:se}=this,ae=D(Kt("msgHash",j));if(se==null||![0,1,2,3].includes(se))throw new Error("recovery id invalid");const U=se===2||se===3?re+e.n:re;if(U>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=se&1?"03":"02",q=l.fromHex(H+g(U)),$=c(U),be=a(-ae*$),ge=a(ie*$),Pe=l.BASE.multiplyAndAddUnsafe(q,be,ge);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Os(this.toDERHex())}toDERHex(){return $r.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Os(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const A={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=xh(e.n);return Vg(e.randomBytes(_),e.n)},precompute(_=8,j=l.BASE){return j._setWindowSize(_),j.multiply(BigInt(3)),j}};function E(_,j=!0){return l.fromPrivateKey(_).toRawBytes(j)}function C(_){const j=_ instanceof Uint8Array,re=typeof _=="string",ie=(j||re)&&_.length;return j?ie===i||ie===s:re?ie===2*i||ie===2*s:_ instanceof l}function F(_,j,re=!0){if(C(_))throw new Error("first arg must be private key");if(!C(j))throw new Error("second arg must be public key");return l.fromHex(j).multiply(u(_)).toRawBytes(re)}const T=e.bits2int||function(_){const j=yi(_),re=_.length*8-e.nBitLength;return re>0?j>>BigInt(re):j},D=e.bits2int_modN||function(_){return a(T(_))},S=il(e.nBitLength);function W(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(Vn<=_&&_<S))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ms(_,e.nByteLength)}function I(_,j,re=N){if(["recovered","canonical"].some(Ze=>Ze in re))throw new Error("sign() legacy options not supported");const{hash:ie,randomBytes:se}=e;let{lowS:ae,prehash:U,extraEntropy:H}=re;ae==null&&(ae=!0),_=Kt("msgHash",_),U&&(_=Kt("prehashed msgHash",ie(_)));const q=D(_),$=u(j),be=[W($),W(q)];if(H!=null){const Ze=H===!0?se(t.BYTES):H;be.push(Kt("extraEntropy",Ze))}const ge=io(...be),Pe=q;function ce(Ze){const nt=T(Ze);if(!d(nt))return;const Yn=c(nt),lt=l.BASE.multiply(nt).toAffine(),ve=a(lt.x);if(ve===Vn)return;const De=a(Yn*a(Pe+ve*$));if(De===Vn)return;let Tn=(lt.x===ve?0:2)|Number(lt.y&Gt),cn=De;return ae&&x(De)&&(cn=m(De),Tn^=1),new v(ve,cn,Tn)}return{seed:ge,k2sig:ce}}const N={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function G(_,j,re=N){const{seed:ie,k2sig:se}=I(_,j,re),ae=e;return ph(ae.hash.outputLen,ae.nByteLength,ae.hmac)(ie,se)}l.BASE._setWindowSize(8);function ee(_,j,re,ie=z){var lt;const se=_;if(j=Kt("msgHash",j),re=Kt("publicKey",re),"strict"in ie)throw new Error("options.strict was renamed to lowS");const{lowS:ae,prehash:U}=ie;let H,q;try{if(typeof se=="string"||se instanceof Uint8Array)try{H=v.fromDER(se)}catch(ve){if(!(ve instanceof $r.Err))throw ve;H=v.fromCompact(se)}else if(typeof se=="object"&&typeof se.r=="bigint"&&typeof se.s=="bigint"){const{r:ve,s:De}=se;H=new v(ve,De)}else throw new Error("PARSE");q=l.fromHex(re)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ae&&H.hasHighS())return!1;U&&(j=e.hash(j));const{r:$,s:be}=H,ge=D(j),Pe=c(be),ce=a(ge*Pe),Ze=a($*Pe),nt=(lt=l.BASE.multiplyAndAddUnsafe(q,ce,Ze))==null?void 0:lt.toAffine();return nt?a(nt.x)===$:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:F,sign:G,verify:ee,ProjectivePoint:l,Signature:v,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xg(r){return{hash:r,hmac:(e,...t)=>qf(r,e,Hp(...t)),randomBytes:zp}}function ey(r,e){const t=n=>Yg({...r,...Xg(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ty=BigInt(1),v0=BigInt(2),Xl=(r,e)=>(r+e/v0)/e;function ny(r){const e=wh,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,f=St(u,t,e)*u%e,d=St(f,t,e)*u%e,g=St(d,v0,e)*l%e,x=St(g,i,e)*g%e,m=St(x,s,e)*x%e,w=St(m,a,e)*m%e,v=St(w,c,e)*w%e,A=St(v,a,e)*m%e,E=St(A,t,e)*u%e,C=St(E,o,e)*x%e,F=St(C,n,e)*l%e,T=St(F,v0,e);if(!B0.eql(B0.sqr(T),r))throw new Error("Cannot find square root");return T}const B0=Wg(wh,void 0,void 0,{sqrt:ny}),ar=ey({a:BigInt(0),b:BigInt(7),Fp:B0,n:Yl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Yl,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ty*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=Xl(s*r,e),c=Xl(-n*r,e);let l=bt(r-a*t-c*i,e),u=bt(-a*n-c*s,e);const f=l>o,d=u>o;if(f&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},Jf);BigInt(0);ar.ProjectivePoint;const wi="0x0000000000000000000000000000000000000000",so="0x0000000000000000000000000000000000000000000000000000000000000000",eu=BigInt(0),tu=BigInt(1),nu=BigInt(2),ru=BigInt(27),iu=BigInt(28),qo=BigInt(35),Di={};function su(r){return Wt(Ve(r),32)}var es,dn,ts,ii;const $t=class $t{constructor(e,t,n,i){M(this,es);M(this,dn);M(this,ts);M(this,ii);Po(e,Di,"Signature"),k(this,es,t),k(this,dn,n),k(this,ts,i),k(this,ii,null)}get r(){return y(this,es)}set r(e){P(gi(e)===32,"invalid r","value",e),k(this,es,X(e))}get s(){return P(parseInt(y(this,dn).substring(0,3))<8,"non-canonical s; use ._s","s",y(this,dn)),y(this,dn)}set s(e){P(gi(e)===32,"invalid s","value",e),k(this,dn,X(e))}get _s(){return y(this,dn)}isValid(){return parseInt(y(this,dn).substring(0,3))<8}get v(){return y(this,ts)}set v(e){const t=fe(e,"value");P(t===27||t===28,"invalid v","v",e),k(this,ts,t)}get networkV(){return y(this,ii)}get legacyChainId(){const e=this.networkV;return e==null?null:$t.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ue(this.s);return this.yParity&&(e[0]|=128),X(e)}get compactSerialized(){return Me([this.r,this.yParityAndS])}get serialized(){return Me([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new $t(Di,this.r,this._s,this.v);return this.networkV&&k(e,ii,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=ne(e,"v");return t==ru||t==iu?eu:(P(t>=qo,"invalid EIP-155 v","v",e),(t-qo)/nu)}static getChainIdV(e,t){return ne(e)*nu+BigInt(35+t-27)}static getNormalizedV(e){const t=ne(e);return t===eu||t===ru?27:t===tu||t===iu?28:(P(t>=qo,"invalid v","v",e),t&tu?27:28)}static from(e){function t(l,u){P(l,u,"signature",e)}if(e==null)return new $t(Di,so,so,27);if(typeof e=="string"){const l=ue(e,"signature");if(l.length===64){const u=X(l.slice(0,32)),f=l.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new $t(Di,u,X(f),d)}if(l.length===65){const u=X(l.slice(0,32)),f=X(l.slice(32,64)),d=$t.getNormalizedV(l[64]);return new $t(Di,u,f,d)}t(!1,"invalid raw signature length")}if(e instanceof $t)return e.clone();const n=e.r;t(n!=null,"missing r");const i=su(n),s=function(l,u){if(l!=null)return su(l);if(u!=null){t(Se(u,32),"invalid yParityAndS");const f=ue(u);return f[0]&=127,X(f)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,f){if(l!=null){const d=ne(l);return{networkV:d>=qo?d:void 0,v:$t.getNormalizedV(d)}}if(u!=null)return t(Se(u,32),"invalid yParityAndS"),{v:ue(u)[0]&128?28:27};if(f!=null){switch(fe(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new $t(Di,i,s,a);return o&&k(c,ii,o),t(e.yParity==null||fe(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};es=new WeakMap,dn=new WeakMap,ts=new WeakMap,ii=new WeakMap;let Et=$t;var On;const Gr=class Gr{constructor(e){M(this,On);P(gi(e)===32,"invalid private key","privateKey","[REDACTED]"),k(this,On,X(e))}get privateKey(){return y(this,On)}get publicKey(){return Gr.computePublicKey(y(this,On))}get compressedPublicKey(){return Gr.computePublicKey(y(this,On),!0)}sign(e){P(gi(e)===32,"invalid digest length","digest",e);const t=ar.sign(dt(e),dt(y(this,On)),{lowS:!0});return Et.from({r:Pr(t.r,32),s:Pr(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Gr.computePublicKey(e);return X(ar.getSharedSecret(dt(y(this,On)),ue(t),!1))}static computePublicKey(e,t){let n=ue(e,"key");if(n.length===32){const s=ar.getPublicKey(n,!!t);return X(s)}if(n.length===64){const s=new Uint8Array(65);s[0]=4,s.set(n,1),n=s}const i=ar.ProjectivePoint.fromHex(n);return X(i.toRawBytes(t))}static recoverPublicKey(e,t){P(gi(e)===32,"invalid digest length","digest",e);const n=Et.from(t);let i=ar.Signature.fromCompact(dt(Me([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const s=i.recoverPublicKey(dt(e));return P(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,n){const i=ar.ProjectivePoint.fromHex(Gr.computePublicKey(e).substring(2)),s=ar.ProjectivePoint.fromHex(Gr.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!n)}};On=new WeakMap;let oo=Gr;const ry=BigInt(0),iy=BigInt(36);function ou(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=ue(He(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const sl={};for(let r=0;r<10;r++)sl[String(r)]=String(r);for(let r=0;r<26;r++)sl[String.fromCharCode(65+r)]=String(10+r);const au=15;function sy(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>sl[n]).join("");for(;e.length>=au;){let n=e.substring(0,au);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const oy=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function ay(r){r=r.toLowerCase();let e=ry;for(let t=0;t<r.length;t++)e=e*iy+oy[r[t]];return e}function Ee(r){if(P(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=ou(r);return P(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){P(r.substring(2,4)===sy(r),"bad icap checksum","address",r);let e=ay(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return ou("0x"+e)}P(!1,"invalid address","address",r)}function cy(r){const e=Ee(r.from);let n=ne(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Ee(ze(He(Dr([e,n])),12))}function bh(r){return r&&typeof r.getAddress=="function"}async function dc(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(K(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),P(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Ee(t)}function gt(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Ee(r):(K(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),dc(r,e.resolveName(r)));if(bh(r))return dc(r,r.getAddress());if(r&&typeof r.then=="function")return dc(r,r);P(!1,"unsupported addressable value","target",r)}const Pn={};function te(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new ct(Pn,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Ae(r,e){return new ct(Pn,`bytes${e||""}`,r,{size:e})}const cu=Symbol.for("_ethers_typed");var si;const Dn=class Dn{constructor(e,t,n,i){L(this,"type");L(this,"value");M(this,si);L(this,"_typedSymbol");i==null&&(i=null),Po(Pn,e,"Typed"),oe(this,{_typedSymbol:cu,type:t,value:n}),k(this,si,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return y(this,si)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return y(this,si)===!0?-1:y(this,si)===!1?this.value.length:null}static from(e,t){return new Dn(Pn,e,t)}static uint8(e){return te(e,8)}static uint16(e){return te(e,16)}static uint24(e){return te(e,24)}static uint32(e){return te(e,32)}static uint40(e){return te(e,40)}static uint48(e){return te(e,48)}static uint56(e){return te(e,56)}static uint64(e){return te(e,64)}static uint72(e){return te(e,72)}static uint80(e){return te(e,80)}static uint88(e){return te(e,88)}static uint96(e){return te(e,96)}static uint104(e){return te(e,104)}static uint112(e){return te(e,112)}static uint120(e){return te(e,120)}static uint128(e){return te(e,128)}static uint136(e){return te(e,136)}static uint144(e){return te(e,144)}static uint152(e){return te(e,152)}static uint160(e){return te(e,160)}static uint168(e){return te(e,168)}static uint176(e){return te(e,176)}static uint184(e){return te(e,184)}static uint192(e){return te(e,192)}static uint200(e){return te(e,200)}static uint208(e){return te(e,208)}static uint216(e){return te(e,216)}static uint224(e){return te(e,224)}static uint232(e){return te(e,232)}static uint240(e){return te(e,240)}static uint248(e){return te(e,248)}static uint256(e){return te(e,256)}static uint(e){return te(e,256)}static int8(e){return te(e,-8)}static int16(e){return te(e,-16)}static int24(e){return te(e,-24)}static int32(e){return te(e,-32)}static int40(e){return te(e,-40)}static int48(e){return te(e,-48)}static int56(e){return te(e,-56)}static int64(e){return te(e,-64)}static int72(e){return te(e,-72)}static int80(e){return te(e,-80)}static int88(e){return te(e,-88)}static int96(e){return te(e,-96)}static int104(e){return te(e,-104)}static int112(e){return te(e,-112)}static int120(e){return te(e,-120)}static int128(e){return te(e,-128)}static int136(e){return te(e,-136)}static int144(e){return te(e,-144)}static int152(e){return te(e,-152)}static int160(e){return te(e,-160)}static int168(e){return te(e,-168)}static int176(e){return te(e,-176)}static int184(e){return te(e,-184)}static int192(e){return te(e,-192)}static int200(e){return te(e,-200)}static int208(e){return te(e,-208)}static int216(e){return te(e,-216)}static int224(e){return te(e,-224)}static int232(e){return te(e,-232)}static int240(e){return te(e,-240)}static int248(e){return te(e,-248)}static int256(e){return te(e,-256)}static int(e){return te(e,-256)}static bytes1(e){return Ae(e,1)}static bytes2(e){return Ae(e,2)}static bytes3(e){return Ae(e,3)}static bytes4(e){return Ae(e,4)}static bytes5(e){return Ae(e,5)}static bytes6(e){return Ae(e,6)}static bytes7(e){return Ae(e,7)}static bytes8(e){return Ae(e,8)}static bytes9(e){return Ae(e,9)}static bytes10(e){return Ae(e,10)}static bytes11(e){return Ae(e,11)}static bytes12(e){return Ae(e,12)}static bytes13(e){return Ae(e,13)}static bytes14(e){return Ae(e,14)}static bytes15(e){return Ae(e,15)}static bytes16(e){return Ae(e,16)}static bytes17(e){return Ae(e,17)}static bytes18(e){return Ae(e,18)}static bytes19(e){return Ae(e,19)}static bytes20(e){return Ae(e,20)}static bytes21(e){return Ae(e,21)}static bytes22(e){return Ae(e,22)}static bytes23(e){return Ae(e,23)}static bytes24(e){return Ae(e,24)}static bytes25(e){return Ae(e,25)}static bytes26(e){return Ae(e,26)}static bytes27(e){return Ae(e,27)}static bytes28(e){return Ae(e,28)}static bytes29(e){return Ae(e,29)}static bytes30(e){return Ae(e,30)}static bytes31(e){return Ae(e,31)}static bytes32(e){return Ae(e,32)}static address(e){return new Dn(Pn,"address",e)}static bool(e){return new Dn(Pn,"bool",!!e)}static bytes(e){return new Dn(Pn,"bytes",e)}static string(e){return new Dn(Pn,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Dn(Pn,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===cu}static dereference(e,t){if(Dn.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};si=new WeakMap;let ct=Dn;class ly extends Jn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=ct.dereference(t,"string");try{n=Ee(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return Ee(Pr(e.readValue(),20))}}class uy extends Jn{constructor(t){super(t.name,t.type,"_",t.dynamic);L(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function Ah(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{const u=l.localName;return K(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),K(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else P(!1,"invalid tuple value","tuple",t);P(e.length===n.length,"types/value length mismatch","tuple",t);let i=new x0,s=new x0,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let f=s.length;c.encode(s,u);let d=i.writeUpdatableValue();o.push(g=>{d(g+f)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function Eh(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(et(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(et(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),n.push(s.localName||null)}),Ss.fromItems(t,n)}class fy extends Jn{constructor(t,n,i){const s=t.type+"["+(n>=0?n:"")+"]",o=n===-1||t.dynamic;super("array",s,i,o);L(this,"coder");L(this,"length");oe(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(t);return n}encode(t,n){const i=ct.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),Df(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return Ah(t,o,i)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),K(n*pt<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*pt,length:t.dataLength}));let i=[];for(let s=0;s<n;s++)i.push(new uy(this.coder));return Eh(t,i)}}class hy extends Jn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=ct.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class vh extends Jn{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=dt(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class dy extends vh{constructor(e){super("bytes",e)}decode(e){return X(super.decode(e))}}class py extends Jn{constructor(t,n){let i="bytes"+String(t);super(i,i,n,!1);L(this,"size");oe(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let i=dt(ct.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(i)}decode(t){return X(t.readBytes(this.size))}}const gy=new Uint8Array([]);class yy extends Jn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(gy)}decode(e){return e.readBytes(0),null}}const xy=BigInt(0),my=BigInt(1),wy=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class by extends Jn{constructor(t,n,i){const s=(n?"int":"uint")+t*8;super(s,s,i,!1);L(this,"size");L(this,"signed");oe(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let i=ne(ct.dereference(n,this.type)),s=Qr(wy,pt*8);if(this.signed){let o=Qr(s,this.size*8-1);(i>o||i<-(o+my))&&this._throwError("value out-of-bounds",n),i=J0(i,8*pt)}else(i<xy||i>Qr(s,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(i)}decode(t){let n=Qr(t.readValue(),this.size*8);return this.signed&&(n=da(n,this.size*8)),n}}class Ay extends vh{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,rn(ct.dereference(t,"string")))}decode(e){return pa(super.decode(e))}}class jo extends Jn{constructor(t,n){let i=!1;const s=[];t.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,n,i);L(this,"coders");oe(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const n=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[s]))}),Object.freeze(t)}encode(t,n){const i=ct.dereference(n,"tuple");return Ah(t,this.coders,i)}decode(t){return Eh(t,this.coders)}}function pc(r,e){return{address:Ee(r),storageKeys:e.map((t,n)=>(P(Se(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function Ci(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(P(t.length===2,"invalid slot set",`value[${n}]`,t),pc(t[0],t[1])):(P(t!=null&&typeof t=="object","invalid address-slot set","value",r),pc(t.address,t.storageKeys)));P(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return pc(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function Bh(r){return{address:Ee(r.address),nonce:ne(r.nonce!=null?r.nonce:0),chainId:ne(r.chainId!=null?r.chainId:0),signature:Et.from(r.signature)}}function Ey(r){let e;return typeof r=="string"?e=oo.computePublicKey(r,!1):e=r.publicKey,Ee(He("0x"+e.substring(4)).substring(26))}function vy(r,e){return Ey(oo.recoverPublicKey(r,e))}const qe=BigInt(0),By=BigInt(2),Cy=BigInt(27),ky=BigInt(28),Ty=BigInt(35),Fy=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),gc=4096*32;function Iy(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return ue(r.blobToKzgCommitment(X(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return ue(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return ue(r.blobToKZGCommitment(X(n)));P(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,i)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return ue(r.computeBlobProof(X(n),X(i)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return ue(r.computeBlobKZGProof(X(n),X(i)));P(!1,"unsupported KZG library","kzg",r)}}}function lu(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=Ws(e).substring(4),"0x"+t}function Vs(r){return r==="0x"?null:Ee(r)}function Va(r,e){try{return Ci(r)}catch(t){P(!1,t.message,e,r)}}function Py(r,e){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const t=[];for(let n=0;n<r.length;n++){const i=r[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);t.push({address:Vs(i[1]),nonce:Ie(i[2],"nonce"),chainId:Ie(i[0],"chainId"),signature:Et.from({yParity:ki(i[3],"yParity"),r:Wt(i[4],32),s:Wt(i[5],32)})})}return t}catch(t){P(!1,t.message,e,r)}}function ki(r,e){return r==="0x"?0:fe(r,e)}function Ie(r,e){if(r==="0x")return qe;const t=ne(r,e);return P(t<=Fy,"value exceeds uint size",e,t),t}function me(r,e){const t=ne(r,"value"),n=Ve(t);return P(n.length<=32,"value too large",`tx.${e}`,t),n}function Qa(r){return Ci(r).map(e=>[e.address,e.storageKeys])}function Dy(r){return r.map(e=>[me(e.chainId,"chainId"),e.address,me(e.nonce,"nonce"),me(e.signature.yParity,"yParity"),Ve(e.signature.r),Ve(e.signature.s)])}function Ry(r,e){P(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)P(Se(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function Sy(r){const e=Do(r);P(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:ki(e[0],"nonce"),gasPrice:Ie(e[1],"gasPrice"),gasLimit:Ie(e[2],"gasLimit"),to:Vs(e[3]),value:Ie(e[4],"value"),data:X(e[5]),chainId:qe};if(e.length===6)return t;const n=Ie(e[6],"v"),i=Ie(e[7],"r"),s=Ie(e[8],"s");if(i===qe&&s===qe)t.chainId=n;else{let o=(n-Ty)/By;o<qe&&(o=qe),t.chainId=o,P(o!==qe||n===Cy||n===ky,"non-canonical legacy v","v",e[6]),t.signature=Et.from({r:Wt(e[7],32),s:Wt(e[8],32),v:n})}return t}function Ny(r,e){const t=[me(r.nonce,"nonce"),me(r.gasPrice||0,"gasPrice"),me(r.gasLimit,"gasLimit"),r.to||"0x",me(r.value,"value"),r.data];let n=qe;if(r.chainId!=qe)n=ne(r.chainId,"tx.chainId"),P(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const s=r.signature.legacyChainId;s!=null&&(n=s)}if(!e)return n!==qe&&(t.push(Ve(n)),t.push("0x"),t.push("0x")),Dr(t);let i=BigInt(27+e.yParity);return n!==qe?i=Et.getChainIdV(n,e.v):BigInt(e.v)!==i&&P(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Ve(i)),t.push(Ve(e.r)),t.push(Ve(e.s)),Dr(t)}function $a(r,e){let t;try{if(t=ki(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{P(!1,"invalid yParity","yParity",e[0])}const n=Wt(e[1],32),i=Wt(e[2],32),s=Et.from({r:n,s:i,yParity:t});r.signature=s}function Ly(r){const e=Do(ue(r).slice(1));P(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",X(r));const t={type:2,chainId:Ie(e[0],"chainId"),nonce:ki(e[1],"nonce"),maxPriorityFeePerGas:Ie(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ie(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ie(e[4],"gasLimit"),to:Vs(e[5]),value:Ie(e[6],"value"),data:X(e[7]),accessList:Va(e[8],"accessList")};return e.length===9||$a(t,e.slice(9)),t}function Oy(r,e){const t=[me(r.chainId,"chainId"),me(r.nonce,"nonce"),me(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),me(r.maxFeePerGas||0,"maxFeePerGas"),me(r.gasLimit,"gasLimit"),r.to||"0x",me(r.value,"value"),r.data,Qa(r.accessList||[])];return e&&(t.push(me(e.yParity,"yParity")),t.push(Ve(e.r)),t.push(Ve(e.s))),Me(["0x02",Dr(t)])}function My(r){const e=Do(ue(r).slice(1));P(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",X(r));const t={type:1,chainId:Ie(e[0],"chainId"),nonce:ki(e[1],"nonce"),gasPrice:Ie(e[2],"gasPrice"),gasLimit:Ie(e[3],"gasLimit"),to:Vs(e[4]),value:Ie(e[5],"value"),data:X(e[6]),accessList:Va(e[7],"accessList")};return e.length===8||$a(t,e.slice(8)),t}function Uy(r,e){const t=[me(r.chainId,"chainId"),me(r.nonce,"nonce"),me(r.gasPrice||0,"gasPrice"),me(r.gasLimit,"gasLimit"),r.to||"0x",me(r.value,"value"),r.data,Qa(r.accessList||[])];return e&&(t.push(me(e.yParity,"recoveryParam")),t.push(Ve(e.r)),t.push(Ve(e.s))),Me(["0x01",Dr(t)])}function _y(r){let e=Do(ue(r).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],o=e[2],a=e[3];P(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),P(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),P(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),P(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),P(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:s[c],commitment:o[c],proof:a[c]});e=e[0]}P(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",X(r));const i={type:3,chainId:Ie(e[0],"chainId"),nonce:ki(e[1],"nonce"),maxPriorityFeePerGas:Ie(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ie(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ie(e[4],"gasLimit"),to:Vs(e[5]),value:Ie(e[6],"value"),data:X(e[7]),accessList:Va(e[8],"accessList"),maxFeePerBlobGas:Ie(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),P(i.to!=null,`invalid address for transaction type: ${t}`,"data",r),P(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let s=0;s<i.blobVersionedHashes.length;s++)P(Se(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",r);return e.length===11||$a(i,e.slice(11)),i}function Hy(r,e,t){const n=[me(r.chainId,"chainId"),me(r.nonce,"nonce"),me(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),me(r.maxFeePerGas||0,"maxFeePerGas"),me(r.gasLimit,"gasLimit"),r.to||wi,me(r.value,"value"),r.data,Qa(r.accessList||[]),me(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Ry(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(me(e.yParity,"yParity")),n.push(Ve(e.r)),n.push(Ve(e.s)),t)?Me(["0x03",Dr([n,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):Me(["0x03",Dr(n)])}function zy(r){const e=Do(ue(r).slice(1));P(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",X(r));const t={type:4,chainId:Ie(e[0],"chainId"),nonce:ki(e[1],"nonce"),maxPriorityFeePerGas:Ie(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ie(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ie(e[4],"gasLimit"),to:Vs(e[5]),value:Ie(e[6],"value"),data:X(e[7]),accessList:Va(e[8],"accessList"),authorizationList:Py(e[9],"authorizationList")};return e.length===10||$a(t,e.slice(10)),t}function Gy(r,e){const t=[me(r.chainId,"chainId"),me(r.nonce,"nonce"),me(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),me(r.maxFeePerGas||0,"maxFeePerGas"),me(r.gasLimit,"gasLimit"),r.to||"0x",me(r.value,"value"),r.data,Qa(r.accessList||[]),Dy(r.authorizationList||[])];return e&&(t.push(me(e.yParity,"yParity")),t.push(Ve(e.r)),t.push(Ve(e.s))),Me(["0x04",Dr(t)])}var Zt,ns,rs,is,ss,os,as,cs,ls,us,fs,hs,oi,hr,pn,dr,ds,ps,ra;const un=class un{constructor(){M(this,ps);M(this,Zt);M(this,ns);M(this,rs);M(this,is);M(this,ss);M(this,os);M(this,as);M(this,cs);M(this,ls);M(this,us);M(this,fs);M(this,hs);M(this,oi);M(this,hr);M(this,pn);M(this,dr);M(this,ds);k(this,Zt,null),k(this,ns,null),k(this,is,0),k(this,ss,qe),k(this,os,null),k(this,as,null),k(this,cs,null),k(this,rs,"0x"),k(this,ls,qe),k(this,us,qe),k(this,fs,null),k(this,hs,null),k(this,oi,null),k(this,hr,null),k(this,pn,null),k(this,dr,null),k(this,ds,null)}get type(){return y(this,Zt)}set type(e){switch(e){case null:k(this,Zt,null);break;case 0:case"legacy":k(this,Zt,0);break;case 1:case"berlin":case"eip-2930":k(this,Zt,1);break;case 2:case"london":case"eip-1559":k(this,Zt,2);break;case 3:case"cancun":case"eip-4844":k(this,Zt,3);break;case 4:case"pectra":case"eip-7702":k(this,Zt,4);break;default:P(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=y(this,ns);return e==null&&this.type===3?wi:e}set to(e){k(this,ns,e==null?null:Ee(e))}get nonce(){return y(this,is)}set nonce(e){k(this,is,fe(e,"value"))}get gasLimit(){return y(this,ss)}set gasLimit(e){k(this,ss,ne(e))}get gasPrice(){const e=y(this,os);return e==null&&(this.type===0||this.type===1)?qe:e}set gasPrice(e){k(this,os,e==null?null:ne(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=y(this,as);return e??(this.type===2||this.type===3?qe:null)}set maxPriorityFeePerGas(e){k(this,as,e==null?null:ne(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=y(this,cs);return e??(this.type===2||this.type===3?qe:null)}set maxFeePerGas(e){k(this,cs,e==null?null:ne(e,"maxFeePerGas"))}get data(){return y(this,rs)}set data(e){k(this,rs,X(e))}get value(){return y(this,ls)}set value(e){k(this,ls,ne(e,"value"))}get chainId(){return y(this,us)}set chainId(e){k(this,us,ne(e))}get signature(){return y(this,fs)||null}set signature(e){k(this,fs,e==null?null:Et.from(e))}get accessList(){const e=y(this,hs)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){k(this,hs,e==null?null:Ci(e))}get authorizationList(){const e=y(this,ds)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){k(this,ds,e==null?null:e.map(t=>Bh(t)))}get maxFeePerBlobGas(){const e=y(this,oi);return e==null&&this.type===3?qe:e}set maxFeePerBlobGas(e){k(this,oi,e==null?null:ne(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=y(this,hr);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){P(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)P(Se(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}k(this,hr,e)}get blobs(){return y(this,dr)==null?null:y(this,dr).map(e=>Object.assign({},e))}set blobs(e){if(e==null){k(this,dr,null);return}const t=[],n=[];for(let i=0;i<e.length;i++){const s=e[i];if(j0(s)){K(y(this,pn),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ue(s);if(P(o.length<=gc,"blob is too large",`blobs[${i}]`,s),o.length!==gc){const l=new Uint8Array(gc);l.set(o),o=l}const a=y(this,pn).blobToKzgCommitment(o),c=X(y(this,pn).computeBlobKzgProof(o,a));t.push({data:X(o),commitment:X(a),proof:c}),n.push(lu(1,a))}else{const o=X(s.commitment);t.push({data:X(s.data),commitment:o,proof:X(s.proof)}),n.push(lu(1,o))}}k(this,dr,t),k(this,hr,n)}get kzg(){return y(this,pn)}set kzg(e){e==null?k(this,pn,null):k(this,pn,Iy(e))}get hash(){return this.signature==null?null:He(J(this,ps,ra).call(this,!0,!1))}get unsignedHash(){return He(this.unsignedSerialized)}get from(){return this.signature==null?null:vy(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:oo.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return J(this,ps,ra).call(this,!0,!0)}get unsignedSerialized(){return J(this,ps,ra).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=y(this,oi)!=null||y(this,hr);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&K(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),K(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),K(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return un.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new un;if(typeof e=="string"){const n=ue(e);if(n[0]>=127)return un.from(Sy(n));switch(n[0]){case 1:return un.from(My(n));case 2:return un.from(Ly(n));case 3:return un.from(_y(n));case 4:return un.from(zy(n))}K(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new un;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Et.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(P(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),P(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(P(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),P(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Zt=new WeakMap,ns=new WeakMap,rs=new WeakMap,is=new WeakMap,ss=new WeakMap,os=new WeakMap,as=new WeakMap,cs=new WeakMap,ls=new WeakMap,us=new WeakMap,fs=new WeakMap,hs=new WeakMap,oi=new WeakMap,hr=new WeakMap,pn=new WeakMap,dr=new WeakMap,ds=new WeakMap,ps=new WeakSet,ra=function(e,t){K(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return Ny(this,n);case 1:return Uy(this,n);case 2:return Oy(this,n);case 3:return Hy(this,n,t?this.blobs:null);case 4:return Gy(this,n)}K(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let xa=un;function bi(r){return He(rn(r))}var Wy="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";const uu=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),fu=4;function Vy(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let F=1;F<n;F++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[e++],c=8),l>>--c&1}const f=31,d=2**f,g=d>>>1,x=g>>1,m=d-1;let w=0;for(let F=0;F<f;F++)w=w<<1|u();let v=[],A=0,E=d;for(;;){let F=Math.floor(((w-A+1)*i-1)/E),T=0,D=n;for(;D-T>1;){let I=T+D>>>1;F<s[I]?D=I:T=I}if(T==0)break;v.push(T);let S=A+Math.floor(E*s[T]/i),W=A+Math.floor(E*s[T+1]/i)-1;for(;!((S^W)&g);)w=w<<1&m|u(),S=S<<1&m,W=W<<1&m|1;for(;S&~W&x;)w=w&g|w<<1&m>>>1|u(),S=S<<1^g,W=(W^g)<<1|g|1;A=S,E=1+W-S}let C=n-4;return v.map(F=>{switch(F-C){case 3:return C+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return C+256+(r[a++]<<8|r[a++]);case 1:return C+r[a++];default:return F-1}})}function Qy(r){let e=0;return()=>r[e++]}function Ch(r){return Qy(Vy($y(r)))}function $y(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=r.length,n=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,a=0;i<t;i++)a=a<<6|e[r.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}function Ky(r){return r&1?~r>>1:r>>1}function qy(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=Ky(e());return t}function ao(r,e=0){let t=[];for(;;){let n=r(),i=r();if(!i)break;e+=n;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function kh(r){return co(()=>{let e=ao(r);if(e.length)return e})}function Th(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(jy(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(Jy(t,r))}return e.flat()}function co(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function Fh(r,e,t){let n=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)qy(r,t).forEach((s,o)=>n[o].push(s));return n}function jy(r,e){let t=1+e(),n=e(),i=co(e);return Fh(i.length,1+r,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,f)=>{let d=f*n;return[c+f*t,l.map(g=>g+d)]})})}function Jy(r,e){let t=1+e();return Fh(t,1+r,e).map(i=>[i[0],i.slice(1)])}function Zy(r){let e=[],t=ao(r);return i(n([]),[]),e;function n(s){let o=r(),a=co(()=>{let c=ao(r).map(l=>t[l]);if(c.length)return n(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function Yy(r){return r.toString(16).toUpperCase().padStart(2,"0")}function Ih(r){return`{${Yy(r)}}`}function Xy(r){let e=[];for(let t=0,n=r.length;t<n;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Us(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function ex(r,e){let t=r.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=r[i]-e[i];return n}var tx="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";const lo=44032,ma=4352,wa=4449,ba=4519,Ph=19,Dh=21,_s=28,Aa=Dh*_s,nx=Ph*Aa,rx=lo+nx,ix=ma+Ph,sx=wa+Dh,ox=ba+_s;function Ys(r){return r>>24&255}function Rh(r){return r&16777215}let C0,hu,k0,ia;function ax(){let r=Ch(tx);C0=new Map(kh(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),hu=new Set(ao(r)),k0=new Map,ia=new Map;for(let[e,t]of Th(r)){if(!hu.has(e)&&t.length==2){let[n,i]=t,s=ia.get(n);s||(s=new Map,ia.set(n,s)),s.set(i,e)}k0.set(e,t.reverse())}}function Sh(r){return r>=lo&&r<rx}function cx(r,e){if(r>=ma&&r<ix&&e>=wa&&e<sx)return lo+(r-ma)*Aa+(e-wa)*_s;if(Sh(r)&&e>ba&&e<ox&&(r-lo)%_s==0)return r+(e-ba);{let t=ia.get(r);return t&&(t=t.get(e),t)?t:-1}}function Nh(r){C0||ax();let e=[],t=[],n=!1;function i(s){let o=C0.get(s);o&&(n=!0,s|=o),e.push(s)}for(let s of r)for(;;){if(s<128)e.push(s);else if(Sh(s)){let o=s-lo,a=o/Aa|0,c=o%Aa/_s|0,l=o%_s;i(ma+a),i(wa+c),l>0&&i(ba+l)}else{let o=k0.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(n&&e.length>1){let s=Ys(e[0]);for(let o=1;o<e.length;o++){let a=Ys(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=Ys(e[--c]),s<=a))break}s=Ys(e[o])}}return e}function lx(r){let e=[],t=[],n=-1,i=0;for(let s of r){let o=Ys(s),a=Rh(s);if(n==-1)o==0?n=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(n,...t),t.length=0,n=a):t.push(a),i=o;else{let c=cx(n,a);c>=0?n=c:i==0&&o==0?(e.push(n),n=a):(t.push(a),i=o)}}return n>=0&&e.push(n,...t),e}function Lh(r){return Nh(r).map(Rh)}function ux(r){return lx(Nh(r))}const du=45,Oh=".",Mh=65039,Uh=1,Ea=r=>Array.from(r);function uo(r,e){return r.P.has(e)||r.Q.has(e)}class fx extends Array{get is_emoji(){return!0}}let T0,_h,Kr,F0,Hh,Vi,yc,Ni,_r,pu,I0;function ol(){if(T0)return;let r=Ch(Wy);const e=()=>ao(r),t=()=>new Set(e()),n=(u,f)=>f.forEach(d=>u.add(d));T0=new Map(Th(r)),_h=t(),Kr=e(),F0=new Set(e().map(u=>Kr[u])),Kr=new Set(Kr),Hh=t(),t();let i=kh(r),s=r();const o=()=>{let u=new Set;return e().forEach(f=>n(u,i[f])),n(u,e()),u};Vi=co(u=>{let f=co(r).map(d=>d+96);if(f.length){let d=u>=s;f[0]-=32,f=Us(f),d&&(f=`Restricted[${f}]`);let g=o(),x=o(),m=!r();return{N:f,P:g,Q:x,M:m,R:d}}}),yc=t(),Ni=new Map;let a=e().concat(Ea(yc)).sort((u,f)=>u-f);a.forEach((u,f)=>{let d=r(),g=a[f]=d?a[f-d]:{V:[],M:new Map};g.V.push(u),yc.has(u)||Ni.set(u,g)});for(let{V:u,M:f}of new Set(Ni.values())){let d=[];for(let x of u){let m=Vi.filter(v=>uo(v,x)),w=d.find(({G:v})=>m.some(A=>v.has(A)));w||(w={G:new Set,V:[]},d.push(w)),w.V.push(x),n(w.G,m)}let g=d.flatMap(x=>Ea(x.G));for(let{G:x,V:m}of d){let w=new Set(g.filter(v=>!x.has(v)));for(let v of m)f.set(v,w)}}_r=new Set;let c=new Set;const l=u=>_r.has(u)?c.add(u):_r.add(u);for(let u of Vi){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of _r)!Ni.has(u)&&!c.has(u)&&Ni.set(u,Uh);n(_r,Lh(_r)),pu=Zy(r).map(u=>fx.from(u)).sort(ex),I0=new Map;for(let u of pu){let f=[I0];for(let d of u){let g=f.map(x=>{let m=x.get(d);return m||(m=new Map,x.set(d,m)),m});d===Mh?f.push(...g):f=g}for(let d of f)d.V=u}}function al(r){return(zh(r)?"":`${cl(Ka([r]))} `)+Ih(r)}function cl(r){return`"${r}"‎`}function hx(r){if(r.length>=4&&r[2]==du&&r[3]==du)throw new Error(`invalid label extension: "${Us(r.slice(0,4))}"`)}function dx(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function px(r){let e=r[0],t=uu.get(e);if(t)throw no(`leading ${t}`);let n=r.length,i=-1;for(let s=1;s<n;s++){e=r[s];let o=uu.get(e);if(o){if(i==s)throw no(`${t} + ${o}`);i=s+1,t=o}}if(i==n)throw no(`trailing ${t}`)}function Ka(r,e=1/0,t=Ih){let n=[];gx(r[0])&&n.push("◌"),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let i=0,s=r.length;for(let o=0;o<s;o++){let a=r[o];zh(a)&&(n.push(Us(r.slice(i,o))),n.push(t(a)),i=o+1)}return n.push(Us(r.slice(i,s))),n.join("")}function gx(r){return ol(),Kr.has(r)}function zh(r){return ol(),Hh.has(r)}function yx(r){return bx(xx(r,ux,vx))}function xx(r,e,t){if(!r)return[];ol();let n=0;return r.split(Oh).map(i=>{let s=Xy(i),o={input:s,offset:n};n+=s.length+1;try{let a=o.tokens=Ex(s,e,t),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(dx(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))hx(u),l="ASCII";else{let d=a.flatMap(g=>g.is_emoji?[]:g);if(!d.length)l="Emoji";else{if(Kr.has(u[0]))throw no("leading combining mark");for(let m=1;m<c;m++){let w=a[m];if(!w.is_emoji&&Kr.has(w[0]))throw no(`emoji + combining mark: "${Us(a[m-1])} + ${Ka([w[0]])}"`)}px(u);let g=Ea(new Set(d)),[x]=wx(g);Ax(x,d),mx(x,g),l=x.N}}o.type=l}catch(a){o.error=a}return o})}function mx(r,e){let t,n=[];for(let i of e){let s=Ni.get(i);if(s===Uh)return;if(s){let o=s.M.get(i);if(t=t?t.filter(a=>o.has(a)):Ea(o),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(s=>uo(i,s)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function wx(r){let e=Vi;for(let t of r){let n=e.filter(i=>uo(i,t));if(!n.length)throw Vi.some(i=>uo(i,t))?Wh(e[0],t):Gh(t);if(e=n,n.length==1)break}return e}function bx(r){return r.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${cl(Ka(e,63))}: ${i}`)}return Us(n)}).join(Oh)}function Gh(r){return new Error(`disallowed character: ${al(r)}`)}function Wh(r,e){let t=al(e),n=Vi.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function no(r){return new Error(`illegal placement: ${r}`)}function Ax(r,e){for(let t of e)if(!uo(r,t))throw Wh(r,t);if(r.M){let t=Lh(e);for(let n=1,i=t.length;n<i;n++)if(F0.has(t[n])){let s=n+1;for(let o;s<i&&F0.has(o=t[s]);s++)for(let a=n;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${al(o)}`);if(s-n>fu)throw new Error(`excessive non-spacing marks: ${cl(Ka(t.slice(n-1,s)))} (${s-n}/${fu})`);n=s}}}function Ex(r,e,t){let n=[],i=[];for(r=r.slice().reverse();r.length;){let s=Bx(r);if(s)i.length&&(n.push(e(i)),i=[]),n.push(t(s));else{let o=r.pop();if(_r.has(o))i.push(o);else{let a=T0.get(o);if(a)i.push(...a);else if(!_h.has(o))throw Gh(o)}}}return i.length&&n.push(e(i)),n}function vx(r){return r.filter(e=>e!=Mh)}function Bx(r,e){let t=I0,n,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:s}=t;s&&(n=s,r.length=i)}return n}const Vh=new Uint8Array(32);Vh.fill(0);function gu(r){return P(r.length!==0,"invalid ENS name; empty component","comp",r),r}function Qh(r){const e=rn(Cx(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(gu(e.slice(n,i))),n=i+1);return P(n<e.length,"invalid ENS name; empty component","name",r),t.push(gu(e.slice(n))),t}function Cx(r){try{if(r.length===0)throw new Error("empty label");return yx(r)}catch(e){P(!1,`invalid ENS name (${e.message})`,"name",r)}}function P0(r){P(typeof r=="string","invalid ENS name; not a string","name",r),P(r.length,"invalid ENS name (empty label)","name",r);let e=Vh;const t=Qh(r);for(;t.length;)e=He(Me([e,He(t.pop())]));return X(e)}function kx(r,e){const t=e;return P(t<=255,"DNS encoded label cannot exceed 255","length",t),X(Me(Qh(r).map(n=>{P(n.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);const i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}const Tx=new RegExp("^bytes([0-9]+)$"),Fx=new RegExp("^(u?int)([0-9]*)$"),Ix=new RegExp("^(.*)\\[([0-9]*)\\]$");function $h(r,e,t){switch(r){case"address":return ue(t?Wt(e,32):Ee(e));case"string":return rn(e);case"bytes":return ue(e);case"bool":return e=e?"0x01":"0x00",ue(t?Wt(e,32):e)}let n=r.match(Fx);if(n){let i=n[1]==="int",s=parseInt(n[2]||"256");return P((!n[2]||n[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",r),t&&(s=256),i&&(e=J0(e,s)),ue(Wt(Ve(e),s/8))}if(n=r.match(Tx),n){const i=parseInt(n[1]);return P(String(i)===n[1]&&i!==0&&i<=32,"invalid bytes type","type",r),P(gi(e)===i,`invalid value for ${r}`,"value",e),t?ue(Nf(e,32)):e}if(n=r.match(Ix),n&&Array.isArray(e)){const i=n[1],s=parseInt(n[2]||String(e.length));P(s===e.length,`invalid array length for ${r}`,"value",e);const o=[];return e.forEach(function(a){o.push($h(i,a,!0))}),ue(Me(o))}P(!1,"invalid type","type",r)}function Px(r,e){P(r.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const t=[];return r.forEach(function(n,i){t.push($h(n,e[i]))}),X(Me(t))}function Kh(r,e){return He(Px(r,e))}const qh=new Uint8Array(32);qh.fill(0);const Dx=BigInt(-1),jh=BigInt(0),Jh=BigInt(1),Rx=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Sx(r){const e=ue(r),t=e.length%32;return t?Me([e,qh.slice(t)]):X(e)}const Nx=Pr(Jh,32),Lx=Pr(jh,32),yu={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},xc=["name","version","chainId","verifyingContract","salt"];function xu(r){return function(e){return P(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const Ox={name:xu("name"),version:xu("version"),chainId:function(r){const e=ne(r,"domain.chainId");return P(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):en(e)},verifyingContract:function(r){try{return Ee(r).toLowerCase()}catch{}P(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=ue(r,"domain.salt");return P(e.length===32,'invalid domain value "salt"',"domain.salt",r),X(e)}};function mc(r){{const e=r.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",n=parseInt(e[2]);P(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",r);const i=Qr(Rx,t?n-1:n),s=t?(i+Jh)*Dx:jh;return function(o){const a=ne(o,"value");return P(a>=s&&a<=i,`value out-of-bounds for ${r}`,"value",a),Pr(t?J0(a,256):a,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return P(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){const i=ue(n);return P(i.length===t,`invalid length for ${r}`,"value",n),Sx(n)}}}switch(r){case"address":return function(e){return Wt(Ee(e),32)};case"bool":return function(e){return e?Nx:Lx};case"bytes":return function(e){return He(e)};case"string":return function(e){return bi(e)}}return null}function mu(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function Jo(r){const e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var Ao,Mn,gs,Ra,Zh;const Nt=class Nt{constructor(e){M(this,Ra);L(this,"primaryType");M(this,Ao);M(this,Mn);M(this,gs);k(this,Mn,new Map),k(this,gs,new Map);const t=new Map,n=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:d}=Jo(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(d||"")}}),t.set(c,new Set),n.set(c,[]),i.set(c,new Set)}),k(this,Ao,JSON.stringify(s));for(const c in s){const l=new Set;for(const u of s[c]){P(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const f=Jo(u.type).base;P(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!mc(f)&&(P(n.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),n.get(f).push(c),t.get(c).add(f))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);P(o.length!==0,"missing primary type","types",e),P(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),oe(this,{primaryType:o[0]});function a(c,l){P(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of t.get(c))if(n.has(u)){a(u,l);for(const f of l)i.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of i){const u=Array.from(l);u.sort(),y(this,Mn).set(c,mu(c,s[c])+u.map(f=>mu(f,s[f])).join(""))}}get types(){return JSON.parse(y(this,Ao))}getEncoder(e){let t=y(this,gs).get(e);return t||(t=J(this,Ra,Zh).call(this,e),y(this,gs).set(e,t)),t}encodeType(e){const t=y(this,Mn).get(e);return P(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return He(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(mc(e))return n(e,t);const i=Jo(e).array;if(i)return P(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,n));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],n),o),{});P(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Nt(e)}static getPrimaryType(e){return Nt.from(e).primaryType}static hashStruct(e,t,n){return Nt.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const i=yu[n];P(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>xc.indexOf(n.name)-xc.indexOf(i.name)),Nt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return Me(["0x1901",Nt.hashDomain(e),Nt.from(t).hash(n)])}static hash(e,t,n){return He(Nt.encode(e,t,n))}static async resolveNames(e,t,n,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!Se(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Nt.from(t);o.visit(n,(a,c)=>(a==="address"&&!Se(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}}static getPayload(e,t,n){Nt.hashDomain(e);const i={},s=[];xc.forEach(c=>{const l=e[c];l!=null&&(i[c]=Ox[c](l),s.push({name:c,type:yu[c]}))});const o=Nt.from(t);t=o.types;const a=Object.assign({},t);return P(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return X(ue(l));if(c.match(/^u?int/))return ne(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return P(typeof l=="string","invalid string","value",l),l}P(!1,"unsupported type","type",c)})}}};Ao=new WeakMap,Mn=new WeakMap,gs=new WeakMap,Ra=new WeakSet,Zh=function(e){{const i=mc(e);if(i)return i}const t=Jo(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{P(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(s);return y(this,Mn).has(i)&&(a=a.map(He)),He(Me(a))}}const n=this.types[e];if(n){const i=bi(y(this,Mn).get(e));return s=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return y(this,Mn).has(c)?He(l):l});return o.unshift(i),Me(o)}}P(!1,`unknown type: ${e}`,"type",e)};let va=Nt;function yt(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const Mx="external public payable override",Ux=yt(Mx.split(" ")),Yh="constant external internal payable private public pure view override",_x=yt(Yh.split(" ")),Xh="constructor error event fallback function receive struct",ed=yt(Xh.split(" ")),td="calldata memory storage payable indexed",Hx=yt(td.split(" ")),zx="tuple returns",Gx=[Xh,td,zx,Yh].join(" "),Wx=yt(Gx.split(" ")),Vx={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Qx=new RegExp("^(\\s*)"),$x=new RegExp("^([0-9]+)"),Kx=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),nd=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),rd=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ye,Yt,Eo,D0;const Sa=class Sa{constructor(e){M(this,Eo);M(this,Ye);M(this,Yt);k(this,Ye,0),k(this,Yt,e.slice())}get offset(){return y(this,Ye)}get length(){return y(this,Yt).length-y(this,Ye)}clone(){return new Sa(y(this,Yt))}reset(){k(this,Ye,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=J(this,Eo,D0).call(this,y(this,Ye)+1,e.match+1);return k(this,Ye,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;y(this,Ye)<e.match-1;){const n=this.peek().linkNext;t.push(J(this,Eo,D0).call(this,y(this,Ye)+1,n)),k(this,Ye,n)}return k(this,Ye,e.match+1),t}peek(){if(y(this,Ye)>=y(this,Yt).length)throw new Error("out-of-bounds");return y(this,Yt)[y(this,Ye)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return $s(this,Ye)._++,e}toString(){const e=[];for(let t=y(this,Ye);t<y(this,Yt).length;t++){const n=y(this,Yt)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};Ye=new WeakMap,Yt=new WeakMap,Eo=new WeakSet,D0=function(e=0,t=0){return new Sa(y(this,Yt).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let sn=Sa;function Sr(r){const e=[],t=o=>{const a=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let n=[],i=[],s=0;for(;s<r.length;){let o=r.substring(s),a=o.match(Qx);a&&(s+=a[1].length,o=r.substring(s));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=Vx[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=fe(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(Kx),a){if(c.text=a[1],s+=c.text.length,Wx.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(rd)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match($x),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new sn(e.map(o=>Object.freeze(o)))}function wu(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function qa(r,e){if(e.peekKeyword(ed)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function qn(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function id(r){let e=qn(r,_x);return wu(e,yt("constant payable nonpayable".split(" "))),wu(e,yt("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function $n(r,e){return r.popParams().map(t=>tt.from(t,e))}function sd(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return ne(r.pop().text);throw new Error("invalid gas")}return null}function Ai(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const qx=new RegExp(/^(.*)\[([0-9]*)\]$/);function bu(r){const e=r.match(rd);if(P(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);P(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);P(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const _e={},vt=Symbol.for("_ethers_internal"),Au="_ParamTypeInternal",Eu="_ErrorInternal",vu="_EventInternal",Bu="_ConstructorInternal",Cu="_FallbackInternal",ku="_FunctionInternal",Tu="_StructInternal";var ys,sa;const Lt=class Lt{constructor(e,t,n,i,s,o,a,c){M(this,ys);L(this,"name");L(this,"type");L(this,"baseType");L(this,"indexed");L(this,"components");L(this,"arrayLength");L(this,"arrayChildren");if(Po(e,_e,"ParamType"),Object.defineProperty(this,vt,{value:Au}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");oe(this,{name:t,type:n,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],i=[e];return J(this,ys,sa).call(this,n,e,t,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(Lt.isParamType(e))return e;if(typeof e=="string")try{return Lt.from(Sr(e),t)}catch{P(!1,"invalid param type","obj",e)}else if(e instanceof sn){let a="",c="",l=null;qn(e,yt(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(m=>Lt.from(m)),a=`tuple(${l.map(m=>m.format()).join(",")})`):(a=bu(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const m=e.pop();u=new Lt(_e,"",a,c,null,l,f,u),f=m.value,a+=m.text,c="array",l=null}let d=null;if(qn(e,Hx).has("indexed")){if(!t)throw new Error("");d=!0}const x=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Lt(_e,x,a,c,d,l,f,u)}const n=e.name;P(!n||typeof n=="string"&&n.match(nd),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(P(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(qx);if(o){const a=parseInt(o[2]||"-1"),c=Lt.from({type:o[1],components:e.components});return new Lt(_e,n||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(l=>Lt.from(l)):null;return new Lt(_e,n||"",s,"tuple",i,a,null,null)}return s=bu(e.type),new Lt(_e,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[vt]===Au}};ys=new WeakSet,sa=function(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{var u;J(u=o,ys,sa).call(u,e,c,n,f=>{a[l]=f})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;J(u=o[l],ys,sa).call(u,e,c,n,f=>{a[l]=f})}),i(a);return}const s=n(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let tt=Lt;class Ei{constructor(e,t,n){L(this,"type");L(this,"inputs");Po(e,_e,"Fragment"),n=Object.freeze(n.slice()),oe(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{Ei.from(JSON.parse(e))}catch{}return Ei.from(Sr(e))}if(e instanceof sn)switch(e.peekKeyword(ed)){case"constructor":return Qn.from(e);case"error":return At.from(e);case"event":return An.from(e);case"fallback":case"receive":return Rn.from(e);case"function":return En.from(e);case"struct":return xi.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Qn.from(e);case"error":return At.from(e);case"event":return An.from(e);case"fallback":case"receive":return Rn.from(e);case"function":return En.from(e);case"struct":return xi.from(e)}K(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}P(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Qn.isFragment(e)}static isError(e){return At.isFragment(e)}static isEvent(e){return An.isFragment(e)}static isFunction(e){return En.isFragment(e)}static isStruct(e){return xi.isFragment(e)}}class ja extends Ei{constructor(t,n,i,s){super(t,n,s);L(this,"name");P(typeof i=="string"&&i.match(nd),"invalid identifier","name",i),s=Object.freeze(s.slice()),oe(this,{name:i})}}function fo(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class At extends ja{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,vt,{value:Eu})}get selector(){return bi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+fo(e,this.inputs)),t.join(" ")}static from(e){if(At.isFragment(e))return e;if(typeof e=="string")return At.from(Sr(e));if(e instanceof sn){const t=qa("error",e),n=$n(e);return Ai(e),new At(_e,t,n)}return new At(_e,e.name,e.inputs?e.inputs.map(tt.from):[])}static isFragment(e){return e&&e[vt]===Eu}}class An extends ja{constructor(t,n,i,s){super(t,"event",n,i);L(this,"anonymous");Object.defineProperty(this,vt,{value:vu}),oe(this,{anonymous:s})}get topicHash(){return bi(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+fo(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(s=>tt.from(s)),new An(_e,t,n,!1).topicHash}static from(t){if(An.isFragment(t))return t;if(typeof t=="string")try{return An.from(Sr(t))}catch{P(!1,"invalid event fragment","obj",t)}else if(t instanceof sn){const n=qa("event",t),i=$n(t,!0),s=!!qn(t,yt(["anonymous"])).has("anonymous");return Ai(t),new An(_e,n,i,s)}return new An(_e,t.name,t.inputs?t.inputs.map(n=>tt.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[vt]===vu}}class Qn extends Ei{constructor(t,n,i,s,o){super(t,n,i);L(this,"payable");L(this,"gas");Object.defineProperty(this,vt,{value:Bu}),oe(this,{payable:s,gas:o})}format(t){if(K(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[`constructor${fo(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(Qn.isFragment(t))return t;if(typeof t=="string")try{return Qn.from(Sr(t))}catch{P(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof sn){qn(t,yt(["constructor"]));const n=$n(t),i=!!qn(t,Ux).has("payable"),s=sd(t);return Ai(t),new Qn(_e,"constructor",n,i,s)}return new Qn(_e,"constructor",t.inputs?t.inputs.map(tt.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[vt]===Bu}}class Rn extends Ei{constructor(t,n,i){super(t,"fallback",n);L(this,"payable");Object.defineProperty(this,vt,{value:Cu}),oe(this,{payable:i})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(t){if(Rn.isFragment(t))return t;if(typeof t=="string")try{return Rn.from(Sr(t))}catch{P(!1,"invalid fallback fragment","obj",t)}else if(t instanceof sn){const n=t.toString(),i=t.peekKeyword(yt(["fallback","receive"]));if(P(i,"type must be fallback or receive","obj",n),t.popKeyword(yt(["fallback","receive"]))==="receive"){const c=$n(t);return P(c.length===0,"receive cannot have arguments","obj.inputs",c),qn(t,yt(["payable"])),Ai(t),new Rn(_e,[],!0)}let o=$n(t);o.length?P(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[tt.from("bytes")];const a=id(t);if(P(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),qn(t,yt(["returns"])).has("returns")){const c=$n(t);P(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Ai(t),new Rn(_e,o,a==="payable")}if(t.type==="receive")return new Rn(_e,[],!0);if(t.type==="fallback"){const n=[tt.from("bytes")],i=t.stateMutability==="payable";return new Rn(_e,n,i)}P(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[vt]===Cu}}class En extends ja{constructor(t,n,i,s,o,a){super(t,"function",n,s);L(this,"constant");L(this,"outputs");L(this,"stateMutability");L(this,"payable");L(this,"gas");Object.defineProperty(this,vt,{value:ku}),o=Object.freeze(o.slice()),oe(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return bi(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+fo(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(fo(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(s=>tt.from(s)),new En(_e,t,"view",n,[],null).selector}static from(t){if(En.isFragment(t))return t;if(typeof t=="string")try{return En.from(Sr(t))}catch{P(!1,"invalid function fragment","obj",t)}else if(t instanceof sn){const i=qa("function",t),s=$n(t),o=id(t);let a=[];qn(t,yt(["returns"])).has("returns")&&(a=$n(t));const c=sd(t);return Ai(t),new En(_e,i,o,s,a,c)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new En(_e,t.name,n,t.inputs?t.inputs.map(tt.from):[],t.outputs?t.outputs.map(tt.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[vt]===ku}}class xi extends ja{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,vt,{value:Tu})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return xi.from(Sr(e))}catch{P(!1,"invalid struct fragment","obj",e)}else if(e instanceof sn){const t=qa("struct",e),n=$n(e);return Ai(e),new xi(_e,t,n)}return new xi(_e,e.name,e.inputs?e.inputs.map(tt.from):[])}static isFragment(e){return e&&e[vt]===Tu}}const an=new Map;an.set(0,"GENERIC_PANIC");an.set(1,"ASSERT_FALSE");an.set(17,"OVERFLOW");an.set(18,"DIVIDE_BY_ZERO");an.set(33,"ENUM_RANGE_ERROR");an.set(34,"BAD_STORAGE_DATA");an.set(49,"STACK_UNDERFLOW");an.set(50,"ARRAY_RANGE_ERROR");an.set(65,"OUT_OF_MEMORY");an.set(81,"UNINITIALIZED_FUNCTION_CALL");const jx=new RegExp(/^bytes([0-9]*)$/),Jx=new RegExp(/^(u?int)([0-9]*)$/);let wc=null,Fu=1024;function Zx(r,e,t,n){let i="missing revert data",s=null;const o=null;let a=null;if(t){i="execution reverted";const l=ue(t);if(t=X(t),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(X(l.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(X(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${an.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?Ee(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ee(e.from)),Oe(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:c,invocation:o,revert:a})}var pr,Li;const Na=class Na{constructor(){M(this,pr)}getDefaultValue(e){const t=e.map(i=>J(this,pr,Li).call(this,tt.from(i)));return new jo(t,"_").defaultValue()}encode(e,t){Df(t.length,e.length,"types/values length mismatch");const n=e.map(o=>J(this,pr,Li).call(this,tt.from(o))),i=new jo(n,"_"),s=new x0;return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(o=>J(this,pr,Li).call(this,tt.from(o)));return new jo(i,"_").decode(new m0(t,n,Fu))}static _setDefaultMaxInflation(e){P(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Fu=e}static defaultAbiCoder(){return wc==null&&(wc=new Na),wc}static getBuiltinCallException(e,t,n){return Zx(e,t,n,Na.defaultAbiCoder())}};pr=new WeakSet,Li=function(e){if(e.isArray())return new fy(J(this,pr,Li).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new jo(e.components.map(n=>J(this,pr,Li).call(this,n)),e.name);switch(e.baseType){case"address":return new ly(e.name);case"bool":return new hy(e.name);case"string":return new Ay(e.name);case"bytes":return new dy(e.name);case"":return new yy(e.name)}let t=e.type.match(Jx);if(t){let n=parseInt(t[2]||"256");return P(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new by(n/8,t[1]==="int",e.name)}if(t=e.type.match(jx),t){let n=parseInt(t[1]);return P(n!==0&&n<=32,"invalid bytes length","param",e),new py(n,e.name)}P(!1,"invalid type","type",e.type)};let ho=Na;class Yx{constructor(e,t,n){L(this,"fragment");L(this,"name");L(this,"signature");L(this,"topic");L(this,"args");const i=e.name,s=e.format();oe(this,{fragment:e,name:i,signature:s,topic:t,args:n})}}class Xx{constructor(e,t,n,i){L(this,"fragment");L(this,"name");L(this,"args");L(this,"signature");L(this,"selector");L(this,"value");const s=e.name,o=e.format();oe(this,{fragment:e,name:s,args:n,signature:o,selector:t,value:i})}}class em{constructor(e,t,n){L(this,"fragment");L(this,"name");L(this,"args");L(this,"signature");L(this,"selector");const i=e.name,s=e.format();oe(this,{fragment:e,name:i,args:n,signature:s,selector:t})}}class Iu{constructor(e){L(this,"hash");L(this,"_isIndexed");oe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const Pu={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Du={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&Pu[r.toString()]&&(e=Pu[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var gn,yn,xn,st,kn,oa,aa;const Wr=class Wr{constructor(e){M(this,kn);L(this,"fragments");L(this,"deploy");L(this,"fallback");L(this,"receive");M(this,gn);M(this,yn);M(this,xn);M(this,st);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,k(this,xn,new Map),k(this,gn,new Map),k(this,yn,new Map);const n=[];for(const o of t)try{n.push(Ei.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}oe(this,{fragments:Object.freeze(n)});let i=null,s=!1;k(this,st,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}oe(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(P(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=y(this,xn);break;case"event":c=y(this,yn);break;case"error":c=y(this,gn);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||oe(this,{deploy:Qn.from("constructor()")}),oe(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ho.defaultAbiCoder()}getFunctionName(e){const t=J(this,kn,oa).call(this,e,null,!1);return P(t,"no matching function","key",e),t.name}hasFunction(e){return!!J(this,kn,oa).call(this,e,null,!1)}getFunction(e,t){return J(this,kn,oa).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(y(this,xn).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(y(this,xn).get(i),n)}}getEventName(e){const t=J(this,kn,aa).call(this,e,null,!1);return P(t,"no matching event","key",e),t.name}hasEvent(e){return!!J(this,kn,aa).call(this,e,null,!1)}getEvent(e,t){return J(this,kn,aa).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(y(this,yn).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(y(this,yn).get(i),n)}}getError(e,t){if(Se(e)){const i=e.toLowerCase();if(Du[i])return At.from(Du[i].signature);for(const s of y(this,gn).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of y(this,gn))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?At.from("error Error(string)"):e==="Panic"?At.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");P(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=At.from(e).format(),e==="Error(string)")return At.from("error Error(string)");if(e==="Panic(uint256)")return At.from("error Panic(uint256)");const n=y(this,gn).get(e);return n||null}forEachError(e){const t=Array.from(y(this,gn).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(y(this,gn).get(i),n)}}_decodeParams(e,t){return y(this,st).decode(e,t)}_encodeParams(e,t){return y(this,st).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);P(n,"unknown error","fragment",e),e=n}return P(ze(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,ze(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);P(n,"unknown error","fragment",e),e=n}return Me([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);P(n,"unknown function","fragment",e),e=n}return P(ze(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,ze(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);P(n,"unknown function","fragment",e),e=n}return Me([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);P(s,"unknown function","fragment",e),e=s}let n="invalid length for result data";const i=dt(t);if(i.length%32===0)try{return y(this,st).decode(e.outputs,i)}catch{n="could not decode result data"}K(!1,n,"BAD_DATA",{value:X(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=ue(e,"data"),i=ho.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=X(n.slice(0,4)),c=this.getError(a);if(c)try{const l=y(this,st).decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);P(n,"unknown function","fragment",e),e=n}return X(y(this,st).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);P(s,"unknown event","eventFragment",e),e=s}K(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(s,o)=>s.type==="string"?bi(o):s.type==="bytes"?He(X(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Pr(o):s.type.match(/^bytes/)?o=Nf(o,32):s.type==="address"&&y(this,st).encode(["address"],[o]),Wt(X(o),32));for(t.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){P(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?P(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);P(o,"unknown event","eventFragment",e),e=o}const n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),P(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const c=t[a];if(o.indexed)if(o.type==="string")n.push(bi(c));else if(o.type==="bytes")n.push(He(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(y(this,st).encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:y(this,st).encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const g=this.getEvent(e);P(g,"unknown event","eventFragment",e),e=g}if(n!=null&&!e.anonymous){const g=e.topicHash;P(Se(n[0],32)&&n[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,x)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(tt.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=n!=null?y(this,st).decode(i,Me(n)):null,c=y(this,st).decode(s,t,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((g,x)=>{let m=null;if(g.indexed)if(a==null)m=new Iu(null);else if(o[x])m=new Iu(a[d++]);else try{m=a[d++]}catch(w){m=w}else try{m=c[f++]}catch(w){m=w}l.push(m),u.push(g.name||null)}),Ss.fromItems(l,u)}parseTransaction(e){const t=ue(e.data,"tx.data"),n=ne(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(X(t.slice(0,4)));if(!i)return null;const s=y(this,st).decode(i.inputs,t.slice(4));return new Xx(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Yx(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=X(e),n=this.getError(ze(t,0,4));if(!n)return null;const i=y(this,st).decode(n.inputs,ze(t,4));return new em(n,n.selector,i)}static from(e){return e instanceof Wr?e:typeof e=="string"?new Wr(JSON.parse(e)):typeof e.formatJson=="function"?new Wr(e.formatJson()):typeof e.format=="function"?new Wr(e.format("json")):new Wr(e)}};gn=new WeakMap,yn=new WeakMap,xn=new WeakMap,st=new WeakMap,kn=new WeakSet,oa=function(e,t,n){if(Se(e)){const s=e.toLowerCase();for(const o of y(this,xn).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,xn))o.split("(")[0]===e&&s.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,c=!0;ct.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){const u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){const u=s[l].inputs;for(let f=0;f<t.length;f++)if(ct.isTyped(t[f])){if(f>=u.length){if(t[f].type==="overrides")continue;s.splice(l,1);break}if(t[f].type!==u[f].baseType){s.splice(l,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");P(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=y(this,xn).get(En.from(e).format());return i||null},aa=function(e,t,n){if(Se(e)){const s=e.toLowerCase();for(const o of y(this,yn).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,yn))o.split("(")[0]===e&&s.push(a);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<t.length;c++)if(ct.isTyped(t[c])&&t[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");P(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=y(this,yn).get(An.from(e).format());return i||null};let R0=Wr;const od=BigInt(0);function Qi(r){return r??null}function Ge(r){return r==null?null:r.toString()}class Ru{constructor(e,t,n){L(this,"gasPrice");L(this,"maxFeePerGas");L(this,"maxPriorityFeePerGas");oe(this,{gasPrice:Qi(e),maxFeePerGas:Qi(t),maxPriorityFeePerGas:Qi(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Ge(e),maxFeePerGas:Ge(t),maxPriorityFeePerGas:Ge(n)}}}function Ba(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=X(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in r)||r[i]==null||(e[i]=ne(r[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in r)||r[i]==null||(e[i]=fe(r[i],`request.${i}`));return r.accessList&&(e.accessList=Ci(r.accessList)),r.authorizationList&&(e.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(i=>j0(i)?X(i):Object.assign({},i))),e}var Un;class tm{constructor(e,t){L(this,"provider");L(this,"number");L(this,"hash");L(this,"timestamp");L(this,"parentHash");L(this,"parentBeaconBlockRoot");L(this,"nonce");L(this,"difficulty");L(this,"gasLimit");L(this,"gasUsed");L(this,"stateRoot");L(this,"receiptsRoot");L(this,"blobGasUsed");L(this,"excessBlobGas");L(this,"miner");L(this,"prevRandao");L(this,"extraData");L(this,"baseFeePerGas");M(this,Un);k(this,Un,e.transactions.map(n=>typeof n!="string"?new po(n,t):n)),oe(this,{provider:t,hash:Qi(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Qi(e.prevRandao),extraData:e.extraData,baseFeePerGas:Qi(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return y(this,Un).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=y(this,Un).slice();return e.length===0?[]:(K(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:d,stateRoot:g,receiptsRoot:x,timestamp:m,transactions:w}=this;return{_type:"Block",baseFeePerGas:Ge(e),difficulty:Ge(t),extraData:n,gasLimit:Ge(i),gasUsed:Ge(s),blobGasUsed:Ge(this.blobGasUsed),excessBlobGas:Ge(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:m,parentBeaconBlockRoot:d,stateRoot:g,receiptsRoot:x,transactions:w}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return y(this,Un).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=y(this,Un)[e];else{const n=e.toLowerCase();for(const i of y(this,Un))if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash!==n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;P(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return nm(this)}}Un=new WeakMap;class So{constructor(e,t){L(this,"provider");L(this,"transactionHash");L(this,"blockHash");L(this,"blockNumber");L(this,"removed");L(this,"address");L(this,"data");L(this,"topics");L(this,"index");L(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());oe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return K(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return K(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return K(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return rm(this)}}var vo;class ad{constructor(e,t){L(this,"provider");L(this,"to");L(this,"from");L(this,"contractAddress");L(this,"hash");L(this,"index");L(this,"blockHash");L(this,"blockNumber");L(this,"logsBloom");L(this,"gasUsed");L(this,"blobGasUsed");L(this,"cumulativeGasUsed");L(this,"gasPrice");L(this,"blobGasPrice");L(this,"type");L(this,"status");L(this,"root");M(this,vo);k(this,vo,Object.freeze(e.logs.map(i=>new So(i,t))));let n=od;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),oe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return y(this,vo)}toJSON(){const{to:e,from:t,contractAddress:n,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:Ge(this.cumulativeGasUsed),from:t,gasPrice:Ge(this.gasPrice),blobGasUsed:Ge(this.blobGasUsed),blobGasPrice:Ge(this.blobGasPrice),gasUsed:Ge(this.gasUsed),hash:i,index:s,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ld(this)}reorderedEvent(e){return K(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),cd(this,e)}}vo=new WeakMap;var gr;const Bl=class Bl{constructor(e,t){L(this,"provider");L(this,"blockNumber");L(this,"blockHash");L(this,"index");L(this,"hash");L(this,"type");L(this,"to");L(this,"from");L(this,"nonce");L(this,"gasLimit");L(this,"gasPrice");L(this,"maxPriorityFeePerGas");L(this,"maxFeePerGas");L(this,"maxFeePerBlobGas");L(this,"data");L(this,"value");L(this,"chainId");L(this,"signature");L(this,"accessList");L(this,"blobVersionedHashes");L(this,"authorizationList");M(this,gr);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,k(this,gr,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:i,type:s,to:o,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:Ge(this.chainId),data:l,from:a,gasLimit:Ge(this.gasLimit),gasPrice:Ge(this.gasPrice),hash:i,maxFeePerGas:Ge(this.maxFeePerGas),maxPriorityFeePerGas:Ge(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ge(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:n,type:s,value:Ge(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await ht({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,i=t??0;let s=y(this,gr),o=-1,a=s===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:g}=await ht({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=d;return}if(a)return null;const x=await this.getTransaction();if(!(x&&x.blockNumber!=null))for(o===-1&&(o=s-3,o<y(this,gr)&&(o=y(this,gr)));o<=d;){if(a)return null;const m=await this.provider.getBlock(o,!0);if(m==null)return;for(const w of m)if(w===this.hash)return;for(let w=0;w<m.length;w++){const v=await m.getTransaction(w);if(v.from===this.from&&v.nonce===this.nonce){if(a)return null;const A=await this.provider.getTransactionReceipt(v.hash);if(A==null||d-A.blockNumber+1<n)return;let E="replaced";v.data===this.data&&v.to===this.to&&v.value===this.value?E="repriced":v.data==="0x"&&v.from===v.to&&v.value===od&&(E="cancelled"),K(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:v.replaceableTransaction(s),hash:v.hash,receipt:A})}}o++}},l=d=>{if(d==null||d.status!==0)return d;K(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(u);if(u){if(n===1||await u.confirmations()>=n)return l(u)}else if(await c(),n===0)return null;return await new Promise((d,g)=>{const x=[],m=()=>{x.forEach(v=>v())};if(x.push(()=>{a=!0}),i>0){const v=setTimeout(()=>{m(),g(Oe("wait for transaction timeout","TIMEOUT"))},i);x.push(()=>{clearTimeout(v)})}const w=async v=>{if(await v.confirmations()>=n){m();try{d(l(v))}catch(A){g(A)}}};if(x.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),s>=0){const v=async()=>{try{await c()}catch(A){if(et(A,"TRANSACTION_REPLACED")){m(),g(A);return}}a||this.provider.once("block",v)};x.push(()=>{this.provider.off("block",v)}),this.provider.once("block",v)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return K(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ld(this)}reorderedEvent(e){return K(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),K(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cd(this,e)}replaceableTransaction(e){P(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Bl(this,this.provider);return k(t,gr,e),t}};gr=new WeakMap;let po=Bl;function nm(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function cd(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function ld(r){return{orphan:"drop-transaction",tx:r}}function rm(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class ll extends So{constructor(t,n,i){super(t,t.provider);L(this,"interface");L(this,"fragment");L(this,"args");const s=n.decodeEventLog(i,t.data,t.topics);oe(this,{args:s,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ud extends So{constructor(t,n){super(t,t.provider);L(this,"error");oe(this,{error:n})}}var xs;class im extends ad{constructor(t,n,i){super(i,n);M(this,xs);k(this,xs,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?y(this,xs).getEvent(t.topics[0]):null;if(n)try{return new ll(t,y(this,xs),n)}catch(i){return new ud(t,i)}return t})}}xs=new WeakMap;var Bo;class ul extends po{constructor(t,n,i){super(i,n);M(this,Bo);k(this,Bo,t)}async wait(t,n){const i=await super.wait(t,n);return i==null?null:new im(y(this,Bo),this.provider,i)}}Bo=new WeakMap;class fd extends Lf{constructor(t,n,i,s){super(t,n,i);L(this,"log");oe(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class sm extends fd{constructor(e,t,n,i,s){super(e,t,n,new ll(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);oe(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Su=BigInt(0);function hd(r){return r&&typeof r.call=="function"}function dd(r){return r&&typeof r.estimateGas=="function"}function Ja(r){return r&&typeof r.resolveName=="function"}function pd(r){return r&&typeof r.sendTransaction=="function"}function gd(r){if(r!=null){if(Ja(r))return r;if(r.provider)return r.provider}}var Co;class om{constructor(e,t,n){M(this,Co);L(this,"fragment");if(oe(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const i=vi(e.runner,"resolveName"),s=Ja(i)?i:null;k(this,Co,async function(){const o=await Promise.all(t.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(d=>gt(d,s))):gt(f,s):f)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return y(this,Co)}}Co=new WeakMap;function vi(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function qr(r){return r==null?null:r.provider||null}async function yd(r,e){const t=ct.dereference(r,"overrides");P(typeof t=="object","invalid overrides parameter","overrides",r);const n=Ba(t);return P(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),P(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function am(r,e,t){const n=vi(r,"resolveName"),i=Ja(n)?n:null;return await Promise.all(e.map((s,o)=>s.walkAsync(t[o],(a,c)=>(c=ct.dereference(c,a),a==="address"?gt(c,i):c))))}function cm(r){const e=async function(o){const a=await yd(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await gt(a.from,gd(r.runner)));const c=r.interface,l=ne(a.value||Su,"overrides.value")===Su,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&P(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),P(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return P(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),P(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=vi(r.runner,"call");K(hd(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw q0(l)&&l.data?r.interface.makeError(l.data,c):l}},n=async function(o){const a=r.runner;K(pd(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=qr(r.runner);return new ul(r.interface,l,c)},i=async function(o){const a=vi(r.runner,"estimateGas");return K(dd(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await n(o);return oe(s,{_contract:r,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),s}function lm(r,e){const t=function(...l){const u=r.interface.getFunction(e,l);return K(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},n=async function(...l){const u=t(...l);let f={};if(u.inputs.length+1===l.length&&(f=await yd(l.pop()),f.from&&(f.from=await gt(f.from,gd(r.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await am(r.runner,u.inputs,l);return Object.assign({},f,await ht({to:r.getAddress(),data:r.interface.encodeFunctionData(u,d)}))},i=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},s=async function(...l){const u=r.runner;K(pd(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await n(...l)),d=qr(r.runner);return new ul(r.interface,d,f)},o=async function(...l){const u=vi(r.runner,"estimateGas");return K(dd(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await n(...l))},a=async function(...l){const u=vi(r.runner,"call");K(hd(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...l);let d="0x";try{d=await u.call(f)}catch(x){throw q0(x)&&x.data?r.interface.makeError(x.data,f):x}const g=t(...l);return r.interface.decodeFunctionResult(g,d)},c=async(...l)=>t(...l).constant?await i(...l):await s(...l);return oe(c,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:o,populateTransaction:n,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=r.interface.getFunction(e);return K(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function um(r,e){const t=function(...i){const s=r.interface.getEvent(e,i);return K(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},n=function(...i){return new om(r,t(...i),i)};return oe(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(e);return K(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}const Ca=Symbol.for("_ethersInternal_contract"),xd=new WeakMap;function fm(r,e){xd.set(r[Ca],e)}function kt(r){return xd.get(r[Ca])}function hm(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function fl(r,e){let t,n=null;if(Array.isArray(e)){const s=function(o){if(Se(o,32))return o;const a=r.interface.getEvent(o);return P(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?Se(e,32)?t=[e]:(n=r.interface.getEvent(e),P(n,"unknown fragment","event",e),t=[n.topicHash]):hm(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):P(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:n,tag:i,topics:t}}async function Xs(r,e){const{subs:t}=kt(r);return t.get((await fl(r,e)).tag)||null}async function Nu(r,e,t){const n=qr(r.runner);K(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await fl(r,t),{addr:a,subs:c}=kt(r);let l=c.get(s);if(!l){const f={address:a||r,topics:o},d=w=>{let v=i;if(v==null)try{v=r.interface.getEvent(w.topics[0])}catch{}if(v){const A=v,E=i?r.interface.decodeEventLog(i,w.data,w.topics):[];N0(r,t,E,C=>new sm(r,C,t,A,w))}else N0(r,t,[],A=>new fd(r,A,t,w))};let g=[];l={tag:s,listeners:[],start:()=>{g.length||g.push(n.on(f,d))},stop:async()=>{if(g.length==0)return;let w=g;g=[],await Promise.all(w),n.off(f,d)}},c.set(s,l)}return l}let S0=Promise.resolve();async function dm(r,e,t,n){await S0;const i=await Xs(r,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const c=Array.from(t);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),kt(r).subs.delete(i.tag)),s>0}async function N0(r,e,t,n){try{await S0}catch{}const i=dm(r,e,t,n);return S0=i,await i}const Zo=["then"];var Pf;Pf=Ca;const ro=class ro{constructor(e,t,n,i){L(this,"target");L(this,"interface");L(this,"runner");L(this,"filters");L(this,Pf);L(this,"fallback");P(typeof e=="string"||bh(e),"invalid value for Contract target","target",e),n==null&&(n=null);const s=R0.from(t);oe(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,Ca,{value:{}});let o,a=null,c=null;if(i){const f=qr(n);c=new ul(this.interface,f,i)}let l=new Map;if(typeof e=="string")if(Se(e))a=e,o=Promise.resolve(e);else{const f=vi(n,"resolveName");if(!Ja(f))throw Oe("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(d=>{if(d==null)throw Oe("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return kt(this).addr=d,d})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return kt(this).addr=f,f});fm(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(f,d,g)=>{if(typeof d=="symbol"||Zo.indexOf(d)>=0)return Reflect.get(f,d,g);try{return this.getEvent(d)}catch(x){if(!et(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(f,d)=>Zo.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return oe(this,{filters:u}),oe(this,{fallback:s.receive||s.fallback?cm(this):null}),new Proxy(this,{get:(f,d,g)=>{if(typeof d=="symbol"||d in f||Zo.indexOf(d)>=0)return Reflect.get(f,d,g);try{return f.getFunction(d)}catch(x){if(!et(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(f,d)=>typeof d=="symbol"||d in f||Zo.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new ro(this.target,this.interface,e)}attach(e){return new ro(e,this.interface,this.runner)}async getAddress(){return await kt(this).addrPromise}async getDeployedCode(){const e=qr(this.runner);K(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=qr(this.runner);return K(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return kt(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),lm(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),um(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:i,addrPromise:s}=kt(this),o=i||await s,{fragment:a,topics:c}=await fl(this,e),l={address:o,topics:c,fromBlock:t,toBlock:n},u=qr(this.runner);return K(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let d=a;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new ll(f,this.interface,d)}catch(g){return new ud(f,g)}return new So(f,u)})}async on(e,t){const n=await Nu(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await Nu(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await N0(this,e,t,null)}async listenerCount(e){if(e){const i=await Xs(this,e);return i?i.listeners.length:0}const{subs:t}=kt(this);let n=0;for(const{listeners:i}of t.values())n+=i.length;return n}async listeners(e){if(e){const i=await Xs(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=kt(this);let n=[];for(const{listeners:i}of t.values())n=n.concat(i.map(({listener:s})=>s));return n}async off(e,t){const n=await Xs(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),kt(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await Xs(this,e);if(!t)return this;t.stop(),kt(this).subs.delete(t.tag)}else{const{subs:t}=kt(this);for(const{tag:n,stop:i}of t.values())i(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends ro{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};let L0=ro;function pm(){return L0}class mi extends pm(){}function bc(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):P(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class gm{constructor(e){L(this,"name");oe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const md=new RegExp("^(ipfs)://(.*)$","i"),Lu=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),md,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var yr,ai,xr,Oi,La,wd;const zi=class zi{constructor(e,t,n){M(this,xr);L(this,"provider");L(this,"address");L(this,"name");M(this,yr);M(this,ai);oe(this,{provider:e,address:t,name:n}),k(this,yr,null),k(this,ai,new mi(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return y(this,yr)==null&&k(this,yr,(async()=>{try{return await y(this,ai).supportsInterface("0x9061b923")}catch(e){if(et(e,"CALL_EXCEPTION"))return!1;throw k(this,yr,null),e}})()),await y(this,yr)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await J(this,xr,Oi).call(this,"addr(bytes32)");return s==null||s===wi?null:s}catch(s){if(et(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await J(this,xr,Oi).call(this,"addr(bytes32,uint)",[s]);if(Se(o,20))return Ee(o)}let t=null;for(const s of this.provider.plugins)if(s instanceof gm&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const n=await J(this,xr,Oi).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const i=await t.decodeAddress(e,n);if(i!=null)return i;K(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await J(this,xr,Oi).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await J(this,xr,Oi).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${dp("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;K(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<Lu.length;n++){const i=t.match(Lu[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=bc(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const l=c[1],u=new mi(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const m=await u.ownerOf(l);if(a!==m)return e.push({type:"!owner",value:m}),{url:null,linkage:e};e.push({type:"owner",value:m})}else if(s==="erc1155"){const m=await u.balanceOf(a,l);if(!m)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:m.toString()})}let f=await u[o](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",Pr(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=bc(f)),e.push({type:"metadata-url",value:f});let d={};const g=await new Kn(f).send();g.assertOk();try{d=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const v=g.body;return v&&e.push({type:"!metadata",value:X(v)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let x=d.image;if(typeof x!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!x.match(/^(https:\/\/|data:)/i)){if(x.match(md)==null)return e.push({type:"!imageUrl-ipfs",value:x}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:x}),x=bc(x)}return e.push({type:"url",value:x}),{linkage:e,url:x}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return K(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var i;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const s=await J(i=zi,La,wd).call(i,e,n);if(s!=null){const o=new zi(e,s,t);return n!==t&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};yr=new WeakMap,ai=new WeakMap,xr=new WeakSet,Oi=async function(e,t){t=(t||[]).slice();const n=y(this,ai).interface;t.unshift(P0(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(e),K(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[kx(this.name,255),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await y(this,ai)[e](...t);return i?n.decodeFunctionResult(i,s)[0]:s}catch(s){if(!et(s,"CALL_EXCEPTION"))throw s}return null},La=new WeakSet,wd=async function(e,t){const n=await zi.getEnsAddress(e);try{const s=await new mi(n,["function resolver(bytes32) view returns (address)"],e).resolver(P0(t),{enableCcipRead:!0});return s===wi?null:s}catch(i){throw i}return null},M(zi,La);let ka=zi;const Ou=BigInt(0);function xe(r,e){return function(t){return t==null?e:r(t)}}function go(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>r(n))}}function No(r,e){return t=>{const n={};for(const i in r){let s=i;if(e&&i in e&&!(s in t)){for(const o of e[i])if(o in t){s=o;break}}try{const o=r[i](t[s]);o!==void 0&&(n[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";K(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:t})}}return n}}function ym(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}P(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function Hs(r){return P(Se(r,!0),"invalid data","value",r),r}function Xe(r){return P(Se(r,32),"invalid hash","value",r),r}const xm=No({address:Ee,blockHash:Xe,blockNumber:fe,data:Hs,index:fe,removed:xe(ym,!1),topics:go(Xe),transactionHash:Xe,transactionIndex:fe},{index:["logIndex"]});function mm(r){return xm(r)}const wm=No({hash:xe(Xe),parentHash:Xe,parentBeaconBlockRoot:xe(Xe,null),number:fe,timestamp:fe,nonce:xe(Hs),difficulty:ne,gasLimit:ne,gasUsed:ne,stateRoot:xe(Xe,null),receiptsRoot:xe(Xe,null),blobGasUsed:xe(ne,null),excessBlobGas:xe(ne,null),miner:xe(Ee),prevRandao:xe(Xe,null),extraData:Hs,baseFeePerGas:xe(ne)},{prevRandao:["mixHash"]});function bm(r){const e=wm(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:bd(t)),e}const Am=No({transactionIndex:fe,blockNumber:fe,transactionHash:Xe,address:Ee,topics:go(Xe),data:Hs,index:fe,blockHash:Xe},{index:["logIndex"]});function Em(r){return Am(r)}const vm=No({to:xe(Ee,null),from:xe(Ee,null),contractAddress:xe(Ee,null),index:fe,root:xe(X),gasUsed:ne,blobGasUsed:xe(ne,null),logsBloom:xe(Hs),blockHash:Xe,hash:Xe,logs:go(Em),blockNumber:fe,cumulativeGasUsed:ne,effectiveGasPrice:xe(ne),blobGasPrice:xe(ne,null),status:xe(fe),type:xe(fe,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Bm(r){return vm(r)}function bd(r){r.to&&ne(r.to)===Ou&&(r.to="0x0000000000000000000000000000000000000000");const e=No({hash:Xe,index:xe(fe,void 0),type:t=>t==="0x"||t==null?0:fe(t),accessList:xe(Ci,null),blobVersionedHashes:xe(go(Xe,!0),null),authorizationList:xe(go(t=>{let n;if(t.signature)n=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),n=Object.assign({},t,{yParity:i})}return{address:Ee(t.address),chainId:ne(t.chainId),nonce:ne(t.nonce),signature:Et.from(n)}},!1),null),blockHash:xe(Xe,null),blockNumber:xe(fe,null),transactionIndex:xe(fe,null),from:Ee,gasPrice:xe(ne),maxPriorityFeePerGas:xe(ne),maxFeePerGas:xe(ne),maxFeePerBlobGas:xe(ne,null),gasLimit:ne,to:xe(Ee,null),value:ne,nonce:fe,data:Hs,creates:xe(Ee,null),chainId:xe(ne,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=cy(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=Et.from(r.signature):e.signature=Et.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&ne(e.blockHash)===Ou&&(e.blockHash=null),e}const Cm="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Lo{constructor(e){L(this,"name");oe(this,{name:e})}clone(){return new Lo(this.name)}}class Za extends Lo{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);L(this,"effectiveBlock");L(this,"txBase");L(this,"txCreate");L(this,"txDataZero");L(this,"txDataNonzero");L(this,"txAccessListStorageKey");L(this,"txAccessListAddress");const i={effectiveBlock:t};function s(o,a){let c=(n||{})[o];c==null&&(c=a),P(typeof c=="number",`invalud value for ${o}`,"costs",n),i[o]=c}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),oe(this,i)}clone(){return new Za(this.effectiveBlock,this)}}class Ya extends Lo{constructor(t,n){super("org.ethers.plugins.network.Ens");L(this,"address");L(this,"targetNetwork");oe(this,{address:t||Cm,targetNetwork:n??1})}clone(){return new Ya(this.address,this.targetNetwork)}}var ko,To;class km extends Lo{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");M(this,ko);M(this,To);k(this,ko,t),k(this,To,n)}get url(){return y(this,ko)}get processFunc(){return y(this,To)}clone(){return this}}ko=new WeakMap,To=new WeakMap;const Ac=new Map;var ms,ws,mr;const Gi=class Gi{constructor(e,t){M(this,ms);M(this,ws);M(this,mr);k(this,ms,e),k(this,ws,ne(t)),k(this,mr,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return y(this,ms)}set name(e){k(this,ms,e)}get chainId(){return y(this,ws)}set chainId(e){k(this,ws,ne(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ne(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ne(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ne(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(y(this,mr).values())}attachPlugin(e){if(y(this,mr).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,mr).set(e.name,e.clone()),this}getPlugin(e){return y(this,mr).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Gi(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Za;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const i=Ci(e.accessList);for(const s in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return n}static from(e){if(Tm(),e==null)return Gi.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Ac.get(e);if(t)return t();if(typeof e=="bigint")return new Gi("unknown",e);P(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){P(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Gi(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Ya(e.ensAddress,e.ensNetwork)),t}P(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=Ac.get(e);n&&P(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Ac.set(e,t)}};ms=new WeakMap,ws=new WeakMap,mr=new WeakMap;let Bn=Gi;function Mu(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function Uu(r){return new km(r,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([n.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Mu(a.maxFee,9),maxPriorityFeePerGas:Mu(a.maxPriorityFee,9)}}catch(s){K(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:s})}})}let _u=!1;function Tm(){if(_u)return;_u=!0;function r(e,t,n){const i=function(){const s=new Bn(e,t);return n.ensNetwork!=null&&s.attachPlugin(new Ya(null,n.ensNetwork)),s.attachPlugin(new Za),(n.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Bn.register(e,i),Bn.register(t,i),n.altNames&&n.altNames.forEach(s=>{Bn.register(s,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Uu("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Uu("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function O0(r){return JSON.parse(JSON.stringify(r))}var _n,Ut,wr,mn,bs,ca;class Fm{constructor(e){M(this,bs);M(this,_n);M(this,Ut);M(this,wr);M(this,mn);k(this,_n,e),k(this,Ut,null),k(this,wr,4e3),k(this,mn,-2)}get pollingInterval(){return y(this,wr)}set pollingInterval(e){k(this,wr,e)}start(){y(this,Ut)||(k(this,Ut,y(this,_n)._setTimeout(J(this,bs,ca).bind(this),y(this,wr))),J(this,bs,ca).call(this))}stop(){y(this,Ut)&&(y(this,_n)._clearTimeout(y(this,Ut)),k(this,Ut,null))}pause(e){this.stop(),e&&k(this,mn,-2)}resume(){this.start()}}_n=new WeakMap,Ut=new WeakMap,wr=new WeakMap,mn=new WeakMap,bs=new WeakSet,ca=async function(){try{const e=await y(this,_n).getBlockNumber();if(y(this,mn)===-2){k(this,mn,e);return}if(e!==y(this,mn)){for(let t=y(this,mn)+1;t<=e;t++){if(y(this,Ut)==null)return;await y(this,_n).emit("block",t)}k(this,mn,e)}}catch{}y(this,Ut)!=null&&k(this,Ut,y(this,_n)._setTimeout(J(this,bs,ca).bind(this),y(this,wr)))};var ci,li,br;class hl{constructor(e){M(this,ci);M(this,li);M(this,br);k(this,ci,e),k(this,br,!1),k(this,li,t=>{this._poll(t,y(this,ci))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){y(this,br)||(k(this,br,!0),y(this,li).call(this,-2),y(this,ci).on("block",y(this,li)))}stop(){y(this,br)&&(k(this,br,!1),y(this,ci).off("block",y(this,li)))}pause(e){this.stop()}resume(){this.start()}}ci=new WeakMap,li=new WeakMap,br=new WeakMap;var As,Hn;class Im extends hl{constructor(t,n){super(t);M(this,As);M(this,Hn);k(this,As,n),k(this,Hn,-2)}pause(t){t&&k(this,Hn,-2),super.pause(t)}async _poll(t,n){const i=await n.getBlock(y(this,As));i!=null&&(y(this,Hn)===-2?k(this,Hn,i.number):i.number>y(this,Hn)&&(n.emit(y(this,As),i.number),k(this,Hn,i.number)))}}As=new WeakMap,Hn=new WeakMap;var Oa;class Pm extends hl{constructor(t,n){super(t);M(this,Oa);k(this,Oa,O0(n))}async _poll(t,n){throw new Error("@TODO")}}Oa=new WeakMap;var Es;class Dm extends hl{constructor(t,n){super(t);M(this,Es);k(this,Es,n)}async _poll(t,n){const i=await n.getTransactionReceipt(y(this,Es));i&&n.emit(y(this,Es),i)}}Es=new WeakMap;var zn,vs,Bs,Ar,_t,Ma,Ad;class dl{constructor(e,t){M(this,Ma);M(this,zn);M(this,vs);M(this,Bs);M(this,Ar);M(this,_t);k(this,zn,e),k(this,vs,O0(t)),k(this,Bs,J(this,Ma,Ad).bind(this)),k(this,Ar,!1),k(this,_t,-2)}start(){y(this,Ar)||(k(this,Ar,!0),y(this,_t)===-2&&y(this,zn).getBlockNumber().then(e=>{k(this,_t,e)}),y(this,zn).on("block",y(this,Bs)))}stop(){y(this,Ar)&&(k(this,Ar,!1),y(this,zn).off("block",y(this,Bs)))}pause(e){this.stop(),e&&k(this,_t,-2)}resume(){this.start()}}zn=new WeakMap,vs=new WeakMap,Bs=new WeakMap,Ar=new WeakMap,_t=new WeakMap,Ma=new WeakSet,Ad=async function(e){if(y(this,_t)===-2)return;const t=O0(y(this,vs));t.fromBlock=y(this,_t)+1,t.toBlock=e;const n=await y(this,zn).getLogs(t);if(n.length===0){y(this,_t)<e-60&&k(this,_t,e-60);return}for(const i of n)y(this,zn).emit(y(this,vs),i),k(this,_t,i.blockNumber)};const Rm=BigInt(2),Sm=10;function Yo(r){return r&&typeof r.then=="function"}function la(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((s,o)=>(s[o]=n[o],s),{})}return n})}class Ed{constructor(e){L(this,"name");oe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Nm(r){return JSON.parse(JSON.stringify(r))}function M0(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Ec(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Se(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:la("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:la("orphan",t),filter:Nm(t)}}if(r.address||r.topics){const t=r,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?M0(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],o=a=>{Se(a)?i.push(a):s.push((async()=>{i.push(await gt(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&await Promise.all(s),n.address=M0(i.map(a=>a.toLowerCase()))}return{filter:n,tag:la("event",n),type:"event"}}P(!1,"unknown ProviderEvent","event",r)}function vc(){return new Date().getTime()}const Lm={cacheTimeout:250,pollingInterval:4e3};var ot,Er,at,Cs,Pt,ui,vr,Gn,Fo,Ht,ks,Ts,pe,Ct,U0,_0,eo,H0,to,ua;class Om{constructor(e,t){M(this,pe);M(this,ot);M(this,Er);M(this,at);M(this,Cs);M(this,Pt);M(this,ui);M(this,vr);M(this,Gn);M(this,Fo);M(this,Ht);M(this,ks);M(this,Ts);if(k(this,Ts,Object.assign({},Lm,t||{})),e==="any")k(this,ui,!0),k(this,Pt,null);else if(e){const n=Bn.from(e);k(this,ui,!1),k(this,Pt,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else k(this,ui,!1),k(this,Pt,null);k(this,Gn,-1),k(this,vr,new Map),k(this,ot,new Map),k(this,Er,new Map),k(this,at,null),k(this,Cs,!1),k(this,Fo,1),k(this,Ht,new Map),k(this,ks,!1)}get pollingInterval(){return y(this,Ts).pollingInterval}get provider(){return this}get plugins(){return Array.from(y(this,Er).values())}attachPlugin(e){if(y(this,Er).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,Er).set(e.name,e.connect(this)),this}getPlugin(e){return y(this,Er).get(e)||null}get disableCcipRead(){return y(this,ks)}set disableCcipRead(e){k(this,ks,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",i).replace("{data}",s),u=new Kn(l);c.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let f="unknown error",d;try{d=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=d.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(f=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}K(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),o.push(f)}K(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,t){return new tm(bm(e),this)}_wrapLog(e,t){return new So(mm(e),this)}_wrapTransactionReceipt(e,t){return new ad(Bm(e),this)}_wrapTransactionResponse(e,t){return new po(bd(e),this)}_detectNetwork(){K(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){K(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=fe(await J(this,pe,Ct).call(this,{method:"getBlockNumber"}),"%response");return y(this,Gn)>=0&&k(this,Gn,e),e}_getAddress(e){return gt(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Se(e))return Se(e,32)?e:en(e);if(typeof e=="bigint"&&(e=fe(e,"blockTag")),typeof e=="number")return e>=0?en(e):y(this,Gn)>=0?en(y(this,Gn)+e):this.getBlockNumber().then(t=>en(t+e));P(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?M0(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),t.length&&(d.topics=t),l&&(d.fromBlock=l),u&&(d.toBlock=u),n&&(d.blockHash=n),d};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(c=>i(c[0],c[1],c[2])):i(s,o,a)}_getTransactionRequest(e){const t=Ba(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=gt(t[i],this);Yo(s)?n.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);Yo(i)?n.push(async function(){t.blockTag=await i}()):t.blockTag=i}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(y(this,Pt)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw y(this,Pt)===i&&k(this,Pt,null),s}})();return k(this,Pt,i),(await i).clone()}const e=y(this,Pt),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(y(this,ui)?(this.emit("network",n,t),y(this,Pt)===e&&k(this,Pt,Promise.resolve(n))):K(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await ht({_block:J(this,pe,H0).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await J(this,pe,Ct).call(this,{method:"getGasPrice"});return ne(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await J(this,pe,Ct).call(this,{method:"getPriorityFee"});return ne(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Rm+c),new Ru(s,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new Kn(n.url),s=await n.processFunc(t,this,i);return new Ru(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Yo(t)&&(t=await t),ne(await J(this,pe,Ct).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await ht({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await J(this,pe,_0).call(this,J(this,pe,U0).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return ne(await J(this,pe,eo).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return fe(await J(this,pe,eo).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return X(await J(this,pe,eo).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const i=ne(t,"position");return X(await J(this,pe,eo).call(this,{method:"getStorage",position:i},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:i}=await ht({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=xa.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:i}=await ht({network:this.getNetwork(),params:J(this,pe,H0).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(e){const{network:t,params:n}=await ht({network:this.getNetwork(),params:J(this,pe,Ct).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await ht({network:this.getNetwork(),params:J(this,pe,Ct).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await J(this,pe,Ct).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await ht({network:this.getNetwork(),result:J(this,pe,Ct).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:X(t)}async getLogs(e){let t=this._getFilter(e);Yo(t)&&(t=await t);const{network:n,params:i}=await ht({network:this.getNetwork(),params:J(this,pe,Ct).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,n))}_getProvider(e){K(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await ka.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Ee(e);const t=P0(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await ka.getEnsAddress(this),s=await new mi(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===wi)return null;const a=await new mi(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(n){if(et(n,"BAD_DATA")&&n.value==="0x"||et(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Oe("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){K(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=y(this,Ht).get(e);t&&(t.timer&&clearTimeout(t.timer),y(this,Ht).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=$s(this,Fo)._++,i=()=>{y(this,Ht).delete(n),e()};if(this.paused)y(this,Ht).set(n,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);y(this,Ht).set(n,{timer:s,func:i,time:vc()})}return n}_forEachSubscriber(e){for(const t of y(this,ot).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Ed(e.type);case"block":{const t=new Fm(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Im(this,e.type);case"event":return new dl(this,e.filter);case"transaction":return new Dm(this,e.hash);case"orphan":return new Pm(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of y(this,ot).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),y(this,at)!=null&&t.pause(y(this,at));break}}async on(e,t){const n=await J(this,pe,ua).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,y(this,at)!=null&&n.subscriber.pause(y(this,at))),this}async once(e,t){const n=await J(this,pe,ua).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,y(this,at)!=null&&n.subscriber.pause(y(this,at))),this}async emit(e,...t){const n=await J(this,pe,to).call(this,e,t);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:s,once:o})=>{const a=new Lf(this,o?null:s,e);try{s.call(this,...t,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),y(this,ot).delete(n.tag)),i>0}async listenerCount(e){if(e){const n=await J(this,pe,to).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of y(this,ot).values())t+=n.length;return t}async listeners(e){if(e){const n=await J(this,pe,to).call(this,e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:n}of y(this,ot).values())t=t.concat(n.map(({listener:i})=>i));return t}async off(e,t){const n=await J(this,pe,to).call(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),y(this,ot).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:i}=await J(this,pe,ua).call(this,e);n&&i.stop(),y(this,ot).delete(t)}else for(const[t,{started:n,subscriber:i}]of y(this,ot))n&&i.stop(),y(this,ot).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return y(this,Cs)}destroy(){this.removeAllListeners();for(const e of y(this,Ht).keys())this._clearTimeout(e);k(this,Cs,!0)}get paused(){return y(this,at)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(k(this,Gn,-1),y(this,at)!=null){if(y(this,at)==!!e)return;K(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),k(this,at,!!e);for(const t of y(this,Ht).values())t.timer&&clearTimeout(t.timer),t.time=vc()-t.time}resume(){if(y(this,at)!=null){this._forEachSubscriber(e=>e.resume()),k(this,at,null);for(const e of y(this,Ht).values()){let t=e.time;t<0&&(t=0),e.time=vc(),setTimeout(e.func,t)}}}}ot=new WeakMap,Er=new WeakMap,at=new WeakMap,Cs=new WeakMap,Pt=new WeakMap,ui=new WeakMap,vr=new WeakMap,Gn=new WeakMap,Fo=new WeakMap,Ht=new WeakMap,ks=new WeakMap,Ts=new WeakMap,pe=new WeakSet,Ct=async function(e){const t=y(this,Ts).cacheTimeout;if(t<0)return await this._perform(e);const n=la(e.method,e);let i=y(this,vr).get(n);return i||(i=this._perform(e),y(this,vr).set(n,i),setTimeout(()=>{y(this,vr).get(n)===i&&y(this,vr).delete(n)},t)),await i},U0=async function(e,t,n){K(n<Sm,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=Ba(e);try{return X(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&q0(s)&&s.data&&n>=0&&t==="latest"&&i.to!=null&&ze(s.data,0,4)==="0x556f1830"){const o=s.data,a=await gt(i.to,this);let c;try{c=zm(ze(s.data,4))}catch(f){K(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}K(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(i,c.calldata,c.urls);K(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const u={to:a,data:Me([c.selector,Hm([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await J(this,pe,U0).call(this,u,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw s}},_0=async function(e){const{value:t}=await ht({network:this.getNetwork(),value:e});return t},eo=async function(e,t,n){let i=this._getAddress(t),s=this._getBlockTag(n);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await J(this,pe,_0).call(this,J(this,pe,Ct).call(this,Object.assign(e,{address:i,blockTag:s})))},H0=async function(e,t){if(Se(e,32))return await J(this,pe,Ct).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await J(this,pe,Ct).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},to=async function(e,t){let n=await Ec(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await Ec({orphan:"drop-log",log:t[0]},this)),y(this,ot).get(n.tag)||null},ua=async function(e){const t=await Ec(e,this),n=t.tag;let i=y(this,ot).get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},y(this,ot).set(n,i)),i};function Mm(r,e){try{const t=z0(r,e);if(t)return pa(t)}catch{}return null}function z0(r,e){if(r==="0x")return null;try{const t=fe(ze(r,e,e+32)),n=fe(ze(r,t,t+32));return ze(r,t+32,t+32+n)}catch{}return null}function Hu(r){const e=Ve(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Um(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const _m=new Uint8Array([]);function Hm(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(_m),t+=32;for(let n=0;n<r.length;n++){const i=ue(r[n]);e[n]=Hu(t),e.push(Hu(i.length)),e.push(Um(i)),t+=32+Math.ceil(i.length/32)*32}return Me(e)}const zu="0x0000000000000000000000000000000000000000000000000000000000000000";function zm(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};K(gi(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=ze(r,0,32);K(ze(t,0,12)===ze(zu,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=ze(t,12);try{const n=[],i=fe(ze(r,32,64)),s=fe(ze(r,i,i+32)),o=ze(r,i+32);for(let a=0;a<s;a++){const c=Mm(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{K(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=z0(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{K(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}K(ze(r,100,128)===ze(zu,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=ze(r,96,100);try{const n=z0(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{K(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Mr(r,e){if(r.provider)return r.provider;K(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Gu(r,e){let t=Ba(e);if(t.to!=null&&(t.to=gt(t.to,r)),t.from!=null){const n=t.from;t.from=Promise.all([r.getAddress(),gt(n,r)]).then(([i,s])=>(P(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=r.getAddress();return await ht(t)}class Gm{constructor(e){L(this,"provider");oe(this,{provider:e||null})}async getNonce(e){return Mr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Gu(this,e)}async populateTransaction(e){const t=Mr(this,"populateTransaction"),n=await Gu(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const o=ne(n.chainId);P(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;const s=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||s)?P(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&s&&P(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await t.getFeeData();K(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(K(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):K(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ht(n)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Mr(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Mr(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Mr(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Mr(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Mr(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const i=xa.from(n);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){K(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Wm(r){return JSON.parse(JSON.stringify(r))}var ft,wn,fi,Br,hi,Fs,Rr,G0,W0;class vd{constructor(e){M(this,Rr);M(this,ft);M(this,wn);M(this,fi);M(this,Br);M(this,hi);M(this,Fs);k(this,ft,e),k(this,wn,null),k(this,fi,J(this,Rr,G0).bind(this)),k(this,Br,!1),k(this,hi,null),k(this,Fs,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){y(this,Br)||(k(this,Br,!0),J(this,Rr,G0).call(this,-2))}stop(){y(this,Br)&&(k(this,Br,!1),k(this,Fs,!0),J(this,Rr,W0).call(this),y(this,ft).off("block",y(this,fi)))}pause(e){e&&J(this,Rr,W0).call(this),y(this,ft).off("block",y(this,fi))}resume(){this.start()}}ft=new WeakMap,wn=new WeakMap,fi=new WeakMap,Br=new WeakMap,hi=new WeakMap,Fs=new WeakMap,Rr=new WeakSet,G0=async function(e){try{y(this,wn)==null&&k(this,wn,this._subscribe(y(this,ft)));let t=null;try{t=await y(this,wn)}catch(s){if(!et(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){k(this,wn,null),y(this,ft)._recoverSubscriber(this,this._recover(y(this,ft)));return}const n=await y(this,ft).getNetwork();if(y(this,hi)||k(this,hi,n),y(this,hi).chainId!==n.chainId)throw new Error("chaid changed");if(y(this,Fs))return;const i=await y(this,ft).send("eth_getFilterChanges",[t]);await this._emitResults(y(this,ft),i)}catch(t){console.log("@TODO",t)}y(this,ft).once("block",y(this,fi))},W0=function(){const e=y(this,wn);e&&(k(this,wn,null),e.then(t=>{y(this,ft).destroyed||y(this,ft).send("eth_uninstallFilter",[t])}))};var di;class Vm extends vd{constructor(t,n){super(t);M(this,di);k(this,di,Wm(n))}_recover(t){return new dl(t,y(this,di))}async _subscribe(t){return await t.send("eth_newFilter",[y(this,di)])}async _emitResults(t,n){for(const i of n)t.emit(y(this,di),t._wrapLog(i,t._network))}}di=new WeakMap;class Qm extends vd{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const $m="bigint,boolean,function,number,string,symbol".split(/,/g);function fa(r){if(r==null||$m.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(fa);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function Km(r){return new Promise(e=>{setTimeout(e,r)})}function Ri(r){return r&&r.toLowerCase()}function Wu(r){return r&&typeof r.pollingInterval=="number"}const Bd={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Bc extends Gm{constructor(t,n){super(t);L(this,"address");n=Ee(n),oe(this,{address:n})}connect(t){K(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=fa(t),i=[];if(n.from){const o=n.from;i.push((async()=>{const a=await gt(o,this.provider);P(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;i.push((async()=>{n.to=await gt(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(n));return}}catch(u){if(et(u,"CANCELLED")||et(u,"BAD_DATA")||et(u,"NETWORK_ERROR")||et(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(et(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,c>10)){o(u);return}this.provider.emit("error",Oe("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(t){const n=fa(t);if(n.from){const s=await gt(n.from,this.provider);P(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=s}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const n=typeof t=="string"?rn(t):t;return await this.provider.send("personal_sign",[X(n),this.address.toLowerCase()])}async signTypedData(t,n,i){const s=fa(i),o=await va.resolveNames(t,n,s,async a=>{const c=await gt(a);return P(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(va.getPayload(o.domain,n,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?rn(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),X(n)])}}var pi,Is,Wn,bn,Xt,zt,mt,Io,V0;class qm extends Om{constructor(t,n){super(t,n);M(this,Io);M(this,pi);M(this,Is);M(this,Wn);M(this,bn);M(this,Xt);M(this,zt);M(this,mt);k(this,Is,1),k(this,pi,Object.assign({},Bd,n||{})),k(this,Wn,[]),k(this,bn,null),k(this,zt,null),k(this,mt,null);{let s=null;const o=new Promise(a=>{s=a});k(this,Xt,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(P(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&t!=null&&k(this,zt,Bn.from(t))):i&&(P(t==null||i.matches(t),"staticNetwork MUST match network object","options",n),k(this,zt,i))}_getOption(t){return y(this,pi)[t]}get _network(){return K(y(this,zt),"network is not available yet","NETWORK_ERROR"),y(this,zt)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&ne(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(y(this,zt))return y(this,zt)}else return t;return y(this,mt)?await y(this,mt):this.ready?(k(this,mt,(async()=>{try{const n=Bn.from(ne(await this.send("eth_chainId",[])));return k(this,mt,null),n}catch(n){throw k(this,mt,null),n}})()),await y(this,mt)):(k(this,mt,(async()=>{const n={id:$s(this,Is)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],k(this,mt,null)}catch(s){throw k(this,mt,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Bn.from(ne(i.result));throw this.getRpcError(n,i)})()),await y(this,mt))}_start(){y(this,Xt)==null||y(this,Xt).resolve==null||(y(this,Xt).resolve(),k(this,Xt,null),(async()=>{for(;y(this,zt)==null&&!this.destroyed;)try{k(this,zt,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Oe("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await Km(1e3)}J(this,Io,V0).call(this)})())}async _waitUntilReady(){if(y(this,Xt)!=null)return await y(this,Xt).promise}_getSubscriber(t){return t.type==="pending"?new Qm(this):t.type==="event"?this._getOption("polling")?new dl(this,t.filter):new Vm(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new Ed("orphan"):super._getSubscriber(t)}get ready(){return y(this,Xt)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),n[s]=en(ne(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(n[i]=X(t[i]))}),t.accessList&&(n.accessList=Ci(t.accessList)),t.blobVersionedHashes&&(n.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(n.authorizationList=t.authorizationList.map(i=>{const s=Bh(i);return{address:s.address,nonce:en(s.nonce),chainId:en(s.chainId),yParity:en(s.signature.yParity),r:en(s.signature.r),s:en(s.signature.s)}})),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ri(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ri(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ri(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ri(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Ri):t.filter.address=Ri(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:i}=t,{error:s}=n;if(i==="eth_estimateGas"&&s.message){const c=s.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Oe("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(c.match(/nonce/i)&&c.match(/too low/i))return Oe("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const c=Q0(s),l=ho.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],c?c.data:null);return l.info={error:s,payload:t},l}const o=JSON.stringify(Jm(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Oe("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const c=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Oe("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Oe("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Oe("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:s}});if(o.match(/only replay-protected/i))return Oe("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:c,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Oe("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):Oe("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(Oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=$s(this,Is)._++,s=new Promise((o,a)=>{y(this,Wn).push({resolve:o,reject:a,payload:{method:t,params:n,id:i,jsonrpc:"2.0"}})});return J(this,Io,V0).call(this),s}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await n;if(t>=s.length)throw new Error("no such account");return new Bc(this,s[t])}const{accounts:i}=await ht({network:this.getNetwork(),accounts:n});t=Ee(t);for(const s of i)if(Ee(s)===t)return new Bc(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Bc(this,n))}destroy(){y(this,bn)&&(clearTimeout(y(this,bn)),k(this,bn,null));for(const{payload:t,reject:n}of y(this,Wn))n(Oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));k(this,Wn,[]),super.destroy()}}pi=new WeakMap,Is=new WeakMap,Wn=new WeakMap,bn=new WeakMap,Xt=new WeakMap,zt=new WeakMap,mt=new WeakMap,Io=new WeakSet,V0=function(){if(y(this,bn))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");k(this,bn,setTimeout(()=>{k(this,bn,null);const n=y(this,Wn);for(k(this,Wn,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==y(this,pi).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(o=>o.payload)).length>y(this,pi).batchMaxSize){n.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of i){if(this.destroyed){c(Oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(f=>f.id===l.id)[0];if(u==null){const f=Oe("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",f),c(f);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},t))};var Cr;class Cd extends qm{constructor(t,n){super(t,n);M(this,Cr);let i=this._getOption("pollingInterval");i==null&&(i=Bd.pollingInterval),k(this,Cr,i)}_getSubscriber(t){const n=super._getSubscriber(t);return Wu(n)&&(n.pollingInterval=y(this,Cr)),n}get pollingInterval(){return y(this,Cr)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");k(this,Cr,t),this._forEachSubscriber(n=>{Wu(n)&&(n.pollingInterval=y(this,Cr))})}}Cr=new WeakMap;var Ps;class jm extends Cd{constructor(t,n,i){t==null&&(t="http://localhost:8545");super(n,i);M(this,Ps);typeof t=="string"?k(this,Ps,new Kn(t)):k(this,Ps,t.clone())}_getConnection(){return y(this,Ps).clone()}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){const n=this._getConnection();n.body=JSON.stringify(t),n.setHeader("content-type","application/json");const i=await n.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Ps=new WeakMap;function Q0(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Se(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=Q0(r[e]);if(t)return t}return null}if(typeof r=="string")try{return Q0(JSON.parse(r))}catch{}return null}function $0(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)$0(r[t],e);if(typeof r=="string")try{return $0(JSON.parse(r),e)}catch{}}}function Jm(r){const e=[];return $0(r,e),e}var Ds,Rs;const Vr=class Vr extends Cd{constructor(t,n,i){const s=Object.assign({},i??{},{batchMaxCount:1});P(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(n,s);M(this,Ds);M(this,Rs);k(this,Rs,null),i&&i.providerInfo&&k(this,Rs,i.providerInfo),k(this,Ds,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await t.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return y(this,Rs)}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){P(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const n=await y(this,Ds).call(this,t.method,t.params||[]);return[{id:t.id,result:n}]}catch(n){return[{id:t.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(t,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(t,n)}async hasSigner(t){t==null&&(t=0);const n=await this.send("eth_accounts",[]);return typeof t=="number"?n.length>t:(t=t.toLowerCase(),n.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await y(this,Ds).call(this,"eth_requestAccounts",[])}catch(n){const i=n.payload;throw this.getRpcError(i,{id:i.id,error:n})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new Vr(t.provider);const n=t.window?t.window:typeof window<"u"?window:null;if(n==null)return null;const i=t.anyProvider;if(i&&n.ethereum)return new Vr(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((o,a)=>{let c=[];const l=d=>{c.push(d.detail),i&&u()},u=()=>{if(clearTimeout(f),c.length)if(t&&t.filter){const d=t.filter(c.map(g=>Object.assign({},g.info)));if(d==null)o(null);else if(d instanceof Vr)o(d);else{let g=null;if(d.uuid&&(g=c.filter(m=>d.uuid===m.info.uuid)[0]),g){const{provider:x,info:m}=g;o(new Vr(x,void 0,{providerInfo:m}))}else a(Oe("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:g}=c[0];o(new Vr(d,void 0,{providerInfo:g}))}else o(null);n.removeEventListener("eip6963:announceProvider",l)},f=setTimeout(()=>{u()},s);n.addEventListener("eip6963:announceProvider",l),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Ds=new WeakMap,Rs=new WeakMap;let yo=Vr;const kd="v0.3.0",ke={address:"0x18ACB77690a4372AAC4e558A105E9019edCf8720",network:"sepolia",chainId:11155111,DEV_MODE:!0,abi:[{type:"constructor",inputs:[{name:"_vrfCoordinator",type:"address",internalType:"address"},{name:"_subscriptionId",type:"uint256",internalType:"uint256"},{name:"_keyHash",type:"bytes32",internalType:"bytes32"},{name:"_creatorsAddress",type:"address",internalType:"address"},{name:"_emblemVaultAddress",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"fallback",stateMutability:"payable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"BUNDLE_10_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"BUNDLE_5_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"CREATORS_FEE_PCT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"DEPLOYMENT_TIMESTAMP",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"FAKE_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"KEK_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"MAX_GAS_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MAX_PARTICIPANTS_PER_ROUND",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MAX_TOTAL_WAGER_PER_ROUND",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MIN_TICKETS_FOR_DISTRIBUTION",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MIN_WAGER",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"NEXT_ROUND_FEE_PCT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PEPE_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"PROOF_MULTIPLIER",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"ROUND_DURATION",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VRF_MAX_CALLBACK_GAS",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_MIN_CALLBACK_GAS",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_REQUEST_TIMEOUT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"VRF_SAFETY_BUFFER_PCT",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_VOLATILITY_BUFFER_PCT",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"WALLET_CAP",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"buyTickets",inputs:[{name:"tickets",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"claim",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"prizeIndex",type:"uint8",internalType:"uint8"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"proof",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimCounts",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"claims",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"closeRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"commitParticipantsRoot",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createRound",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"creatorsAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"currentRoundId",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"denylisted",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"emblemVault",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IERC721"}],stateMutability:"view"},{type:"function",name:"emblemVaultAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"emergencyPaused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"emergencyWithdrawETH",inputs:[{name:"to",type:"address",internalType:"address payable"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"emergencyWithdrawNFT",inputs:[{name:"nftContract",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"estimateVrfCallbackGas",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"getClaimStatus",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"prizeIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"claimer",type:"address",internalType:"address"},{name:"claimed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getParticipantsData",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"getRefundBalance",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct PepedawnRaffle.Round",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}]}],stateMutability:"view"},{type:"function",name:"getRoundParticipants",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getRoundState",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"round",type:"tuple",internalType:"struct PepedawnRaffle.Round",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}]},{name:"participantsCount",type:"uint256",internalType:"uint256"},{name:"winnersCount",type:"uint256",internalType:"uint256"},{name:"prizesClaimed",type:"uint256",internalType:"uint256"},{name:"prizeTokenIds",type:"uint256[10]",internalType:"uint256[10]"},{name:"prizeClaimers",type:"address[10]",internalType:"address[10]"}],stateMutability:"view"},{type:"function",name:"getRoundWinners",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple[]",internalType:"struct PepedawnRaffle.WinnerAssignment[]",components:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"wallet",type:"address",internalType:"address"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"blockNumber",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"getUserStats",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"user",type:"address",internalType:"address"}],outputs:[{name:"wagered",type:"uint256",internalType:"uint256"},{name:"tickets",type:"uint256",internalType:"uint256"},{name:"weight",type:"uint256",internalType:"uint256"},{name:"hasProof",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getWinnersData",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"isParticipant",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isWinner",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"user",type:"address",internalType:"address"},{name:"prizeIndex",type:"uint8",internalType:"uint8"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"proof",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[{name:"valid",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"lastVrfRequestTime",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"nextRoundFunds",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"openRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"participantsCIDs",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[{name:"reason",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"pauseReason",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"prizeNFTs",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"rawFulfillRandomWords",inputs:[{name:"requestId",type:"uint256",internalType:"uint256"},{name:"randomWords",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"refunds",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"requestVrf",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"roundParticipants",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"roundWinners",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"wallet",type:"address",internalType:"address"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"blockNumber",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"rounds",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"s_vrfCoordinator",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IVRFCoordinatorV2Plus"}],stateMutability:"view"},{type:"function",name:"setCoordinator",inputs:[{name:"_vrfCoordinator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setDenylistStatus",inputs:[{name:"wallet",type:"address",internalType:"address"},{name:"isDenylisted",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setEmergencyPause",inputs:[{name:"paused",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setPrizesForRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"tokenIds",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setValidProof",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"proofHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"snapshotRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"submitProof",inputs:[{name:"proofHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"submitWinnersRoot",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"ipfsHash",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateCreatorsAddress",inputs:[{name:"_creatorsAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateEmblemVaultAddress",inputs:[{name:"_emblemVaultAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateVrfConfig",inputs:[{name:"_coordinator",type:"address",internalType:"address"},{name:"_subscriptionId",type:"uint256",internalType:"uint256"},{name:"_keyHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"userHasProofInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"userProofInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"wallet",type:"address",internalType:"address"},{name:"roundId",type:"uint256",internalType:"uint256"},{name:"proofHash",type:"bytes32",internalType:"bytes32"},{name:"verified",type:"bool",internalType:"bool"},{name:"submittedAt",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"userTicketsInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userWageredInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userWeightInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"vrfConfig",inputs:[],outputs:[{name:"coordinator",type:"address",internalType:"contract IVRFCoordinatorV2Plus"},{name:"subscriptionId",type:"uint256",internalType:"uint256"},{name:"keyHash",type:"bytes32",internalType:"bytes32"},{name:"callbackGasLimit",type:"uint32",internalType:"uint32"},{name:"requestConfirmations",type:"uint16",internalType:"uint16"}],stateMutability:"view"},{type:"function",name:"vrfRequestToRound",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"winnersCIDs",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"withdrawRefund",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddressDenylisted",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"denylisted",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"CircuitBreakerTriggered",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"reason",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"ContractPausedWithReason",inputs:[{name:"reason",type:"string",indexed:!1,internalType:"string"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"CoordinatorSet",inputs:[{name:"vrfCoordinator",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"DirectETHReceived",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"EmblemVaultPrizeAssigned",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"assetId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"EmergencyPauseToggled",inputs:[{name:"paused",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"EmergencyWithdrawal",inputs:[{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"assetType",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"FeesDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"creators",type:"address",indexed:!0,internalType:"address"},{name:"creatorsAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"nextRoundAmount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OwnershipTransferRequested",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ParticipantRefunded",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"participant",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ParticipantsRootCommitted",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"root",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"cid",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"PrizeClaimed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"prizeIndex",type:"uint8",indexed:!1,internalType:"uint8"},{name:"prizeTier",type:"uint8",indexed:!1,internalType:"uint8"},{name:"emblemVaultTokenId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PrizeDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"prizeTier",type:"uint8",indexed:!1,internalType:"uint8"},{name:"assetId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PrizesSet",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"tokenIds",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"ProofRejected",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"proofHash",type:"bytes32",indexed:!1,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"ProofSubmitted",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"proofHash",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"newWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RefundWithdrawn",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundClosed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundCreated",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"startTime",type:"uint64",indexed:!1,internalType:"uint64"},{name:"endTime",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"RoundOpened",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundPrizesDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winnerCount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundRefunded",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"participantCount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"totalRefunded",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundSnapshot",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"totalTickets",type:"uint256",indexed:!1,internalType:"uint256"},{name:"totalWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SecurityValidationFailed",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"reason",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"VRFFulfilled",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"randomWords",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"VRFRequested",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"VRFTimeoutDetected",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ValidProofSet",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"validProofHash",type:"bytes32",indexed:!1,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"WagerPlaced",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"tickets",type:"uint256",indexed:!1,internalType:"uint256"},{name:"effectiveWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"WinnersAssigned",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winners",type:"address[]",indexed:!1,internalType:"address[]"},{name:"prizeTiers",type:"uint8[]",indexed:!1,internalType:"uint8[]"}],anonymous:!1},{type:"event",name:"WinnersCommitted",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"root",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"cid",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"OnlyCoordinatorCanFulfill",inputs:[{name:"have",type:"address",internalType:"address"},{name:"want",type:"address",internalType:"address"}]},{type:"error",name:"OnlyOwnerOrCoordinator",inputs:[{name:"have",type:"address",internalType:"address"},{name:"owner",type:"address",internalType:"address"},{name:"coordinator",type:"address",internalType:"address"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]},{type:"error",name:"ZeroAddress",inputs:[]}]},zs={NETWORK_NAMES:{11155111:"Sepolia",1:"Ethereum Mainnet"},MAX_RETRY_ATTEMPTS:3,REQUEST_TIMEOUT:3e4,ENABLE_PAUSE_CHECK:!0,ENABLE_NETWORK_VALIDATION:!0};function Zm(){return!ke.address.startsWith("0x")||ke.address.length!==42?(console.error("❌ Invalid contract address format!"),!1):(console.log("✅ Contract configuration valid:",ke.address),!0)}function Xa(r){const e=Number(r);if(!zs.NETWORK_NAMES[e]){const n=`Unsupported network: ${e}`;throw console.error("❌",n),new Error(n)}const t=zs.NETWORK_NAMES[e];return console.log(`✅ Connected to ${t} (${e})`),!0}function Ym(r,e){if(typeof r!="string")throw new Error(`Invalid ${e}: must be a string`);const t=r.replace(/[<>'"&]/g,"").trim().substring(0,1e3);if(t.length===0)throw new Error(`Invalid ${e}: cannot be empty`);return t}const Xo=new Map;function Td(r){const e=Date.now(),t=6e4,n=10;Xo.has(r)||Xo.set(r,[]);const s=Xo.get(r).filter(o=>e-o<t);if(s.length>=n)throw new Error("Rate limit exceeded. Please wait before making another request.");s.push(e),Xo.set(r,s)}async function Fd(r,e){if(!r)throw new Error("Contract not available");try{if(await r.paused())throw new Error("Contract is currently paused");if(await r.emergencyPaused())throw new Error("Contract is in emergency pause mode");try{if(await r.denylisted(e))throw new Error("Your address is not allowed to interact with this contract")}catch{console.log("Denylist check not available")}return console.log("✅ Security validation passed"),!0}catch(t){throw console.error("❌ Security validation failed:",t.message),t}}function Ta(r){return r?`${r.slice(0,6)}...${r.slice(-4)}`:""}function Xm(r,e){function t(){const n=Date.now(),i=e-n;if(i<=0){r.textContent="Round Ended";return}const s=Math.floor(i/(24*60*60*1e3)),o=Math.floor(i%(24*60*60*1e3)/(60*60*1e3)),a=Math.floor(i%(60*60*1e3)/(60*1e3)),c=Math.floor(i%(60*1e3)/1e3);r.textContent=`${s}d ${o}h ${a}m ${c}s`}return t(),setInterval(t,1e3)}function Vu(r,e,t){if(e>r)return 0;if(t===0)return e===0?1:0;if(t===1)return e===r?1:0;let n=1;for(let i=0;i<e;i++)n*=(r-i)/(i+1);return n*Math.pow(t,e)*Math.pow(1-t,r-e)}function e1(r){const e=[{min:0,max:0,name:"Blanked",emoji:"😢",color:"#6B7280",message:"Better luck next time!"},{min:1,max:49,name:"Unlucky",emoji:"😕",color:"#F97316",message:"Below odds, but there's always next round!"},{min:50,max:99,name:"Close",emoji:"😐",color:"#EAB308",message:"Almost expected - not bad!"},{min:100,max:149,name:"On Track",emoji:"🙂",color:"#10B981",message:"Right on target!"},{min:150,max:199,name:"Lucky",emoji:"🍀",color:"#22C55E",message:"You beat the odds!"},{min:200,max:299,name:"Very Lucky",emoji:"✨",color:"#F59E0B",message:"Exceptionally lucky!"},{min:300,max:1/0,name:"Jackpot",emoji:"🎰",color:"#A855F7",message:"Defied the odds!"}];for(const t of e)if(r>=t.min&&r<=t.max)return t;return e[0]}async function Id(r,e,t,n=null){try{const[,i,s,o]=await r.getUserStats(e,t),c=(await r.getRound(e)).totalWeight;let l=0;if(n&&n.winners)for(const A of n.winners)A.address.toLowerCase()===t.toLowerCase()&&l++;else{const E=(await r.getRoundState(e)).prizeClaimers;for(const C of E)C.toLowerCase()===t.toLowerCase()&&l++}const u=BigInt(s.toString()),f=BigInt(c.toString()),d=f>0n?Number(u*10000n/f)/100:0,g=10,x=d/100*g,m=x>0?Math.round(l/x*100):l>0?999:0,w=[];for(let A=0;A<=3;A++){const E=Vu(g,A,d/100);w.push({wins:A,probability:E*100,achieved:A===l})}let v=0;for(let A=4;A<=g;A++)v+=Vu(g,A,d/100);return w.push({wins:"4+",probability:v*100,achieved:l>=4}),{tickets:Number(i),weight:Number(s),hasProof:o,weightPercent:d,expectedWins:x,actualWins:l,luckPercent:m,probabilities:w,totalPrizes:g,totalWeight:Number(c)}}catch(i){throw console.error("Error calculating luck stats:",i),i}}function t1(r,e){const t=document.querySelector(e);if(!t)return;const n=e1(r.luckPercent),i=r.probabilities.map(l=>{const u=l.achieved,f=l.wins==="4+"?"4+":l.wins,d=u?"⭐":"";return`
      <div class="luck-probability-row" style="${u?"font-weight: bold; color: #F59E0B;":""}">
        <span class="luck-prob-wins">Winning ${f}:</span>
        <span class="luck-prob-percent">${l.probability.toFixed(1)}%</span>
        <span class="luck-prob-icon">${d}</span>
        ${u?'<span class="luck-prob-label">You did this!</span>':""}
      </div>
    `}).join(""),s=300,o=Math.min(r.luckPercent/s*100,100),a=100/s*100,c=`
    <div class="luck-analysis-card">
      <h3 class="luck-title">🎲 Your Luck Analysis</h3>
      
      <div class="luck-stats-summary">
        <div class="luck-stat-item">
          <span class="luck-stat-label">Tickets:</span>
          <span class="luck-stat-value">${r.tickets||0}</span>
        </div>
        <div class="luck-stat-item">
          <span class="luck-stat-label">Weight:</span>
          <span class="luck-stat-value">${r.weight||0} (${(r.weightPercent||0).toFixed(2)}% of pool)${r.hasProof?" 🧩":""}</span>
        </div>
        <div class="luck-stat-item">
          <span class="luck-stat-label">Expected Wins:</span>
          <span class="luck-stat-value">${(r.expectedWins||0).toFixed(2)} prizes</span>
        </div>
      </div>
      
      <div class="luck-result-box" style="border-color: ${n.color};">
        <div class="luck-tier-header">
          <span class="luck-tier-emoji">${n.emoji}</span>
          <span class="luck-tier-name" style="color: ${n.color};">${n.name}!</span>
          <span class="luck-tier-emoji">${n.emoji}</span>
        </div>
        
        <div class="luck-main-result">
          Won <strong>${r.actualWins||0}</strong> prize${r.actualWins!==1?"s":""} 
          (<strong style="color: ${n.color};">${r.luckPercent||0}% luck</strong>)
        </div>
        
        <div class="luck-bar-container">
          <div class="luck-bar-fill" style="width: ${o}%; background-color: ${n.color};"></div>
          <div class="luck-bar-marker" style="left: ${a}%;">
            <div class="luck-bar-marker-line"></div>
            <div class="luck-bar-marker-label">Expected</div>
          </div>
        </div>
        
        <div class="luck-message" style="color: ${n.color};">
          ${n.message}
        </div>
        
        ${(r.luckPercent||0)>100?`
          <div class="luck-beat-odds">
            You beat the odds by <strong>${(r.luckPercent||0)-100}%</strong>!
          </div>
        `:(r.luckPercent||0)<100&&(r.expectedWins||0)>0?`
          <div class="luck-below-odds">
            ${Math.round(100-(r.luckPercent||0))}% below expected
          </div>
        `:""}
      </div>
      
      <div class="luck-probability-breakdown">
        <h4 class="luck-breakdown-title">Probability Breakdown:</h4>
        ${i}
      </div>
    </div>
  `;t.innerHTML=c}const Cc=["https://dweb.link/ipfs","https://ipfs.io/ipfs","https://w3s.link/ipfs","https://nftstorage.link/ipfs","https://cloudflare-ipfs.com/ipfs","https://cf-ipfs.com/ipfs","https://gateway.pinata.cloud/ipfs"],n1=6e4;async function Pd(r,e=n1){if(!r||r.trim()==="")throw new Error("Invalid CID provided");const t=[];try{console.log("🏠 Attempting to fetch from local files...");const n=["/winners/winners-round-1.json","/participants/participants-round-1.json"];for(const i of n)try{const s=await fetch(i);if(s.ok){const o=await s.json();return console.log(`✅ Successfully fetched from local file: ${i}`),o}}catch{}}catch{console.log("🏠 Local files not available, trying IPFS gateways...")}for(const n of Cc)try{console.log(`Attempting to fetch from ${n}...`);const i=`${n}/${r}`,s=new AbortController,o=setTimeout(()=>s.abort(),e),a=await fetch(i,{signal:s.signal,mode:"cors",headers:{Accept:"application/json"}});if(clearTimeout(o),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const c=await a.json();return console.log(`✅ Successfully fetched from ${n}`),c}catch(i){const s=i.name==="AbortError"?`Timeout after ${e}ms`:i.message;console.warn(`❌ Failed to fetch from ${n}: ${s}`),t.push({gateway:n,error:s}),Cc.indexOf(n)<Cc.length-1&&await new Promise(o=>setTimeout(o,500))}throw new Error(`Failed to fetch CID ${r} from all gateways. Errors: ${t.map(n=>`${n.gateway}: ${n.error}`).join("; ")}`)}async function ec(r,e){const t=await Pd(r);if(t.version!=="1.0")throw new Error(`Unsupported Winners File version: ${t.version}`);if(t.roundId.toString()!==e.toString())throw new Error(`Round ID mismatch: expected ${e}, got ${t.roundId}`);if(!t.winners||!Array.isArray(t.winners))throw new Error("Invalid Winners File: missing winners array");if(t.winners.length!==10)throw new Error(`Invalid Winners File: expected 10 winners, got ${t.winners.length}`);if(!t.merkle||!t.merkle.root)throw new Error("Invalid Winners File: missing merkle root");return console.log(`✅ Winners File validated for round ${e}`),t}const r1=Object.freeze(Object.defineProperty({__proto__:null,fetchFromIPFS:Pd,fetchWinnersFile:ec},Symbol.toStringTag,{value:"Module"}));function i1(){console.log("Initializing UI components...");const r=document.getElementById("dev-version-badge"),e=document.getElementById("dev-version-number");r&&e&&ke.DEV_MODE&&(r.style.display="block",e.textContent=kd),s1(),o1()}function s1(){const r=window.location.pathname;document.querySelectorAll("nav a").forEach(t=>{t.classList.remove("active"),(t.getAttribute("href")===r||r==="/"&&t.getAttribute("href")==="/")&&t.classList.add("active")})}function o1(){const r=document.getElementById("wallet-info");r&&(r.style.display="none");const e=document.getElementById("bet-summary");e&&(e.style.display="none"),a1()}function a1(){const r=document.getElementById("proof-input");r&&(r.value=""),document.querySelectorAll(".ticket-option-card").forEach(t=>t.classList.remove("selected"))}async function pl(r,e){try{const t=document.getElementById("wallet-info"),n=document.getElementById("wallet-balance"),i=document.getElementById("wallet-address-display"),s=document.getElementById("wallet-network-display"),o=document.getElementById("connect-wallet");if(i&&(i.textContent=Ta(r)),ke.DEV_MODE&&s&&e)try{const l=await e.getNetwork(),u=zs.NETWORK_NAMES[Number(l.chainId)]||"Unknown",f=Number(l.chainId),d=f!==ke.chainId;d?(s.textContent=` (⚠️ ${u}: ${f} - WRONG!)`,s.style.color="var(--error-color, #ff6b6b)",s.style.fontWeight="bold"):(s.textContent=` (${u}: ${f})`,s.style.color="",s.style.fontWeight=""),console.log("🌐 Network check:",{current:f,expected:ke.chainId,isCorrect:!d})}catch(l){s.textContent=" (Network: Unknown)",console.error("❌ Could not check network:",l)}else s&&(s.style.display="none");if(e&&n)try{console.log("💰 Fetching balance for:",r);const l=await e.getBalance(r),u=Tr(l);console.log("💰 Balance fetched:",u,"ETH"),n.textContent=parseFloat(u).toFixed(4)}catch(l){console.error("❌ Error fetching balance:",l),n.textContent="Error"}if(e)try{const l=await e.getNetwork(),u=Number(l.chainId);u!==ke.chainId?(console.error("🚨 WRONG NETWORK DETECTED!"),console.error("   Current:",u,zs.NETWORK_NAMES[u]||"Unknown"),console.error("   Expected:",ke.chainId,ke.network),$u()):Xa(l.chainId)}catch(l){console.error("❌ Network validation error:",l.message),$u()}const a=document.getElementById("verification-link");if(a){const l=ke.DEV_MODE?"sepolia.etherscan.io":"etherscan.io";a.href=`https://${l}/address/${ke.address}#code`}const c=document.getElementById("contract-version");c&&(c.textContent=`• ${kd}`),t&&(t.style.display="block"),o&&(o.style.display="none")}catch(t){console.error("Error updating wallet info:",t),Y("Failed to update wallet information","error")}}async function fn(r,e=null,t=null){try{if(!r){const d=document.getElementById("time-remaining"),g=document.getElementById("total-tickets");document.querySelectorAll(".status-item").forEach(m=>{m.classList.remove("active");const w=m.dataset.status;(w==="1"||w.includes(",")&&w.split(",").includes("1"))&&m.classList.add("active")}),d&&(d.textContent="7d 0h 0m 0s (Mock)"),g&&(g.textContent="1,234 (Mock)");return}const n=await r.currentRoundId();if(n.toString()==="0"){const d=document.getElementById("current-round-title");d&&(d.textContent="Current Round: Being Created...");const g=document.getElementById("time-remaining");g&&(g.textContent="Coming Soon");const x=document.getElementById("total-tickets");x&&(x.textContent="0"),document.querySelectorAll(".status-item").forEach(w=>{w.classList.remove("active")});return}let i;t?i=t.round:i=await r.getRound(n);const s=document.getElementById("current-round-title");s&&(s.textContent=`Current Round: ${n}`);const o=document.querySelectorAll(".status-item"),a=Number(i.status);o.forEach(d=>{d.classList.remove("active");const g=d.dataset.status;g.includes(",")?g.split(",").map(m=>Number(m.trim())).includes(a)&&d.classList.add("active"):Number(g)===a&&d.classList.add("active")});const c=document.getElementById("merkle-badge");c&&(a>=2?c.classList.add("visible"):c.classList.remove("visible"));const l=document.getElementById("time-remaining");if(l){const d=Number(i.endTime)*1e3;c1(l,d)}const u=document.getElementById("total-tickets");u&&(u.textContent=i.totalTickets.toString());const f=document.getElementById("vaulted-eth");if(f&&e)try{const d=await e.getBalance(ke.address),g=Tr(d);f.textContent=parseFloat(g).toFixed(4)}catch{f.textContent="--"}}catch(n){console.error("Error updating round status:",n);const i=document.getElementById("round-status-text");i&&(i.textContent="Error Loading")}}async function Fa(r,e=null){try{const t=document.getElementById("dispenser-text"),n=document.getElementById("dispenser-badge"),i=document.querySelectorAll(".ticket-icon");if(!r){t&&(t.textContent="minimum 10 tickets required"),i.forEach(c=>c.classList.remove("purchased"));return}const s=await r.currentRoundId();if(s.toString()==="0"){t&&(t.textContent="minimum 10 tickets required"),i.forEach(c=>c.classList.remove("purchased"));return}let o;e?o=e.round:o=await r.getRound(s);const a=Number(o.totalTickets);i.forEach((c,l)=>{l<a?c.classList.add("purchased"):c.classList.remove("purchased")}),t&&n&&(a>=10?(t.textContent="🐸 PEPEDAWN will be dispensed",n.classList.add("dispensing"),n.classList.remove("waiting")):(t.textContent="minimum 10 tickets required",n.classList.add("waiting"),n.classList.remove("dispensing")))}catch(t){console.error("Error updating dispenser progress:",t)}}async function Qu(r){try{const e=document.getElementById("round-select"),t=document.getElementById("winners-round-select"),n=document.getElementById("claims-round-select");if(!r)return;const i=await r.currentRoundId(),s=Number(i);if(e){e.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),e.appendChild(a)}}if(t){t.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),t.appendChild(a)}}if(n){n.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),n.appendChild(a)}}}catch(e){console.error("Error populating round selector:",e)}}async function Fr(r,e=null){try{const t=document.getElementById("leaderboard-list"),n=document.getElementById("leaderboard-title");if(!t||!window.location.pathname.includes("leaderboard.html"))return;if(!r){const g=`
        <div class="leaderboard-header">
          <span>Rank</span>
          <span>Address</span>
          <span>Tickets</span>
          <span>Weight</span>
          <span>Winning Odds</span>
        </div>
        ${[{address:"0x1234...5678",tickets:50,weight:70,fakeOdds:"12.5%",hasVerifiedProof:!0},{address:"0xabcd...efgh",tickets:35,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!1},{address:"0x9876...4321",tickets:25,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!0}].map((x,m)=>`
          <div class="leaderboard-entry">
            <span class="rank">#${m+1}</span>
            <span class="address">${x.address} (Mock)${x.hasVerifiedProof?" 🧩":""}</span>
            <span class="tickets">${x.tickets}</span>
            <span class="weight">${x.weight}</span>
            <span class="odds">${x.fakeOdds}</span>
          </div>
        `).join("")}
      `;t.innerHTML=g;return}let i;if(e?i=e:i=await r.currentRoundId(),n&&(n.textContent=`Leaderboard Round: ${i}`),i.toString()==="0"){t.innerHTML="<p>No active round</p>";return}const s=await r.currentRoundId();if(Number(i)>Number(s)){t.innerHTML=`
        <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-secondary);">
          <h3>🚀 Future Round</h3>
          <p>Round ${i} hasn't started yet.</p>
          <p>This round will begin after Round ${s} ends.</p>
        </div>
      `;return}const o=await r.getRound(i),a=Number(o.status);if(a===7){t.innerHTML=`
        <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-secondary);">
          <h3>💰 Round Refunded</h3>
          <p>Round ${i} was refunded due to insufficient participation.</p>
          <p>All participants have been refunded their wagers.</p>
        </div>
      `;return}if(o.totalTickets.toString()==="0"){t.innerHTML="<p>No participants yet</p>";return}const c=a===6;let l=null;if(c)try{const d=await r.winnersCIDs(i);d&&(l=await ec(d,i))}catch(d){console.warn("Could not fetch winners file for luck calculation:",d)}const u=[];try{const d=await r.getRoundParticipants(i);for(let g=0;g<d.length;g++){const x=d[g];try{const m=await r.getUserStats(i,x),w=o.totalWeight>0?(Number(m.weight)/Number(o.totalWeight)*100).toFixed(1):"0.0";let v=!1;if(m.hasProof)try{v=(await r.userProofInRound(i,x)).verified}catch{v=!1}let A=null;if(c&&l)try{A=(await Id(r,i,x,l)).luckPercent}catch{A=null}u.push({address:x,tickets:Number(m.tickets),weight:Number(m.weight),fakeOdds:w+"%",hasVerifiedProof:v,luckScore:A})}catch{}}}catch(d){!d.message.includes("execution reverted")&&!d.message.includes("Round not initialized")&&console.warn("Error fetching participants for leaderboard:",d)}u.sort((d,g)=>g.weight-d.weight);const f=`
      <div class="leaderboard-header ${c?"with-luck":""}">
        <span>Rank</span>
        <span>Address</span>
        <span>Tickets</span>
        <span>Weight</span>
        <span>Winning Odds</span>
        ${c?"<span>Luck</span>":""}
      </div>
      ${u.map((d,g)=>{let x="😐";c&&d.luckScore!==null&&(d.luckScore===0?x="😢":d.luckScore<50?x="😕":d.luckScore>=150&&d.luckScore<200?x="🍀":d.luckScore>=200&&d.luckScore<300?x="✨":d.luckScore>=300&&(x="🎰"));const m=c?d.luckScore!==null?`${d.luckScore}% ${x}`:"-":"";return`
          <div class="leaderboard-entry ${c?"with-luck":""}">
            <span class="rank">#${g+1}</span>
            <span class="address">${Ta(d.address)}${d.hasVerifiedProof?" 🧩":""}</span>
            <span class="tickets">${d.tickets}</span>
            <span class="weight">${d.weight}</span>
            <span class="odds">${d.fakeOdds}</span>
            ${c?`<span class="luck-score">${m}</span>`:""}
            
            <!-- Mobile structure -->
            <div class="mobile-data-grid">
              <div class="data-item">
                <span class="data-label">Tickets</span>
                <span class="data-value">${d.tickets}</span>
              </div>
              <div class="data-item">
                <span class="data-label">Weight</span>
                <span class="data-value">${d.weight}${d.hasVerifiedProof?" 🧩":""}</span>
              </div>
              <div class="data-item">
                <span class="data-label">Odds</span>
                <span class="data-value">${d.fakeOdds}</span>
              </div>
              ${c?`
                <div class="data-item">
                  <span class="data-label">Luck</span>
                  <span class="data-value">${m}</span>
                </div>
              `:""}
            </div>
          </div>
        `}).join("")}
    `;t.innerHTML=f}catch(t){console.error("Error updating leaderboard:",t);const n=document.getElementById("leaderboard-list");n&&(n.innerHTML="<p>Error loading leaderboard</p>")}}async function Cn(r,e,t=null){try{const n=document.getElementById("user-tickets"),i=document.getElementById("user-weight"),s=document.getElementById("user-proof-status"),o=document.getElementById("user-fake-odds"),a=document.getElementById("cap-remaining");if(!r||!e){n&&(n.textContent="0 (No Contract)"),i&&(i.textContent="0 (No Contract)"),s&&(s.textContent="No (No Contract)"),o&&(o.textContent="0% (No Contract)"),a&&(a.textContent="1.0 (No Contract)");return}const c=await r.currentRoundId();if(c.toString()==="0"){n&&(n.textContent="0"),i&&(i.textContent="0"),s&&(s.textContent="No Active Round"),o&&(o.textContent="0%"),a&&(a.textContent="1.0");return}let l,u;try{if(t?u=t.round:u=await r.getRound(c),!u||u.status===void 0)throw new Error("Round not initialized");l=await r.getUserStats(c,e)}catch(f){f.message.includes("execution reverted")||f.message.includes("Round not initialized")||f.message.includes("call revert exception")||f.code==="CALL_EXCEPTION"||console.warn("Unexpected error fetching round data:",f),n&&(n.textContent="0"),i&&(i.textContent="0"),s&&(s.textContent="Round Not Available"),o&&(o.textContent="0%"),a&&(a.textContent="1.0");return}if(n&&(n.textContent=l.tickets.toString()),i&&(i.textContent=l.weight.toString()),s)if(l.hasProof)try{(await r.userProofInRound(c,e)).verified?(s.textContent="Yes (+40%)",s.className="proof-success"):(s.innerHTML='Yes (<span style="color: red;">failed</span>)',s.className="proof-failed")}catch{s.textContent="Yes"}else s.textContent="No",s.className="";if(o)if(Number(u.totalWeight)>0&&Number(l.weight)>0){const f=(Number(l.weight)/Number(u.totalWeight)*100).toFixed(1);o.textContent=f+"%"}else o.textContent="0%";if(a){const d=(1-Number(Tr(l.wagered||"0"))).toFixed(3);a.textContent=d}}catch(n){console.error("Error updating user stats:",n);const i=document.getElementById("user-tickets");i&&(i.textContent="Error")}}function c1(r,e){return Xm(r,e)}function Y(r,e="info"){let t=document.getElementById("tx-status");t||(t=document.createElement("div"),t.id="tx-status",t.className="tx-status",document.body.appendChild(t)),t.textContent=r,t.className=`tx-status ${e}`,t.style.display="block";let n;switch(e){case"success":n=5e3;break;case"error":n=8e3;break;case"info":n=4e3;break;case"warning":n=6e3;break;default:n=5e3}setTimeout(()=>{t.style.display="none"},n)}function l1(){const r=document.getElementById("tx-status");r&&(r.style.display="none")}function u1(){return new Promise(r=>{const e=document.createElement("div");e.className="modal-overlay",e.id="wallet-warning-modal",e.innerHTML=`
      <div class="modal-content">
        <div class="modal-header">
          <span class="modal-icon">🐸</span>
          <h2 class="modal-title">Wallet Security Warning Expected</h2>
        </div>
        <div class="modal-body">
          <p><strong>Your wallet (MetaMask, etc.) will likely show a security warning.</strong> This is completely normal and expected.</p>
          
          <p><strong>Why does this happen?</strong></p>
          <p>This contract uses ETH transfers with verifiable randomness (Chainlink VRF) to distribute 133 Counterparty Rare Pepe art assets. Wallets automatically flag any contract involving payments + randomness as a potential "gambling" contract.</p>
          
          <div class="modal-highlight">
            <p><strong>✅ This is a legitimate art distribution mechanism, not a casino.</strong></p>
            <p>• Fixed supply: 133 Bitcoin/Counterparty assets</p>
            <p>• No house edge or profit generation</p>
            <p>• Fees cover distribution/operations only</p>
            <p>• No financial returns promised</p>
            <p>• Contract verified on Etherscan</p>
            <p>• Security audited with Slither 🛡️</p>
          </div>
          
          <p><strong>What should you do?</strong></p>
          <p>Review the transaction details in your wallet and proceed if you understand the risks. You are participating in an art drop with verifiable randomness.</p>
        </div>
        <div class="modal-actions">
          <button class="modal-btn modal-btn-cancel" id="modal-cancel">Cancel</button>
          <button class="modal-btn modal-btn-confirm" id="modal-confirm">I Understand, Continue</button>
        </div>
      </div>
    `,document.body.appendChild(e),requestAnimationFrame(()=>{e.classList.add("show")}),e.querySelector("#modal-cancel").addEventListener("click",()=>{ea(e,!1,r)}),e.querySelector("#modal-confirm").addEventListener("click",()=>{ea(e,!0,r)}),e.addEventListener("click",s=>{s.target===e&&ea(e,!1,r)});const i=s=>{s.key==="Escape"&&(ea(e,!1,r),document.removeEventListener("keydown",i))};document.addEventListener("keydown",i)})}function ea(r,e,t){r.classList.remove("show"),setTimeout(()=>{r.remove(),t(e)},300)}function $u(){const r=zs.NETWORK_NAMES[ke.chainId],e=`⚠️ Wrong Network! Please switch to ${r} (${ke.chainId})`;if(console.error("🚨 NETWORK MISMATCH - Showing switch prompt"),Y(e,"error"),window.ethereum&&window.ethereum.request){console.log("📱 Adding network switch button for MetaMask");const t=document.createElement("button");t.textContent=`Switch to ${r}`,t.className="switch-network-btn",t.style.marginTop="10px",t.onclick=async()=>{try{console.log("🔄 User clicked switch network button"),await f1(),l1()}catch(i){console.error("Failed to switch network:",i),Y("Failed to switch network: "+i.message,"error")}};const n=document.getElementById("tx-status");n&&!n.querySelector(".switch-network-btn")&&n.appendChild(t)}}async function f1(){if(!window.ethereum)throw new Error("Wallet not detected");const r="0x"+ke.chainId.toString(16),e={chainId:r,chainName:"Sepolia Testnet",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]};try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}catch(t){if(t.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[e]});else throw t}}function jn(r,e){if(!r||!e)return;const t=document.getElementById("security-status");t&&Promise.all([r.paused().catch(()=>!1),r.emergencyPaused().catch(()=>!1),r.denylisted(e).catch(()=>!1)]).then(([n,i,s])=>{let o="✅ All systems operational",a="security-status normal";s?(o="🚫 Address is denylisted",a="security-status error"):i?(o="⚠️ Emergency pause active",a="security-status warning"):n&&(o="⏸️ Contract paused",a="security-status warning"),t.textContent=o,t.className=a}).catch(n=>{console.error("Error checking security status:",n),t.textContent="❓ Security status unknown",t.className="security-status unknown"})}function h1(r){const{amount:e,tickets:t,userAddress:n}=r;if(!e||isNaN(e)||e<=0)throw new Error("Invalid bet amount");if(!t||!Number.isInteger(t)||t<=0)throw new Error("Invalid ticket count");if(!n||!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error("Invalid user address");return!0}function Dd(r,e){console.error(`Transaction error (${e}):`,r);let t="Transaction failed",n="error";return r.message.includes("user rejected")?(t="Transaction cancelled by user",n="info"):r.message.includes("insufficient funds")?t="Insufficient ETH balance for transaction":r.message.includes("gas")?t="Transaction failed due to gas issues":r.message.includes("nonce")?t="Transaction nonce error - please try again":r.message.includes("network")?t="Network error - please check connection":r.code==="CALL_EXCEPTION"&&(t="Contract call failed - check requirements"),Y(t,n),{message:t,type:n,originalError:r}}var le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function d1(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Rd={},Oo={},Mo={},tc={};tc.byteLength=y1;tc.toByteArray=m1;tc.fromByteArray=A1;var vn=[],Ot=[],p1=typeof Uint8Array<"u"?Uint8Array:Array,kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Si=0,g1=kc.length;Si<g1;++Si)vn[Si]=kc[Si],Ot[kc.charCodeAt(Si)]=Si;Ot[45]=62;Ot[95]=63;function Sd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function y1(r){var e=Sd(r),t=e[0],n=e[1];return(t+n)*3/4-n}function x1(r,e,t){return(e+t)*3/4-t}function m1(r){var e,t=Sd(r),n=t[0],i=t[1],s=new p1(x1(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=Ot[r.charCodeAt(c)]<<18|Ot[r.charCodeAt(c+1)]<<12|Ot[r.charCodeAt(c+2)]<<6|Ot[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ot[r.charCodeAt(c)]<<2|Ot[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Ot[r.charCodeAt(c)]<<10|Ot[r.charCodeAt(c+1)]<<4|Ot[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function w1(r){return vn[r>>18&63]+vn[r>>12&63]+vn[r>>6&63]+vn[r&63]}function b1(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(w1(n));return i.join("")}function A1(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(b1(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(vn[e>>2]+vn[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(vn[e>>10]+vn[e>>4&63]+vn[e<<2&63]+"=")),i.join("")}var gl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gl.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,f=t?i-1:0,d=t?-1:1,g=r[e+f];for(f+=d,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+r[e+f],f+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+f],f+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(g?-1:1)*o*Math.pow(2,s-n)};gl.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,x=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=d/c:e+=d*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+g]=a&255,g+=x,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+g]=o&255,g+=x,o/=256,l-=8);r[t+g-x]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=tc,t=gl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=A,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const b=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(b,h),b.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const h=new Uint8Array(b);return Object.setPrototypeOf(h,a.prototype),h}function a(b,h,p){if(typeof b=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(b)}return c(b,h,p)}a.poolSize=8192;function c(b,h,p){if(typeof b=="string")return d(b,h);if(ArrayBuffer.isView(b))return x(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(Ue(b,ArrayBuffer)||b&&Ue(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(b,SharedArrayBuffer)||b&&Ue(b.buffer,SharedArrayBuffer)))return m(b,h,p);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=b.valueOf&&b.valueOf();if(B!=null&&B!==b)return a.from(B,h,p);const R=w(b);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return a.from(b[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}a.from=function(b,h,p){return c(b,h,p)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function u(b,h,p){return l(b),b<=0?o(b):h!==void 0?typeof p=="string"?o(b).fill(h,p):o(b).fill(h):o(b)}a.alloc=function(b,h,p){return u(b,h,p)};function f(b){return l(b),o(b<0?0:v(b)|0)}a.allocUnsafe=function(b){return f(b)},a.allocUnsafeSlow=function(b){return f(b)};function d(b,h){if((typeof h!="string"||h==="")&&(h="utf8"),!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const p=E(b,h)|0;let B=o(p);const R=B.write(b,h);return R!==p&&(B=B.slice(0,R)),B}function g(b){const h=b.length<0?0:v(b.length)|0,p=o(h);for(let B=0;B<h;B+=1)p[B]=b[B]&255;return p}function x(b){if(Ue(b,Uint8Array)){const h=new Uint8Array(b);return m(h.buffer,h.byteOffset,h.byteLength)}return g(b)}function m(b,h,p){if(h<0||b.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let B;return h===void 0&&p===void 0?B=new Uint8Array(b):p===void 0?B=new Uint8Array(b,h):B=new Uint8Array(b,h,p),Object.setPrototypeOf(B,a.prototype),B}function w(b){if(a.isBuffer(b)){const h=v(b.length)|0,p=o(h);return p.length===0||b.copy(p,0,0,h),p}if(b.length!==void 0)return typeof b.length!="number"||Rt(b.length)?o(0):g(b);if(b.type==="Buffer"&&Array.isArray(b.data))return g(b.data)}function v(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function A(b){return+b!=b&&(b=0),a.alloc(+b)}a.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==a.prototype},a.compare=function(h,p){if(Ue(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),Ue(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(h)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;let B=h.length,R=p.length;for(let O=0,Q=Math.min(B,R);O<Q;++O)if(h[O]!==p[O]){B=h[O],R=p[O];break}return B<R?-1:R<B?1:0},a.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return a.alloc(0);let B;if(p===void 0)for(p=0,B=0;B<h.length;++B)p+=h[B].length;const R=a.allocUnsafe(p);let O=0;for(B=0;B<h.length;++B){let Q=h[B];if(Ue(Q,Uint8Array))O+Q.length>R.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(R,O)):Uint8Array.prototype.set.call(R,Q,O);else if(a.isBuffer(Q))Q.copy(R,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=Q.length}return R};function E(b,h){if(a.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||Ue(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const p=b.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&p===0)return 0;let R=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Xn(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return er(b).length;default:if(R)return B?-1:Xn(b).length;h=(""+h).toLowerCase(),R=!0}}a.byteLength=E;function C(b,h,p){let B=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(b||(b="utf8");;)switch(b){case"hex":return se(this,h,p);case"utf8":case"utf-8":return ee(this,h,p);case"ascii":return re(this,h,p);case"latin1":case"binary":return ie(this,h,p);case"base64":return G(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,h,p);default:if(B)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function F(b,h,p){const B=b[h];b[h]=b[p],b[p]=B}a.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<h;p+=2)F(this,p,p+1);return this},a.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<h;p+=4)F(this,p,p+3),F(this,p+1,p+2);return this},a.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<h;p+=8)F(this,p,p+7),F(this,p+1,p+6),F(this,p+2,p+5),F(this,p+3,p+4);return this},a.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?ee(this,0,h):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(h){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:a.compare(this,h)===0},a.prototype.inspect=function(){let h="";const p=r.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(h,p,B,R,O){if(Ue(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),B===void 0&&(B=h?h.length:0),R===void 0&&(R=0),O===void 0&&(O=this.length),p<0||B>h.length||R<0||O>this.length)throw new RangeError("out of range index");if(R>=O&&p>=B)return 0;if(R>=O)return-1;if(p>=B)return 1;if(p>>>=0,B>>>=0,R>>>=0,O>>>=0,this===h)return 0;let Q=O-R,he=B-p;const Ne=Math.min(Q,he),Re=this.slice(R,O),Le=h.slice(p,B);for(let Be=0;Be<Ne;++Be)if(Re[Be]!==Le[Be]){Q=Re[Be],he=Le[Be];break}return Q<he?-1:he<Q?1:0};function T(b,h,p,B,R){if(b.length===0)return-1;if(typeof p=="string"?(B=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Rt(p)&&(p=R?0:b.length-1),p<0&&(p=b.length+p),p>=b.length){if(R)return-1;p=b.length-1}else if(p<0)if(R)p=0;else return-1;if(typeof h=="string"&&(h=a.from(h,B)),a.isBuffer(h))return h.length===0?-1:D(b,h,p,B,R);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(b,h,p):Uint8Array.prototype.lastIndexOf.call(b,h,p):D(b,[h],p,B,R);throw new TypeError("val must be string, number or Buffer")}function D(b,h,p,B,R){let O=1,Q=b.length,he=h.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(b.length<2||h.length<2)return-1;O=2,Q/=2,he/=2,p/=2}function Ne(Le,Be){return O===1?Le[Be]:Le.readUInt16BE(Be*O)}let Re;if(R){let Le=-1;for(Re=p;Re<Q;Re++)if(Ne(b,Re)===Ne(h,Le===-1?0:Re-Le)){if(Le===-1&&(Le=Re),Re-Le+1===he)return Le*O}else Le!==-1&&(Re-=Re-Le),Le=-1}else for(p+he>Q&&(p=Q-he),Re=p;Re>=0;Re--){let Le=!0;for(let Be=0;Be<he;Be++)if(Ne(b,Re+Be)!==Ne(h,Be)){Le=!1;break}if(Le)return Re}return-1}a.prototype.includes=function(h,p,B){return this.indexOf(h,p,B)!==-1},a.prototype.indexOf=function(h,p,B){return T(this,h,p,B,!0)},a.prototype.lastIndexOf=function(h,p,B){return T(this,h,p,B,!1)};function S(b,h,p,B){p=Number(p)||0;const R=b.length-p;B?(B=Number(B),B>R&&(B=R)):B=R;const O=h.length;B>O/2&&(B=O/2);let Q;for(Q=0;Q<B;++Q){const he=parseInt(h.substr(Q*2,2),16);if(Rt(he))return Q;b[p+Q]=he}return Q}function W(b,h,p,B){return rt(Xn(h,b.length-p),b,p,B)}function I(b,h,p,B){return rt(Lr(h),b,p,B)}function N(b,h,p,B){return rt(er(h),b,p,B)}function z(b,h,p,B){return rt(Qs(h,b.length-p),b,p,B)}a.prototype.write=function(h,p,B,R){if(p===void 0)R="utf8",B=this.length,p=0;else if(B===void 0&&typeof p=="string")R=p,B=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(B)?(B=B>>>0,R===void 0&&(R="utf8")):(R=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-p;if((B===void 0||B>O)&&(B=O),h.length>0&&(B<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let Q=!1;for(;;)switch(R){case"hex":return S(this,h,p,B);case"utf8":case"utf-8":return W(this,h,p,B);case"ascii":case"latin1":case"binary":return I(this,h,p,B);case"base64":return N(this,h,p,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,h,p,B);default:if(Q)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(b,h,p){return h===0&&p===b.length?e.fromByteArray(b):e.fromByteArray(b.slice(h,p))}function ee(b,h,p){p=Math.min(b.length,p);const B=[];let R=h;for(;R<p;){const O=b[R];let Q=null,he=O>239?4:O>223?3:O>191?2:1;if(R+he<=p){let Ne,Re,Le,Be;switch(he){case 1:O<128&&(Q=O);break;case 2:Ne=b[R+1],(Ne&192)===128&&(Be=(O&31)<<6|Ne&63,Be>127&&(Q=Be));break;case 3:Ne=b[R+1],Re=b[R+2],(Ne&192)===128&&(Re&192)===128&&(Be=(O&15)<<12|(Ne&63)<<6|Re&63,Be>2047&&(Be<55296||Be>57343)&&(Q=Be));break;case 4:Ne=b[R+1],Re=b[R+2],Le=b[R+3],(Ne&192)===128&&(Re&192)===128&&(Le&192)===128&&(Be=(O&15)<<18|(Ne&63)<<12|(Re&63)<<6|Le&63,Be>65535&&Be<1114112&&(Q=Be))}}Q===null?(Q=65533,he=1):Q>65535&&(Q-=65536,B.push(Q>>>10&1023|55296),Q=56320|Q&1023),B.push(Q),R+=he}return j(B)}const _=4096;function j(b){const h=b.length;if(h<=_)return String.fromCharCode.apply(String,b);let p="",B=0;for(;B<h;)p+=String.fromCharCode.apply(String,b.slice(B,B+=_));return p}function re(b,h,p){let B="";p=Math.min(b.length,p);for(let R=h;R<p;++R)B+=String.fromCharCode(b[R]&127);return B}function ie(b,h,p){let B="";p=Math.min(b.length,p);for(let R=h;R<p;++R)B+=String.fromCharCode(b[R]);return B}function se(b,h,p){const B=b.length;(!h||h<0)&&(h=0),(!p||p<0||p>B)&&(p=B);let R="";for(let O=h;O<p;++O)R+=Ii[b[O]];return R}function ae(b,h,p){const B=b.slice(h,p);let R="";for(let O=0;O<B.length-1;O+=2)R+=String.fromCharCode(B[O]+B[O+1]*256);return R}a.prototype.slice=function(h,p){const B=this.length;h=~~h,p=p===void 0?B:~~p,h<0?(h+=B,h<0&&(h=0)):h>B&&(h=B),p<0?(p+=B,p<0&&(p=0)):p>B&&(p=B),p<h&&(p=h);const R=this.subarray(h,p);return Object.setPrototypeOf(R,a.prototype),R};function U(b,h,p){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+h>p)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||U(h,p,this.length);let R=this[h],O=1,Q=0;for(;++Q<p&&(O*=256);)R+=this[h+Q]*O;return R},a.prototype.readUintBE=a.prototype.readUIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||U(h,p,this.length);let R=this[h+--p],O=1;for(;p>0&&(O*=256);)R+=this[h+--p]*O;return R},a.prototype.readUint8=a.prototype.readUInt8=function(h,p){return h=h>>>0,p||U(h,1,this.length),this[h]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||U(h,2,this.length),this[h]|this[h+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||U(h,2,this.length),this[h]<<8|this[h+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||U(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||U(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},a.prototype.readBigUInt64LE=Vt(function(h){h=h>>>0,ve(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&De(h,this.length-8);const R=p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,O=this[++h]+this[++h]*2**8+this[++h]*2**16+B*2**24;return BigInt(R)+(BigInt(O)<<BigInt(32))}),a.prototype.readBigUInt64BE=Vt(function(h){h=h>>>0,ve(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&De(h,this.length-8);const R=p*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],O=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+B;return(BigInt(R)<<BigInt(32))+BigInt(O)}),a.prototype.readIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||U(h,p,this.length);let R=this[h],O=1,Q=0;for(;++Q<p&&(O*=256);)R+=this[h+Q]*O;return O*=128,R>=O&&(R-=Math.pow(2,8*p)),R},a.prototype.readIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||U(h,p,this.length);let R=p,O=1,Q=this[h+--R];for(;R>0&&(O*=256);)Q+=this[h+--R]*O;return O*=128,Q>=O&&(Q-=Math.pow(2,8*p)),Q},a.prototype.readInt8=function(h,p){return h=h>>>0,p||U(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},a.prototype.readInt16LE=function(h,p){h=h>>>0,p||U(h,2,this.length);const B=this[h]|this[h+1]<<8;return B&32768?B|4294901760:B},a.prototype.readInt16BE=function(h,p){h=h>>>0,p||U(h,2,this.length);const B=this[h+1]|this[h]<<8;return B&32768?B|4294901760:B},a.prototype.readInt32LE=function(h,p){return h=h>>>0,p||U(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},a.prototype.readInt32BE=function(h,p){return h=h>>>0,p||U(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},a.prototype.readBigInt64LE=Vt(function(h){h=h>>>0,ve(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&De(h,this.length-8);const R=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(B<<24);return(BigInt(R)<<BigInt(32))+BigInt(p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),a.prototype.readBigInt64BE=Vt(function(h){h=h>>>0,ve(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&De(h,this.length-8);const R=(p<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(R)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+B)}),a.prototype.readFloatLE=function(h,p){return h=h>>>0,p||U(h,4,this.length),t.read(this,h,!0,23,4)},a.prototype.readFloatBE=function(h,p){return h=h>>>0,p||U(h,4,this.length),t.read(this,h,!1,23,4)},a.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||U(h,8,this.length),t.read(this,h,!0,52,8)},a.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||U(h,8,this.length),t.read(this,h,!1,52,8)};function H(b,h,p,B,R,O){if(!a.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>R||h<O)throw new RangeError('"value" argument is out of bounds');if(p+B>b.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(h,p,B,R){if(h=+h,p=p>>>0,B=B>>>0,!R){const he=Math.pow(2,8*B)-1;H(this,h,p,B,he,0)}let O=1,Q=0;for(this[p]=h&255;++Q<B&&(O*=256);)this[p+Q]=h/O&255;return p+B},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(h,p,B,R){if(h=+h,p=p>>>0,B=B>>>0,!R){const he=Math.pow(2,8*B)-1;H(this,h,p,B,he,0)}let O=B-1,Q=1;for(this[p+O]=h&255;--O>=0&&(Q*=256);)this[p+O]=h/Q&255;return p+B},a.prototype.writeUint8=a.prototype.writeUInt8=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,1,255,0),this[p]=h&255,p+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function q(b,h,p,B,R){lt(h,B,R,b,p,7);let O=Number(h&BigInt(4294967295));b[p++]=O,O=O>>8,b[p++]=O,O=O>>8,b[p++]=O,O=O>>8,b[p++]=O;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return b[p++]=Q,Q=Q>>8,b[p++]=Q,Q=Q>>8,b[p++]=Q,Q=Q>>8,b[p++]=Q,p}function $(b,h,p,B,R){lt(h,B,R,b,p,7);let O=Number(h&BigInt(4294967295));b[p+7]=O,O=O>>8,b[p+6]=O,O=O>>8,b[p+5]=O,O=O>>8,b[p+4]=O;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return b[p+3]=Q,Q=Q>>8,b[p+2]=Q,Q=Q>>8,b[p+1]=Q,Q=Q>>8,b[p]=Q,p+8}a.prototype.writeBigUInt64LE=Vt(function(h,p=0){return q(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Vt(function(h,p=0){return $(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(h,p,B,R){if(h=+h,p=p>>>0,!R){const Ne=Math.pow(2,8*B-1);H(this,h,p,B,Ne-1,-Ne)}let O=0,Q=1,he=0;for(this[p]=h&255;++O<B&&(Q*=256);)h<0&&he===0&&this[p+O-1]!==0&&(he=1),this[p+O]=(h/Q>>0)-he&255;return p+B},a.prototype.writeIntBE=function(h,p,B,R){if(h=+h,p=p>>>0,!R){const Ne=Math.pow(2,8*B-1);H(this,h,p,B,Ne-1,-Ne)}let O=B-1,Q=1,he=0;for(this[p+O]=h&255;--O>=0&&(Q*=256);)h<0&&he===0&&this[p+O+1]!==0&&(he=1),this[p+O]=(h/Q>>0)-he&255;return p+B},a.prototype.writeInt8=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},a.prototype.writeInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},a.prototype.writeInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},a.prototype.writeBigInt64LE=Vt(function(h,p=0){return q(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Vt(function(h,p=0){return $(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(b,h,p,B,R,O){if(p+B>b.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ge(b,h,p,B,R){return h=+h,p=p>>>0,R||be(b,h,p,4),t.write(b,h,p,B,23,4),p+4}a.prototype.writeFloatLE=function(h,p,B){return ge(this,h,p,!0,B)},a.prototype.writeFloatBE=function(h,p,B){return ge(this,h,p,!1,B)};function Pe(b,h,p,B,R){return h=+h,p=p>>>0,R||be(b,h,p,8),t.write(b,h,p,B,52,8),p+8}a.prototype.writeDoubleLE=function(h,p,B){return Pe(this,h,p,!0,B)},a.prototype.writeDoubleBE=function(h,p,B){return Pe(this,h,p,!1,B)},a.prototype.copy=function(h,p,B,R){if(!a.isBuffer(h))throw new TypeError("argument should be a Buffer");if(B||(B=0),!R&&R!==0&&(R=this.length),p>=h.length&&(p=h.length),p||(p=0),R>0&&R<B&&(R=B),R===B||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),h.length-p<R-B&&(R=h.length-p+B);const O=R-B;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,B,R):Uint8Array.prototype.set.call(h,this.subarray(B,R),p),O},a.prototype.fill=function(h,p,B,R){if(typeof h=="string"){if(typeof p=="string"?(R=p,p=0,B=this.length):typeof B=="string"&&(R=B,B=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!a.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(h.length===1){const Q=h.charCodeAt(0);(R==="utf8"&&Q<128||R==="latin1")&&(h=Q)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<B)throw new RangeError("Out of range index");if(B<=p)return this;p=p>>>0,B=B===void 0?this.length:B>>>0,h||(h=0);let O;if(typeof h=="number")for(O=p;O<B;++O)this[O]=h;else{const Q=a.isBuffer(h)?h:a.from(h,R),he=Q.length;if(he===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(O=0;O<B-p;++O)this[O+p]=Q[O%he]}return this};const ce={};function Ze(b,h,p){ce[b]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(b,h){return`The "${b}" argument must be of type number. Received type ${typeof h}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(b,h,p){let B=`The value of "${b}" is out of range.`,R=p;return Number.isInteger(p)&&Math.abs(p)>2**32?R=nt(String(p)):typeof p=="bigint"&&(R=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(R=nt(R)),R+="n"),B+=` It must be ${h}. Received ${R}`,B},RangeError);function nt(b){let h="",p=b.length;const B=b[0]==="-"?1:0;for(;p>=B+4;p-=3)h=`_${b.slice(p-3,p)}${h}`;return`${b.slice(0,p)}${h}`}function Yn(b,h,p){ve(h,"offset"),(b[h]===void 0||b[h+p]===void 0)&&De(h,b.length-(p+1))}function lt(b,h,p,B,R,O){if(b>p||b<h){const Q=typeof h=="bigint"?"n":"";let he;throw h===0||h===BigInt(0)?he=`>= 0${Q} and < 2${Q} ** ${(O+1)*8}${Q}`:he=`>= -(2${Q} ** ${(O+1)*8-1}${Q}) and < 2 ** ${(O+1)*8-1}${Q}`,new ce.ERR_OUT_OF_RANGE("value",he,b)}Yn(B,R,O)}function ve(b,h){if(typeof b!="number")throw new ce.ERR_INVALID_ARG_TYPE(h,"number",b)}function De(b,h,p){throw Math.floor(b)!==b?(ve(b,p),new ce.ERR_OUT_OF_RANGE("offset","an integer",b)):h<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,b)}const Tn=/[^+/0-9A-Za-z-_]/g;function cn(b){if(b=b.split("=")[0],b=b.trim().replace(Tn,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function Xn(b,h){h=h||1/0;let p;const B=b.length;let R=null;const O=[];for(let Q=0;Q<B;++Q){if(p=b.charCodeAt(Q),p>55295&&p<57344){if(!R){if(p>56319){(h-=3)>-1&&O.push(239,191,189);continue}else if(Q+1===B){(h-=3)>-1&&O.push(239,191,189);continue}R=p;continue}if(p<56320){(h-=3)>-1&&O.push(239,191,189),R=p;continue}p=(R-55296<<10|p-56320)+65536}else R&&(h-=3)>-1&&O.push(239,191,189);if(R=null,p<128){if((h-=1)<0)break;O.push(p)}else if(p<2048){if((h-=2)<0)break;O.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;O.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;O.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return O}function Lr(b){const h=[];for(let p=0;p<b.length;++p)h.push(b.charCodeAt(p)&255);return h}function Qs(b,h){let p,B,R;const O=[];for(let Q=0;Q<b.length&&!((h-=2)<0);++Q)p=b.charCodeAt(Q),B=p>>8,R=p%256,O.push(R),O.push(B);return O}function er(b){return e.toByteArray(cn(b))}function rt(b,h,p,B){let R;for(R=0;R<B&&!(R+p>=h.length||R>=b.length);++R)h[R+p]=b[R];return R}function Ue(b,h){return b instanceof h||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===h.name}function Rt(b){return b!==b}const Ii=function(){const b="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){const B=p*16;for(let R=0;R<16;++R)h[B+R]=b[p]+b[R]}return h}();function Vt(b){return typeof BigInt>"u"?tr:b}function tr(){throw new Error("BigInt not supported")}})(Mo);var E1=function(e){for(var t=new Buffer(e.length),n=0,i=e.length-1;n<=i;++n,--i)t[n]=e[i],t[i]=e[n];return t},Nd={exports:{}};function v1(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tc={exports:{}};const B1={},C1=Object.freeze(Object.defineProperty({__proto__:null,default:B1},Symbol.toStringTag,{value:"Module"})),k1=d1(C1);var Ku;function we(){return Ku||(Ku=1,function(r,e){(function(t,n){r.exports=n()})(le,function(){var t=t||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof v1=="function")try{s=k1}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function A(){}return function(E){var C;return A.prototype=E,C=new A,A.prototype=null,C}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(A){var E=a(this);return A&&E.mixIn(A),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var E in A)A.hasOwnProperty(E)&&(this[E]=A[E]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(A,E){A=this.words=A||[],E!=i?this.sigBytes=E:this.sigBytes=A.length*4},toString:function(A){return(A||g).stringify(this)},concat:function(A){var E=this.words,C=A.words,F=this.sigBytes,T=A.sigBytes;if(this.clamp(),F%4)for(var D=0;D<T;D++){var S=C[D>>>2]>>>24-D%4*8&255;E[F+D>>>2]|=S<<24-(F+D)%4*8}else for(var W=0;W<T;W+=4)E[F+W>>>2]=C[W>>>2];return this.sigBytes+=T,this},clamp:function(){var A=this.words,E=this.sigBytes;A[E>>>2]&=4294967295<<32-E%4*8,A.length=n.ceil(E/4)},clone:function(){var A=u.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var E=[],C=0;C<A;C+=4)E.push(o());return new f.init(E,A)}}),d=c.enc={},g=d.Hex={stringify:function(A){for(var E=A.words,C=A.sigBytes,F=[],T=0;T<C;T++){var D=E[T>>>2]>>>24-T%4*8&255;F.push((D>>>4).toString(16)),F.push((D&15).toString(16))}return F.join("")},parse:function(A){for(var E=A.length,C=[],F=0;F<E;F+=2)C[F>>>3]|=parseInt(A.substr(F,2),16)<<24-F%8*4;return new f.init(C,E/2)}},x=d.Latin1={stringify:function(A){for(var E=A.words,C=A.sigBytes,F=[],T=0;T<C;T++){var D=E[T>>>2]>>>24-T%4*8&255;F.push(String.fromCharCode(D))}return F.join("")},parse:function(A){for(var E=A.length,C=[],F=0;F<E;F++)C[F>>>2]|=(A.charCodeAt(F)&255)<<24-F%4*8;return new f.init(C,E)}},m=d.Utf8={stringify:function(A){try{return decodeURIComponent(escape(x.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return x.parse(unescape(encodeURIComponent(A)))}},w=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=m.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var E,C=this._data,F=C.words,T=C.sigBytes,D=this.blockSize,S=D*4,W=T/S;A?W=n.ceil(W):W=n.max((W|0)-this._minBufferSize,0);var I=W*D,N=n.min(I*4,T);if(I){for(var z=0;z<I;z+=D)this._doProcessBlock(F,z);E=F.splice(0,I),C.sigBytes-=N}return new f.init(E,N)},clone:function(){var A=u.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});l.Hasher=w.extend({cfg:u.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(A){return function(E,C){return new A.init(C).finalize(E)}},_createHmacHelper:function(A){return function(E,C){return new v.HMAC.init(A,C).finalize(E)}}});var v=c.algo={};return c}(Math);return t})}(Tc)),Tc.exports}(function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[],u=[];(function(){function g(v){for(var A=n.sqrt(v),E=2;E<=A;E++)if(!(v%E))return!1;return!0}function x(v){return(v-(v|0))*4294967296|0}for(var m=2,w=0;w<64;)g(m)&&(w<8&&(l[w]=x(n.pow(m,1/2))),u[w]=x(n.pow(m,1/3)),w++),m++})();var f=[],d=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(g,x){for(var m=this._hash.words,w=m[0],v=m[1],A=m[2],E=m[3],C=m[4],F=m[5],T=m[6],D=m[7],S=0;S<64;S++){if(S<16)f[S]=g[x+S]|0;else{var W=f[S-15],I=(W<<25|W>>>7)^(W<<14|W>>>18)^W>>>3,N=f[S-2],z=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;f[S]=I+f[S-7]+z+f[S-16]}var G=C&F^~C&T,ee=w&v^w&A^v&A,_=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),j=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),re=D+j+G+u[S]+f[S],ie=_+ee;D=T,T=F,F=C,C=E+re|0,E=A,A=v,v=w,w=re+ie|0}m[0]=m[0]+w|0,m[1]=m[1]+v|0,m[2]=m[2]+A|0,m[3]=m[3]+E|0,m[4]=m[4]+C|0,m[5]=m[5]+F|0,m[6]=m[6]+T|0,m[7]=m[7]+D|0},_doFinalize:function(){var g=this._data,x=g.words,m=this._nDataBytes*8,w=g.sigBytes*8;return x[w>>>5]|=128<<24-w%32,x[(w+64>>>9<<4)+14]=n.floor(m/4294967296),x[(w+64>>>9<<4)+15]=m,g.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),t.SHA256})})(Nd);var Uo=Nd.exports,Ld={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(le,function(){function t(o,a){var c=a?"└":"├";return o?c+="─ ":c+="──┐",c}function n(o,a){var c=[];for(var l in o)o.hasOwnProperty(l)&&(a&&typeof o[l]=="function"||c.push(l));return c}function i(o,a,c,l,u,f,d){var g="",x=0,m,w,v=l.slice(0);if(v.push([a,c])&&l.length>0&&(l.forEach(function(E,C){C>0&&(g+=(E[1]?" ":"│")+"  "),!w&&E[0]===a&&(w=!0)}),g+=t(o,c)+o,u&&(typeof a!="object"||a instanceof Date)&&(g+=": "+a),w&&(g+=" (circular ref.)"),d(g)),!w&&typeof a=="object"){var A=n(a,f);A.forEach(function(E){m=++x===A.length,i(E,a[E],m,v,u,f,d)})}}var s={};return s.asLines=function(o,a,c,l){var u=typeof c!="function"?c:!1;i(".",o,!1,[],a,u,l||c)},s.asTree=function(o,a,c){var l="";return i(".",o,!1,[],a,c,function(u){l+=u+`
`}),l},s})})(Ld);var Od=Ld.exports,Zn={},Md={exports:{}},Fc={exports:{}},qu;function nc(){return qu||(qu=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(n){var i=t,s=i.lib,o=s.Base,a=s.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=n?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,f=[],d=0;d<u;d++){var g=l[d];f.push(g.high),f.push(g.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),f=u.length,d=0;d<f;d++)u[d]=u[d].clone();return l}})}(),t})}(Fc)),Fc.exports}var Ic={exports:{}},ju;function T1(){return ju||(ju=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(){if(typeof ArrayBuffer=="function"){var n=t,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],f=0;f<l;f++)u[f>>>2]|=c[f]<<24-f%4*8;o.call(this,u,l)}else o.apply(this,arguments)};a.prototype=s}}(),t.lib.WordArray})}(Ic)),Ic.exports}var Pc={exports:{}},Ju;function F1(){return Ju||(Ju=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],d=0;d<u;d+=2){var g=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(g))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return s.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],d=0;d<u;d+=2){var g=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(g))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return s.create(u,l*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),t.enc.Utf16})}(Pc)),Pc.exports}var Dc={exports:{}},Zu;function Ti(){return Zu||(Zu=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var d=[],g=0;g<u;g+=3)for(var x=l[g>>>2]>>>24-g%4*8&255,m=l[g+1>>>2]>>>24-(g+1)%4*8&255,w=l[g+2>>>2]>>>24-(g+2)%4*8&255,v=x<<16|m<<8|w,A=0;A<4&&g+A*.75<u;A++)d.push(f.charAt(v>>>6*(3-A)&63));var E=f.charAt(64);if(E)for(;d.length%4;)d.push(E);return d.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<u.length;d++)f[u.charCodeAt(d)]=d}var g=u.charAt(64);if(g){var x=c.indexOf(g);x!==-1&&(l=x)}return a(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],d=0,g=0;g<l;g++)if(g%4){var x=u[c.charCodeAt(g-1)]<<g%4*2,m=u[c.charCodeAt(g)]>>>6-g%4*2,w=x|m;f[d>>>2]|=w<<24-d%4*8,d++}return s.create(f,d)}}(),t.enc.Base64})}(Dc)),Dc.exports}var Rc={exports:{}},Yu;function I1(){return Yu||(Yu=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,d=l?this._safe_map:this._map;c.clamp();for(var g=[],x=0;x<f;x+=3)for(var m=u[x>>>2]>>>24-x%4*8&255,w=u[x+1>>>2]>>>24-(x+1)%4*8&255,v=u[x+2>>>2]>>>24-(x+2)%4*8&255,A=m<<16|w<<8|v,E=0;E<4&&x+E*.75<f;E++)g.push(d.charAt(A>>>6*(3-E)&63));var C=d.charAt(64);if(C)for(;g.length%4;)g.push(C);return g.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var g=0;g<f.length;g++)d[f.charCodeAt(g)]=g}var x=f.charAt(64);if(x){var m=c.indexOf(x);m!==-1&&(u=m)}return a(c,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],d=0,g=0;g<l;g++)if(g%4){var x=u[c.charCodeAt(g-1)]<<g%4*2,m=u[c.charCodeAt(g)]>>>6-g%4*2,w=x|m;f[d>>>2]|=w<<24-d%4*8,d++}return s.create(f,d)}}(),t.enc.Base64url})}(Rc)),Rc.exports}var Sc={exports:{}},Xu;function Fi(){return Xu||(Xu=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=n.abs(n.sin(m+1))*4294967296|0})();var u=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,w){for(var v=0;v<16;v++){var A=w+v,E=m[A];m[A]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var C=this._hash.words,F=m[w+0],T=m[w+1],D=m[w+2],S=m[w+3],W=m[w+4],I=m[w+5],N=m[w+6],z=m[w+7],G=m[w+8],ee=m[w+9],_=m[w+10],j=m[w+11],re=m[w+12],ie=m[w+13],se=m[w+14],ae=m[w+15],U=C[0],H=C[1],q=C[2],$=C[3];U=f(U,H,q,$,F,7,l[0]),$=f($,U,H,q,T,12,l[1]),q=f(q,$,U,H,D,17,l[2]),H=f(H,q,$,U,S,22,l[3]),U=f(U,H,q,$,W,7,l[4]),$=f($,U,H,q,I,12,l[5]),q=f(q,$,U,H,N,17,l[6]),H=f(H,q,$,U,z,22,l[7]),U=f(U,H,q,$,G,7,l[8]),$=f($,U,H,q,ee,12,l[9]),q=f(q,$,U,H,_,17,l[10]),H=f(H,q,$,U,j,22,l[11]),U=f(U,H,q,$,re,7,l[12]),$=f($,U,H,q,ie,12,l[13]),q=f(q,$,U,H,se,17,l[14]),H=f(H,q,$,U,ae,22,l[15]),U=d(U,H,q,$,T,5,l[16]),$=d($,U,H,q,N,9,l[17]),q=d(q,$,U,H,j,14,l[18]),H=d(H,q,$,U,F,20,l[19]),U=d(U,H,q,$,I,5,l[20]),$=d($,U,H,q,_,9,l[21]),q=d(q,$,U,H,ae,14,l[22]),H=d(H,q,$,U,W,20,l[23]),U=d(U,H,q,$,ee,5,l[24]),$=d($,U,H,q,se,9,l[25]),q=d(q,$,U,H,S,14,l[26]),H=d(H,q,$,U,G,20,l[27]),U=d(U,H,q,$,ie,5,l[28]),$=d($,U,H,q,D,9,l[29]),q=d(q,$,U,H,z,14,l[30]),H=d(H,q,$,U,re,20,l[31]),U=g(U,H,q,$,I,4,l[32]),$=g($,U,H,q,G,11,l[33]),q=g(q,$,U,H,j,16,l[34]),H=g(H,q,$,U,se,23,l[35]),U=g(U,H,q,$,T,4,l[36]),$=g($,U,H,q,W,11,l[37]),q=g(q,$,U,H,z,16,l[38]),H=g(H,q,$,U,_,23,l[39]),U=g(U,H,q,$,ie,4,l[40]),$=g($,U,H,q,F,11,l[41]),q=g(q,$,U,H,S,16,l[42]),H=g(H,q,$,U,N,23,l[43]),U=g(U,H,q,$,ee,4,l[44]),$=g($,U,H,q,re,11,l[45]),q=g(q,$,U,H,ae,16,l[46]),H=g(H,q,$,U,D,23,l[47]),U=x(U,H,q,$,F,6,l[48]),$=x($,U,H,q,z,10,l[49]),q=x(q,$,U,H,se,15,l[50]),H=x(H,q,$,U,I,21,l[51]),U=x(U,H,q,$,re,6,l[52]),$=x($,U,H,q,S,10,l[53]),q=x(q,$,U,H,_,15,l[54]),H=x(H,q,$,U,T,21,l[55]),U=x(U,H,q,$,G,6,l[56]),$=x($,U,H,q,ae,10,l[57]),q=x(q,$,U,H,N,15,l[58]),H=x(H,q,$,U,ie,21,l[59]),U=x(U,H,q,$,W,6,l[60]),$=x($,U,H,q,j,10,l[61]),q=x(q,$,U,H,D,15,l[62]),H=x(H,q,$,U,ee,21,l[63]),C[0]=C[0]+U|0,C[1]=C[1]+H|0,C[2]=C[2]+q|0,C[3]=C[3]+$|0},_doFinalize:function(){var m=this._data,w=m.words,v=this._nDataBytes*8,A=m.sigBytes*8;w[A>>>5]|=128<<24-A%32;var E=n.floor(v/4294967296),C=v;w[(A+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w[(A+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,m.sigBytes=(w.length+1)*4,this._process();for(var F=this._hash,T=F.words,D=0;D<4;D++){var S=T[D];T[D]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return F},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,w,v,A,E,C,F){var T=m+(w&v|~w&A)+E+F;return(T<<C|T>>>32-C)+w}function d(m,w,v,A,E,C,F){var T=m+(w&A|v&~A)+E+F;return(T<<C|T>>>32-C)+w}function g(m,w,v,A,E,C,F){var T=m+(w^v^A)+E+F;return(T<<C|T>>>32-C)+w}function x(m,w,v,A,E,C,F){var T=m+(v^(w|~A))+E+F;return(T<<C|T>>>32-C)+w}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),t.MD5})}(Sc)),Sc.exports}var Nc={exports:{}},ef;function Ud(){return ef||(ef=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,c=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var d=this._hash.words,g=d[0],x=d[1],m=d[2],w=d[3],v=d[4],A=0;A<80;A++){if(A<16)c[A]=u[f+A]|0;else{var E=c[A-3]^c[A-8]^c[A-14]^c[A-16];c[A]=E<<1|E>>>31}var C=(g<<5|g>>>27)+v+c[A];A<20?C+=(x&m|~x&w)+1518500249:A<40?C+=(x^m^w)+1859775393:A<60?C+=(x&m|x&w|m&w)-1894007588:C+=(x^m^w)-899497514,v=w,w=m,m=x<<30|x>>>2,x=g,g=C}d[0]=d[0]+g|0,d[1]=d[1]+x|0,d[2]=d[2]+m|0,d[3]=d[3]+w|0,d[4]=d[4]+v|0},_doFinalize:function(){var u=this._data,f=u.words,d=this._nDataBytes*8,g=u.sigBytes*8;return f[g>>>5]|=128<<24-g%32,f[(g+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(g+64>>>9<<4)+15]=d,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=o._createHelper(l),n.HmacSHA1=o._createHmacHelper(l)}(),t.SHA1})}(Nc)),Nc.exports}var Lc={exports:{}},tf;function P1(){return tf||(tf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Uo)})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),t.SHA224})}(Lc)),Lc.exports}var Oc={exports:{}},nf;function _d(){return nf||(nf=1,function(r,e){(function(t,n,i){r.exports=n(we(),nc())})(le,function(t){return function(){var n=t,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,c=o.WordArray,l=n.algo;function u(){return a.create.apply(a,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],d=[];(function(){for(var x=0;x<80;x++)d[x]=u()})();var g=l.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(x,m){for(var w=this._hash.words,v=w[0],A=w[1],E=w[2],C=w[3],F=w[4],T=w[5],D=w[6],S=w[7],W=v.high,I=v.low,N=A.high,z=A.low,G=E.high,ee=E.low,_=C.high,j=C.low,re=F.high,ie=F.low,se=T.high,ae=T.low,U=D.high,H=D.low,q=S.high,$=S.low,be=W,ge=I,Pe=N,ce=z,Ze=G,nt=ee,Yn=_,lt=j,ve=re,De=ie,Tn=se,cn=ae,Xn=U,Lr=H,Qs=q,er=$,rt=0;rt<80;rt++){var Ue,Rt,Ii=d[rt];if(rt<16)Rt=Ii.high=x[m+rt*2]|0,Ue=Ii.low=x[m+rt*2+1]|0;else{var Vt=d[rt-15],tr=Vt.high,b=Vt.low,h=(tr>>>1|b<<31)^(tr>>>8|b<<24)^tr>>>7,p=(b>>>1|tr<<31)^(b>>>8|tr<<24)^(b>>>7|tr<<25),B=d[rt-2],R=B.high,O=B.low,Q=(R>>>19|O<<13)^(R<<3|O>>>29)^R>>>6,he=(O>>>19|R<<13)^(O<<3|R>>>29)^(O>>>6|R<<26),Ne=d[rt-7],Re=Ne.high,Le=Ne.low,Be=d[rt-16],Zd=Be.high,Cl=Be.low;Ue=p+Le,Rt=h+Re+(Ue>>>0<p>>>0?1:0),Ue=Ue+he,Rt=Rt+Q+(Ue>>>0<he>>>0?1:0),Ue=Ue+Cl,Rt=Rt+Zd+(Ue>>>0<Cl>>>0?1:0),Ii.high=Rt,Ii.low=Ue}var Yd=ve&Tn^~ve&Xn,kl=De&cn^~De&Lr,Xd=be&Pe^be&Ze^Pe&Ze,ep=ge&ce^ge&nt^ce&nt,tp=(be>>>28|ge<<4)^(be<<30|ge>>>2)^(be<<25|ge>>>7),Tl=(ge>>>28|be<<4)^(ge<<30|be>>>2)^(ge<<25|be>>>7),np=(ve>>>14|De<<18)^(ve>>>18|De<<14)^(ve<<23|De>>>9),rp=(De>>>14|ve<<18)^(De>>>18|ve<<14)^(De<<23|ve>>>9),Fl=f[rt],ip=Fl.high,Il=Fl.low,Bt=er+rp,nr=Qs+np+(Bt>>>0<er>>>0?1:0),Bt=Bt+kl,nr=nr+Yd+(Bt>>>0<kl>>>0?1:0),Bt=Bt+Il,nr=nr+ip+(Bt>>>0<Il>>>0?1:0),Bt=Bt+Ue,nr=nr+Rt+(Bt>>>0<Ue>>>0?1:0),Pl=Tl+ep,sp=tp+Xd+(Pl>>>0<Tl>>>0?1:0);Qs=Xn,er=Lr,Xn=Tn,Lr=cn,Tn=ve,cn=De,De=lt+Bt|0,ve=Yn+nr+(De>>>0<lt>>>0?1:0)|0,Yn=Ze,lt=nt,Ze=Pe,nt=ce,Pe=be,ce=ge,ge=Bt+Pl|0,be=nr+sp+(ge>>>0<Bt>>>0?1:0)|0}I=v.low=I+ge,v.high=W+be+(I>>>0<ge>>>0?1:0),z=A.low=z+ce,A.high=N+Pe+(z>>>0<ce>>>0?1:0),ee=E.low=ee+nt,E.high=G+Ze+(ee>>>0<nt>>>0?1:0),j=C.low=j+lt,C.high=_+Yn+(j>>>0<lt>>>0?1:0),ie=F.low=ie+De,F.high=re+ve+(ie>>>0<De>>>0?1:0),ae=T.low=ae+cn,T.high=se+Tn+(ae>>>0<cn>>>0?1:0),H=D.low=H+Lr,D.high=U+Xn+(H>>>0<Lr>>>0?1:0),$=S.low=$+er,S.high=q+Qs+($>>>0<er>>>0?1:0)},_doFinalize:function(){var x=this._data,m=x.words,w=this._nDataBytes*8,v=x.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(w/4294967296),m[(v+128>>>10<<5)+31]=w,x.sigBytes=m.length*4,this._process();var A=this._hash.toX32();return A},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});n.SHA512=s._createHelper(g),n.HmacSHA512=s._createHmacHelper(g)}(),t.SHA512})}(Oc)),Oc.exports}var Mc={exports:{}},rf;function D1(){return rf||(rf=1,function(r,e){(function(t,n,i){r.exports=n(we(),nc(),_d())})(le,function(t){return function(){var n=t,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l)}(),t.SHA384})}(Mc)),Mc.exports}var Uc={exports:{}},sf;function R1(){return sf||(sf=1,function(r,e){(function(t,n,i){r.exports=n(we(),nc())})(le,function(t){return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.x64,l=c.Word,u=i.algo,f=[],d=[],g=[];(function(){for(var w=1,v=0,A=0;A<24;A++){f[w+5*v]=(A+1)*(A+2)/2%64;var E=v%5,C=(2*w+3*v)%5;w=E,v=C}for(var w=0;w<5;w++)for(var v=0;v<5;v++)d[w+5*v]=v+(2*w+3*v)%5*5;for(var F=1,T=0;T<24;T++){for(var D=0,S=0,W=0;W<7;W++){if(F&1){var I=(1<<W)-1;I<32?S^=1<<I:D^=1<<I-32}F&128?F=F<<1^113:F<<=1}g[T]=l.create(D,S)}})();var x=[];(function(){for(var w=0;w<25;w++)x[w]=l.create()})();var m=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],v=0;v<25;v++)w[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,v){for(var A=this._state,E=this.blockSize/2,C=0;C<E;C++){var F=w[v+2*C],T=w[v+2*C+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var D=A[C];D.high^=T,D.low^=F}for(var S=0;S<24;S++){for(var W=0;W<5;W++){for(var I=0,N=0,z=0;z<5;z++){var D=A[W+5*z];I^=D.high,N^=D.low}var G=x[W];G.high=I,G.low=N}for(var W=0;W<5;W++)for(var ee=x[(W+4)%5],_=x[(W+1)%5],j=_.high,re=_.low,I=ee.high^(j<<1|re>>>31),N=ee.low^(re<<1|j>>>31),z=0;z<5;z++){var D=A[W+5*z];D.high^=I,D.low^=N}for(var ie=1;ie<25;ie++){var I,N,D=A[ie],se=D.high,ae=D.low,U=f[ie];U<32?(I=se<<U|ae>>>32-U,N=ae<<U|se>>>32-U):(I=ae<<U-32|se>>>64-U,N=se<<U-32|ae>>>64-U);var H=x[d[ie]];H.high=I,H.low=N}var q=x[0],$=A[0];q.high=$.high,q.low=$.low;for(var W=0;W<5;W++)for(var z=0;z<5;z++){var ie=W+5*z,D=A[ie],be=x[ie],ge=x[(W+1)%5+5*z],Pe=x[(W+2)%5+5*z];D.high=be.high^~ge.high&Pe.high,D.low=be.low^~ge.low&Pe.low}var D=A[0],ce=g[S];D.high^=ce.high,D.low^=ce.low}},_doFinalize:function(){var w=this._data,v=w.words;this._nDataBytes*8;var A=w.sigBytes*8,E=this.blockSize*32;v[A>>>5]|=1<<24-A%32,v[(n.ceil((A+1)/E)*E>>>5)-1]|=128,w.sigBytes=v.length*4,this._process();for(var C=this._state,F=this.cfg.outputLength/8,T=F/8,D=[],S=0;S<T;S++){var W=C[S],I=W.high,N=W.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,D.push(N),D.push(I)}return new o.init(D,F)},clone:function(){for(var w=a.clone.call(this),v=w._state=this._state.slice(0),A=0;A<25;A++)v[A]=v[A].clone();return w}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),t.SHA3})}(Uc)),Uc.exports}var _c={exports:{}},of;function S1(){return of||(of=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,D){for(var S=0;S<16;S++){var W=D+S,I=T[W];T[W]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var N=this._hash.words,z=g.words,G=x.words,ee=l.words,_=u.words,j=f.words,re=d.words,ie,se,ae,U,H,q,$,be,ge,Pe;q=ie=N[0],$=se=N[1],be=ae=N[2],ge=U=N[3],Pe=H=N[4];for(var ce,S=0;S<80;S+=1)ce=ie+T[D+ee[S]]|0,S<16?ce+=w(se,ae,U)+z[0]:S<32?ce+=v(se,ae,U)+z[1]:S<48?ce+=A(se,ae,U)+z[2]:S<64?ce+=E(se,ae,U)+z[3]:ce+=C(se,ae,U)+z[4],ce=ce|0,ce=F(ce,j[S]),ce=ce+H|0,ie=H,H=U,U=F(ae,10),ae=se,se=ce,ce=q+T[D+_[S]]|0,S<16?ce+=C($,be,ge)+G[0]:S<32?ce+=E($,be,ge)+G[1]:S<48?ce+=A($,be,ge)+G[2]:S<64?ce+=v($,be,ge)+G[3]:ce+=w($,be,ge)+G[4],ce=ce|0,ce=F(ce,re[S]),ce=ce+Pe|0,q=Pe,Pe=ge,ge=F(be,10),be=$,$=ce;ce=N[1]+ae+ge|0,N[1]=N[2]+U+Pe|0,N[2]=N[3]+H+q|0,N[3]=N[4]+ie+$|0,N[4]=N[0]+se+be|0,N[0]=ce},_doFinalize:function(){var T=this._data,D=T.words,S=this._nDataBytes*8,W=T.sigBytes*8;D[W>>>5]|=128<<24-W%32,D[(W+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,T.sigBytes=(D.length+1)*4,this._process();for(var I=this._hash,N=I.words,z=0;z<5;z++){var G=N[z];N[z]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return I},clone:function(){var T=a.clone.call(this);return T._hash=this._hash.clone(),T}});function w(T,D,S){return T^D^S}function v(T,D,S){return T&D|~T&S}function A(T,D,S){return(T|~D)^S}function E(T,D,S){return T&S|D&~S}function C(T,D,S){return T^(D|~S)}function F(T,D){return T<<D|T>>>32-D}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),t.RIPEMD160})}(_c)),_c.exports}var Hc={exports:{}},af;function yl(){return af||(af=1,function(r,e){(function(t,n){r.exports=n(we())})(le,function(t){(function(){var n=t,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,c=n.algo;c.HMAC=s.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=a.parse(u));var f=l.blockSize,d=f*4;u.sigBytes>d&&(u=l.finalize(u)),u.clamp();for(var g=this._oKey=u.clone(),x=this._iKey=u.clone(),m=g.words,w=x.words,v=0;v<f;v++)m[v]^=1549556828,w[v]^=909522486;g.sigBytes=x.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,f=u.finalize(l);u.reset();var d=u.finalize(this._oKey.clone().concat(f));return d}})})()})}(Hc)),Hc.exports}var zc={exports:{}},cf;function N1(){return cf||(cf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Uo,yl())})(le,function(t){return function(){var n=t,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.SHA256,l=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var g=this.cfg,x=l.create(g.hasher,f),m=o.create(),w=o.create([1]),v=m.words,A=w.words,E=g.keySize,C=g.iterations;v.length<E;){var F=x.update(d).finalize(w);x.reset();for(var T=F.words,D=T.length,S=F,W=1;W<C;W++){S=x.finalize(S),x.reset();for(var I=S.words,N=0;N<D;N++)T[N]^=I[N]}m.concat(F),A[0]++}return m.sigBytes=E*4,m}});n.PBKDF2=function(f,d,g){return u.create(g).compute(f,d)}}(),t.PBKDF2})}(zc)),zc.exports}var Gc={exports:{}},lf;function Nr(){return lf||(lf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ud(),yl())})(le,function(t){return function(){var n=t,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var d,g=this.cfg,x=g.hasher.create(),m=o.create(),w=m.words,v=g.keySize,A=g.iterations;w.length<v;){d&&x.update(d),d=x.update(u).finalize(f),x.reset();for(var E=1;E<A;E++)d=x.finalize(d),x.reset();m.concat(d)}return m.sigBytes=v*4,m}});n.EvpKDF=function(u,f,d){return l.create(d).compute(u,f)}}(),t.EvpKDF})}(Gc)),Gc.exports}var Wc={exports:{}},uf;function Je(){return uf||(uf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Nr())})(le,function(t){t.lib.Cipher||function(n){var i=t,s=i.lib,o=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,f=i.algo,d=f.EvpKDF,g=s.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(I,N){return this.create(this._ENC_XFORM_MODE,I,N)},createDecryptor:function(I,N){return this.create(this._DEC_XFORM_MODE,I,N)},init:function(I,N,z){this.cfg=this.cfg.extend(z),this._xformMode=I,this._key=N,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(N){return typeof N=="string"?W:T}return function(N){return{encrypt:function(z,G,ee){return I(G).encrypt(N,z,G,ee)},decrypt:function(z,G,ee){return I(G).decrypt(N,z,G,ee)}}}}()});s.StreamCipher=g.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var x=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(I,N){return this.Encryptor.create(I,N)},createDecryptor:function(I,N){return this.Decryptor.create(I,N)},init:function(I,N){this._cipher=I,this._iv=N}}),w=x.CBC=function(){var I=m.extend();I.Encryptor=I.extend({processBlock:function(z,G){var ee=this._cipher,_=ee.blockSize;N.call(this,z,G,_),ee.encryptBlock(z,G),this._prevBlock=z.slice(G,G+_)}}),I.Decryptor=I.extend({processBlock:function(z,G){var ee=this._cipher,_=ee.blockSize,j=z.slice(G,G+_);ee.decryptBlock(z,G),N.call(this,z,G,_),this._prevBlock=j}});function N(z,G,ee){var _,j=this._iv;j?(_=j,this._iv=n):_=this._prevBlock;for(var re=0;re<ee;re++)z[G+re]^=_[re]}return I}(),v=i.pad={},A=v.Pkcs7={pad:function(I,N){for(var z=N*4,G=z-I.sigBytes%z,ee=G<<24|G<<16|G<<8|G,_=[],j=0;j<G;j+=4)_.push(ee);var re=a.create(_,G);I.concat(re)},unpad:function(I){var N=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=N}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:w,padding:A}),reset:function(){var I;g.reset.call(this);var N=this.cfg,z=N.iv,G=N.mode;this._xformMode==this._ENC_XFORM_MODE?I=G.createEncryptor:(I=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,z&&z.words):(this._mode=I.call(G,this,z&&z.words),this._mode.__creator=I)},_doProcessBlock:function(I,N){this._mode.processBlock(I,N)},_doFinalize:function(){var I,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),N.unpad(I)),I},blockSize:128/32});var E=s.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),C=i.format={},F=C.OpenSSL={stringify:function(I){var N,z=I.ciphertext,G=I.salt;return G?N=a.create([1398893684,1701076831]).concat(G).concat(z):N=z,N.toString(u)},parse:function(I){var N,z=u.parse(I),G=z.words;return G[0]==1398893684&&G[1]==1701076831&&(N=a.create(G.slice(2,4)),G.splice(0,4),z.sigBytes-=16),E.create({ciphertext:z,salt:N})}},T=s.SerializableCipher=o.extend({cfg:o.extend({format:F}),encrypt:function(I,N,z,G){G=this.cfg.extend(G);var ee=I.createEncryptor(z,G),_=ee.finalize(N),j=ee.cfg;return E.create({ciphertext:_,key:z,iv:j.iv,algorithm:I,mode:j.mode,padding:j.padding,blockSize:I.blockSize,formatter:G.format})},decrypt:function(I,N,z,G){G=this.cfg.extend(G),N=this._parse(N,G.format);var ee=I.createDecryptor(z,G).finalize(N.ciphertext);return ee},_parse:function(I,N){return typeof I=="string"?N.parse(I,this):I}}),D=i.kdf={},S=D.OpenSSL={execute:function(I,N,z,G,ee){if(G||(G=a.random(64/8)),ee)var _=d.create({keySize:N+z,hasher:ee}).compute(I,G);else var _=d.create({keySize:N+z}).compute(I,G);var j=a.create(_.words.slice(N),z*4);return _.sigBytes=N*4,E.create({key:_,iv:j,salt:G})}},W=s.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:S}),encrypt:function(I,N,z,G){G=this.cfg.extend(G);var ee=G.kdf.execute(z,I.keySize,I.ivSize,G.salt,G.hasher);G.iv=ee.iv;var _=T.encrypt.call(this,I,N,ee.key,G);return _.mixIn(ee),_},decrypt:function(I,N,z,G){G=this.cfg.extend(G),N=this._parse(N,G.format);var ee=G.kdf.execute(z,I.keySize,I.ivSize,N.salt,G.hasher);G.iv=ee.iv;var _=T.decrypt.call(this,I,N,ee.key,G);return _}})}()})}(Wc)),Wc.exports}var Vc={exports:{}},ff;function L1(){return ff||(ff=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.mode.CFB=function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize;i.call(this,s,o,c,a),this._prevBlock=s.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=s.slice(o,o+c);i.call(this,s,o,c,a),this._prevBlock=l}});function i(s,o,a,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return n}(),t.mode.CFB})}(Vc)),Vc.exports}var Qc={exports:{}},hf;function O1(){return hf||(hf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.mode.CTR=function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var f=u.slice(0);a.encryptBlock(f,0),u[c-1]=u[c-1]+1|0;for(var d=0;d<c;d++)s[o+d]^=f[d]}});return n.Decryptor=i,n}(),t.mode.CTR})}(Qc)),Qc.exports}var $c={exports:{}},df;function M1(){return df||(df=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var n=t.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,l=a>>8&255,u=a&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,a=0,a+=c<<16,a+=l<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,c){var l=this._cipher,u=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var g=d.slice(0);l.encryptBlock(g,0);for(var x=0;x<u;x++)a[c+x]^=g[x]}});return n.Decryptor=o,n}(),t.mode.CTRGladman})}($c)),$c.exports}var Kc={exports:{}},pf;function U1(){return pf||(pf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.mode.OFB=function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var f=0;f<c;f++)s[o+f]^=u[f]}});return n.Decryptor=i,n}(),t.mode.OFB})}(Kc)),Kc.exports}var qc={exports:{}},gf;function _1(){return gf||(gf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.mode.ECB=function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),t.mode.ECB})}(qc)),qc.exports}var jc={exports:{}},yf;function H1(){return yf||(yf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,c=s+a-1;n.clamp(),n.words[c>>>2]|=a<<24-c%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Ansix923})}(jc)),jc.exports}var Jc={exports:{}},xf;function z1(){return xf||(xf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Iso10126})}(Jc)),Jc.exports}var Zc={exports:{}},mf;function G1(){return mf||(mf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.pad.Iso97971={pad:function(n,i){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,i)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})}(Zc)),Zc.exports}var Yc={exports:{}},wf;function W1(){return wf||(wf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(Yc)),Yc.exports}var Xc={exports:{}},bf;function V1(){return bf||(bf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(Xc)),Xc.exports}var e0={exports:{}},Af;function Q1(){return Af||(Af=1,function(r,e){(function(t,n,i){r.exports=n(we(),Je())})(le,function(t){return function(n){var i=t,s=i.lib,o=s.CipherParams,a=i.enc,c=a.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var f=c.parse(u);return o.create({ciphertext:f})}}}(),t.format.Hex})}(e0)),e0.exports}var t0={exports:{}},Ef;function $1(){return Ef||(Ef=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],c=[],l=[],u=[],f=[],d=[],g=[],x=[],m=[],w=[];(function(){for(var E=[],C=0;C<256;C++)C<128?E[C]=C<<1:E[C]=C<<1^283;for(var F=0,T=0,C=0;C<256;C++){var D=T^T<<1^T<<2^T<<3^T<<4;D=D>>>8^D&255^99,a[F]=D,c[D]=F;var S=E[F],W=E[S],I=E[W],N=E[D]*257^D*16843008;l[F]=N<<24|N>>>8,u[F]=N<<16|N>>>16,f[F]=N<<8|N>>>24,d[F]=N;var N=I*16843009^W*65537^S*257^F*16843008;g[D]=N<<24|N>>>8,x[D]=N<<16|N>>>16,m[D]=N<<8|N>>>24,w[D]=N,F?(F=S^E[E[E[I^S]]],T^=E[E[T]]):F=T=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],A=o.AES=s.extend({_doReset:function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,F=C.words,T=C.sigBytes/4,D=this._nRounds=T+6,S=(D+1)*4,W=this._keySchedule=[],I=0;I<S;I++)I<T?W[I]=F[I]:(E=W[I-1],I%T?T>6&&I%T==4&&(E=a[E>>>24]<<24|a[E>>>16&255]<<16|a[E>>>8&255]<<8|a[E&255]):(E=E<<8|E>>>24,E=a[E>>>24]<<24|a[E>>>16&255]<<16|a[E>>>8&255]<<8|a[E&255],E^=v[I/T|0]<<24),W[I]=W[I-T]^E);for(var N=this._invKeySchedule=[],z=0;z<S;z++){var I=S-z;if(z%4)var E=W[I];else var E=W[I-4];z<4||I<=4?N[z]=E:N[z]=g[a[E>>>24]]^x[a[E>>>16&255]]^m[a[E>>>8&255]]^w[a[E&255]]}}},encryptBlock:function(E,C){this._doCryptBlock(E,C,this._keySchedule,l,u,f,d,a)},decryptBlock:function(E,C){var F=E[C+1];E[C+1]=E[C+3],E[C+3]=F,this._doCryptBlock(E,C,this._invKeySchedule,g,x,m,w,c);var F=E[C+1];E[C+1]=E[C+3],E[C+3]=F},_doCryptBlock:function(E,C,F,T,D,S,W,I){for(var N=this._nRounds,z=E[C]^F[0],G=E[C+1]^F[1],ee=E[C+2]^F[2],_=E[C+3]^F[3],j=4,re=1;re<N;re++){var ie=T[z>>>24]^D[G>>>16&255]^S[ee>>>8&255]^W[_&255]^F[j++],se=T[G>>>24]^D[ee>>>16&255]^S[_>>>8&255]^W[z&255]^F[j++],ae=T[ee>>>24]^D[_>>>16&255]^S[z>>>8&255]^W[G&255]^F[j++],U=T[_>>>24]^D[z>>>16&255]^S[G>>>8&255]^W[ee&255]^F[j++];z=ie,G=se,ee=ae,_=U}var ie=(I[z>>>24]<<24|I[G>>>16&255]<<16|I[ee>>>8&255]<<8|I[_&255])^F[j++],se=(I[G>>>24]<<24|I[ee>>>16&255]<<16|I[_>>>8&255]<<8|I[z&255])^F[j++],ae=(I[ee>>>24]<<24|I[_>>>16&255]<<16|I[z>>>8&255]<<8|I[G&255])^F[j++],U=(I[_>>>24]<<24|I[z>>>16&255]<<16|I[G>>>8&255]<<8|I[ee&255])^F[j++];E[C]=ie,E[C+1]=se,E[C+2]=ae,E[C+3]=U},keySize:256/32});n.AES=s._createHelper(A)}(),t.AES})}(t0)),t0.exports}var n0={exports:{}},vf;function K1(){return vf||(vf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=a.DES=o.extend({_doReset:function(){for(var v=this._key,A=v.words,E=[],C=0;C<56;C++){var F=c[C]-1;E[C]=A[F>>>5]>>>31-F%32&1}for(var T=this._subKeys=[],D=0;D<16;D++){for(var S=T[D]=[],W=u[D],C=0;C<24;C++)S[C/6|0]|=E[(l[C]-1+W)%28]<<31-C%6,S[4+(C/6|0)]|=E[28+(l[C+24]-1+W)%28]<<31-C%6;S[0]=S[0]<<1|S[0]>>>31;for(var C=1;C<7;C++)S[C]=S[C]>>>(C-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var I=this._invSubKeys=[],C=0;C<16;C++)I[C]=T[15-C]},encryptBlock:function(v,A){this._doCryptBlock(v,A,this._subKeys)},decryptBlock:function(v,A){this._doCryptBlock(v,A,this._invSubKeys)},_doCryptBlock:function(v,A,E){this._lBlock=v[A],this._rBlock=v[A+1],x.call(this,4,252645135),x.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),x.call(this,1,1431655765);for(var C=0;C<16;C++){for(var F=E[C],T=this._lBlock,D=this._rBlock,S=0,W=0;W<8;W++)S|=f[W][((D^F[W])&d[W])>>>0];this._lBlock=D,this._rBlock=T^S}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,x.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),v[A]=this._lBlock,v[A+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(v,A){var E=(this._lBlock>>>v^this._rBlock)&A;this._rBlock^=E,this._lBlock^=E<<v}function m(v,A){var E=(this._rBlock>>>v^this._lBlock)&A;this._lBlock^=E,this._rBlock^=E<<v}n.DES=o._createHelper(g);var w=a.TripleDES=o.extend({_doReset:function(){var v=this._key,A=v.words;if(A.length!==2&&A.length!==4&&A.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=A.slice(0,2),C=A.length<4?A.slice(0,2):A.slice(2,4),F=A.length<6?A.slice(0,2):A.slice(4,6);this._des1=g.createEncryptor(s.create(E)),this._des2=g.createEncryptor(s.create(C)),this._des3=g.createEncryptor(s.create(F))},encryptBlock:function(v,A){this._des1.encryptBlock(v,A),this._des2.decryptBlock(v,A),this._des3.encryptBlock(v,A)},decryptBlock:function(v,A){this._des3.decryptBlock(v,A),this._des2.encryptBlock(v,A),this._des1.decryptBlock(v,A)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(w)}(),t.TripleDES})}(n0)),n0.exports}var r0={exports:{}},Bf;function q1(){return Bf||(Bf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,f=u.words,d=u.sigBytes,g=this._S=[],x=0;x<256;x++)g[x]=x;for(var x=0,m=0;x<256;x++){var w=x%d,v=f[w>>>2]>>>24-w%4*8&255;m=(m+g[x]+v)%256;var A=g[x];g[x]=g[m],g[m]=A}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,f=this._i,d=this._j,g=0,x=0;x<4;x++){f=(f+1)%256,d=(d+u[f])%256;var m=u[f];u[f]=u[d],u[d]=m,g|=u[(u[f]+u[d])%256]<<24-x*8}return this._i=f,this._j=d,g}n.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});n.RC4Drop=s._createHelper(l)}(),t.RC4})}(r0)),r0.exports}var i0={exports:{}},Cf;function j1(){return Cf||(Cf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],l=[],u=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,g=this.cfg.iv,x=0;x<4;x++)d[x]=(d[x]<<8|d[x]>>>24)&16711935|(d[x]<<24|d[x]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],w=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var x=0;x<4;x++)f.call(this);for(var x=0;x<8;x++)w[x]^=m[x+4&7];if(g){var v=g.words,A=v[0],E=v[1],C=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,F=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,T=C>>>16|F&4294901760,D=F<<16|C&65535;w[0]^=C,w[1]^=T,w[2]^=F,w[3]^=D,w[4]^=C,w[5]^=T,w[6]^=F,w[7]^=D;for(var x=0;x<4;x++)f.call(this)}},_doProcessBlock:function(d,g){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[g+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,g=this._C,x=0;x<8;x++)c[x]=g[x];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<c[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<c[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<c[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<c[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<c[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<c[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<c[6]>>>0?1:0)|0,this._b=g[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var m=d[x]+g[x],w=m&65535,v=m>>>16,A=((w*w>>>17)+w*v>>>15)+v*v,E=((m&4294901760)*m|0)+((m&65535)*m|0);l[x]=A^E}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=s._createHelper(u)}(),t.Rabbit})}(i0)),i0.exports}var s0={exports:{}},kf;function J1(){return kf||(kf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],l=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,g=this.cfg.iv,x=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var w=0;w<4;w++)f.call(this);for(var w=0;w<8;w++)m[w]^=x[w+4&7];if(g){var v=g.words,A=v[0],E=v[1],C=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,F=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,T=C>>>16|F&4294901760,D=F<<16|C&65535;m[0]^=C,m[1]^=T,m[2]^=F,m[3]^=D,m[4]^=C,m[5]^=T,m[6]^=F,m[7]^=D;for(var w=0;w<4;w++)f.call(this)}},_doProcessBlock:function(d,g){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[g+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,g=this._C,x=0;x<8;x++)c[x]=g[x];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<c[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<c[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<c[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<c[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<c[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<c[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<c[6]>>>0?1:0)|0,this._b=g[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var m=d[x]+g[x],w=m&65535,v=m>>>16,A=((w*w>>>17)+w*v>>>15)+v*v,E=((m&4294901760)*m|0)+((m&65535)*m|0);l[x]=A^E}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=s._createHelper(u)}(),t.RabbitLegacy})}(s0)),s0.exports}var o0={exports:{}},Tf;function Z1(){return Tf||(Tf=1,function(r,e){(function(t,n,i){r.exports=n(we(),Ti(),Fi(),Nr(),Je())})(le,function(t){return function(){var n=t,i=n.lib,s=i.BlockCipher,o=n.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(w,v){let A=v>>24&255,E=v>>16&255,C=v>>8&255,F=v&255,T=w.sbox[0][A]+w.sbox[1][E];return T=T^w.sbox[2][C],T=T+w.sbox[3][F],T}function d(w,v,A){let E=v,C=A,F;for(let T=0;T<a;++T)E=E^w.pbox[T],C=f(w,E)^C,F=E,E=C,C=F;return F=E,E=C,C=F,C=C^w.pbox[a],E=E^w.pbox[a+1],{left:E,right:C}}function g(w,v,A){let E=v,C=A,F;for(let T=a+1;T>1;--T)E=E^w.pbox[T],C=f(w,E)^C,F=E,E=C,C=F;return F=E,E=C,C=F,C=C^w.pbox[1],E=E^w.pbox[0],{left:E,right:C}}function x(w,v,A){for(let D=0;D<4;D++){w.sbox[D]=[];for(let S=0;S<256;S++)w.sbox[D][S]=l[D][S]}let E=0;for(let D=0;D<a+2;D++)w.pbox[D]=c[D]^v[E],E++,E>=A&&(E=0);let C=0,F=0,T=0;for(let D=0;D<a+2;D+=2)T=d(w,C,F),C=T.left,F=T.right,w.pbox[D]=C,w.pbox[D+1]=F;for(let D=0;D<4;D++)for(let S=0;S<256;S+=2)T=d(w,C,F),C=T.left,F=T.right,w.sbox[D][S]=C,w.sbox[D][S+1]=F;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,v=w.words,A=w.sigBytes/4;x(u,v,A)}},encryptBlock:function(w,v){var A=d(u,w[v],w[v+1]);w[v]=A.left,w[v+1]=A.right},decryptBlock:function(w,v){var A=g(u,w[v],w[v+1]);w[v]=A.left,w[v+1]=A.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(m)}(),t.Blowfish})}(o0)),o0.exports}(function(r,e){(function(t,n,i){r.exports=n(we(),nc(),T1(),F1(),Ti(),I1(),Fi(),Ud(),Uo,P1(),_d(),D1(),R1(),S1(),yl(),N1(),Nr(),Je(),L1(),O1(),M1(),U1(),_1(),H1(),z1(),G1(),W1(),V1(),Q1(),$1(),K1(),q1(),j1(),J1(),Z1())})(le,function(t){return t})})(Md);var Y1=Md.exports,X1=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Base=void 0;const Qe=Mo,a0=X1(Y1);class Mt{print(){Mt.print(this)}bufferIndexOf(e,t,n=!1){if(n)return this.binarySearch(e,t,Qe.Buffer.compare);const i=(s,o)=>s.equals(o);return this.linearSearch(e,t,i)}static binarySearch(e,t,n){let i=0,s=e.length-1;for(;i<=s;){const o=Math.floor((i+s)/2),a=n(e[o],t);if(a===0){for(let c=o-1;c>=0;c--)if(n(e[c],t)!==0)return c+1;return 0}else a<0?i=o+1:s=o-1}return-1}binarySearch(e,t,n){return Mt.binarySearch(e,t,n)}static linearSearch(e,t,n){for(let i=0;i<e.length;i++)if(n(e[i],t))return i;return-1}linearSearch(e,t,n){return Mt.linearSearch(e,t,n)}static bufferify(e){if(!Qe.Buffer.isBuffer(e)){if(typeof e=="object"&&e.words)return Qe.Buffer.from(e.toString(a0.default.enc.Hex),"hex");if(Mt.isHexString(e)){const t=e.replace("0x",""),n=t.length%2?"0"+t:t;return Qe.Buffer.from(n,"hex")}else{if(typeof e=="string")return Qe.Buffer.from(e);if(typeof e=="bigint"){const t=e.toString(16).length%2?"0"+e.toString(16):e.toString(16);return Qe.Buffer.from(t,"hex")}else{if(e instanceof Uint8Array)return Qe.Buffer.from(e.buffer,e.byteOffset,e.byteLength);if(typeof e=="number"){let t=e.toString();return t.length%2&&(t=`0${t}`),Qe.Buffer.from(t,"hex")}else if(ArrayBuffer.isView(e))return Qe.Buffer.from(e.buffer,e.byteOffset,e.byteLength)}}}return e}bigNumberify(e){return Mt.bigNumberify(e)}static bigNumberify(e){if(typeof e=="bigint")return e;if(typeof e=="string"){if(e.startsWith("0x")&&Mt.isHexString(e)){const t=e.replace("0x",""),n=t.length%2?"0"+t:t||"0";return BigInt("0x"+n)}return BigInt(e)}if(Qe.Buffer.isBuffer(e)){const t=e.toString("hex"),n=t.length%2?"0"+t:t||"0";return BigInt("0x"+n)}if(e instanceof Uint8Array){const t=Qe.Buffer.from(e).toString("hex"),n=t.length%2?"0"+t:t||"0";return BigInt("0x"+n)}if(typeof e=="number")return BigInt(e);throw new Error("cannot bigNumberify")}static isHexString(e){return typeof e=="string"&&/^(0x)?[0-9A-Fa-f]*$/.test(e)}static print(e){console.log(e.toString())}bufferToHex(e,t=!0){return Mt.bufferToHex(e,t)}static bufferToHex(e,t=!0){return`${t?"0x":""}${(e||Qe.Buffer.alloc(0)).toString("hex")}`}bufferify(e){return Mt.bufferify(e)}bufferifyFn(e){return t=>{const n=e(t);if(Qe.Buffer.isBuffer(n))return n;if(this.isHexString(n)){const i=n.replace("0x",""),s=i.length%2?"0"+i:i;return Qe.Buffer.from(s,"hex")}if(typeof n=="string")return Qe.Buffer.from(n);if(typeof n=="bigint"){const i=n.toString(16).length%2?"0"+n.toString(16):n.toString(16);return Qe.Buffer.from(i,"hex")}return ArrayBuffer.isView(n)?Qe.Buffer.from(n.buffer,n.byteOffset,n.byteLength):Qe.Buffer.from(e(a0.default.enc.Hex.parse(t.toString("hex"))).toString(a0.default.enc.Hex),"hex")}}isHexString(e){return Mt.isHexString(e)}log2(e){return e===1?0:1+this.log2(e/2|0)}zip(e,t){return e.map((n,i)=>[n,t[i]])}static hexZeroPad(e,t){return"0x"+e.replace("0x","").padStart(t,"0")}bufferArrayIncludes(e,t){return e.some(n=>n.equals(t??Qe.Buffer.alloc(0)))}}Zn.Base=Mt;Zn.default=Mt;var rc=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.MerkleTree=void 0;const $e=Mo,Fn=rc(E1),c0=rc(Uo),ew=rc(Od),tw=rc(Zn);class wt extends tw.default{constructor(e,t=c0.default,n={}){if(super(),this.duplicateOdd=!1,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.complete=!1,n.complete){if(n.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(n.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}if(this.isBitcoinTree=!!n.isBitcoinTree,this.hashLeaves=!!n.hashLeaves,this.sortLeaves=!!n.sortLeaves,this.sortPairs=!!n.sortPairs,this.complete=!!n.complete,n.fillDefaultHash)if(typeof n.fillDefaultHash=="function")this.fillDefaultHash=n.fillDefaultHash;else if($e.Buffer.isBuffer(n.fillDefaultHash)||typeof n.fillDefaultHash=="string")this.fillDefaultHash=(i,s)=>n.fillDefaultHash;else throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');if(this.sort=!!n.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!n.duplicateOdd,n.concatenator?this.concatenator=n.concatenator:this.concatenator=$e.Buffer.concat,typeof t!="function")throw new Error("hashFn must be a function");this.hashFn=this.bufferifyFn(t),this.processLeaves(e)}getOptions(){var e,t;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:(t=(e=this.fillDefaultHash)===null||e===void 0?void 0:e.toString())!==null&&t!==void 0?t:null,duplicateOdd:this.duplicateOdd}}processLeaves(e){if(this.hashLeaves&&(e=e.map(this.hashFn)),this.leaves=e.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort($e.Buffer.compare)),this.fillDefaultHash)for(let t=this.leaves.length;t<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));t++)this.leaves.push(this.bufferify(this.fillDefaultHash(t,this.hashFn)));this.createHashes(this.leaves)}createHashes(e){for(this.layers=[e];e.length>1;){const t=this.layers.length;this.layers.push([]);const n=this.complete&&t===1&&!Number.isInteger(Math.log2(e.length))?2*e.length-Math.pow(2,Math.ceil(Math.log2(e.length))):e.length;for(let i=0;i<e.length;i+=2){if(i>=n){this.layers[t].push(...e.slice(n));break}else if(i+1===e.length&&e.length%2===1){const l=e[e.length-1];let u=l;if(this.isBitcoinTree){u=this.hashFn(this.concatenator([Fn.default(l),Fn.default(l)])),u=Fn.default(this.hashFn(u)),this.layers[t].push(u);continue}else if(!this.duplicateOdd){this.layers[t].push(e[i]);continue}}const s=e[i],o=i+1===e.length?s:e[i+1];let a=null;this.isBitcoinTree?a=[Fn.default(s),Fn.default(o)]:a=[s,o],this.sortPairs&&a.sort($e.Buffer.compare);let c=this.hashFn(this.concatenator(a));this.isBitcoinTree&&(c=Fn.default(this.hashFn(c))),this.layers[t].push(c)}e=this.layers[t]}}addLeaf(e,t=!1){t&&(e=this.hashFn(e)),this.processLeaves(this.leaves.concat(e))}addLeaves(e,t=!1){t&&(e=e.map(this.hashFn)),this.processLeaves(this.leaves.concat(e))}getLeaves(e){return Array.isArray(e)?(this.hashLeaves&&(e=e.map(this.hashFn),this.sortLeaves&&(e=e.sort($e.Buffer.compare))),this.leaves.filter(t=>this.bufferIndexOf(e,t,this.sortLeaves)!==-1)):this.leaves}removeLeaf(e){if(!this.isValidLeafIndex(e))throw new Error(`"${e}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);const t=this.leaves.splice(e,1);return this.processLeaves(this.leaves),t[0]}updateLeaf(e,t,n=!1){if(!this.isValidLeafIndex(e))throw new Error(`"${e}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);n&&(t=this.hashFn(t)),this.leaves[e]=t,this.processLeaves(this.leaves)}getLeaf(e){return e<0||e>this.leaves.length-1?$e.Buffer.from([]):this.leaves[e]}getLeafIndex(e){e=this.bufferify(e);const t=this.getLeaves();for(let n=0;n<t.length;n++)if(t[n].equals(e))return n;return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(e=>this.bufferToHex(e))}static marshalLeaves(e){return JSON.stringify(e.map(t=>wt.bufferToHex(t)),null,2)}static unmarshalLeaves(e){let t=null;if(typeof e=="string")t=JSON.parse(e);else if(e instanceof Object)t=e;else throw new Error("Expected type of string or object");if(!t)return[];if(!Array.isArray(t))throw new Error("Expected JSON string to be array");return t.map(wt.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((e,t)=>(Array.isArray(t)?e.push(t.map(n=>this.bufferToHex(n))):e.push(t),e),[])}getLayersFlat(){const e=this.layers.reduce((t,n)=>(Array.isArray(n)?t.unshift(...n):t.unshift(n),t),[]);return e.unshift($e.Buffer.from([0])),e}getHexLayersFlat(){return this.getLayersFlat().map(e=>this.bufferToHex(e))}getLayerCount(){return this.getLayers().length}getRoot(){return this.layers.length===0?$e.Buffer.from([]):this.layers[this.layers.length-1][0]||$e.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(e,t){if(typeof e>"u")throw new Error("leaf is required");e=this.bufferify(e);const n=[];if(!Number.isInteger(t)){t=-1;for(let i=0;i<this.leaves.length;i++)$e.Buffer.compare(e,this.leaves[i])===0&&(t=i)}if(t<=-1)return[];for(let i=0;i<this.layers.length;i++){const s=this.layers[i],o=t%2,a=o?t-1:this.isBitcoinTree&&t===s.length-1&&i<this.layers.length-1?t:t+1;a<s.length&&n.push({position:o?"left":"right",data:s[a]}),t=t/2|0}return n}getHexProof(e,t){return this.getProof(e,t).map(n=>this.bufferToHex(n.data))}getProofs(){const e=[],t=[];return this.getProofsDFS(this.layers.length-1,0,e,t),t}getProofsDFS(e,t,n,i){const s=t%2;if(e===-1){s||i.push([...n].reverse());return}if(t>=this.layers[e].length)return;const o=this.layers[e],a=s?t-1:t+1;let c=!1;a<o.length&&(c=!0,n.push({position:s?"left":"right",data:o[a]}));const l=t*2,u=t*2+1;this.getProofsDFS(e-1,l,n,i),this.getProofsDFS(e-1,u,n,i),c&&n.splice(n.length-1,1)}getHexProofs(){return this.getProofs().map(e=>this.bufferToHex(e.data))}getPositionalHexProof(e,t){return this.getProof(e,t).map(n=>[n.position==="left"?0:1,this.bufferToHex(n.data)])}static marshalProof(e){const t=e.map(n=>typeof n=="string"?n:$e.Buffer.isBuffer(n)?wt.bufferToHex(n):{position:n.position,data:wt.bufferToHex(n.data)});return JSON.stringify(t,null,2)}static unmarshalProof(e){let t=null;if(typeof e=="string")t=JSON.parse(e);else if(e instanceof Object)t=e;else throw new Error("Expected type of string or object");if(!t)return[];if(!Array.isArray(t))throw new Error("Expected JSON string to be array");return t.map(n=>{if(typeof n=="string")return wt.bufferify(n);if(n instanceof Object)return{position:n.position,data:wt.bufferify(n.data)};throw new Error("Expected item to be of type string or object")})}static marshalTree(e){const t=e.getHexRoot(),n=e.leaves.map(o=>wt.bufferToHex(o)),i=e.getHexLayers(),s=e.getOptions();return JSON.stringify({options:s,root:t,layers:i,leaves:n},null,2)}static unmarshalTree(e,t=c0.default,n={}){let i=null;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof Object)i=e;else throw new Error("Expected type of string or object");if(!i)throw new Error("could not parse json");return n=Object.assign({},i.options||{},n),new wt(i.leaves,t,n)}getProofIndices(e,t){const n=Math.pow(2,t);let i=new Set;for(const l of e){let u=n+l;for(;u>1;)i.add(u^1),u=u/2|0}const s=e.map(l=>n+l),o=Array.from(i).sort((l,u)=>l-u).reverse();i=s.concat(o);const a=new Set,c=[];for(let l of i)if(!a.has(l))for(c.push(l);l>1&&(a.add(l),!!a.has(l^1));)l=l/2|0;return c.filter(l=>!e.includes(l-n))}getProofIndicesForUnevenTree(e,t){const n=Math.ceil(Math.log2(t)),i=[];for(let a=0;a<n;a++)t%2!==0&&i.push({index:a,leavesCount:t}),t=Math.ceil(t/2);const s=[];let o=e;for(let a=0;a<n;a++){let l=o.map(f=>f%2===0?f+1:f-1).filter(f=>!o.includes(f));const u=i.find(({index:f})=>f===a);u&&o.includes(u.leavesCount-1)&&(l=l.slice(0,-1)),s.push(l),o=[...new Set(o.map(f=>f%2===0?f/2:f%2===0?(f+1)/2:(f-1)/2))]}return s}getMultiProof(e,t){if(this.complete||console.warn("Warning: For correct multiProofs it's strongly recommended to set complete: true"),t||(t=e,e=this.getLayersFlat()),this.isUnevenTree()&&t.every(Number.isInteger))return this.getMultiProofForUnevenTree(t);if(!t.every(Number.isInteger)){let i=t;this.sortPairs&&(i=i.sort($e.Buffer.compare));let s=i.map(l=>this.bufferIndexOf(this.leaves,l,this.sortLeaves)).sort((l,u)=>l===u?0:l>u?1:-1);if(!s.every(l=>l!==-1))throw new Error("Element does not exist in Merkle tree");const o=[],a=[];let c=[];for(let l=0;l<this.layers.length;l++){const u=this.layers[l];for(let f=0;f<s.length;f++){const d=s[f],g=this.getPairNode(u,d);o.push(u[d]),g&&a.push(g),c.push(d/2|0)}s=c.filter((f,d,g)=>g.indexOf(f)===d),c=[]}return a.filter(l=>!o.includes(l))}return this.getProofIndices(t,Math.log2(e.length/2|0)).map(i=>e[i])}getMultiProofForUnevenTree(e,t){t||(t=e,e=this.getLayers());let n=[],i=t;for(const s of e){const o=[];for(const c of i){if(c%2===0){const u=c+1;if(!i.includes(u)&&s[u]){o.push(s[u]);continue}}const l=c-1;if(!i.includes(l)&&s[l]){o.push(s[l]);continue}}n=n.concat(o);const a=new Set;for(const c of i){if(c%2===0){a.add(c/2);continue}if(c%2===0){a.add((c+1)/2);continue}a.add((c-1)/2)}i=Array.from(a)}return n}getHexMultiProof(e,t){return this.getMultiProof(e,t).map(n=>this.bufferToHex(n))}getProofFlags(e,t){if(!Array.isArray(e)||e.length<=0)throw new Error("Invalid Inputs!");let n;if(e.every(Number.isInteger)?n=[...e].sort((a,c)=>a===c?0:a>c?1:-1):n=e.map(a=>this.bufferIndexOf(this.leaves,a,this.sortLeaves)).sort((a,c)=>a===c?0:a>c?1:-1),!n.every(a=>a!==-1))throw new Error("Element does not exist in Merkle tree");const i=t.map(a=>this.bufferify(a)),s=[],o=[];for(let a=0;a<this.layers.length;a++){const c=this.layers[a];n=n.reduce((l,u)=>{if(!s.includes(c[u])){const d=this.getPairNode(c,u),g=this.bufferArrayIncludes(i,c[u])||this.bufferArrayIncludes(i,d);d&&o.push(!g),s.push(c[u]),s.push(d)}return l.push(u/2|0),l},[])}return o}verify(e,t,n){let i=this.bufferify(t);if(n=this.bufferify(n),!Array.isArray(e)||!t||!n)return!1;for(let s=0;s<e.length;s++){const o=e[s];let a=null,c=null;if(typeof o=="string")a=this.bufferify(o),c=!0;else if(Array.isArray(o))c=o[0]===0,a=this.bufferify(o[1]);else if($e.Buffer.isBuffer(o))a=o,c=!0;else if(o instanceof Object)a=this.bufferify(o.data),c=o.position==="left";else throw new Error("Expected node to be of type string or object");const l=[];this.isBitcoinTree?(l.push(Fn.default(i)),l[c?"unshift":"push"](Fn.default(a)),i=this.hashFn(this.concatenator(l)),i=Fn.default(this.hashFn(i))):this.sortPairs?$e.Buffer.compare(i,a)===-1?(l.push(i,a),i=this.hashFn(this.concatenator(l))):(l.push(a,i),i=this.hashFn(this.concatenator(l))):(l.push(i),l[c?"unshift":"push"](a),i=this.hashFn(this.concatenator(l)))}return $e.Buffer.compare(i,n)===0}verifyMultiProof(e,t,n,i,s){if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(e,t,n,i,s);const a=Math.ceil(Math.log2(i));e=this.bufferify(e),n=n.map(f=>this.bufferify(f)),s=s.map(f=>this.bufferify(f));const c={};for(const[f,d]of this.zip(t,n))c[Math.pow(2,a)+f]=d;for(const[f,d]of this.zip(this.getProofIndices(t,a),s))c[f]=d;let l=Object.keys(c).map(f=>+f).sort((f,d)=>f-d);l=l.slice(0,l.length-1);let u=0;for(;u<l.length;){const f=l[u];if(f>=2&&{}.hasOwnProperty.call(c,f^1)){let d=[c[f-f%2],c[f-f%2+1]];this.sortPairs&&(d=d.sort($e.Buffer.compare));const g=d[1]?this.hashFn(this.concatenator(d)):d[0];c[f/2|0]=g,l.push(f/2|0)}u+=1}return!t.length||{}.hasOwnProperty.call(c,1)&&c[1].equals(e)}verifyMultiProofWithFlags(e,t,n,i){e=this.bufferify(e),t=t.map(this.bufferify),n=n.map(this.bufferify);const s=t.length,o=i.length,a=[];let c=0,l=0,u=0;for(let f=0;f<o;f++){const d=i[f]?c<s?t[c++]:a[l++]:n[u++],g=c<s?t[c++]:a[l++],x=[d,g].sort($e.Buffer.compare);a[f]=this.hashFn(this.concatenator(x))}return $e.Buffer.compare(a[o-1],e)===0}verifyMultiProofForUnevenTree(e,t,n,i,s){e=this.bufferify(e),n=n.map(a=>this.bufferify(a)),s=s.map(a=>this.bufferify(a));const o=this.calculateRootForUnevenTree(t,n,i,s);return e.equals(o)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const e=this.getLayers().map(n=>n.map(i=>this.bufferToHex(i,!1))),t=[];for(let n=0;n<e.length;n++){const i=[];for(let s=0;s<e[n].length;s++){const o={[e[n][s]]:null};if(t.length){o[e[n][s]]={};const a=t.shift(),c=Object.keys(a)[0];if(o[e[n][s]][c]=a[c],t.length){const l=t.shift(),u=Object.keys(l)[0];o[e[n][s]][u]=l[u]}}i.push(o)}t.push(...i)}return t[0]}static verify(e,t,n,i=c0.default,s={}){return new wt([],i,s).verify(e,t,n)}static getMultiProof(e,t){return new wt([]).getMultiProof(e,t)}resetTree(){this.leaves=[],this.layers=[]}getPairNode(e,t){const n=t%2===0?t+1:t-1;return n<e.length?e[n]:null}toTreeString(){const e=this.getLayersAsObject();return ew.default.asTree(e,!0)}toString(){return this.toTreeString()}isUnevenTree(e){const t=(e==null?void 0:e.length)||this.getDepth();return!this.isPowOf2(t)}isPowOf2(e){return e&&!(e&e-1)}isValidLeafIndex(e){return e>=0&&e<this.getLeafCount()}calculateRootForUnevenTree(e,t,n,i){const s=this.zip(e,t).sort(([f],[d])=>f-d),o=s.map(([f])=>f),a=this.getProofIndicesForUnevenTree(o,n);let c=0;const l=[];for(let f=0;f<a.length;f++){const d=a[f],g=c;c+=d.length,l[f]=this.zip(d,i.slice(g,c))}const u=[s];for(let f=0;f<l.length;f++){const d=l[f].concat(u[f]).sort(([w],[v])=>w-v).map(([,w])=>w),g=u[f].map(([w])=>w),x=[...new Set(g.map(w=>w%2===0?w/2:w%2===0?(w+1)/2:(w-1)/2))],m=[];for(let w=0;w<x.length;w++){const v=x[w],A=d[w*2],E=d[w*2+1],C=E?this.hashFn(this.concatenator([A,E])):A;m.push([v,C])}u.push(m)}return u[u.length-1][0][1]}}Oo.MerkleTree=wt;typeof window<"u"&&(window.MerkleTree=wt);Oo.default=wt;var _o={},Hd=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_o,"__esModule",{value:!0});_o.MerkleMountainRange=void 0;const Js=Mo,nw=Hd(Uo),rw=Hd(Zn);class xl extends rw.default{constructor(e=nw.default,t=[],n,i,s){super(),this.root=Js.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},t=t.map(this.bufferify),this.hashFn=this.bufferifyFn(e),this.hashLeafFn=n,this.peakBaggingFn=i,this.hashBranchFn=s;for(const o of t)this.append(o)}append(e){e=this.bufferify(e);const t=this.hashFn(e),n=this.bufferToHex(t);(!this.data[n]||this.bufferToHex(this.hashFn(this.data[n]))!==n)&&(this.data[n]=e);const i=this.hashLeaf(this.size+1,t);this.hashes[this.size+1]=i,this.width+=1;const s=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const o=[];for(let a=0;a<s.length;a++)o[a]=this._getOrCreateNode(s[a]);this.root=this.peakBagging(this.width,o)}hashLeaf(e,t){return t=this.bufferify(t),this.hashLeafFn?this.bufferify(this.hashLeafFn(e,t)):this.hashFn(Js.Buffer.concat([this.bufferify(e),t]))}hashBranch(e,t,n){return this.hashBranchFn?this.bufferify(this.hashBranchFn(e,t,n)):this.hashFn(Js.Buffer.concat([this.bufferify(e),this.bufferify(t),this.bufferify(n)]))}getPeaks(){const e=this.getPeakIndexes(this.width),t=[];for(let n=0;n<e.length;n++)t[n]=this.hashes[e[n]];return t}getLeafIndex(e){return e%2===1?this.getSize(e):this.getSize(e-1)+1}getPeakIndexes(e){const t=this.numOfPeaks(e),n=[];let i=0,s=0;for(let o=255;o>0&&!(e&1<<o-1&&(s=s+(1<<o)-1,n[i++]=s,n.length>=t));o--);if(i!==n.length)throw new Error("invalid bit calculation");return n}numOfPeaks(e){let t=e,n=0;for(;t>0;)t%2===1&&n++,t=t>>1;return n}peakBagging(e,t){const n=this.getSize(e);if(this.numOfPeaks(e)!==t.length)throw new Error("received invalid number of peaks");return e===0&&!t.length?Js.Buffer.alloc(0):this.peakBaggingFn?this.bufferify(this.peakBaggingFn(n,t)):this.hashFn(Js.Buffer.concat([this.bufferify(n),...t.map(this.bufferify)]))}getSize(e){return(e<<1)-this.numOfPeaks(e)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(e){return this.hashes[e]}mountainHeight(e){let t=1;for(;1<<t<=e+t;)t++;return t-1}heightAt(e){let t=e,n=0,i=0;for(;t>n;)t-=(1<<i)-1,i=this.mountainHeight(t),n=(1<<i)-1;return i-(n-t)}isLeaf(e){return this.heightAt(e)===1}getChildren(e){const t=e-(1<<this.heightAt(e)-1),n=e-1;if(t===n)throw new Error("not a parent");return[t,n]}getMerkleProof(e){if(e>this.size)throw new Error("out of range");if(!this.isLeaf(e))throw new Error("not a leaf");const t=this.root,n=this.width,i=this.getPeakIndexes(this.width),s=[];let o=0;for(let f=0;f<i.length;f++)s[f]=this.hashes[i[f]],i[f]>=e&&o===0&&(o=i[f]);let a=0,c=0,l=this.heightAt(o);const u=[];for(;o!==e;)l--,[a,c]=this.getChildren(o),o=e<=a?a:c,u[l-1]=this.hashes[e<=a?c:a];return{root:t,width:n,peakBagging:s,siblings:u}}verify(e,t,n,i,s,o){if(i=this.bufferify(i),this.getSize(t)<n)throw new Error("index is out of range");if(!e.equals(this.peakBagging(t,s)))throw new Error("invalid root hash from the peaks");let c=0,l;const u=this.getPeakIndexes(t);for(let w=0;w<u.length;w++)if(u[w]>=n){l=s[w],c=u[w];break}if(!l)throw new Error("target not found");let f=o.length+1;const d=new Array(f);let g=0,x=0;for(;f>0&&(d[--f]=c,c!==n);)[g,x]=this.getChildren(c),c=n>g?x:g;let m;for(;f<d.length;)c=d[f],f===0?m=this.hashLeaf(c,this.hashFn(i)):c-1===d[f-1]?m=this.hashBranch(c,o[f-1],m):m=this.hashBranch(c,m,o[f-1]),f++;if(!m.equals(l))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(e,t){const n={};let i=0,s=0,o=t.length;for(let a=1;a<=32;a++)i=32-a,s=1<<a-1,e&s?n[i]=t[--o]:n[i]=0;if(o!==0)throw new Error("invalid number of peaks");return n}peakMapToPeaks(e,t){const n=this.numOfPeaks(e),i=new Array(n);let s=0;for(let o=0;o<32;o++)t[o]!==0&&(i[s++]=t[o]);if(s!==n)throw new Error("invalid number of peaks");return i}peakUpdate(e,t,n){const i={},s=e+1;let o=this.getLeafIndex(s),a=this.hashLeaf(o,n),c=0,l=0,u=!1,f=!1,d=!1;for(let g=1;g<=32;g++)c=32-g,d?i[c]=t[c]:(l=1<<g-1,u=(e&l)!==0,f=(s&l)!==0,o++,u&&(a=this.hashBranch(o,t[c],a)),f?(u?i[c]=t[c]:i[c]=a,d=!0):i[c]=0);return i}rollUp(e,t,n,i){if(!e.equals(this.peakBagging(t,n)))throw new Error("invalid root hash from the peaks");let s=t,o=this.peaksToPeakMap(t,n);for(let a=0;a<i.length;a++)o=this.peakUpdate(s,o,i[a]),s++;return this.peakBagging(s,this.peakMapToPeaks(s,o))}_getOrCreateNode(e){if(e>this.size)throw new Error("out of range");if(!this.hashes[e]){const[t,n]=this.getChildren(e),i=this._getOrCreateNode(t),s=this._getOrCreateNode(n);this.hashes[e]=this.hashBranch(e,i,s)}return this.hashes[e]}}_o.MerkleMountainRange=xl;typeof window<"u"&&(window.MerkleMountainRange=xl);_o.default=xl;var Ho={},zd=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.IncrementalMerkleTree=void 0;const iw=zd(Zn),sw=zd(Od);class ml extends iw.default{constructor(e,t){if(super(),this.hashFn=e,t.depth&&(this.depth=t.depth),t.arity&&(this.arity=t.arity),this.depth<1)throw new Error("depth must be greater than 0");if(this.arity<1)throw new Error("arity must be greater than 0");const n=[];let i=t.zeroValue;if(this.zeroValue=i,this.zeroes=[],this.depth)for(let s=0;s<this.depth;s++)this.zeroes.push(i),n[s]=[],i=this.hashFn(Array(this.arity).fill(i));this.nodes=n,this.root=i}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.bufferify(this.getRoot()))}insert(e){if(this.depth&&this.arity&&this.nodes[0].length>=this.getMaxLeaves())throw new Error("tree is full");let t=e,n=this.nodes[0].length;for(let i=0;i<this.depth;i+=1){const s=n%this.arity,o=n-s,a=o+this.arity,c=[];this.nodes[i][n]=t;for(let l=o;l<a;l+=1)l<this.nodes[i].length?c.push(this.nodes[i][l]):c.push(this.zeroes[i]);t=this.hashFn(c),n=Math.floor(n/this.arity)}this.root=t}delete(e){this.update(e,this.zeroValue)}update(e,t){if(e<0||e>=this.nodes[0].length)throw new Error("out of bounds");let n=t;for(let i=0;i<this.depth;i+=1){const s=e%this.arity,o=e-s,a=o+this.arity,c=[];this.nodes[i][e]=n;for(let l=o;l<a;l+=1)l<this.nodes[i].length?c.push(this.nodes[i][l]):c.push(this.zeroes[i]);n=this.hashFn(c),e=Math.floor(e/this.arity)}this.root=n}getDepth(){return this.depth}getArity(){return this.arity}getMaxLeaves(){return Math.pow(this.depth,this.arity)}indexOf(e){return this.nodes[0].indexOf(e)}getLeaves(){const e=this.copyList(this.nodes[0]),t=this.nodes[0].length;for(let n=t;n<this.getMaxLeaves();n++)e[n]=this.zeroValue;return e}copyList(e){return e.map(t=>BigInt(t))}getLayers(){const e=[];for(const t of this.nodes)e.push(this.copyList(t));if(e[0].length<this.getMaxLeaves()){let t=e[0].length;for(let n=t;n<this.getMaxLeaves();n++)e[0][n]=this.zeroValue;for(let n=0;n<this.depth;n++){const i=t%this.arity,s=t-i,o=s+this.arity;for(let a=s;a<o;a++)a>=e[n].length&&(e[n][a]=this.zeroes[n]);t=Math.floor(t/this.arity)}}return e.push([this.root]),e}getHexLayers(){return this.getLayers().reduce((e,t)=>(Array.isArray(t)?e.push(t.map(n=>this.bufferToHex(this.bufferify(n)))):e.push(t),e),[])}getLayersAsObject(){const e=this.getLayers().map(n=>n.map(i=>this.bufferToHex(this.bufferify(i),!1))),t=[];for(let n=0;n<e.length;n++){const i=[];for(let s=0;s<e[n].length;s++){const o={[e[n][s]]:null};if(t.length){o[e[n][s]]={};const a=t.shift(),c=Object.keys(a)[0];if(o[e[n][s]][c]=a[c],t.length){const l=t.shift(),u=Object.keys(l)[0];o[e[n][s]][u]=l[u]}}i.push(o)}t.push(...i)}return t[0]}computeRoot(){let e,t=this.nodes[0].length;for(let n=0;n<this.depth;n+=1){const i=t%this.arity,s=t-i,o=s+this.arity,a=[];for(let c=s;c<o;c+=1)c<this.nodes[n].length?a.push(this.nodes[n][c]):a.push(this.zeroes[n]);e=this.hashFn(a),t=Math.floor(t/this.arity)}return e}getProof(e){if(e<0||e>=this.nodes[0].length)throw new Error("The leaf does not exist in this tree");const t=[],n=[],i=e;for(let s=0;s<this.depth;s+=1){const o=e%this.arity,a=e-o,c=a+this.arity;n[s]=o,t[s]=[];for(let l=a;l<c;l+=1)l!==e&&(l<this.nodes[s].length?t[s].push(this.nodes[s][l]):t[s].push(this.zeroes[s]));e=Math.floor(e/this.arity)}return{root:this.root,leaf:this.nodes[0][i],pathIndices:n,siblings:t}}verify(e){let t=e.leaf;for(let n=0;n<e.siblings.length;n+=1){const i=e.siblings[n].slice();i.splice(e.pathIndices[n],0,t),t=this.hashFn(i)}return e.root===t}toString(){return this.toTreeString()}toTreeString(){const e=this.getLayersAsObject();return sw.default.asTree(e,!0)}}Ho.IncrementalMerkleTree=ml;typeof window<"u"&&(window.IncrementalMerkleTree=ml);Ho.default=ml;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.MerkleSumTree=nn.ProofStep=nn.Leaf=nn.Bucket=void 0;const ow=Zn;class Ia{constructor(e,t){this.size=BigInt(e),this.hashed=t,this.parent=null,this.left=null,this.right=null}}nn.Bucket=Ia;class aw{constructor(e,t,n){this.hashFn=e,this.rng=t.map(i=>BigInt(i)),this.data=n}getBucket(){let e;return this.data?e=this.hashFn(this.data):e=Buffer.alloc(32),new Ia(BigInt(this.rng[1])-BigInt(this.rng[0]),e)}}nn.Leaf=aw;class Gd{constructor(e,t){this.bucket=e,this.right=t}}nn.ProofStep=Gd;class zo extends ow.Base{constructor(e,t){super(),this.leaves=e,this.hashFn=t,zo.checkConsecutive(e),this.buckets=[];for(const i of e)this.buckets.push(i.getBucket());let n=[];for(const i of this.buckets)n.push(i);for(;n.length!==1;){const i=[];for(;n.length;)if(n.length>=2){const s=n.shift(),o=n.shift(),a=s.size+o.size,c=this.hashFn(Buffer.concat([this.sizeToBuffer(s.size),this.bufferify(s.hashed),this.sizeToBuffer(o.size),this.bufferify(o.hashed)])),l=new Ia(a,c);o.parent=l,s.parent=o.parent,s.right=o,o.left=s,i.push(l)}else i.push(n.shift());n=i}this.root=n[0]}sizeToBuffer(e){const t=Buffer.alloc(8);return new DataView(t.buffer).setBigInt64(0,BigInt(e),!1),t}static checkConsecutive(e){let t=BigInt(0);for(const n of e){if(n.rng[0]!==t)throw new Error("leaf ranges are invalid");t=BigInt(n.rng[1])}}getProof(e){let t=this.buckets[Number(e)];const n=[];for(;t&&t.parent;){const i=!!t.right,s=t.right?t.right:t.left;t=t.parent,n.push(new Gd(s,i))}return n}sum(e){let t=BigInt(0);for(const n of e)t+=BigInt(n);return t}verifyProof(e,t,n){const i=[this.sum(n.filter(a=>!a.right).map(a=>a.bucket.size)),BigInt(e.size)-this.sum(n.filter(a=>a.right).map(a=>a.bucket.size))];if(!(i[0]===t.rng[0]&&i[1]===t.rng[1]))return!1;let s=t.getBucket(),o;for(const a of n)a.right?o=this.hashFn(Buffer.concat([this.sizeToBuffer(s.size),this.bufferify(s.hashed),this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed)])):o=this.hashFn(Buffer.concat([this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed),this.sizeToBuffer(s.size),this.bufferify(s.hashed)])),s=new Ia(BigInt(s.size)+BigInt(a.bucket.size),o);return s.size===e.size&&s.hashed.toString("hex")===e.hashed.toString("hex")}}nn.MerkleSumTree=zo;typeof window<"u"&&(window.MerkleSumTree=zo);nn.default=zo;var ic={},cw=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ic,"__esModule",{value:!0});ic.MerkleRadixTree=void 0;const K0=cw(Zn);class ta{constructor(e="",t=null,n){this.key=e,this.value=t,this.children=new Map,this.hashFn=n,this.hash=this.computeHash()}computeHash(){let e=this.hashFn("");e=Buffer.concat([e,K0.default.bufferify(this.key),this.value!=null?K0.default.bufferify(this.value):Buffer.alloc(0)]);for(const n of this.children.values())e=Buffer.concat([e,n.hash]);return this.hashFn(e)}updateHash(){this.hash=this.computeHash()}}class lw extends K0.default{constructor(e){super(),this.hashFn=this.bufferifyFn(e),this.root=new ta("",null,this.hashFn)}insert(e,t){let n=this.root,i=0;for(;e.length>0;){const s=[...n.children.values()].find(o=>e.startsWith(o.key));if(!s){n.children.set(e,new ta(e,t,this.hashFn)),n.updateHash();return}if(i=this.commonPrefixLength(e,s.key),i===s.key.length)n=s,e=e.slice(i);else{const o=e.slice(0,i),a=s.key.slice(i),c=new ta(o,null,this.hashFn);if(n.children.delete(s.key),n.children.set(o,c),c.children.set(a,s),s.key=a,i<e.length){const l=e.slice(i);c.children.set(l,new ta(l,t,this.hashFn))}else c.value=t;n.updateHash(),c.updateHash();return}}n.value=t,n.updateHash()}lookup(e){let t=this.root;for(;e.length>0;){const n=[...t.children.values()].find(s=>e.startsWith(s.key));if(!n)return null;const i=this.commonPrefixLength(e,n.key);if(i===n.key.length)t=n,e=e.slice(i);else return null}return t.value}commonPrefixLength(e,t){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;return n}generateProof(e){let t=this.root;const n=[];for(;e.length>0;){const i=[];for(const a of t.children.values())a.key!==e&&i.push({key:a.key,hash:a.hash});n.push({key:t.key,hash:t.hash,siblings:i});const s=[...t.children.values()].find(a=>e.startsWith(a.key));if(!s)return null;const o=this.commonPrefixLength(e,s.key);if(o===s.key.length)t=s,e=e.slice(o);else return null}return n.push({key:t.key,hash:t.hash,siblings:[]}),n}verifyProof(e,t){if(!e||e.length===0)return!1;let n=e[e.length-1].hash;for(let i=e.length-2;i>=0;i--){const s=e[i];let o=Buffer.concat([this.hashFn(""),this.bufferify(s.key),n]);for(const a of s.siblings)o=Buffer.concat([o,a.hash]);n=this.hashFn(o)}return n.equals(t)}}ic.MerkleRadixTree=lw;(function(r){var e=le&&le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.MerkleTree=void 0;const t=e(Oo);r.MerkleTree=t.default;var n=_o;Object.defineProperty(r,"MerkleMountainRange",{enumerable:!0,get:function(){return n.MerkleMountainRange}});var i=Ho;Object.defineProperty(r,"IncrementalMerkleTree",{enumerable:!0,get:function(){return i.IncrementalMerkleTree}});var s=nn;Object.defineProperty(r,"MerkleSumTree",{enumerable:!0,get:function(){return s.MerkleSumTree}});var o=ic;Object.defineProperty(r,"MerkleRadixTree",{enumerable:!0,get:function(){return o.MerkleRadixTree}}),r.default=t.default})(Rd);typeof window<"u"&&(window.Buffer=Mo.Buffer);function wl(r){if(!r||r.length===0)throw new Error("Cannot build tree: no winners provided");const e=r.map(n=>Kh(["address","uint8","uint8"],[n.address,n.prizeTier,n.prizeIndex]));return new Rd.MerkleTree(e,He,{sortPairs:!0})}function Wd(r,e,t){const n=wl(r),i=r.find(a=>a.address.toLowerCase()===e.toLowerCase()&&a.prizeIndex===t);if(!i)throw new Error(`Winner not found: ${e} for prize ${t}`);const s=Kh(["address","uint8","uint8"],[i.address,i.prizeTier,i.prizeIndex]);return n.getHexProof(s)}function Vd(r,e){return r.filter(t=>t.address.toLowerCase()===e.toLowerCase())}function Qd(r){switch(r){case 1:return"Fake Pack";case 2:return"Kek Pack";case 3:return"Pepe Pack";default:return`Unknown tier (${r})`}}function $d(r,e,t){if(r.vrfSeed!==t)return console.error("VRF seed mismatch:",r.vrfSeed,"vs",t),!1;const i=wl(r.winners).getHexRoot();return i.toLowerCase()!==e.toLowerCase()?(console.error("Merkle root mismatch:",i,"vs",e),!1):(console.log("✅ Winners File verified against on-chain data"),!0)}const uw=Object.freeze(Object.defineProperty({__proto__:null,buildWinnersTree:wl,generateWinnerProof:Wd,getPrizeTierName:Qd,getPrizesForAddress:Vd,verifyWinnersFile:$d},Symbol.toStringTag,{value:"Module"}));async function Go(r,e,t){console.log("🎯 displayClaimablePrizes called:",{userAddress:e,roundId:t});const n=document.getElementById("claims-container");if(n)try{console.log("📡 Fetching round state (single optimized call)...");const i=await r.getRoundState(t),s=i.round,o=Number(s.status);if(o!==5&&o!==6){n.style.display="none";return}if(!s.winnersRoot||s.winnersRoot===so){n.style.display="none";return}const a=await r.winnersCIDs(t);if(!a||a===""){n.innerHTML='<p class="info">Winners file not yet published</p>',n.style.display="block";return}n.innerHTML='<p class="info">Loading winners data from IPFS...</p>',n.style.display="block";const c=await ec(a,t),l=s.vrfSeed||so;if(!$d(c,s.winnersRoot,l)){n.innerHTML='<p class="error">⚠️ Winners file verification failed</p>';return}const f=Vd(c.winners,e);console.log("🎁 User prizes found:",f.length,f);const[,d]=await r.getUserStats(t,e),g=Number(d)>0;if(f.length===0)n.innerHTML='<p class="info">No prizes won in this round</p>';else{const m=i.prizeTokenIds,w=i.prizeClaimers;console.log("🎨 Building HTML for prizes...");let v='<div class="prizes-grid">';for(const C of f){const F=C.prizeIndex,T=w[F]!==wi,D=m[F].toString()!=="0"?m[F].toString():"TBD";console.log("🎁 Prize",F,"- NFT:",D,"- Claimed:",T),v+=`
        <div class="prize-card ${T?"claimed":""}">
          <div class="prize-tier">${Qd(C.prizeTier)}</div>
          <div class="prize-index">Prize #${C.prizeIndex+1}</div>
          <div class="prize-token">NFT ID: ${D}</div>
          ${T?'<div class="claim-status claimed">✓ Claimed</div>':`<button class="claim-btn" data-round="${t}" data-prize-index="${C.prizeIndex}" data-prize-tier="${C.prizeTier}">🐸 Claim Prize</button>`}
        </div>
      `}v+="</div>",console.log("🎨 Setting innerHTML and showing claims..."),n.innerHTML=v;const A=document.getElementById("claims-section");A&&(console.log("✅ Showing claims section"),A.style.display="block"),n.querySelectorAll(".claim-btn").forEach(C=>{C.addEventListener("click",async()=>{const F=parseInt(C.dataset.round),T=parseInt(C.dataset.prizeIndex),D=parseInt(C.dataset.prizeTier);await fw(r,e,F,T,D,c)})})}const x=document.getElementById("luck-analysis-container");if(x&&g)try{const m=await Id(r,t,e,c);t1(m,"#luck-analysis-container")}catch(m){console.error("Error displaying luck analysis:",m),x.innerHTML=""}else x&&(x.innerHTML="")}catch(i){console.error("Error displaying claimable prizes:",i),n.innerHTML=`<p class="error">Failed to load prizes: ${i.message}</p>`}}async function fw(r,e,t,n,i,s){try{Y("Generating Merkle proof...","info");const o=Wd(s.winners,e,n);Y("Submitting claim transaction...","info");const a=await r.claim(t,n,i,o);Y("Waiting for confirmation...","info");const c=await a.wait();console.log("Prize claimed successfully:",c),Y("✅ Prize claimed successfully! NFT transferred to your wallet.","success"),setTimeout(()=>{Go(r,e,t)},2e3)}catch(o){console.error("Error claiming prize:",o);let a="Failed to claim prize";o.message.includes("user rejected")?a="Transaction cancelled by user":o.message.includes("already claimed")?a="This prize has already been claimed":o.message.includes("invalid proof")?a="Invalid Merkle proof - verification failed":o.message.includes("Claim limit")?a="You have reached your claim limit for this round":a=`Failed to claim: ${o.message}`,Y(a,"error")}}async function hw(r,e){const t=document.getElementById("winners-section"),n=document.getElementById("winners-list"),i=document.getElementById("winners-title");if(!(!t||!n))try{const s=await r.getRound(e),o=Number(s.status);if(i&&(i.textContent=`Winners - Round ${e}`),t.style.display="block",o===7){n.innerHTML=`
        <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-secondary);">
          <h3>💰 Round Refunded</h3>
          <p>Round ${e} was refunded due to insufficient participation.</p>
          <p>No winners were selected - all participants have been refunded their wagers.</p>
        </div>
      `;return}if(!s.winnersRoot||s.winnersRoot===so){n.innerHTML='<p class="info">Winners not yet determined for this round</p>';return}const a=await r.winnersCIDs(e);if(!a||a===""){n.innerHTML='<p class="info">Winners file not yet published for this round</p>';return}const c=await ec(a,e),l=c.winners.filter(g=>g.prizeTier===1),u=c.winners.filter(g=>g.prizeTier===2),f=c.winners.filter(g=>g.prizeTier===3);let d='<div class="winners-podium">';l.length>0&&(d+=`
        <div class="podium-tier tier-1">
          <div class="podium-tier-header">
            <div class="tier-icon">🥇</div>
            <div class="tier-text">
              <div class="tier-label">Fake Pack</div>
              <div class="tier-subtitle">Grand Prize</div>
            </div>
          </div>
          <div class="tier-winners">
            ${l.map(g=>`
              <div class="winner-item" title="${g.address}">
                ${g.address.slice(0,6)}...${g.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),u.length>0&&(d+=`
        <div class="podium-tier tier-2">
          <div class="podium-tier-header">
            <div class="tier-icon">🥈</div>
            <div class="tier-text">
              <div class="tier-label">Kek Pack</div>
              <div class="tier-subtitle">Second Prize</div>
            </div>
          </div>
          <div class="tier-winners">
            ${u.map(g=>`
              <div class="winner-item" title="${g.address}">
                ${g.address.slice(0,6)}...${g.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),f.length>0&&(d+=`
        <div class="podium-tier tier-3">
          <div class="podium-tier-header">
            <div class="tier-icon">🥉</div>
            <div class="tier-text">
              <div class="tier-label">Pepe Packs</div>
              <div class="tier-subtitle">${f.length} Winners</div>
            </div>
          </div>
          <div class="tier-winners">
            ${f.map(g=>`
              <div class="winner-item" title="${g.address}">
                ${g.address.slice(0,6)}...${g.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),d+="</div>",n.innerHTML=d,t.style.display="block"}catch(s){console.error("Error displaying winners:",s),t.style.display="none"}}async function Wo(r,e){const t=document.getElementById("refund-section"),n=document.getElementById("refund-container");if(!(!n||!t))try{const i=await r.refunds(e);if(i===0n){t.style.display="none";return}const s=Tr(i);n.innerHTML=`
      <div class="refund-card">
        <h3>💰 Refund Available</h3>
        <p class="refund-amount">${s} ETH</p>
        <p class="refund-info">This round didn't meet the minimum ticket threshold.</p>
        <button id="withdraw-refund-btn" class="btn btn-primary">Withdraw Refund</button>
      </div>
    `,t.style.display="block",document.getElementById("withdraw-refund-btn").addEventListener("click",()=>dw(r,e))}catch(i){console.error("Error checking refund:",i)}}async function dw(r,e){try{Y("Withdrawing refund...","info");const t=await r.withdrawRefund();Y("Waiting for confirmation...","info");const n=await t.wait();console.log("Refund withdrawn successfully:",n),Y("✅ Refund withdrawn successfully!","success"),setTimeout(()=>{Wo(r,e)},2e3)}catch(t){console.error("Error withdrawing refund:",t);let n="Failed to withdraw refund";t.message.includes("user rejected")?n="Transaction cancelled by user":t.message.includes("No refund")?n="No refund available":n=`Failed to withdraw: ${t.message}`,Y(n,"error")}}const Kd=Object.freeze(Object.defineProperty({__proto__:null,displayClaimablePrizes:Go,displayRefundButton:Wo,displayWinners:hw},Symbol.toStringTag,{value:"Module"}));function pw(){const r=document.createElement("button");r.id="tribute-tab",r.className="tribute-floating-tab",r.setAttribute("aria-label","Open Fake Rare Community Tribute"),r.innerHTML=`
    <img src="/logo-icon.png" alt="PEPEDAWN Logo" class="tribute-tab-icon" />
  `;const e=document.createElement("div");e.id="tribute-slideout",e.className="tribute-slideout",e.innerHTML=`
    <div class="tribute-slideout-content">
      <button class="tribute-close-btn" id="tribute-close" aria-label="Close tribute panel">×</button>
      
      <div class="tribute-header">
        <img src="/logo-icon.png" alt="PEPEDAWN Logo" class="tribute-logo" />
        <h2>🐸 A Tribute to the Fake Rare Community</h2>
      </div>
      
      <div class="tribute-body">
        <p><strong>PEPEDAWN exists because of the legendary Fake Rare Pepe community.</strong></p>
        
        <p>While the original Rare Pepe collection captured lightning in a bottle on the Bitcoin blockchain via Counterparty, the <strong>Fake Rare</strong> movement emerged as a brilliant satire—an artistic rebellion that questioned authenticity, value, and what makes art "real" in the first place.</p>
        
        <div class="tribute-highlight">
          <p><strong>🎨 The Fake Rare Ethos</strong></p>
          <p>Fake Rares are not counterfeits—they're commentary. They're art about art. They celebrate the absurdity of digital scarcity while simultaneously participating in it. They ask: if a meme is copied, remixed, and reborn on the blockchain, is it any less "real" than the original?</p>
        </div>
        
        <p><strong>This project distributes 133 Fake Rare Pepe cards</strong> minted on Counterparty/Bitcoin, honoring the OG Fake Rare spirit: provably scarce, verifiably random, undeniably memetic.</p>
        
        <div class="tribute-links">
          <p><strong>Explore the Fake Rare Universe:</strong></p>
          <ul>
            <li>🌐 <a href="https://pepe.wtf" target="_blank" rel="noopener noreferrer">pepe.wtf</a> - The definitive Fake Rare directory</li>
            <li>𝕏 Follow <a href="https://twitter.com/fakerares_xcp" target="_blank" rel="noopener noreferrer">@fakerares_xcp</a> on X/Twitter</li>
            <li>🔗 Traded on Counterparty (XCP) - Bitcoin's OG NFT protocol</li>
          </ul>
        </div>
        
        <div class="tribute-footer">
          <p><em>"In a world of expensive JPEGs, Fake Rares remind us that the real treasure is the memes we made along the way."</em></p>
          <p><strong>— The Fake Rare Manifesto (probably)</strong></p>
        </div>
      </div>
    </div>
  `,document.body.appendChild(r),document.body.appendChild(e),r.addEventListener("click",()=>{e.classList.add("open")}),document.getElementById("tribute-close").addEventListener("click",()=>{e.classList.remove("open")}),e.addEventListener("click",n=>{n.target===e&&e.classList.remove("open")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&e.classList.contains("open")&&e.classList.remove("open")})}const gw=console.error;console.error=(...r)=>{const e=r.join(" ");e.includes("No filter for index")||e.includes("eth_getFilterChanges")||gw.apply(console,r)};let Fe=null,on=null,V=null,Z=null,l0=null,xo=!1;const ye=new Set;if(Ir()){const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/eruda",r.onload=()=>{window.eruda.init(),console.log("🔧 Eruda mobile console initialized (DEV MODE)")},document.head.appendChild(r)}function Ir(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function it(r,e){console.log(`🎲 ${r}:`,e)}async function Dt(r=null){const e=document.getElementById("submit-proof"),t=document.getElementById("buy-tickets"),n=document.querySelectorAll(".ticket-option-card"),i=document.getElementById("proof-input");if(!V){e&&(e.disabled=!0,e.title="Contract not available"),t&&(t.disabled=!0,t.title="Contract not available"),n.forEach(s=>{s.style.pointerEvents="none",s.style.opacity="0.5",s.title="Contract not available"});return}try{const s=await V.currentRoundId();if(s.toString()==="0")l0=0;else{let a;r?a=r.round:a=await V.getRound(s),l0=Number(a.status)}const o=l0===1;if(t&&(t.disabled=!o||!Z,Z?o?t.title="":t.title="Round is not open for ticket purchases":t.title="Connect wallet to purchase tickets"),n.forEach(a=>{!o||!Z?(a.style.pointerEvents="none",a.style.opacity="0.5",Z?o||(a.title="Round is not open for betting"):a.title="Connect wallet to place bets"):(a.style.pointerEvents="auto",a.style.opacity="1",a.title="")}),e&&i){let a=!0,c="";if(!Z)a=!0,c="Connect wallet to submit proof";else if(!o)a=!0,c="Round is not open for proof submission";else try{const l=await V.getUserStats(s,Z);if(l.tickets.toString()==="0")a=!0,c="Purchase tickets before submitting proof",i.value="",i.classList.remove("proof-success","proof-failure");else if(l.hasProof){a=!0;const u=document.getElementById("user-proof-status");u&&u.className==="proof-success"?(c="Proof verified successfully",i.value="🎉 You Submitted your PROOF successfully! 🎉",i.classList.add("proof-success"),i.classList.remove("proof-failure")):u&&u.className==="proof-failed"?(c="Proof was incorrect",i.value="😞 Proof submission failed - try again next round! 😞",i.classList.add("proof-failure"),i.classList.remove("proof-success")):(c="Proof already submitted for this round",i.value="")}else a=!1,c="",i.value="",i.classList.remove("proof-success","proof-failure")}catch{a=!o,c=o?"":"Round is not open for proof submission"}e.disabled=a,e.title=c,i.disabled=a}}catch(s){console.error("Error updating button states:",s),e&&(e.disabled=!0,e.title="Error checking round status"),t&&(t.disabled=!0,t.title="Error checking round status"),n.forEach(o=>{o.style.pointerEvents="none",o.style.opacity="0.5",o.title="Error checking round status"})}}window.toggleProofSection=function(){const r=document.getElementById("proof-form"),e=document.querySelector("#proof-section .collapse-icon");r.style.display==="none"?(r.style.display="block",e.textContent="▲"):(r.style.display="none",e.textContent="▼")};window.closeTicketOffice=function(){const r=document.getElementById("ticket-office");r&&r.classList.remove("open"),document.querySelectorAll(".ticket-option-card").forEach(e=>e.classList.remove("selected"))};function u0(){return Ir()&&(navigator.brave&&typeof navigator.brave.isBrave=="function"||/Brave/i.test(navigator.userAgent))}const Pa=new Map;function yw(){window.addEventListener("eip6963:announceProvider",r=>{const{info:e,provider:t}=r.detail;console.log("🔍 EIP-6963 wallet discovered:",e.name),Pa.set(e.uuid,{info:e,provider:t})}),window.dispatchEvent(new Event("eip6963:requestProvider"))}function xw(){var e;const r=[];if(Pa.forEach(({info:t,provider:n})=>{r.push({name:t.name,icon:t.icon,provider:n,uuid:t.uuid,rdns:t.rdns})}),window.ethereum){if(!r.some(n=>n.provider===window.ethereum)){let n="Browser Wallet";window.ethereum.isMetaMask?n="MetaMask":window.ethereum.isCoinbaseWallet?n="Coinbase Wallet":window.ethereum.isBraveWallet?n="Brave Wallet":window.ethereum.isRabby?n="Rabby Wallet":window.ethereum.isTrust&&(n="Trust Wallet"),r.push({name:n,provider:window.ethereum,uuid:"legacy-ethereum"})}((e=window.ethereum.providers)==null?void 0:e.length)>0&&window.ethereum.providers.forEach((n,i)=>{if(!r.some(o=>o.provider===n)){let o="Wallet "+(i+1);n.isMetaMask?o="MetaMask":n.isCoinbaseWallet?o="Coinbase Wallet":n.isBraveWallet?o="Brave Wallet":n.isRabby?o="Rabby Wallet":n.isTrust&&(o="Trust Wallet"),r.push({name:o,provider:n,uuid:"legacy-"+i})}})}return console.log(`✅ Found ${r.length} wallet provider(s):`,r.map(t=>t.name).join(", ")),r}function Gs(){const r=xw();if(r.length===0)return console.log("❌ No Web3 provider detected"),null;const e=["MetaMask","Rabby Wallet","Coinbase Wallet","Trust Wallet","Rainbow","Brave Wallet","Browser Wallet"];if(navigator.userAgent.includes("MetaMaskMobile")&&r.length>0)return console.log("✅ MetaMask Mobile Browser detected"),r[0].provider;for(const t of e){const n=r.find(i=>i.name===t);if(n)return console.log(`✅ Auto-selected: ${n.name}`),n.name==="Brave Wallet"&&r.length>1&&console.log("⚠️ Brave Wallet detected. Other wallets available:",r.filter(i=>i.name!=="Brave Wallet").map(i=>i.name).join(", ")),n.provider}return console.log(`✅ Using first available provider: ${r[0].name}`),r[0].provider}async function mw(){if(!V){if(console.log("⚠️ Contract not available - showing fallback UI"),window.location.pathname.includes("leaderboard.html")){const r=document.getElementById("winners-round-select"),e=document.getElementById("round-select"),t=document.getElementById("winners-list"),n=document.getElementById("leaderboard-list");r&&(r.innerHTML='<option value="">Contract unavailable</option>'),e&&(e.innerHTML='<option value="">Contract unavailable</option>'),t&&(t.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--text-secondary);">Unable to load contract data. Please check your connection and refresh.</p>'),n&&(n.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--text-secondary);">Unable to load contract data. Please check your connection and refresh.</p>')}if(window.location.pathname.includes("claim.html")){const r=document.getElementById("claims-round-select");r&&(r.innerHTML='<option value="">Contract unavailable</option>')}return}try{const r=await V.currentRoundId();if(window.location.pathname.includes("leaderboard.html")&&(console.log("📊 Initializing leaderboard page..."),await Qu(V),r.toString()!=="0")){const{displayWinners:e}=await ha(async()=>{const{displayWinners:t}=await Promise.resolve().then(()=>Kd);return{displayWinners:t}},void 0);await e(V,Number(r)),await Fr(V)}window.location.pathname.includes("claim.html")&&(console.log("🎁 Initializing claim page..."),await Qu(V)),window.location.pathname.includes("rules.html")&&(console.log("📜 Initializing rules page..."),await Ew(V))}catch(r){console.error("Error initializing page data:",r)}}async function Ff(){console.log("Initializing PEPEDAWN application..."),i1(),pw(),ww(),(window.location.pathname.includes("leaderboard.html")||window.location.pathname.includes("claim.html"))&&bw();const r=Gs();if(r)try{(await r.request({method:"eth_accounts"})).length>0&&await Cw()}catch(e){console.log("No wallet auto-connection:",e),e.message&&e.message.includes("ethereum")&&console.log("Wallet extension conflict detected - user should disable conflicting extensions")}else Ir()&&console.log("📱 Mobile device detected without wallet - loading read-only mode");await sc(),await mw(),Rw()}function ww(){const r=document.getElementById("connect-wallet");r&&r.addEventListener("click",qd);const e=document.getElementById("hamburger-menu"),t=document.getElementById("main-nav");e&&t&&(e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active")}),t.querySelectorAll("a").forEach(c=>{c.addEventListener("click",function(){e.classList.remove("active"),t.classList.remove("active")})}),document.addEventListener("click",function(c){!e.contains(c.target)&&!t.contains(c.target)&&(e.classList.remove("active"),t.classList.remove("active"))}));const n=document.getElementById("betting-form");n&&n.addEventListener("click",function(a){const c=a.target.closest(".ticket-option-card");c&&Pw({currentTarget:c})});const i=document.getElementById("buy-tickets");i&&i.addEventListener("click",Al);const s=document.getElementById("mobile-place-bet");s&&s.addEventListener("click",Dw);const o=document.getElementById("submit-proof");o&&o.addEventListener("click",Jd)}function bw(){const r=document.getElementById("round-select");r&&r.addEventListener("change",async function(){const n=this.value;V&&await Fr(V,n)});const e=document.getElementById("winners-round-select");e&&e.addEventListener("change",async function(){const n=this.value;if(V){const{displayWinners:i}=await ha(async()=>{const{displayWinners:s}=await Promise.resolve().then(()=>Kd);return{displayWinners:s}},void 0);await i(V,Number(n))}});const t=document.getElementById("claims-round-select");t&&t.addEventListener("change",async function(){const n=this.value;V&&Z&&await Go(V,Z,Number(n))})}async function Aw(r,e){if(!r||!e)return{count:0,rounds:[]};try{const t=await r.currentRoundId(),n=Number(t);if(n===0)return{count:0,rounds:[]};const i=[],s=Math.max(1,n-4);for(let o=s;o<=n;o++)try{const a=await r.getRoundState(o);if(Number(a.round.status)!==6)continue;const l=await r.winnersCIDs(o);if(!l||l==="")continue;const{fetchWinnersFile:u}=await ha(async()=>{const{fetchWinnersFile:x}=await Promise.resolve().then(()=>r1);return{fetchWinnersFile:x}},void 0),{getPrizesForAddress:f}=await ha(async()=>{const{getPrizesForAddress:x}=await Promise.resolve().then(()=>uw);return{getPrizesForAddress:x}},void 0),d=await u(l,o);if(!d||!d.winners)continue;const g=f(d.winners,e);if(g.length===0)continue;for(const x of g)a.prizeClaimers[x.prizeIndex]!==wi||i.push({roundId:o,prizeIndex:x.prizeIndex,prizeTier:x.prizeTier})}catch(a){console.log(`Skipping round ${o}:`,a.message)}return{count:i.length,rounds:[...new Set(i.map(o=>o.roundId))],prizes:i}}catch(t){return console.error("Error checking unclaimed prizes:",t),{count:0,rounds:[]}}}async function bl(r,e){const t=document.getElementById("unclaimed-prizes-notification");if(t)try{const n=await Aw(r,e);n.count>0?(t.innerHTML=`
        <a href="/claim.html" class="unclaimed-link">
          <span class="unclaimed-icon">🎁</span>
          <span class="unclaimed-text">${n.count} unclaimed prize${n.count>1?"s":""}!</span>
        </a>
      `,t.style.display="block"):t.style.display="none"}catch(n){console.error("Error displaying unclaimed prizes notification:",n),t.style.display="none"}}async function Ew(r){if(r)try{const e=ke.address;document.getElementById("contract-address").textContent=e;const t=await r.owner(),n=document.getElementById("contract-owner");n&&(n.textContent=t);const i=await Fe.getBalance(e),s=Tr(i),o=document.getElementById("contract-balance");o&&(o.textContent=`${parseFloat(s).toFixed(4)} ETH`);const a=await r.currentRoundId(),c=document.getElementById("current-round");c&&(c.textContent=a.toString()!=="0"?`Round ${a}`:"No active rounds");const l=document.getElementById("contract-nfts");if(l)try{const f=await r.emblemVaultAddress(),g=await new mi(f,["function balanceOf(address) view returns (uint256)"],Fe).balanceOf(e);l.textContent=`${g.toString()} NFTs`}catch{l.textContent="Unable to fetch"}document.getElementById("verified-status")&&vw(e)}catch(e){console.error("Error updating contract info:",e);const t=document.getElementById("contract-owner"),n=document.getElementById("contract-balance"),i=document.getElementById("contract-nfts"),s=document.getElementById("current-round");t&&(t.textContent="Error loading"),n&&(n.textContent="Error loading"),i&&(i.textContent="Error loading"),s&&(s.textContent="Error loading")}}async function vw(r){try{const e=await Fe.getCode(r);e&&e!=="0x"?(document.getElementById("verified-status").style.display="none",document.getElementById("verified-checkmark").style.display="inline"):(document.getElementById("verified-status").textContent="Not verified",document.getElementById("verified-status").style.color="#f44336")}catch{document.getElementById("verified-status").textContent="Unable to check",document.getElementById("verified-status").style.color="#f44336"}}function Bw(r){const e=document.getElementById(r),t=e.textContent;navigator.clipboard.writeText(t).then(()=>{const n=e.parentElement.querySelector(".copy-btn"),i=n.textContent;n.textContent="✅",n.style.background="rgba(76, 175, 80, 0.3)",setTimeout(()=>{n.textContent=i,n.style.background=""},1500)}).catch(n=>{console.error("Failed to copy: ",n),alert("Failed to copy to clipboard")})}window.copyToClipboard=Bw;async function qd(){var r,e;try{ke.DEV_MODE&&(console.log("=== WALLET CONNECTION DIAGNOSTIC ==="),console.log("User Agent:",navigator.userAgent),console.log("Is Mobile Device:",Ir()),console.log("Is Mobile Brave:",u0()),console.log("window.ethereum exists:",!!window.ethereum),window.ethereum&&(console.log("window.ethereum.isMetaMask:",window.ethereum.isMetaMask),console.log("window.ethereum.isBraveWallet:",window.ethereum.isBraveWallet),console.log("window.ethereum.isCoinbaseWallet:",window.ethereum.isCoinbaseWallet),console.log("window.ethereum.providers:",window.ethereum.providers),console.log("window.ethereum keys:",Object.keys(window.ethereum).slice(0,20))),console.log("navigator.brave exists:",!!navigator.brave),console.log("Discovered wallets (EIP-6963):",Pa.size),Pa.forEach((i,s)=>{console.log("  - Wallet:",i.info.name,"UUID:",s)}),console.log("=== END DIAGNOSTIC ===")),u0()&&(console.log("⚠️ Mobile Brave detected - Brave Wallet has limited dapp support on mobile"),Y("Brave Wallet on mobile has limited dapp support. For best experience, use MetaMask Mobile app browser.","warning",8e3),setTimeout(()=>{const s=`https://metamask.app.link/dapp/${window.location.href.replace(/^https?:\/\//,"")}`;if(confirm("Brave Wallet mobile has known issues. Open this site in MetaMask Mobile Browser instead? (Recommended)")){window.location.href=s;return}},3e3));let t=Gs();if(!t&&Ir()&&(console.log("📱 No provider detected on mobile, waiting for wallet to initialize..."),Y("Waiting for wallet to initialize...","info"),await new Promise(i=>setTimeout(i,500)),window.dispatchEvent(new Event("eip6963:requestProvider")),await new Promise(i=>setTimeout(i,100)),t=Gs()),!t){if(Ir()&&!navigator.userAgent.includes("MetaMaskMobile")){const s=`https://metamask.app.link/dapp/${window.location.href.replace(/^https?:\/\//,"")}`;Y("Opening MetaMask app...","info"),setTimeout(()=>{window.location.href=s},500),setTimeout(()=>{Y("If MetaMask doesn't open, please install MetaMask app","warning")},3e3);return}Y("Please install MetaMask extension or use MetaMask Mobile Browser","error");return}t.isBraveWallet&&!t.isMetaMask&&Y("Brave Wallet detected. For best experience, install MetaMask extension.","warning"),Y("Connecting to wallet...","info"),ke.DEV_MODE&&console.log("🔐 Requesting accounts from provider...");const n=await t.request({method:"eth_requestAccounts"});ke.DEV_MODE&&console.log("✅ Accounts received:",n),ke.DEV_MODE&&console.log("🔧 Creating ethers.BrowserProvider..."),Fe=new yo(t),ke.DEV_MODE&&console.log("🔧 Getting signer..."),on=await Fe.getSigner(),ke.DEV_MODE&&console.log("🔧 Getting address..."),Z=await on.getAddress(),console.log("✅ Wallet connected:",Z),await jd(!0)}catch(t){if(console.error("❌ Error connecting wallet:",t),console.log("=== ERROR DIAGNOSTIC ==="),console.log("Error type:",typeof t),console.log("Error constructor:",(r=t==null?void 0:t.constructor)==null?void 0:r.name),console.log("Error code:",t==null?void 0:t.code),console.log("Error message:",t==null?void 0:t.message),console.log("Error reason:",t==null?void 0:t.reason),console.log("Error data:",t==null?void 0:t.data),console.log("Error keys:",t?Object.keys(t):"null"),console.log("Error JSON:",JSON.stringify(t,null,2)),console.log("Error stack:",t==null?void 0:t.stack),console.log("=== END ERROR DIAGNOSTIC ==="),t.code===4001)Y("Connection cancelled by user","warning");else{if(u0()&&(!t.message||t.message==="[]"||JSON.stringify(t)==="{}")){Y("Brave Wallet mobile connection failed. Please use MetaMask Mobile app browser for reliable connection.","error"),setTimeout(()=>{const s=`https://metamask.app.link/dapp/${window.location.href.replace(/^https?:\/\//,"")}`;confirm("Open in MetaMask Mobile Browser? (Recommended for mobile)")&&(window.location.href=s)},2e3);return}let n="Unknown error";t&&(typeof t=="string"?n=t:t.message&&typeof t.message=="string"?n=t.message:t.reason&&typeof t.reason=="string"?n=t.reason:t.data&&t.data.message?n=t.data.message:Array.isArray(t)&&t.length>0?n=((e=t[0])==null?void 0:e.message)||t[0]||"Array error":typeof t=="object"&&(n=JSON.stringify(t),(n==="{}"||n==="[]")&&(n="Connection failed - please ensure your wallet is unlocked and try again"))),Y("Failed to connect wallet: "+n,"error")}}}async function Cw(){try{const r=Gs();if(!r)return;Fe=new yo(r),on=await Fe.getSigner(),Z=await on.getAddress(),console.log("Wallet auto-connected:",Z),await jd(!1)}catch(r){console.log("Silent wallet connection failed:",r.message)}}async function jd(r=!0){try{const t=await Fe.getNetwork();Xa(t.chainId),console.log("✅ Network validated:",zs.NETWORK_NAMES[Number(t.chainId)])}catch(t){console.warn("⚠️ Network validation failed:",t.message),Y(t.message,"warning")}const e=Gs();if(e&&e.on&&(e.on("chainChanged",kw),e.on("accountsChanged",Tw)),await pl(Z,Fe),await sc(),V){const t=await V.currentRoundId();let n=null;t.toString()!=="0"&&(n=await V.getRoundState(t)),await Cn(V,Z,n),jn(V,Z),await Dt(n),console.log("🔍 Current page:",window.location.pathname),console.log("🔍 Current round ID:",t.toString()),t.toString()!=="0"&&window.location.pathname.includes("main.html")&&(await Wo(V,Z),await bl(V,Z)),window.location.pathname.includes("claim.html")&&t.toString()!=="0"&&await Go(V,Z,Number(t))}r&&Y("Wallet connected successfully","success")}function kw(r){console.log("Network changed to:",r);try{Xa(r),console.log("✅ Network change validated"),xo=!1,ye.clear(),sc().then(async()=>{if(Z&&V){const e=await V.currentRoundId();let t=null;e.toString()!=="0"&&(t=await V.getRoundState(e)),pl(Z,Fe),Cn(V,Z,t),jn(V,Z),Dt(t)}})}catch(e){console.warn("⚠️ Network change validation failed:",e.message),Y(e.message,"warning")}}function Tw(r){if(console.log("Account changed:",r),r.length===0){Z=null,on=null,V=null,xo=!1,ye.clear();const e=document.getElementById("wallet-info");e&&(e.style.display="none");const t=document.getElementById("connect-wallet");t&&(t.textContent="Connect Wallet",t.disabled=!1,t.style.display="inline-block"),Y("Wallet disconnected","info")}else Fw(r[0])}async function Fw(r){try{console.log("Reconnecting wallet for account:",r),Y("Switching wallet...","info"),Z=r;const e=Gs();if(!e){console.error("No provider detected during reconnection");return}if(Fe=new yo(e),on=await Fe.getSigner(),xo=!1,ye.clear(),await pl(Z,Fe),await sc(),V){const t=await V.currentRoundId();let n=null;t.toString()!=="0"&&(n=await V.getRoundState(t)),await Cn(V,Z,n),jn(V,Z),await Dt(n),await fn(V,Fe,n),await Fa(V,n),await Fr(V),t.toString()!=="0"&&(window.location.pathname.includes("main.html")&&(await Wo(V,Z),await bl(V,Z)),window.location.pathname.includes("claim.html")&&await Go(V,Z,Number(t)))}Y("Wallet switched successfully","success")}catch(e){console.error("Error reconnecting wallet:",e),Y("Failed to switch wallet: "+e.message,"error")}}async function If(){const r=["https://rpc.sepolia.org","https://ethereum-sepolia.publicnode.com","https://1rpc.io/sepolia"];for(const e of r)try{console.log("📡 Trying fallback provider:",e);const t=new jm(e),n=new Promise((s,o)=>setTimeout(()=>o(new Error("Connection timeout")),5e3)),i=t.getBlockNumber();return await Promise.race([i,n]),console.log("✅ Fallback provider connected successfully:",e),t}catch(t){console.warn(`⚠️ Failed to connect to ${e}:`,t.message)}return console.error("❌ All fallback providers failed"),null}async function sc(){try{if(console.log("📝 Loading contract..."),!Zm()){console.log("Contract not configured - working in mock mode");return}let r=null,e=!1;if(on){if(r=on,console.log("✅ Using signer for read/write access"),Ir())try{const o=await Fe.getNetwork();console.log("📱 Mobile network detected:",o.chainId.toString(),o.name),console.log("📱 Expected network:",ke.chainId,ke.network)}catch(o){console.warn("⚠️ Could not check network:",o.message)}}else if(Fe){r=Fe,e=!0,console.log("✅ Using provider for read-only access");try{const o=await Fe.getNetwork();Xa(o.chainId),console.log("✅ Network validated for contract loading")}catch(o){console.warn("⚠️ Network validation failed:",o.message),Y(o.message,"warning"),console.log("📡 Falling back to public RPC provider"),r=await If(),e=!0}}else console.log("📱 No wallet detected - using fallback public provider for read-only access"),r=await If(),e=!0;if(!r){console.error("❌ No provider available"),Y("Unable to connect to blockchain. Please try again.","error");return}V=new mi(ke.address,ke.abi,r),console.log("✅ Contract instance created:",ke.address,e?"(read-only)":"(read/write)");const t=Ir(),n=t?3:e?2:1;let i=0,s=!1;for(t&&console.log("📱 Mobile device detected - using extended retry logic for contract verification");i<n&&!s;)try{console.log(`🔍 Verifying contract accessibility (attempt ${i+1}/${n})...`),console.log("🔍 Contract address:",ke.address),console.log("🔍 Provider type:",e?"read-only":"wallet signer");const o=t?1e4:5e3,a=new Promise((u,f)=>setTimeout(()=>f(new Error("Contract call timeout")),o)),c=V.currentRoundId(),l=await Promise.race([c,a]);console.log("✅ Contract accessibility verified. Current round:",l.toString()),s=!0}catch(o){if(i++,console.error(`❌ Contract check failed (attempt ${i}/${n}):`,o),console.error("❌ Error details:",{message:o.message,code:o.code,data:o.data}),i<n){const a=t?3e3:1500;console.log(`⏳ Waiting ${a}ms before retry...`),await new Promise(c=>setTimeout(c,a))}else{if(console.error("❌ Contract not accessible after all retries"),!e){Y("Unable to verify contract. Contract may not be deployed or network may be wrong.","error"),V=null;return}Y("Unable to load contract data. Please check your connection.","error"),V=null;return}}V&&!e&&Iw()}catch(r){console.error("Error loading contract:",r),Y("Failed to load contract: "+r.message,"error")}}function Iw(){if(V){if(xo){console.log("⏭️ Event listeners already set up, skipping...");return}try{console.log("🎧 Setting up enhanced contract event listeners..."),V.removeAllListeners(),xo=!0,V.on("RoundCreated",(...r)=>{const e=r[r.length-1],[t,n,i]=r,s=`RoundCreated-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(s))return;ye.add(s);const o={roundId:t.toString(),startTime:Number(n),endTime:Number(i),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🆕 Round created:",o),it("RoundCreated",o),Y(`New round #${o.roundId} created!`,"success"),fn(V,Fe),Dt()}),V.on("RoundOpened",(...r)=>{const e=r[r.length-1],[t]=r,n=`RoundOpened-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={roundId:t.toString(),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🟢 Round opened:",i),it("RoundOpened",i),Y(`Round #${i.roundId} is now open for betting!`,"success"),fn(V,Fe),Dt()}),V.on("RoundClosed",(...r)=>{const e=r[r.length-1],[t]=r,n=`RoundClosed-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={roundId:t.toString(),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🔴 Round closed:",i),it("RoundClosed",i),Y(`Round #${i.roundId} closed. No more bets accepted.`,"info"),fn(V,Fe),Dt()}),V.on("RoundSnapshot",(...r)=>{const e=r[r.length-1],[t,n,i]=r,s=`RoundSnapshot-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(s))return;ye.add(s);const o={roundId:t.toString(),totalTickets:n.toString(),totalWeight:i.toString(),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("📸 Round snapshot:",o),it("RoundSnapshot",o),Y(`Round #${o.roundId} snapshot taken. Preparing for draw...`,"info"),fn(V,Fe)}),V.on("WagerPlaced",(...r)=>{const e=r[r.length-1],[t,n,i,s,o]=r,a=`WagerPlaced-${n}-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(a))return;ye.add(a);const c={roundId:t.toString(),user:n.toLowerCase(),amount:Tr(i),tickets:s.toString(),weight:o.toString(),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🎲 Bet placed:",c),it("WagerPlaced",c),c.user===(Z==null?void 0:Z.toLowerCase())?(Y(`✅ Your bet confirmed! ${c.tickets} tickets for ${c.amount} ETH`,"success"),Cn(V,Z),Dt()):Y(`New bet: ${c.tickets} tickets by ${Ta(c.user)}`,"info"),fn(V,Fe),Fa(V),Fr(V)}),V.on("ProofSubmitted",(r,e,t,n)=>{const i=`ProofSubmitted-${e}-${r.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(ye.has(i))return;ye.add(i);const s={roundId:r.toString(),user:e.toLowerCase(),weight:t.toString(),blockNumber:n.blockNumber,transactionHash:n.transactionHash};if(console.log("🧩 Proof submitted:",s),it("ProofSubmitted",s),s.user===(Z==null?void 0:Z.toLowerCase())){Y("✅ Puzzle proof confirmed! Weight bonus applied.","success");const o=document.getElementById("proof-status");o&&(o.textContent="✅ Puzzle proof confirmed! Weight bonus applied.",o.className="success",o.style.display="block"),Cn(V,Z),Dt()}else Y(`Puzzle solved by ${Ta(s.user)}!`,"info");Fr(V)}),V.on("ProofRejected",(r,e,t,n)=>{const i=`ProofRejected-${r}-${e.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(ye.has(i))return;ye.add(i);const s={roundId:e.toString(),user:r.toLowerCase(),proofHash:t,blockNumber:n.blockNumber,transactionHash:n.transactionHash};if(console.log("❌ Proof rejected:",s),it("ProofRejected",s),s.user===(Z==null?void 0:Z.toLowerCase())){Y("❌ Puzzle proof incorrect. No weight bonus applied.","warning");const o=document.getElementById("proof-status");o&&(o.textContent="❌ Puzzle proof incorrect. No weight bonus applied.",o.className="error",o.style.display="block"),Cn(V,Z),Dt()}Fr(V)}),V.on("VRFRequested",(r,e,t)=>{const n=`VRFRequested-${r.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={roundId:r.toString(),requestId:e.toString(),blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("🎰 VRF requested:",i),it("VRFRequested",i),Y(`🎰 Random number requested for round #${i.roundId}. Drawing winners...`,"info"),fn(V,Fe)}),V.on("EmblemVaultPrizeAssigned",(...r)=>{const e=r[r.length-1],[t,n,i,s]=r,o=`EmblemVaultPrizeAssigned-${t.toString()}-${n.toLowerCase()}-${i.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(o))return;ye.add(o);const a={roundId:t.toString(),winner:n.toLowerCase(),assetId:i.toString(),timestamp:Number(s),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🎁 Emblem Vault prize assigned:",a),it("EmblemVaultPrizeAssigned",a),a.winner===(Z==null?void 0:Z.toLowerCase())&&Y(`🎁 Congratulations! You won asset #${a.assetId}!`,"success")}),V.on("RoundPrizesDistributed",(...r)=>{const e=r[r.length-1],[t,n,i]=r,s=`RoundPrizesDistributed-${t.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(s))return;ye.add(s);const o={roundId:t.toString(),winnerCount:Number(n),timestamp:Number(i),blockNumber:e==null?void 0:e.blockNumber,transactionHash:e==null?void 0:e.transactionHash};console.log("🏆 Round prizes distribution completed:",o),it("RoundPrizesDistributed",o),Y(`🏆 Round #${o.roundId} completed! ${o.winnerCount} prizes distributed.`,"success"),fn(V,Fe)}),V.on("FeesDistributed",(r,e,t,n)=>{const i=`FeesDistributed-${r.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(ye.has(i))return;ye.add(i);const s={roundId:r.toString(),creatorsAmount:Tr(e),nextRoundAmount:Tr(t),blockNumber:n.blockNumber,transactionHash:n.transactionHash};console.log("💰 Fees distributed:",s),it("FeesDistributed",s)}),V.on("AddressDenylisted",(r,e,t)=>{const n=`AddressDenylisted-${r}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={user:r.toLowerCase(),status:e,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("🚫 Address denylist status changed:",i),it("AddressDenylisted",i),i.user===(Z==null?void 0:Z.toLowerCase())&&(Y(e?"Your address has been denylisted":"Your address has been removed from denylist",e?"error":"success"),jn(V,Z))}),V.on("EmergencyPauseToggled",(r,e)=>{const t=`EmergencyPauseToggled-${r}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(ye.has(t))return;ye.add(t);const n={paused:r,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("⚠️ Emergency pause toggled:",n),it("EmergencyPauseToggled",n),Y(r?"Emergency pause activated":"Emergency pause deactivated",r?"warning":"success"),Z&&jn(V,Z)}),V.on("CircuitBreakerTriggered",(r,e,t)=>{const n=`CircuitBreakerTriggered-${r.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={roundId:r.toString(),reason:e,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("🔒 Circuit breaker triggered:",i),it("CircuitBreakerTriggered",i),Y(`⚠️ Circuit breaker: ${i.reason}`,"warning")}),V.on("SecurityValidationFailed",(r,e,t)=>{const n=`SecurityValidationFailed-${r}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={user:r.toLowerCase(),reason:e,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("❌ Security validation failed:",i),it("SecurityValidationFailed",i),i.user===(Z==null?void 0:Z.toLowerCase())&&Y(`Security validation failed: ${i.reason}`,"error")}),V.on("VRFTimeoutDetected",(r,e,t)=>{const n=`VRFTimeoutDetected-${r.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(ye.has(n))return;ye.add(n);const i={roundId:r.toString(),requestTime:e.toString(),blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("⏰ VRF timeout detected:",i),it("VRFTimeoutDetected",i),Y(`⏰ VRF timeout detected for round #${i.roundId}`,"warning")}),console.log("✅ Contract event listeners set up successfully")}catch(r){console.error("❌ Error setting up contract event listeners:",r),Y("Failed to set up event listeners","error")}}}function Pw(r){const e=r.currentTarget,t=window.innerWidth<=768;if(e.classList.contains("selected")||e.classList.contains("mobile-selected")){if(e.classList.remove("selected","mobile-selected"),t){const s=document.getElementById("mobile-purchase-slideout");s&&s.classList.remove("open")}else{const s=document.getElementById("ticket-office");s&&s.classList.remove("open")}return}const n=parseInt(e.dataset.tickets),i=parseFloat(e.dataset.amount);if(t){const s=document.getElementById("mobile-selected-tickets"),o=document.getElementById("mobile-selected-amount");s&&(s.textContent=String(n)),o&&(o.textContent=String(i)),document.querySelectorAll(".ticket-option-card").forEach(c=>c.classList.remove("mobile-selected")),e.classList.add("mobile-selected");const a=document.getElementById("mobile-purchase-slideout");a&&a.classList.add("open")}else{const s=document.getElementById("selected-tickets"),o=document.getElementById("selected-amount");s&&(s.textContent=String(n)),o&&(o.textContent=String(i)),document.querySelectorAll(".ticket-option-card").forEach(c=>c.classList.remove("selected")),e.classList.add("selected");const a=document.getElementById("ticket-office");a&&a.classList.add("open")}}async function Al(){try{if(!V||!on||!Z){Y("Please connect your wallet first","error");return}const r=window.innerWidth<=768,e=r?"mobile-selected-tickets":"selected-tickets",t=r?"mobile-selected-amount":"selected-amount",n=document.getElementById(e),i=document.getElementById(t),s=parseInt((n==null?void 0:n.textContent)||"0"),o=parseFloat((i==null?void 0:i.textContent)||"0");if(!s||s<=0||!o||o<=0){Y("Please select a ticket bundle first","error");return}try{h1({amount:o,tickets:s,userAddress:Z})}catch(f){Y(f.message,"error");return}try{Td(Z)}catch(f){Y(f.message,"warning");return}try{await Fd(V,Z)}catch(f){Y(f.message,"error");return}if(!await u1()){Y("Purchase cancelled","info");return}const c=Np(o.toString());console.log(`Placing bet: ${s} tickets for ${o} ETH`);const l=document.getElementById("buy-tickets"),u=l?l.textContent:"";try{Y("Validating bet parameters...","info");const f=await V.currentRoundId();if(f.toString()==="0")throw new Error("No active round available");const d=await V.getRound(f),g=Number(d.status);if(console.log("Round status check:",{status:g,roundData:d}),g!==1)throw new Error(`Round is not currently open for betting (status: ${g})`);Y("Submitting bet transaction...","info"),l&&(l.disabled=!0,l.textContent="Submitting...");const x=await V.buyTickets(s,{value:c});Y("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",x.hash);const m=await x.wait();console.log("Bet placed successfully:",m),Y(`✅ Bet placed successfully! ${s} tickets for ${o} ETH`,"success");const w=document.getElementById("mobile-purchase-slideout");w&&w.classList.remove("open");const v=document.getElementById("ticket-office");v&&v.classList.remove("open"),document.querySelectorAll(".ticket-option-card").forEach(A=>{A.classList.remove("selected","mobile-selected")}),await Cn(V,Z),jn(V,Z),await Dt()}catch(f){console.error("Contract error:",f);const d=document.getElementById("buy-tickets");d&&(d.disabled=!1,d.textContent=u||"Place Bet"),Dd(f,"Buy Tickets")}}catch(r){console.error("Error placing bet:",r),Y("Failed to place bet: "+r.message,"error")}}async function Dw(){return Al()}async function Jd(){try{if(!V||!on||!Z){Y("Please connect your wallet first","error");return}const r=document.getElementById("proof-input");if(!r)return;const e=r.value.trim();if(!e){Y("Please enter your puzzle proof","error");return}let t;try{t=Ym(e,"proof")}catch(n){Y(n.message,"error");return}try{Td(Z)}catch(n){Y(n.message,"warning");return}try{await Fd(V,Z)}catch(n){Y(n.message,"error");return}console.log("Submitting proof:",t.substring(0,50)+"...");try{Y("Validating proof submission...","info");const n=await V.currentRoundId();if(n.toString()==="0")throw new Error("No active round available");const i=await V.getRound(n),s=Number(i.status);if(console.log("Round status check (proof):",{status:s,roundData:i}),s!==1)throw new Error(`Round is not currently open for proof submission (status: ${s})`);const o=await V.getUserStats(n,Z);if(o.tickets.toString()==="0")throw new Error("You must place a bet before submitting a proof");if(o.hasProof)throw new Error("You have already submitted a proof for this round");Y("Submitting puzzle proof...","info");const a=document.getElementById("submit-proof"),c=a?a.textContent:"";a&&(a.disabled=!0,a.textContent="Submitting...");const l=He(rn(t)),u=await V.submitProof(l);Y("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",u.hash);const f=await u.wait();console.log("Proof transaction confirmed:",f),Y("Proof submitted, validating...","info"),r.value="";const d=document.getElementById("proof-status");d&&(d.style.display="none"),await Cn(V,Z),jn(V,Z),await Dt()}catch(n){console.error("Contract error:",n);const i=Dd(n,"Submit Proof"),s=document.getElementById("proof-status");s&&(s.textContent=i.message,s.className="error",s.style.display="block")}}catch(r){console.error("Error submitting proof:",r),Y("Failed to submit proof: "+r.message,"error")}}function Rw(){setInterval(async()=>{if(V)try{const r=await V.currentRoundId();let e=null;r.toString()!=="0"&&(e=await V.getRoundState(r)),await fn(V,Fe,e),await Fa(V,e),await Fr(V),Z&&(await Cn(V,Z,e),r.toString()!=="0"&&window.location.pathname.includes("main.html")&&(await Wo(V,Z),await bl(V,Z))),await Dt(e)}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Periodic update error:",r)}},6e4),setInterval(async()=>{if(V&&Z)try{jn(V,Z)}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Security status error:",r)}},3e4),V&&V.currentRoundId().then(async r=>{let e=null;r.toString()!=="0"&&(e=await V.getRoundState(r)),fn(V,Fe,e),Fa(V,e),Fr(V),Z&&(jn(V,Z),Cn(V,Z,e)),Dt(e)}).catch(r=>{console.error("Initial update error:",r)})}yw();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ff):Ff();window.pepedawn={provider:Fe,signer:on,contract:V,userAddress:Z,connectWallet:qd,buyTickets:Al,submitProof:Jd};export{ke as C,kd as V};
