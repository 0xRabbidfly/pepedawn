var Ff=Object.defineProperty;var bc=r=>{throw TypeError(r)};var Df=(r,t,e)=>t in r?Ff(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var y=(r,t,e)=>Df(r,typeof t!="symbol"?t+"":t,e),Jo=(r,t,e)=>t.has(r)||bc("Cannot "+e);var l=(r,t,e)=>(Jo(r,t,"read from private field"),e?e.call(r):t.get(r)),b=(r,t,e)=>t.has(r)?bc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),d=(r,t,e,n)=>(Jo(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),I=(r,t,e)=>(Jo(r,t,"access private method"),e);var Ys=(r,t,e,n)=>({set _(s){d(r,t,s,e)},get _(){return l(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const Mf="6.15.0";function Hf(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function Rt(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[t[i]]=s,n),{})}function M(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&Hf(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function zr(r,t){if(r==null)return"null";if(t==null&&(t=new Set),typeof r=="object"){if(t.has(r))return"[Circular]";t.add(r)}if(Array.isArray(r))return"[ "+r.map(e=>zr(e,t)).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<r.length;s++)n+=e[r[s]>>4],n+=e[r[s]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return zr(r.toJSON(),t);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(n=>`${zr(n,t)}: ${zr(r[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Et(r,t){return r&&r.code===t}function Wa(r){return Et(r,"CALL_EXCEPTION")}function it(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${zr(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+zr(a))}}i.push(`code=${t}`),i.push(`version=${Mf}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return M(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&M(s,{shortMessage:n}),s}function N(r,t,e,n){if(!r)throw it(t,e,n)}function g(r,t,e,n){N(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function Fl(r,t,e){e==null&&(e=""),e&&(e=": "+e),N(r>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),N(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function Oi(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),N(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Dl(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}g(!1,"invalid BytesLike value",t||"value",r)}function z(r,t){return Dl(r,t,!1)}function Tt(r,t){return Dl(r,t,!0)}function rt(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function Za(r){return rt(r,!0)||r instanceof Uint8Array}const Ac="0123456789abcdef";function k(r){const t=z(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=Ac[(s&240)>>4]+Ac[s&15]}return e}function ct(r){return"0x"+r.map(t=>k(t).substring(2)).join("")}function jr(r){return rt(r,!0)?(r.length-2)/2:z(r).length}function at(r,t,e){const n=z(r);return e!=null&&e>n.length&&N(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),k(n.slice(t??0,e??n.length))}function Ml(r,t,e){const n=z(r);N(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),k(s)}function rn(r,t){return Ml(r,t,!0)}function Gf(r,t){return Ml(r,t,!1)}const Co=BigInt(0),me=BigInt(1),Jr=9007199254740991;function ro(r,t){const e=Bo(r,"value"),n=BigInt(Q(t,"width"));if(N(e>>n===Co,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-me){const s=(me<<n)-me;return-((~e&s)+me)}return e}function Hl(r,t){let e=T(r,"value");const n=BigInt(Q(t,"width")),s=me<<n-me;if(e<Co){e=-e,N(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(me<<n)-me;return(~e&i)+me}else N(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function qn(r,t){const e=Bo(r,"value"),n=BigInt(Q(t,"bits"));return e&(me<<n)-me}function T(r,t){switch(typeof r){case"bigint":return r;case"number":return g(Number.isInteger(r),"underflow",t||"value",r),g(r>=-Jr&&r<=Jr,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){g(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}g(!1,"invalid BigNumberish value",t||"value",r)}function Bo(r,t){const e=T(r,t);return N(e>=Co,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Ec="0123456789abcdef";function ko(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Ec[e>>4],t+=Ec[e&15];return BigInt(t)}return T(r)}function Q(r,t){switch(typeof r){case"bigint":return g(r>=-Jr&&r<=Jr,"overflow",t||"value",r),Number(r);case"number":return g(Number.isInteger(r),"underflow",t||"value",r),g(r>=-Jr&&r<=Jr,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Q(BigInt(r),t)}catch(e){g(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}g(!1,"invalid numeric value",t||"value",r)}function Qf(r){return Q(ko(r))}function Un(r,t){let n=Bo(r,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const s=Q(t,"width");for(N(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function ht(r){const t=Bo(r,"value");if(t===Co)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(e.substring(i,i+2),16)}return n}function ge(r){let t=k(Za(r)?r:ht(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const xc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Nc=BigInt(58);function Vf(r){const t=z(r);let e=ko(t),n="";for(;e;)n=xc[Number(e%Nc)]+n,e/=Nc;for(let s=0;s<t.length&&!t[s];s++)n=xc[0]+n;return n}function zf(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return z(t)}function Jf(r){const t=z(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var $r;class Gl{constructor(t,e,n){y(this,"filter");y(this,"emitter");b(this,$r);d(this,$r,e),M(this,{emitter:t,filter:n})}async removeListener(){l(this,$r)!=null&&await this.emitter.off(this.filter,l(this,$r))}}$r=new WeakMap;function Kf(r,t,e,n,s){g(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Ql(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function _f(r,t,e,n,s){return r==="OVERLONG"?(g(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Ql(r,t,e))}const Wf=Object.freeze({error:Kf,ignore:Ql,replace:_f});function Zf(r,t){t==null&&(t=Wf.error);const e=z(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(!(i>>7)){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let f=e[s];if((f&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|f&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,n,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,n,c);continue}n.push(c)}}return n}function De(r,t){g(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);g(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function jf(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function so(r,t){return jf(Zf(r,t))}function Vl(r){async function t(e,n){N(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();N(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),N(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=it("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{i=it("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let u;try{u=await fetch(e.url,c)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const f={};u.headers.forEach((m,A)=>{f[A.toLowerCase()]=m});const h=await u.arrayBuffer(),p=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:f,body:p}}return t}const Yf=12,Xf=250;let Ic=Vl();const qf=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),$f=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ko=!1;async function zl(r,t){try{const e=r.match(qf);if(!e)throw new Error("invalid data");return new Ln(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?zf(e[3]):eh(e[3]))}catch{return new Ln(599,"BAD REQUEST (invalid data: URI)",{},null,new Fn(r))}}function Jl(r){async function t(e,n){try{const s=e.match($f);if(!s)throw new Error("invalid link");return new Fn(`${r}${s[2]}`)}catch{return new Ln(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Fn(e))}}return t}const Mi={data:zl,ipfs:Jl("https://gateway.ipfs.io/ipfs/")},Kl=new WeakMap;var nr,wn;class th{constructor(t){b(this,nr);b(this,wn);d(this,nr,[]),d(this,wn,!1),Kl.set(t,()=>{if(!l(this,wn)){d(this,wn,!0);for(const e of l(this,nr))setTimeout(()=>{e()},0);d(this,nr,[])}})}addListener(t){N(!l(this,wn),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),l(this,nr).push(t)}get cancelled(){return l(this,wn)}checkSignal(){N(!this.cancelled,"cancelled","CANCELLED",{})}}nr=new WeakMap,wn=new WeakMap;function Hi(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var ts,es,le,ze,ns,rs,gt,Kt,Je,rr,sr,ir,Ie,ue,yn,or,ti;const bo=class bo{constructor(t){b(this,or);b(this,ts);b(this,es);b(this,le);b(this,ze);b(this,ns);b(this,rs);b(this,gt);b(this,Kt);b(this,Je);b(this,rr);b(this,sr);b(this,ir);b(this,Ie);b(this,ue);b(this,yn);d(this,rs,String(t)),d(this,ts,!1),d(this,es,!0),d(this,le,{}),d(this,ze,""),d(this,ns,3e5),d(this,ue,{slotInterval:Xf,maxAttempts:Yf}),d(this,yn,null)}get url(){return l(this,rs)}set url(t){d(this,rs,String(t))}get body(){return l(this,gt)==null?null:new Uint8Array(l(this,gt))}set body(t){if(t==null)d(this,gt,void 0),d(this,Kt,void 0);else if(typeof t=="string")d(this,gt,De(t)),d(this,Kt,"text/plain");else if(t instanceof Uint8Array)d(this,gt,t),d(this,Kt,"application/octet-stream");else if(typeof t=="object")d(this,gt,De(JSON.stringify(t))),d(this,Kt,"application/json");else throw new Error("invalid body")}hasBody(){return l(this,gt)!=null}get method(){return l(this,ze)?l(this,ze):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),d(this,ze,String(t).toUpperCase())}get headers(){const t=Object.assign({},l(this,le));return l(this,Je)&&(t.authorization=`Basic ${Jf(De(l(this,Je)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&l(this,Kt)&&(t["content-type"]=l(this,Kt)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){l(this,le)[String(t).toLowerCase()]=String(e)}clearHeaders(){d(this,le,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return l(this,Je)||null}setCredentials(t,e){g(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),d(this,Je,`${t}:${e}`)}get allowGzip(){return l(this,es)}set allowGzip(t){d(this,es,!!t)}get allowInsecureAuthentication(){return!!l(this,ts)}set allowInsecureAuthentication(t){d(this,ts,!!t)}get timeout(){return l(this,ns)}set timeout(t){g(t>=0,"timeout must be non-zero","timeout",t),d(this,ns,t)}get preflightFunc(){return l(this,rr)||null}set preflightFunc(t){d(this,rr,t)}get processFunc(){return l(this,sr)||null}set processFunc(t){d(this,sr,t)}get retryFunc(){return l(this,ir)||null}set retryFunc(t){d(this,ir,t)}get getUrlFunc(){return l(this,yn)||Ic}set getUrlFunc(t){d(this,yn,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${l(this,gt)?k(l(this,gt)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(l(this,ue).slotInterval=t.slotInterval),t.maxAttempts!=null&&(l(this,ue).maxAttempts=t.maxAttempts)}send(){return N(l(this,Ie)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),d(this,Ie,new th(this)),I(this,or,ti).call(this,0,Pc()+this.timeout,0,this,new Ln(0,"",{},null,this))}cancel(){N(l(this,Ie)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Kl.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();N(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new bo(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,d(s,le,Object.assign({},l(this,le))),l(this,gt)&&d(s,gt,new Uint8Array(l(this,gt))),d(s,Kt,l(this,Kt)),s}clone(){const t=new bo(this.url);return d(t,ze,l(this,ze)),l(this,gt)&&d(t,gt,l(this,gt)),d(t,Kt,l(this,Kt)),d(t,le,Object.assign({},l(this,le))),d(t,Je,l(this,Je)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),d(t,rr,l(this,rr)),d(t,sr,l(this,sr)),d(t,ir,l(this,ir)),d(t,ue,Object.assign({},l(this,ue))),d(t,yn,l(this,yn)),t}static lockConfig(){Ko=!0}static getGateway(t){return Mi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Ko)throw new Error("gateways locked");Mi[t]=e}static registerGetUrl(t){if(Ko)throw new Error("gateways locked");Ic=t}static createGetUrlFunc(t){return Vl(t)}static createDataGateway(){return zl}static createIpfsGatewayFunc(t){return Jl(t)}};ts=new WeakMap,es=new WeakMap,le=new WeakMap,ze=new WeakMap,ns=new WeakMap,rs=new WeakMap,gt=new WeakMap,Kt=new WeakMap,Je=new WeakMap,rr=new WeakMap,sr=new WeakMap,ir=new WeakMap,Ie=new WeakMap,ue=new WeakMap,yn=new WeakMap,or=new WeakSet,ti=async function(t,e,n,s,i){var f,h,p;if(t>=l(this,ue).maxAttempts)return i.makeServerError("exceeded maximum retry limit");N(Pc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await nh(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Mi){const m=await Mi[a](o.url,Hi(l(s,Ie)));if(m instanceof Ln){let A=m;if(this.processFunc){Hi(l(s,Ie));try{A=await this.processFunc(o,A)}catch(w){(w.throttle==null||typeof w.stall!="number")&&A.makeServerError("error in post-processing function",w).assertOk()}}return A}o=m}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Hi(l(s,Ie)));let u=new Ln(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const m=u.headers.location||"";return I(f=o.redirect(m),or,ti).call(f,t+1,e,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,t))){const m=u.headers["retry-after"];let A=l(this,ue).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof m=="string"&&m.match(/^[1-9][0-9]*$/)&&(A=parseInt(m)),I(h=o.clone(),or,ti).call(h,t+1,e,A,s,u)}if(this.processFunc){Hi(l(s,Ie));try{u=await this.processFunc(o,u)}catch(m){(m.throttle==null||typeof m.stall!="number")&&u.makeServerError("error in post-processing function",m).assertOk();let A=l(this,ue).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return m.stall>=0&&(A=m.stall),I(p=o.clone(),or,ti).call(p,t+1,e,A,s,u)}}return u};let Fn=bo;var Ai,Ei,xi,_t,ss,ar;const dc=class dc{constructor(t,e,n,s,i){b(this,Ai);b(this,Ei);b(this,xi);b(this,_t);b(this,ss);b(this,ar);d(this,Ai,t),d(this,Ei,e),d(this,xi,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),d(this,_t,s==null?null:new Uint8Array(s)),d(this,ss,i||null),d(this,ar,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${l(this,_t)?k(l(this,_t)):"null"}>`}get statusCode(){return l(this,Ai)}get statusMessage(){return l(this,Ei)}get headers(){return Object.assign({},l(this,xi))}get body(){return l(this,_t)==null?null:new Uint8Array(l(this,_t))}get bodyText(){try{return l(this,_t)==null?"":so(l(this,_t))}catch{N(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{N(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new dc(599,n,this.headers,this.body,l(this,ss)||void 0);return d(s,ar,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:g(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw M(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return l(this,_t)!=null}get request(){return l(this,ss)}ok(){return l(this,ar).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=l(this,ar);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{l(this,_t)&&(s=so(l(this,_t)))}catch{}N(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Ai=new WeakMap,Ei=new WeakMap,xi=new WeakMap,_t=new WeakMap,ss=new WeakMap,ar=new WeakMap;let Ln=dc;function Pc(){return new Date().getTime()}function eh(r){return De(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function nh(r){return new Promise(t=>setTimeout(t,r))}const rh=BigInt(-1),oe=BigInt(0),Kr=BigInt(1),sh=BigInt(5),Dr={};let Yr="0000";for(;Yr.length<80;)Yr+=Yr;function zn(r){let t=Yr;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function Xs(r,t,e){const n=BigInt(t.width);if(t.signed){const s=Kr<<n-Kr;N(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>oe?r=ro(qn(r,n),n):r=-ro(qn(-r,n),n)}else{const s=Kr<<n;N(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-Kr}return r}function _o(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);g(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,u)=>i[a]==null?u:(g(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}g(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),g(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function ih(r,t){let e="";r<oe&&(e="-",r*=rh);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=Yr+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var fe,tt,kt,q,Kn,He,ua,fa,ha,da;const gn=class gn{constructor(t,e,n){b(this,q);y(this,"format");b(this,fe);b(this,tt);b(this,kt);y(this,"_value");Oi(t,Dr,"FixedNumber"),d(this,tt,e),d(this,fe,n);const s=ih(e,n.decimals);M(this,{format:n.name,_value:s}),d(this,kt,zn(n.decimals))}get signed(){return l(this,fe).signed}get width(){return l(this,fe).width}get decimals(){return l(this,fe).decimals}get value(){return l(this,tt)}addUnsafe(t){return I(this,q,ua).call(this,t)}add(t){return I(this,q,ua).call(this,t,"add")}subUnsafe(t){return I(this,q,fa).call(this,t)}sub(t){return I(this,q,fa).call(this,t,"sub")}mulUnsafe(t){return I(this,q,ha).call(this,t)}mul(t){return I(this,q,ha).call(this,t,"mul")}mulSignal(t){I(this,q,Kn).call(this,t);const e=l(this,tt)*l(t,tt);return N(e%l(this,kt)===oe,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),I(this,q,He).call(this,e/l(this,kt),"mulSignal")}divUnsafe(t){return I(this,q,da).call(this,t)}div(t){return I(this,q,da).call(this,t,"div")}divSignal(t){N(l(t,tt)!==oe,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),I(this,q,Kn).call(this,t);const e=l(this,tt)*l(this,kt);return N(e%l(t,tt)===oe,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),I(this,q,He).call(this,e/l(t,tt),"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=zn(s):s<0&&(e*=zn(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=l(this,tt);return l(this,tt)<oe&&(t-=l(this,kt)-Kr),t=l(this,tt)/l(this,kt)*l(this,kt),I(this,q,He).call(this,t,"floor")}ceiling(){let t=l(this,tt);return l(this,tt)>oe&&(t+=l(this,kt)-Kr),t=l(this,tt)/l(this,kt)*l(this,kt),I(this,q,He).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=sh*zn(e-1);let s=this.value+n;const i=zn(e);return s=s/i*i,Xs(s,l(this,fe),"round"),new gn(Dr,s,l(this,fe))}isZero(){return l(this,tt)===oe}isNegative(){return l(this,tt)<oe}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return gn.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:Q(e),i=_o(n);let o=T(t,"value");const a=s-i.decimals;if(a>0){const c=zn(a);N(o%c===oe,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=zn(-a));return Xs(o,i,"fromValue"),new gn(Dr,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);g(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=_o(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=Yr;N(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return Xs(a,s,"fromString"),new gn(Dr,a,s)}static fromBytes(t,e){let n=ko(z(t,"value"));const s=_o(e);return s.signed&&(n=ro(n,s.width)),Xs(n,s,"fromBytes"),new gn(Dr,n,s)}};fe=new WeakMap,tt=new WeakMap,kt=new WeakMap,q=new WeakSet,Kn=function(t){g(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},He=function(t,e){return t=Xs(t,l(this,fe),e),new gn(Dr,t,l(this,fe))},ua=function(t,e){return I(this,q,Kn).call(this,t),I(this,q,He).call(this,l(this,tt)+l(t,tt),e)},fa=function(t,e){return I(this,q,Kn).call(this,t),I(this,q,He).call(this,l(this,tt)-l(t,tt),e)},ha=function(t,e){return I(this,q,Kn).call(this,t),I(this,q,He).call(this,l(this,tt)*l(t,tt)/l(this,kt),e)},da=function(t,e){return N(l(t,tt)!==oe,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),I(this,q,Kn).call(this,t),I(this,q,He).call(this,l(this,tt)*l(this,kt)/l(t,tt),e)};let io=gn;function oh(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Cc(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Bc(r,t,e,n){const s=[];for(;e<t+1+n;){const i=_l(r,e);s.push(i.result),e+=i.consumed,N(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function _l(r,t){N(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{N(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=Cc(r,t+1,n);return e(t+1+n+s),Bc(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Bc(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=Cc(r,t+1,n);e(t+1+n+s);const i=k(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=k(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:oh(r[t])}}function Si(r){const t=z(r,"data"),e=_l(t,0);return g(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function kc(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function Wl(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(Wl(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=kc(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(z(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=kc(t.length);return e.unshift(183+e.length),e.concat(t)}const vc="0123456789abcdef";function Dn(r){let t="0x";for(const e of Wl(r))t+=vc[e>>4],t+=vc[e&15];return t}function ah(r,t){let e=18;return e=Q(t,"unit"),io.fromValue(r,e,{decimals:e,width:512}).toString()}function ch(r,t){g(typeof r=="string","value must be a string","value",r);let e=18;return e=Q(t,"unit"),io.fromString(r,{decimals:e,width:512}).value}function ii(r){return ah(r,18)}function lh(r){return ch(r,18)}const Ot=32,pa=new Uint8Array(Ot),uh=["then"],Gi={},Zl=new WeakMap;function Wn(r){return Zl.get(r)}function Rc(r,t){Zl.set(r,t)}function qs(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function ga(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof Hs?ga(Wn(n),n,e):n):r.reduce((n,s,i)=>{let o=t.getValue(s);return s in n||(e&&o instanceof Hs&&(o=ga(Wn(o),o,e)),n[s]=o),n},{})}var is;const _r=class _r extends Array{constructor(...e){const n=e[0];let s=e[1],i=(e[2]||[]).slice(),o=!0;n!==Gi&&(s=e,i=[],o=!1);super(s.length);b(this,is);s.forEach((u,f)=>{this[f]=u});const a=i.reduce((u,f)=>(typeof f=="string"&&u.set(f,(u.get(f)||0)+1),u),new Map);if(Rc(this,Object.freeze(s.map((u,f)=>{const h=i[f];return h!=null&&a.get(h)===1?h:null}))),d(this,is,[]),l(this,is)==null&&l(this,is),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,f,h)=>{if(typeof f=="string"){if(f.match(/^[0-9]+$/)){const m=Q(f,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");const A=u[m];return A instanceof Error&&qs(`index ${m}`,A),A}if(uh.indexOf(f)>=0)return Reflect.get(u,f,h);const p=u[f];if(p instanceof Function)return function(...m){return p.apply(this===h?u:this,m)};if(!(f in u))return u.getValue.apply(this===h?u:this,[f])}return Reflect.get(u,f,h)}});return Rc(c,Wn(this)),c}toArray(e){const n=[];return this.forEach((s,i)=>{s instanceof Error&&qs(`index ${i}`,s),e&&s instanceof _r&&(s=s.toArray(e)),n.push(s)}),n}toObject(e){const n=Wn(this);return n.reduce((s,i,o)=>(N(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ga(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=Wn(this),i=[],o=[];for(let a=e;a<n;a++)i.push(this[a]),o.push(s[a]);return new _r(Gi,i,o)}filter(e,n){const s=Wn(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&qs(`index ${a}`,c),e.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new _r(Gi,i,o)}map(e,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&qs(`index ${i}`,o),s.push(e.call(n,o,i,this))}return s}getValue(e){const n=Wn(this).indexOf(e);if(n===-1)return;const s=this[n];return s instanceof Error&&qs(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,n){return new _r(Gi,e,n)}};is=new WeakMap;let Hs=_r;function Tc(r){let t=ht(r);return N(t.length<=Ot,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Ot,offset:t.length}),t.length!==Ot&&(t=Tt(ct([pa.slice(t.length%Ot),t]))),t}class on{constructor(t,e,n,s){y(this,"name");y(this,"type");y(this,"localName");y(this,"dynamic");M(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){g(!1,t,this.localName,e)}}var Ke,cr,os,Wi;class ma{constructor(){b(this,os);b(this,Ke);b(this,cr);d(this,Ke,[]),d(this,cr,0)}get data(){return ct(l(this,Ke))}get length(){return l(this,cr)}appendWriter(t){return I(this,os,Wi).call(this,Tt(t.data))}writeBytes(t){let e=Tt(t);const n=e.length%Ot;return n&&(e=Tt(ct([e,pa.slice(n)]))),I(this,os,Wi).call(this,e)}writeValue(t){return I(this,os,Wi).call(this,Tc(t))}writeUpdatableValue(){const t=l(this,Ke).length;return l(this,Ke).push(pa),d(this,cr,l(this,cr)+Ot),e=>{l(this,Ke)[t]=Tc(e)}}}Ke=new WeakMap,cr=new WeakMap,os=new WeakSet,Wi=function(t){return l(this,Ke).push(t),d(this,cr,l(this,cr)+t.length),t.length};var Ut,Wt,lr,ur,bn,Rr,ya,jl;const pc=class pc{constructor(t,e,n){b(this,Rr);y(this,"allowLoose");b(this,Ut);b(this,Wt);b(this,lr);b(this,ur);b(this,bn);M(this,{allowLoose:!!e}),d(this,Ut,Tt(t)),d(this,lr,0),d(this,ur,null),d(this,bn,n??1024),d(this,Wt,0)}get data(){return k(l(this,Ut))}get dataLength(){return l(this,Ut).length}get consumed(){return l(this,Wt)}get bytes(){return new Uint8Array(l(this,Ut))}subReader(t){const e=new pc(l(this,Ut).slice(l(this,Wt)+t),this.allowLoose,l(this,bn));return d(e,ur,this),e}readBytes(t,e){let n=I(this,Rr,jl).call(this,0,t,!!e);return I(this,Rr,ya).call(this,t),d(this,Wt,l(this,Wt)+n.length),n.slice(0,t)}readValue(){return ko(this.readBytes(Ot))}readIndex(){return Qf(this.readBytes(Ot))}};Ut=new WeakMap,Wt=new WeakMap,lr=new WeakMap,ur=new WeakMap,bn=new WeakMap,Rr=new WeakSet,ya=function(t){var e;if(l(this,ur))return I(e=l(this,ur),Rr,ya).call(e,t);d(this,lr,l(this,lr)+t),N(l(this,bn)<1||l(this,lr)<=l(this,bn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${l(this,bn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Tt(l(this,Ut)),offset:l(this,Wt),length:t,info:{bytesRead:l(this,lr),dataLength:this.dataLength}})},jl=function(t,e,n){let s=Math.ceil(e/Ot)*Ot;return l(this,Wt)+s>l(this,Ut).length&&(this.allowLoose&&n&&l(this,Wt)+e<=l(this,Ut).length?s=e:N(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Tt(l(this,Ut)),length:l(this,Ut).length,offset:l(this,Wt)+s})),l(this,Ut).slice(l(this,Wt),l(this,Wt)+s)};let wa=pc;function oo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function ja(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function fh(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");oo(r.outputLen),oo(r.blockLen)}function Gs(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Yl(r,t){ja(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Wo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xl=r=>r instanceof Uint8Array,hh=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Zo=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ee=(r,t)=>r<<32-t|r>>>t,dh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!dh)throw new Error("Non little-endian hardware is not supported");function ph(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function vo(r){if(typeof r=="string"&&(r=ph(r)),!Xl(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function gh(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Xl(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class Ya{clone(){return this._cloneInto()}}function Xa(r){const t=n=>r().update(vo(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function mh(r=32){if(Wo&&typeof Wo.getRandomValues=="function")return Wo.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class ql extends Ya{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,fh(t);const n=vo(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gs(this),this.iHash.update(t),this}digestInto(t){Gs(this),ja(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $l=(r,t,e)=>new ql(r,t).update(e).digest();$l.create=(r,t)=>new ql(r,t);function wh(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,u=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+u,a,n)}class tu extends Ya{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zo(this.buffer)}update(t){Gs(this);const{view:e,buffer:n,blockLen:s}=this;t=vo(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Zo(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gs(this),Yl(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)e[h]=0;wh(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Zo(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,f[h],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const yh=(r,t,e)=>r&t^~r&e,bh=(r,t,e)=>r&t^r&e^t&e,Ah=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),un=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fn=new Uint32Array(64);class Eh extends tu{constructor(){super(64,32,8,!1),this.A=un[0]|0,this.B=un[1]|0,this.C=un[2]|0,this.D=un[3]|0,this.E=un[4]|0,this.F=un[5]|0,this.G=un[6]|0,this.H=un[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let h=0;h<16;h++,e+=4)fn[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const p=fn[h-15],m=fn[h-2],A=Ee(p,7)^Ee(p,18)^p>>>3,w=Ee(m,17)^Ee(m,19)^m>>>10;fn[h]=w+fn[h-7]+A+fn[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:f}=this;for(let h=0;h<64;h++){const p=Ee(a,6)^Ee(a,11)^Ee(a,25),m=f+p+yh(a,c,u)+Ah[h]+fn[h]|0,w=(Ee(n,2)^Ee(n,13)^Ee(n,22))+bh(n,s,i)|0;f=u,u=c,c=a,a=o+m|0,o=i,i=s,s=n,n=m+w|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,s,i,o,a,c,u,f)}roundClean(){fn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const eu=Xa(()=>new Eh),Qi=BigInt(2**32-1),ba=BigInt(32);function nu(r,t=!1){return t?{h:Number(r&Qi),l:Number(r>>ba&Qi)}:{h:Number(r>>ba&Qi)|0,l:Number(r&Qi)|0}}function ru(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=nu(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const xh=(r,t)=>BigInt(r>>>0)<<ba|BigInt(t>>>0),Nh=(r,t,e)=>r>>>e,Ih=(r,t,e)=>r<<32-e|t>>>e,Ph=(r,t,e)=>r>>>e|t<<32-e,Ch=(r,t,e)=>r<<32-e|t>>>e,Bh=(r,t,e)=>r<<64-e|t>>>e-32,kh=(r,t,e)=>r>>>e-32|t<<64-e,vh=(r,t)=>t,Rh=(r,t)=>r,su=(r,t,e)=>r<<e|t>>>32-e,iu=(r,t,e)=>t<<e|r>>>32-e,ou=(r,t,e)=>t<<e-32|r>>>64-e,au=(r,t,e)=>r<<e-32|t>>>64-e;function Th(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Oh=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Sh=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Lh=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Uh=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Fh=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Dh=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,V={fromBig:nu,split:ru,toBig:xh,shrSH:Nh,shrSL:Ih,rotrSH:Ph,rotrSL:Ch,rotrBH:Bh,rotrBL:kh,rotr32H:vh,rotr32L:Rh,rotlSH:su,rotlSL:iu,rotlBH:ou,rotlBL:au,add:Th,add3L:Oh,add3H:Sh,add4L:Lh,add4H:Uh,add5H:Dh,add5L:Fh},[Mh,Hh]=V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),hn=new Uint32Array(80),dn=new Uint32Array(80);class Gh extends tu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:h,Fl:p,Gh:m,Gl:A,Hh:w,Hl:E}=this;return[t,e,n,s,i,o,a,c,u,f,h,p,m,A,w,E]}set(t,e,n,s,i,o,a,c,u,f,h,p,m,A,w,E){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=m|0,this.Gl=A|0,this.Hh=w|0,this.Hl=E|0}process(t,e){for(let P=0;P<16;P++,e+=4)hn[P]=t.getUint32(e),dn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const G=hn[P-15]|0,F=dn[P-15]|0,O=V.rotrSH(G,F,1)^V.rotrSH(G,F,8)^V.shrSH(G,F,7),H=V.rotrSL(G,F,1)^V.rotrSL(G,F,8)^V.shrSL(G,F,7),L=hn[P-2]|0,X=dn[P-2]|0,Z=V.rotrSH(L,X,19)^V.rotrBH(L,X,61)^V.shrSH(L,X,6),j=V.rotrSL(L,X,19)^V.rotrBL(L,X,61)^V.shrSL(L,X,6),dt=V.add4L(H,j,dn[P-7],dn[P-16]),yt=V.add4H(dt,O,Z,hn[P-7],hn[P-16]);hn[P]=yt|0,dn[P]=dt|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:h,El:p,Fh:m,Fl:A,Gh:w,Gl:E,Hh:x,Hl:v}=this;for(let P=0;P<80;P++){const G=V.rotrSH(h,p,14)^V.rotrSH(h,p,18)^V.rotrBH(h,p,41),F=V.rotrSL(h,p,14)^V.rotrSL(h,p,18)^V.rotrBL(h,p,41),O=h&m^~h&w,H=p&A^~p&E,L=V.add5L(v,F,H,Hh[P],dn[P]),X=V.add5H(L,x,G,O,Mh[P],hn[P]),Z=L|0,j=V.rotrSH(n,s,28)^V.rotrBH(n,s,34)^V.rotrBH(n,s,39),dt=V.rotrSL(n,s,28)^V.rotrBL(n,s,34)^V.rotrBL(n,s,39),yt=n&i^n&a^i&a,Ae=s&o^s&c^o&c;x=w|0,v=E|0,w=m|0,E=A|0,m=h|0,A=p|0,{h,l:p}=V.add(u|0,f|0,X|0,Z|0),u=a|0,f=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const C=V.add3L(Z,dt,Ae);n=V.add3H(C,X,j,yt),s=C|0}({h:n,l:s}=V.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=V.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=V.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=V.add(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:p}=V.add(this.Eh|0,this.El|0,h|0,p|0),{h:m,l:A}=V.add(this.Fh|0,this.Fl|0,m|0,A|0),{h:w,l:E}=V.add(this.Gh|0,this.Gl|0,w|0,E|0),{h:x,l:v}=V.add(this.Hh|0,this.Hl|0,x|0,v|0),this.set(n,s,i,o,a,c,u,f,h,p,m,A,w,E,x,v)}roundClean(){hn.fill(0),dn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Qh=Xa(()=>new Gh);function Vh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Oc=Vh();Oc.crypto||Oc.msCrypto;function zh(r){switch(r){case"sha256":return eu.create();case"sha512":return Qh.create()}g(!1,"invalid hashing algorithm name","algorithm",r)}const[cu,lu,uu]=[[],[],[]],Jh=BigInt(0),$s=BigInt(1),Kh=BigInt(2),_h=BigInt(7),Wh=BigInt(256),Zh=BigInt(113);for(let r=0,t=$s,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],cu.push(2*(5*n+e)),lu.push((r+1)*(r+2)/2%64);let s=Jh;for(let i=0;i<7;i++)t=(t<<$s^(t>>_h)*Zh)%Wh,t&Kh&&(s^=$s<<($s<<BigInt(i))-$s);uu.push(s)}const[jh,Yh]=ru(uu,!0),Sc=(r,t,e)=>e>32?ou(r,t,e):su(r,t,e),Lc=(r,t,e)=>e>32?au(r,t,e):iu(r,t,e);function Xh(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=e[c],f=e[c+1],h=Sc(u,f,1)^e[a],p=Lc(u,f,1)^e[a+1];for(let m=0;m<50;m+=10)r[o+m]^=h,r[o+m+1]^=p}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=lu[o],c=Sc(s,i,a),u=Lc(s,i,a),f=cu[o];s=r[f],i=r[f+1],r[f]=c,r[f+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=jh[n],r[1]^=Yh[n]}e.fill(0)}class qa extends Ya{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,oo(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=hh(this.state)}keccak(){Xh(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Gs(this);const{blockLen:e,state:n}=this;t=vo(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,e&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Gs(this,!1),ja(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return oo(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Yl(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new qa(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const qh=(r,t,e)=>Xa(()=>new qa(t,r,e)),$h=qh(1,136,256/8);let fu=!1;const hu=function(r){return $h(r)};let du=hu;function ft(r){const t=z(r,"data");return k(du(t))}ft._=hu;ft.lock=function(){fu=!0};ft.register=function(r){if(fu)throw new TypeError("keccak256 is locked");du=r};Object.freeze(ft);const pu=function(r){return zh("sha256").update(r).digest()};let gu=pu,mu=!1;function Ws(r){const t=z(r,"data");return k(gu(t))}Ws._=pu;Ws.lock=function(){mu=!0};Ws.register=function(r){if(mu)throw new Error("sha256 is locked");gu=r};Object.freeze(Ws);Object.freeze(Ws);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wu=BigInt(0),Ro=BigInt(1),td=BigInt(2),To=r=>r instanceof Uint8Array,ed=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Qs(r){if(!To(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=ed[r[e]];return t}function yu(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function $a(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Vs(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function xr(r){return $a(Qs(r))}function tc(r){if(!To(r))throw new Error("Uint8Array expected");return $a(Qs(Uint8Array.from(r).reverse()))}function zs(r,t){return Vs(r.toString(16).padStart(t*2,"0"))}function ec(r,t){return zs(r,t).reverse()}function nd(r){return Vs(yu(r))}function ce(r,t,e){let n;if(typeof t=="string")try{n=Vs(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(To(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function li(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!To(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function rd(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function sd(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function id(r){let t;for(t=0;r>wu;r>>=Ro,t+=1);return t}function od(r,t){return r>>BigInt(t)&Ro}const ad=(r,t,e)=>r|(e?Ro:wu)<<BigInt(t),nc=r=>(td<<BigInt(r-1))-Ro,jo=r=>new Uint8Array(r),Uc=r=>Uint8Array.from(r);function bu(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=jo(r),s=jo(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>e(s,n,...h),c=(h=jo())=>{s=a(Uc([0]),h),n=a(),h.length!==0&&(s=a(Uc([1]),h),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){n=a();const m=n.slice();p.push(m),h+=n.length}return li(...p)};return(h,p)=>{o(),c(h);let m;for(;!(m=p(u()));)c();return o(),m}}const cd={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Li(r,t,e={}){const n=(s,i,o)=>{const a=cd[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const ld=Object.freeze(Object.defineProperty({__proto__:null,bitGet:od,bitLen:id,bitMask:nc,bitSet:ad,bytesToHex:Qs,bytesToNumberBE:xr,bytesToNumberLE:tc,concatBytes:li,createHmacDrbg:bu,ensureBytes:ce,equalBytes:rd,hexToBytes:Vs,hexToNumber:$a,numberToBytesBE:zs,numberToBytesLE:ec,numberToHexUnpadded:yu,numberToVarBytesBE:nd,utf8ToBytes:sd,validateObject:Li},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wt=BigInt(0),ut=BigInt(1),Zn=BigInt(2),ud=BigInt(3),Aa=BigInt(4),Fc=BigInt(5),Dc=BigInt(8);BigInt(9);BigInt(16);function Dt(r,t){const e=r%t;return e>=wt?e:t+e}function fd(r,t,e){if(e<=wt||t<wt)throw new Error("Expected power/modulo > 0");if(e===ut)return wt;let n=ut;for(;t>wt;)t&ut&&(n=n*r%e),r=r*r%e,t>>=ut;return n}function Yt(r,t,e){let n=r;for(;t-- >wt;)n*=n,n%=e;return n}function Ea(r,t){if(r===wt||t<=wt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=Dt(r,t),n=t,s=wt,i=ut;for(;e!==wt;){const a=n/e,c=n%e,u=s-i*a;n=e,e=c,s=i,i=u}if(n!==ut)throw new Error("invert: does not exist");return Dt(s,t)}function hd(r){const t=(r-ut)/Zn;let e,n,s;for(e=r-ut,n=0;e%Zn===wt;e/=Zn,n++);for(s=Zn;s<r&&fd(s,t,r)!==r-ut;s++);if(n===1){const o=(r+ut)/Aa;return function(c,u){const f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const i=(e+ut)/Zn;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,s),e),h=a.pow(c,i),p=a.pow(c,e);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let w=a.sqr(p);m<u&&!a.eql(w,a.ONE);m++)w=a.sqr(w);const A=a.pow(f,ut<<BigInt(u-m-1));f=a.sqr(A),h=a.mul(h,A),p=a.mul(p,f),u=m}return h}}function dd(r){if(r%Aa===ud){const t=(r+ut)/Aa;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Dc===Fc){const t=(r-Fc)/Dc;return function(n,s){const i=n.mul(s,Zn),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,Zn),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return hd(r)}const pd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gd(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=pd.reduce((n,s)=>(n[s]="function",n),t);return Li(r,e)}function md(r,t,e){if(e<wt)throw new Error("Expected power > 0");if(e===wt)return r.ONE;if(e===ut)return t;let n=r.ONE,s=t;for(;e>wt;)e&ut&&(n=r.mul(n,s)),s=r.sqr(s),e>>=ut;return n}function wd(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function Au(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function yd(r,t,e=!1,n={}){if(r<=wt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=Au(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=dd(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:nc(s),ZERO:wt,ONE:ut,create:c=>Dt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return wt<=c&&c<r},is0:c=>c===wt,isOdd:c=>(c&ut)===ut,neg:c=>Dt(-c,r),eql:(c,u)=>c===u,sqr:c=>Dt(c*c,r),add:(c,u)=>Dt(c+u,r),sub:(c,u)=>Dt(c-u,r),mul:(c,u)=>Dt(c*u,r),pow:(c,u)=>md(a,c,u),div:(c,u)=>Dt(c*Ea(u,r),r),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Ea(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>wd(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>e?ec(c,i):zs(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?tc(c):xr(c)}});return Object.freeze(a)}function Eu(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function xu(r){const t=Eu(r);return t+Math.ceil(t/2)}function bd(r,t,e=!1){const n=r.length,s=Eu(t),i=xu(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?xr(r):tc(r),a=Dt(o,t-ut)+ut;return e?ec(a,s):zs(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ad=BigInt(0),Yo=BigInt(1);function Ed(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>Ad;)i&Yo&&(o=o.add(a)),a=a.double(),i>>=Yo;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let u=s,f=u;for(let h=0;h<o;h++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let u=r.ZERO,f=r.BASE;const h=BigInt(2**s-1),p=2**s,m=BigInt(s);for(let A=0;A<a;A++){const w=A*c;let E=Number(o&h);o>>=m,E>c&&(E-=p,o+=Yo);const x=w,v=w+Math.abs(E)-1,P=A%2!==0,G=E<0;E===0?f=f.add(e(P,i[x])):u=u.add(e(G,i[v]))}return{p:u,f}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function Nu(r){return gd(r.Fp),Li(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Au(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xd(r){const t=Nu(r);Li(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Nd,hexToBytes:Id}=ld,$n={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=$n;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Nd(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=$n,e=typeof r=="string"?Id(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=$n._parseInt(e.subarray(2)),{d:o,l:a}=$n._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${n}`}},tn=BigInt(0),se=BigInt(1);BigInt(2);const Mc=BigInt(3);BigInt(4);function Pd(r){const t=xd(r),{Fp:e}=t,n=t.toBytes||((A,w,E)=>{const x=w.toAffine();return li(Uint8Array.from([4]),e.toBytes(x.x),e.toBytes(x.y))}),s=t.fromBytes||(A=>{const w=A.subarray(1),E=e.fromBytes(w.subarray(0,e.BYTES)),x=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:E,y:x}});function i(A){const{a:w,b:E}=t,x=e.sqr(A),v=e.mul(x,A);return e.add(e.add(v,e.mul(A,w)),E)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(A){return typeof A=="bigint"&&tn<A&&A<t.n}function a(A){if(!o(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){const{allowedPrivateKeyLengths:w,nByteLength:E,wrapPrivateKey:x,n:v}=t;if(w&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=Qs(A)),typeof A!="string"||!w.includes(A.length))throw new Error("Invalid key");A=A.padStart(E*2,"0")}let P;try{P=typeof A=="bigint"?A:xr(ce("private key",A,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof A}`)}return x&&(P=Dt(P,v)),a(P),P}const u=new Map;function f(A){if(!(A instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(w,E,x){if(this.px=w,this.py=E,this.pz=x,w==null||!e.isValid(w))throw new Error("x required");if(E==null||!e.isValid(E))throw new Error("y required");if(x==null||!e.isValid(x))throw new Error("z required")}static fromAffine(w){const{x:E,y:x}=w||{};if(!w||!e.isValid(E)||!e.isValid(x))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=P=>e.eql(P,e.ZERO);return v(E)&&v(x)?h.ZERO:new h(E,x,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const E=e.invertBatch(w.map(x=>x.pz));return w.map((x,v)=>x.toAffine(E[v])).map(h.fromAffine)}static fromHex(w){const E=h.fromAffine(s(ce("pointHex",w)));return E.assertValidity(),E}static fromPrivateKey(w){return h.BASE.multiply(c(w))}_setWindowSize(w){this._WINDOW_SIZE=w,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:E}=this.toAffine();if(!e.isValid(w)||!e.isValid(E))throw new Error("bad point: x or y not FE");const x=e.sqr(E),v=i(w);if(!e.eql(x,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(e.isOdd)return!e.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){f(w);const{px:E,py:x,pz:v}=this,{px:P,py:G,pz:F}=w,O=e.eql(e.mul(E,F),e.mul(P,v)),H=e.eql(e.mul(x,F),e.mul(G,v));return O&&H}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:w,b:E}=t,x=e.mul(E,Mc),{px:v,py:P,pz:G}=this;let F=e.ZERO,O=e.ZERO,H=e.ZERO,L=e.mul(v,v),X=e.mul(P,P),Z=e.mul(G,G),j=e.mul(v,P);return j=e.add(j,j),H=e.mul(v,G),H=e.add(H,H),F=e.mul(w,H),O=e.mul(x,Z),O=e.add(F,O),F=e.sub(X,O),O=e.add(X,O),O=e.mul(F,O),F=e.mul(j,F),H=e.mul(x,H),Z=e.mul(w,Z),j=e.sub(L,Z),j=e.mul(w,j),j=e.add(j,H),H=e.add(L,L),L=e.add(H,L),L=e.add(L,Z),L=e.mul(L,j),O=e.add(O,L),Z=e.mul(P,G),Z=e.add(Z,Z),L=e.mul(Z,j),F=e.sub(F,L),H=e.mul(Z,X),H=e.add(H,H),H=e.add(H,H),new h(F,O,H)}add(w){f(w);const{px:E,py:x,pz:v}=this,{px:P,py:G,pz:F}=w;let O=e.ZERO,H=e.ZERO,L=e.ZERO;const X=t.a,Z=e.mul(t.b,Mc);let j=e.mul(E,P),dt=e.mul(x,G),yt=e.mul(v,F),Ae=e.add(E,x),C=e.add(P,G);Ae=e.mul(Ae,C),C=e.add(j,dt),Ae=e.sub(Ae,C),C=e.add(E,v);let S=e.add(P,F);return C=e.mul(C,S),S=e.add(j,yt),C=e.sub(C,S),S=e.add(x,v),O=e.add(G,F),S=e.mul(S,O),O=e.add(dt,yt),S=e.sub(S,O),L=e.mul(X,C),O=e.mul(Z,yt),L=e.add(O,L),O=e.sub(dt,L),L=e.add(dt,L),H=e.mul(O,L),dt=e.add(j,j),dt=e.add(dt,j),yt=e.mul(X,yt),C=e.mul(Z,C),dt=e.add(dt,yt),yt=e.sub(j,yt),yt=e.mul(X,yt),C=e.add(C,yt),j=e.mul(dt,C),H=e.add(H,j),j=e.mul(S,C),O=e.mul(Ae,O),O=e.sub(O,j),j=e.mul(Ae,dt),L=e.mul(S,L),L=e.add(L,j),new h(O,H,L)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return m.wNAFCached(this,u,w,E=>{const x=e.invertBatch(E.map(v=>v.pz));return E.map((v,P)=>v.toAffine(x[P])).map(h.fromAffine)})}multiplyUnsafe(w){const E=h.ZERO;if(w===tn)return E;if(a(w),w===se)return this;const{endo:x}=t;if(!x)return m.unsafeLadder(this,w);let{k1neg:v,k1:P,k2neg:G,k2:F}=x.splitScalar(w),O=E,H=E,L=this;for(;P>tn||F>tn;)P&se&&(O=O.add(L)),F&se&&(H=H.add(L)),L=L.double(),P>>=se,F>>=se;return v&&(O=O.negate()),G&&(H=H.negate()),H=new h(e.mul(H.px,x.beta),H.py,H.pz),O.add(H)}multiply(w){a(w);let E=w,x,v;const{endo:P}=t;if(P){const{k1neg:G,k1:F,k2neg:O,k2:H}=P.splitScalar(E);let{p:L,f:X}=this.wNAF(F),{p:Z,f:j}=this.wNAF(H);L=m.constTimeNegate(G,L),Z=m.constTimeNegate(O,Z),Z=new h(e.mul(Z.px,P.beta),Z.py,Z.pz),x=L.add(Z),v=X.add(j)}else{const{p:G,f:F}=this.wNAF(E);x=G,v=F}return h.normalizeZ([x,v])[0]}multiplyAndAddUnsafe(w,E,x){const v=h.BASE,P=(F,O)=>O===tn||O===se||!F.equals(v)?F.multiplyUnsafe(O):F.multiply(O),G=P(this,E).add(P(w,x));return G.is0()?void 0:G}toAffine(w){const{px:E,py:x,pz:v}=this,P=this.is0();w==null&&(w=P?e.ONE:e.inv(v));const G=e.mul(E,w),F=e.mul(x,w),O=e.mul(v,w);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql(O,e.ONE))throw new Error("invZ was invalid");return{x:G,y:F}}isTorsionFree(){const{h:w,isTorsionFree:E}=t;if(w===se)return!0;if(E)return E(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:E}=t;return w===se?this:E?E(h,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),n(h,this,w)}toHex(w=!0){return Qs(this.toRawBytes(w))}}h.BASE=new h(t.Gx,t.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const p=t.nBitLength,m=Ed(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Cd(r){const t=Nu(r);return Li(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Bd(r){const t=Cd(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(C){return tn<C&&C<e.ORDER}function a(C){return Dt(C,n)}function c(C){return Ea(C,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=Pd({...t,toBytes(C,S,K){const st=S.toAffine(),nt=e.toBytes(st.x),pt=li;return K?pt(Uint8Array.from([S.hasEvenY()?2:3]),nt):pt(Uint8Array.from([4]),nt,e.toBytes(st.y))},fromBytes(C){const S=C.length,K=C[0],st=C.subarray(1);if(S===s&&(K===2||K===3)){const nt=xr(st);if(!o(nt))throw new Error("Point is not on curve");const pt=h(nt);let Qt=e.sqrt(pt);const Vt=(Qt&se)===se;return(K&1)===1!==Vt&&(Qt=e.neg(Qt)),{x:nt,y:Qt}}else if(S===i&&K===4){const nt=e.fromBytes(st.subarray(0,e.BYTES)),pt=e.fromBytes(st.subarray(e.BYTES,2*e.BYTES));return{x:nt,y:pt}}else throw new Error(`Point of length ${S} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),m=C=>Qs(zs(C,t.nByteLength));function A(C){const S=n>>se;return C>S}function w(C){return A(C)?a(-C):C}const E=(C,S,K)=>xr(C.slice(S,K));class x{constructor(S,K,st){this.r=S,this.s=K,this.recovery=st,this.assertValidity()}static fromCompact(S){const K=t.nByteLength;return S=ce("compactSignature",S,K*2),new x(E(S,0,K),E(S,K,2*K))}static fromDER(S){const{r:K,s:st}=$n.toSig(ce("DER",S));return new x(K,st)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new x(this.r,this.s,S)}recoverPublicKey(S){const{r:K,s:st,recovery:nt}=this,pt=H(ce("msgHash",S));if(nt==null||![0,1,2,3].includes(nt))throw new Error("recovery id invalid");const Qt=nt===2||nt===3?K+t.n:K;if(Qt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const Vt=nt&1?"03":"02",an=u.fromHex(Vt+m(Qt)),cn=c(Qt),Sr=a(-pt*cn),js=a(st*cn),ln=u.BASE.multiplyAndAddUnsafe(an,Sr,js);if(!ln)throw new Error("point at infinify");return ln.assertValidity(),ln}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Vs(this.toDERHex())}toDERHex(){return $n.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vs(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const v={isValidPrivateKey(C){try{return f(C),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const C=xu(t.n);return bd(t.randomBytes(C),t.n)},precompute(C=8,S=u.BASE){return S._setWindowSize(C),S.multiply(BigInt(3)),S}};function P(C,S=!0){return u.fromPrivateKey(C).toRawBytes(S)}function G(C){const S=C instanceof Uint8Array,K=typeof C=="string",st=(S||K)&&C.length;return S?st===s||st===i:K?st===2*s||st===2*i:C instanceof u}function F(C,S,K=!0){if(G(C))throw new Error("first arg must be private key");if(!G(S))throw new Error("second arg must be public key");return u.fromHex(S).multiply(f(C)).toRawBytes(K)}const O=t.bits2int||function(C){const S=xr(C),K=C.length*8-t.nBitLength;return K>0?S>>BigInt(K):S},H=t.bits2int_modN||function(C){return a(O(C))},L=nc(t.nBitLength);function X(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(tn<=C&&C<L))throw new Error(`bigint expected < 2^${t.nBitLength}`);return zs(C,t.nByteLength)}function Z(C,S,K=j){if(["recovered","canonical"].some(Vn=>Vn in K))throw new Error("sign() legacy options not supported");const{hash:st,randomBytes:nt}=t;let{lowS:pt,prehash:Qt,extraEntropy:Vt}=K;pt==null&&(pt=!0),C=ce("msgHash",C),Qt&&(C=ce("prehashed msgHash",st(C)));const an=H(C),cn=f(S),Sr=[X(cn),X(an)];if(Vt!=null){const Vn=Vt===!0?nt(e.BYTES):Vt;Sr.push(ce("extraEntropy",Vn))}const js=li(...Sr),ln=an;function zo(Vn){const Lr=O(Vn);if(!p(Lr))return;const mc=c(Lr),Ur=u.BASE.multiply(Lr).toAffine(),ie=a(Ur.x);if(ie===tn)return;const Fr=a(mc*a(ln+ie*cn));if(Fr===tn)return;let wc=(Ur.x===ie?0:2)|Number(Ur.y&se),yc=Fr;return pt&&A(Fr)&&(yc=w(Fr),wc^=1),new x(ie,yc,wc)}return{seed:js,k2sig:zo}}const j={lowS:t.lowS,prehash:!1},dt={lowS:t.lowS,prehash:!1};function yt(C,S,K=j){const{seed:st,k2sig:nt}=Z(C,S,K),pt=t;return bu(pt.hash.outputLen,pt.nByteLength,pt.hmac)(st,nt)}u.BASE._setWindowSize(8);function Ae(C,S,K,st=dt){var Ur;const nt=C;if(S=ce("msgHash",S),K=ce("publicKey",K),"strict"in st)throw new Error("options.strict was renamed to lowS");const{lowS:pt,prehash:Qt}=st;let Vt,an;try{if(typeof nt=="string"||nt instanceof Uint8Array)try{Vt=x.fromDER(nt)}catch(ie){if(!(ie instanceof $n.Err))throw ie;Vt=x.fromCompact(nt)}else if(typeof nt=="object"&&typeof nt.r=="bigint"&&typeof nt.s=="bigint"){const{r:ie,s:Fr}=nt;Vt=new x(ie,Fr)}else throw new Error("PARSE");an=u.fromHex(K)}catch(ie){if(ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(pt&&Vt.hasHighS())return!1;Qt&&(S=t.hash(S));const{r:cn,s:Sr}=Vt,js=H(S),ln=c(Sr),zo=a(js*ln),Vn=a(cn*ln),Lr=(Ur=u.BASE.multiplyAndAddUnsafe(an,zo,Vn))==null?void 0:Ur.toAffine();return Lr?a(Lr.x)===cn:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:F,sign:yt,verify:Ae,ProjectivePoint:u,Signature:x,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kd(r){return{hash:r,hmac:(t,...e)=>$l(r,t,gh(...e)),randomBytes:mh}}function vd(r,t){const e=n=>Bd({...r,...kd(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Iu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Hc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rd=BigInt(1),xa=BigInt(2),Gc=(r,t)=>(r+t/xa)/t;function Td(r){const t=Iu,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=r*r*r%t,f=u*u*r%t,h=Yt(f,e,t)*f%t,p=Yt(h,e,t)*f%t,m=Yt(p,xa,t)*u%t,A=Yt(m,s,t)*m%t,w=Yt(A,i,t)*A%t,E=Yt(w,a,t)*w%t,x=Yt(E,c,t)*E%t,v=Yt(x,a,t)*w%t,P=Yt(v,e,t)*f%t,G=Yt(P,o,t)*A%t,F=Yt(G,n,t)*u%t,O=Yt(F,xa,t);if(!Na.eql(Na.sqr(O),r))throw new Error("Cannot find square root");return O}const Na=yd(Iu,void 0,void 0,{sqrt:Td}),pn=vd({a:BigInt(0),b:BigInt(7),Fp:Na,n:Hc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Hc,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Rd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=Gc(i*r,t),c=Gc(-n*r,t);let u=Dt(r-a*e-c*s,t),f=Dt(-a*n-c*i,t);const h=u>o,p=f>o;if(h&&(u=t-u),p&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:u,k2neg:p,k2:f}}}},eu);BigInt(0);pn.ProjectivePoint;const ui="0x0000000000000000000000000000000000000000",Qc="0x0000000000000000000000000000000000000000000000000000000000000000",Vc=BigInt(0),zc=BigInt(1),Jc=BigInt(2),Kc=BigInt(27),_c=BigInt(28),Vi=BigInt(35),Mr={};function Wc(r){return rn(ht(r),32)}var as,Pe,cs,fr;const ae=class ae{constructor(t,e,n,s){b(this,as);b(this,Pe);b(this,cs);b(this,fr);Oi(t,Mr,"Signature"),d(this,as,e),d(this,Pe,n),d(this,cs,s),d(this,fr,null)}get r(){return l(this,as)}set r(t){g(jr(t)===32,"invalid r","value",t),d(this,as,k(t))}get s(){return g(parseInt(l(this,Pe).substring(0,3))<8,"non-canonical s; use ._s","s",l(this,Pe)),l(this,Pe)}set s(t){g(jr(t)===32,"invalid s","value",t),d(this,Pe,k(t))}get _s(){return l(this,Pe)}isValid(){return parseInt(l(this,Pe).substring(0,3))<8}get v(){return l(this,cs)}set v(t){const e=Q(t,"value");g(e===27||e===28,"invalid v","v",t),d(this,cs,e)}get networkV(){return l(this,fr)}get legacyChainId(){const t=this.networkV;return t==null?null:ae.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=z(this.s);return this.yParity&&(t[0]|=128),k(t)}get compactSerialized(){return ct([this.r,this.yParityAndS])}get serialized(){return ct([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new ae(Mr,this.r,this._s,this.v);return this.networkV&&d(t,fr,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=T(t,"v");return e==Kc||e==_c?Vc:(g(e>=Vi,"invalid EIP-155 v","v",t),(e-Vi)/Jc)}static getChainIdV(t,e){return T(t)*Jc+BigInt(35+e-27)}static getNormalizedV(t){const e=T(t);return e===Vc||e===Kc?27:e===zc||e===_c?28:(g(e>=Vi,"invalid v","v",t),e&zc?27:28)}static from(t){function e(u,f){g(u,f,"signature",t)}if(t==null)return new ae(Mr,Qc,Qc,27);if(typeof t=="string"){const u=z(t,"signature");if(u.length===64){const f=k(u.slice(0,32)),h=u.slice(32,64),p=h[0]&128?28:27;return h[0]&=127,new ae(Mr,f,k(h),p)}if(u.length===65){const f=k(u.slice(0,32)),h=k(u.slice(32,64)),p=ae.getNormalizedV(u[64]);return new ae(Mr,f,h,p)}e(!1,"invalid raw signature length")}if(t instanceof ae)return t.clone();const n=t.r;e(n!=null,"missing r");const s=Wc(n),i=function(u,f){if(u!=null)return Wc(u);if(f!=null){e(rt(f,32),"invalid yParityAndS");const h=z(f);return h[0]&=127,k(h)}e(!1,"missing s")}(t.s,t.yParityAndS),{networkV:o,v:a}=function(u,f,h){if(u!=null){const p=T(u);return{networkV:p>=Vi?p:void 0,v:ae.getNormalizedV(p)}}if(f!=null)return e(rt(f,32),"invalid yParityAndS"),{v:z(f)[0]&128?28:27};if(h!=null){switch(Q(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new ae(Mr,s,i,a);return o&&d(c,fr,o),e(t.yParity==null||Q(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};as=new WeakMap,Pe=new WeakMap,cs=new WeakMap,fr=new WeakMap;let Ht=ae;var _e;const jn=class jn{constructor(t){b(this,_e);g(jr(t)===32,"invalid private key","privateKey","[REDACTED]"),d(this,_e,k(t))}get privateKey(){return l(this,_e)}get publicKey(){return jn.computePublicKey(l(this,_e))}get compressedPublicKey(){return jn.computePublicKey(l(this,_e),!0)}sign(t){g(jr(t)===32,"invalid digest length","digest",t);const e=pn.sign(Tt(t),Tt(l(this,_e)),{lowS:!0});return Ht.from({r:Un(e.r,32),s:Un(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=jn.computePublicKey(t);return k(pn.getSharedSecret(Tt(l(this,_e)),z(e),!1))}static computePublicKey(t,e){let n=z(t,"key");if(n.length===32){const i=pn.getPublicKey(n,!!e);return k(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=pn.ProjectivePoint.fromHex(n);return k(s.toRawBytes(e))}static recoverPublicKey(t,e){g(jr(t)===32,"invalid digest length","digest",t);const n=Ht.from(e);let s=pn.Signature.fromCompact(Tt(ct([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(Tt(t));return g(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=pn.ProjectivePoint.fromHex(jn.computePublicKey(t).substring(2)),i=pn.ProjectivePoint.fromHex(jn.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}};_e=new WeakMap;let fi=jn;const Od=BigInt(0),Sd=BigInt(36);function Zc(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=z(ft(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const rc={};for(let r=0;r<10;r++)rc[String(r)]=String(r);for(let r=0;r<26;r++)rc[String.fromCharCode(65+r)]=String(10+r);const jc=15;function Ld(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>rc[n]).join("");for(;t.length>=jc;){let n=t.substring(0,jc);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Ud=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function Fd(r){r=r.toLowerCase();let t=Od;for(let e=0;e<r.length;e++)t=t*Sd+Ud[r[e]];return t}function $(r){if(g(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=Zc(r);return g(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){g(r.substring(2,4)===Ld(r),"bad icap checksum","address",r);let t=Fd(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Zc("0x"+t)}g(!1,"invalid address","address",r)}function Dd(r){const t=$(r.from);let n=T(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,$(at(ft(Dn([t,n])),12))}function Pu(r){return r&&typeof r.getAddress=="function"}async function Xo(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(N(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),g(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),$(e)}function St(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?$(r):(N(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Xo(r,t.resolveName(r)));if(Pu(r))return Xo(r,r.getAddress());if(r&&typeof r.then=="function")return Xo(r,r);g(!1,"unsupported addressable value","target",r)}const Ge={};function R(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new Bt(Ge,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function Y(r,t){return new Bt(Ge,`bytes${t||""}`,r,{size:t})}const Yc=Symbol.for("_ethers_typed");var hr;const Qe=class Qe{constructor(t,e,n,s){y(this,"type");y(this,"value");b(this,hr);y(this,"_typedSymbol");s==null&&(s=null),Oi(Ge,t,"Typed"),M(this,{_typedSymbol:Yc,type:e,value:n}),d(this,hr,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return l(this,hr)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return l(this,hr)===!0?-1:l(this,hr)===!1?this.value.length:null}static from(t,e){return new Qe(Ge,t,e)}static uint8(t){return R(t,8)}static uint16(t){return R(t,16)}static uint24(t){return R(t,24)}static uint32(t){return R(t,32)}static uint40(t){return R(t,40)}static uint48(t){return R(t,48)}static uint56(t){return R(t,56)}static uint64(t){return R(t,64)}static uint72(t){return R(t,72)}static uint80(t){return R(t,80)}static uint88(t){return R(t,88)}static uint96(t){return R(t,96)}static uint104(t){return R(t,104)}static uint112(t){return R(t,112)}static uint120(t){return R(t,120)}static uint128(t){return R(t,128)}static uint136(t){return R(t,136)}static uint144(t){return R(t,144)}static uint152(t){return R(t,152)}static uint160(t){return R(t,160)}static uint168(t){return R(t,168)}static uint176(t){return R(t,176)}static uint184(t){return R(t,184)}static uint192(t){return R(t,192)}static uint200(t){return R(t,200)}static uint208(t){return R(t,208)}static uint216(t){return R(t,216)}static uint224(t){return R(t,224)}static uint232(t){return R(t,232)}static uint240(t){return R(t,240)}static uint248(t){return R(t,248)}static uint256(t){return R(t,256)}static uint(t){return R(t,256)}static int8(t){return R(t,-8)}static int16(t){return R(t,-16)}static int24(t){return R(t,-24)}static int32(t){return R(t,-32)}static int40(t){return R(t,-40)}static int48(t){return R(t,-48)}static int56(t){return R(t,-56)}static int64(t){return R(t,-64)}static int72(t){return R(t,-72)}static int80(t){return R(t,-80)}static int88(t){return R(t,-88)}static int96(t){return R(t,-96)}static int104(t){return R(t,-104)}static int112(t){return R(t,-112)}static int120(t){return R(t,-120)}static int128(t){return R(t,-128)}static int136(t){return R(t,-136)}static int144(t){return R(t,-144)}static int152(t){return R(t,-152)}static int160(t){return R(t,-160)}static int168(t){return R(t,-168)}static int176(t){return R(t,-176)}static int184(t){return R(t,-184)}static int192(t){return R(t,-192)}static int200(t){return R(t,-200)}static int208(t){return R(t,-208)}static int216(t){return R(t,-216)}static int224(t){return R(t,-224)}static int232(t){return R(t,-232)}static int240(t){return R(t,-240)}static int248(t){return R(t,-248)}static int256(t){return R(t,-256)}static int(t){return R(t,-256)}static bytes1(t){return Y(t,1)}static bytes2(t){return Y(t,2)}static bytes3(t){return Y(t,3)}static bytes4(t){return Y(t,4)}static bytes5(t){return Y(t,5)}static bytes6(t){return Y(t,6)}static bytes7(t){return Y(t,7)}static bytes8(t){return Y(t,8)}static bytes9(t){return Y(t,9)}static bytes10(t){return Y(t,10)}static bytes11(t){return Y(t,11)}static bytes12(t){return Y(t,12)}static bytes13(t){return Y(t,13)}static bytes14(t){return Y(t,14)}static bytes15(t){return Y(t,15)}static bytes16(t){return Y(t,16)}static bytes17(t){return Y(t,17)}static bytes18(t){return Y(t,18)}static bytes19(t){return Y(t,19)}static bytes20(t){return Y(t,20)}static bytes21(t){return Y(t,21)}static bytes22(t){return Y(t,22)}static bytes23(t){return Y(t,23)}static bytes24(t){return Y(t,24)}static bytes25(t){return Y(t,25)}static bytes26(t){return Y(t,26)}static bytes27(t){return Y(t,27)}static bytes28(t){return Y(t,28)}static bytes29(t){return Y(t,29)}static bytes30(t){return Y(t,30)}static bytes31(t){return Y(t,31)}static bytes32(t){return Y(t,32)}static address(t){return new Qe(Ge,"address",t)}static bool(t){return new Qe(Ge,"bool",!!t)}static bytes(t){return new Qe(Ge,"bytes",t)}static string(t){return new Qe(Ge,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Qe(Ge,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Yc}static dereference(t,e){if(Qe.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};hr=new WeakMap;let Bt=Qe;class Md extends on{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=Bt.dereference(e,"string");try{n=$(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return $(Un(t.readValue(),20))}}class Hd extends on{constructor(e){super(e.name,e.type,"_",e.dynamic);y(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function Cu(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(u=>{const f=u.localName;return N(f,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),N(!c[f],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[f]=!0,e[f]})}else g(!1,"invalid tuple value","tuple",e);g(t.length===n.length,"types/value length mismatch","tuple",e);let s=new ma,i=new ma,o=[];t.forEach((c,u)=>{let f=n[u];if(c.dynamic){let h=i.length;c.encode(i,f);let p=s.writeUpdatableValue();o.push(m=>{p(m+h)})}else c.encode(s,f)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function Bu(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(Et(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(Et(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),Hs.fromItems(e,n)}class Gd extends on{constructor(e,n,s){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,s,o);y(this,"coder");y(this,"length");M(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(e);return n}encode(e,n){const s=Bt.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),Fl(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Cu(e,o,s)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),N(n*Ot<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*Ot,length:e.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new Hd(this.coder));return Bu(e,s)}}class Qd extends on{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=Bt.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class ku extends on{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Tt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class Vd extends ku{constructor(t){super("bytes",t)}decode(t){return k(super.decode(t))}}class zd extends on{constructor(e,n){let s="bytes"+String(e);super(s,s,n,!1);y(this,"size");M(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let s=Tt(Bt.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(s)}decode(e){return k(e.readBytes(this.size))}}const Jd=new Uint8Array([]);class Kd extends on{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(Jd)}decode(t){return t.readBytes(0),null}}const _d=BigInt(0),Wd=BigInt(1),Zd=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class jd extends on{constructor(e,n,s){const i=(n?"int":"uint")+e*8;super(i,i,s,!1);y(this,"size");y(this,"signed");M(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let s=T(Bt.dereference(n,this.type)),i=qn(Zd,Ot*8);if(this.signed){let o=qn(i,this.size*8-1);(s>o||s<-(o+Wd))&&this._throwError("value out-of-bounds",n),s=Hl(s,8*Ot)}else(s<_d||s>qn(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(s)}decode(e){let n=qn(e.readValue(),this.size*8);return this.signed&&(n=ro(n,this.size*8)),n}}class Yd extends ku{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,De(Bt.dereference(e,"string")))}decode(t){return so(super.decode(t))}}class zi extends on{constructor(e,n){let s=!1;const i=[];e.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);y(this,"coders");M(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const s=Bt.dereference(n,"tuple");return Cu(e,this.coders,s)}decode(e){return Bu(e,this.coders)}}function qo(r,t){return{address:$(r),storageKeys:t.map((e,n)=>(g(rt(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Tr(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(g(e.length===2,"invalid slot set",`value[${n}]`,e),qo(e[0],e[1])):(g(e!=null&&typeof e=="object","invalid address-slot set","value",r),qo(e.address,e.storageKeys)));g(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return qo(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function vu(r){return{address:$(r.address),nonce:T(r.nonce!=null?r.nonce:0),chainId:T(r.chainId!=null?r.chainId:0),signature:Ht.from(r.signature)}}function Xd(r){let t;return typeof r=="string"?t=fi.computePublicKey(r,!1):t=r.publicKey,$(ft("0x"+t.substring(4)).substring(26))}function qd(r,t){return Xd(fi.recoverPublicKey(r,t))}const mt=BigInt(0),$d=BigInt(2),tp=BigInt(27),ep=BigInt(28),np=BigInt(35),rp=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$o=4096*32;function sp(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return z(r.blobToKzgCommitment(k(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return z(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return z(r.blobToKZGCommitment(k(n)));g(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return z(r.computeBlobProof(k(n),k(s)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return z(r.computeBlobKZGProof(k(n),k(s)));g(!1,"unsupported KZG library","kzg",r)}}}function Xc(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=Ws(t).substring(4),"0x"+e}function Zs(r){return r==="0x"?null:$(r)}function Oo(r,t){try{return Tr(r)}catch(e){g(!1,e.message,t,r)}}function ip(r,t){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const e=[];for(let n=0;n<r.length;n++){const s=r[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);e.push({address:Zs(s[1]),nonce:et(s[2],"nonce"),chainId:et(s[0],"chainId"),signature:Ht.from({yParity:Or(s[3],"yParity"),r:rn(s[4],32),s:rn(s[5],32)})})}return e}catch(e){g(!1,e.message,t,r)}}function Or(r,t){return r==="0x"?0:Q(r,t)}function et(r,t){if(r==="0x")return mt;const e=T(r,t);return g(e<=rp,"value exceeds uint size",t,e),e}function W(r,t){const e=T(r,"value"),n=ht(e);return g(n.length<=32,"value too large",`tx.${t}`,e),n}function So(r){return Tr(r).map(t=>[t.address,t.storageKeys])}function op(r){return r.map(t=>[W(t.chainId,"chainId"),t.address,W(t.nonce,"nonce"),W(t.signature.yParity,"yParity"),ht(t.signature.r),ht(t.signature.s)])}function ap(r,t){g(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)g(rt(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function cp(r){const t=Si(r);g(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:Or(t[0],"nonce"),gasPrice:et(t[1],"gasPrice"),gasLimit:et(t[2],"gasLimit"),to:Zs(t[3]),value:et(t[4],"value"),data:k(t[5]),chainId:mt};if(t.length===6)return e;const n=et(t[6],"v"),s=et(t[7],"r"),i=et(t[8],"s");if(s===mt&&i===mt)e.chainId=n;else{let o=(n-np)/$d;o<mt&&(o=mt),e.chainId=o,g(o!==mt||n===tp||n===ep,"non-canonical legacy v","v",t[6]),e.signature=Ht.from({r:rn(t[7],32),s:rn(t[8],32),v:n})}return e}function lp(r,t){const e=[W(r.nonce,"nonce"),W(r.gasPrice||0,"gasPrice"),W(r.gasLimit,"gasLimit"),r.to||"0x",W(r.value,"value"),r.data];let n=mt;if(r.chainId!=mt)n=T(r.chainId,"tx.chainId"),g(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==mt&&(e.push(ht(n)),e.push("0x"),e.push("0x")),Dn(e);let s=BigInt(27+t.yParity);return n!==mt?s=Ht.getChainIdV(n,t.v):BigInt(t.v)!==s&&g(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(ht(s)),e.push(ht(t.r)),e.push(ht(t.s)),Dn(e)}function Lo(r,t){let e;try{if(e=Or(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{g(!1,"invalid yParity","yParity",t[0])}const n=rn(t[1],32),s=rn(t[2],32),i=Ht.from({r:n,s,yParity:e});r.signature=i}function up(r){const t=Si(z(r).slice(1));g(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",k(r));const e={type:2,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:k(t[7]),accessList:Oo(t[8],"accessList")};return t.length===9||Lo(e,t.slice(9)),e}function fp(r,t){const e=[W(r.chainId,"chainId"),W(r.nonce,"nonce"),W(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(r.maxFeePerGas||0,"maxFeePerGas"),W(r.gasLimit,"gasLimit"),r.to||"0x",W(r.value,"value"),r.data,So(r.accessList||[])];return t&&(e.push(W(t.yParity,"yParity")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x02",Dn(e)])}function hp(r){const t=Si(z(r).slice(1));g(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",k(r));const e={type:1,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),gasPrice:et(t[2],"gasPrice"),gasLimit:et(t[3],"gasLimit"),to:Zs(t[4]),value:et(t[5],"value"),data:k(t[6]),accessList:Oo(t[7],"accessList")};return t.length===8||Lo(e,t.slice(8)),e}function dp(r,t){const e=[W(r.chainId,"chainId"),W(r.nonce,"nonce"),W(r.gasPrice||0,"gasPrice"),W(r.gasLimit,"gasLimit"),r.to||"0x",W(r.value,"value"),r.data,So(r.accessList||[])];return t&&(e.push(W(t.yParity,"recoveryParam")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x01",Dn(e)])}function pp(r){let t=Si(z(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],o=t[2],a=t[3];g(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),g(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),g(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),g(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),g(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});t=t[0]}g(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",k(r));const s={type:3,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:k(t[7]),accessList:Oo(t[8],"accessList"),maxFeePerBlobGas:et(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),g(s.to!=null,`invalid address for transaction type: ${e}`,"data",r),g(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)g(rt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return t.length===11||Lo(s,t.slice(11)),s}function gp(r,t,e){const n=[W(r.chainId,"chainId"),W(r.nonce,"nonce"),W(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(r.maxFeePerGas||0,"maxFeePerGas"),W(r.gasLimit,"gasLimit"),r.to||ui,W(r.value,"value"),r.data,So(r.accessList||[]),W(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),ap(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(W(t.yParity,"yParity")),n.push(ht(t.r)),n.push(ht(t.s)),e)?ct(["0x03",Dn([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):ct(["0x03",Dn(n)])}function mp(r){const t=Si(z(r).slice(1));g(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",k(r));const e={type:4,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:k(t[7]),accessList:Oo(t[8],"accessList"),authorizationList:ip(t[9],"authorizationList")};return t.length===10||Lo(e,t.slice(10)),e}function wp(r,t){const e=[W(r.chainId,"chainId"),W(r.nonce,"nonce"),W(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(r.maxFeePerGas||0,"maxFeePerGas"),W(r.gasLimit,"gasLimit"),r.to||"0x",W(r.value,"value"),r.data,So(r.accessList||[]),op(r.authorizationList||[])];return t&&(e.push(W(t.yParity,"yParity")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x04",Dn(e)])}var he,ls,us,fs,hs,ds,ps,gs,ms,ws,ys,bs,dr,An,Ce,En,As,Es,Zi;const Ne=class Ne{constructor(){b(this,Es);b(this,he);b(this,ls);b(this,us);b(this,fs);b(this,hs);b(this,ds);b(this,ps);b(this,gs);b(this,ms);b(this,ws);b(this,ys);b(this,bs);b(this,dr);b(this,An);b(this,Ce);b(this,En);b(this,As);d(this,he,null),d(this,ls,null),d(this,fs,0),d(this,hs,mt),d(this,ds,null),d(this,ps,null),d(this,gs,null),d(this,us,"0x"),d(this,ms,mt),d(this,ws,mt),d(this,ys,null),d(this,bs,null),d(this,dr,null),d(this,An,null),d(this,Ce,null),d(this,En,null),d(this,As,null)}get type(){return l(this,he)}set type(t){switch(t){case null:d(this,he,null);break;case 0:case"legacy":d(this,he,0);break;case 1:case"berlin":case"eip-2930":d(this,he,1);break;case 2:case"london":case"eip-1559":d(this,he,2);break;case 3:case"cancun":case"eip-4844":d(this,he,3);break;case 4:case"pectra":case"eip-7702":d(this,he,4);break;default:g(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=l(this,ls);return t==null&&this.type===3?ui:t}set to(t){d(this,ls,t==null?null:$(t))}get nonce(){return l(this,fs)}set nonce(t){d(this,fs,Q(t,"value"))}get gasLimit(){return l(this,hs)}set gasLimit(t){d(this,hs,T(t))}get gasPrice(){const t=l(this,ds);return t==null&&(this.type===0||this.type===1)?mt:t}set gasPrice(t){d(this,ds,t==null?null:T(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=l(this,ps);return t??(this.type===2||this.type===3?mt:null)}set maxPriorityFeePerGas(t){d(this,ps,t==null?null:T(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=l(this,gs);return t??(this.type===2||this.type===3?mt:null)}set maxFeePerGas(t){d(this,gs,t==null?null:T(t,"maxFeePerGas"))}get data(){return l(this,us)}set data(t){d(this,us,k(t))}get value(){return l(this,ms)}set value(t){d(this,ms,T(t,"value"))}get chainId(){return l(this,ws)}set chainId(t){d(this,ws,T(t))}get signature(){return l(this,ys)||null}set signature(t){d(this,ys,t==null?null:Ht.from(t))}get accessList(){const t=l(this,bs)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){d(this,bs,t==null?null:Tr(t))}get authorizationList(){const t=l(this,As)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){d(this,As,t==null?null:t.map(e=>vu(e)))}get maxFeePerBlobGas(){const t=l(this,dr);return t==null&&this.type===3?mt:t}set maxFeePerBlobGas(t){d(this,dr,t==null?null:T(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=l(this,An);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){g(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)g(rt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}d(this,An,t)}get blobs(){return l(this,En)==null?null:l(this,En).map(t=>Object.assign({},t))}set blobs(t){if(t==null){d(this,En,null);return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(Za(i)){N(l(this,Ce),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=z(i);if(g(o.length<=$o,"blob is too large",`blobs[${s}]`,i),o.length!==$o){const u=new Uint8Array($o);u.set(o),o=u}const a=l(this,Ce).blobToKzgCommitment(o),c=k(l(this,Ce).computeBlobKzgProof(o,a));e.push({data:k(o),commitment:k(a),proof:c}),n.push(Xc(1,a))}else{const o=k(i.commitment);e.push({data:k(i.data),commitment:o,proof:k(i.proof)}),n.push(Xc(1,o))}}d(this,En,e),d(this,An,n)}get kzg(){return l(this,Ce)}set kzg(t){t==null?d(this,Ce,null):d(this,Ce,sp(t))}get hash(){return this.signature==null?null:ft(I(this,Es,Zi).call(this,!0,!1))}get unsignedHash(){return ft(this.unsignedSerialized)}get from(){return this.signature==null?null:qd(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:fi.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return I(this,Es,Zi).call(this,!0,!0)}get unsignedSerialized(){return I(this,Es,Zi).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=l(this,dr)!=null||l(this,An);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&N(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),N(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),N(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ne.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new Ne;if(typeof t=="string"){const n=z(t);if(n[0]>=127)return Ne.from(cp(n));switch(n[0]){case 1:return Ne.from(hp(n));case 2:return Ne.from(up(n));case 3:return Ne.from(pp(n));case 4:return Ne.from(mp(n))}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new Ne;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=Ht.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(g(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),g(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(g(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),g(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};he=new WeakMap,ls=new WeakMap,us=new WeakMap,fs=new WeakMap,hs=new WeakMap,ds=new WeakMap,ps=new WeakMap,gs=new WeakMap,ms=new WeakMap,ws=new WeakMap,ys=new WeakMap,bs=new WeakMap,dr=new WeakMap,An=new WeakMap,Ce=new WeakMap,En=new WeakMap,As=new WeakMap,Es=new WeakSet,Zi=function(t,e){N(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return lp(this,n);case 1:return dp(this,n);case 2:return fp(this,n);case 3:return gp(this,n,e?this.blobs:null);case 4:return wp(this,n)}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ao=Ne;function Pr(r){return ft(De(r))}var yp="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";const qc=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),$c=4;function bp(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let F=1;F<n;F++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,u=0;function f(){return c==0&&(u=u<<8|r[t++],c=8),u>>--c&1}const h=31,p=2**h,m=p>>>1,A=m>>1,w=p-1;let E=0;for(let F=0;F<h;F++)E=E<<1|f();let x=[],v=0,P=p;for(;;){let F=Math.floor(((E-v+1)*s-1)/P),O=0,H=n;for(;H-O>1;){let Z=O+H>>>1;F<i[Z]?H=Z:O=Z}if(O==0)break;x.push(O);let L=v+Math.floor(P*i[O]/s),X=v+Math.floor(P*i[O+1]/s)-1;for(;!((L^X)&m);)E=E<<1&w|f(),L=L<<1&w,X=X<<1&w|1;for(;L&~X&A;)E=E&m|E<<1&w>>>1|f(),L=L<<1^m,X=(X^m)<<1|m|1;v=L,P=1+X-L}let G=n-4;return x.map(F=>{switch(F-G){case 3:return G+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return G+256+(r[a++]<<8|r[a++]);case 1:return G+r[a++];default:return F-1}})}function Ap(r){let t=0;return()=>r[t++]}function Ru(r){return Ap(bp(Ep(r)))}function Ep(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function xp(r){return r&1?~r>>1:r>>1}function Np(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=xp(t());return e}function hi(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Tu(r){return di(()=>{let t=hi(r);if(t.length)return t})}function Ou(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(Ip(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(Pp(e,r))}return t.flat()}function di(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function Su(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)Np(r,e).forEach((i,o)=>n[o].push(i));return n}function Ip(r,t){let e=1+t(),n=t(),s=di(t);return Su(s.length,1+r,t).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((f,h)=>{let p=h*n;return[c+h*e,u.map(m=>m+p)]})})}function Pp(r,t){let e=1+t();return Su(e,1+r,t).map(s=>[s[0],s.slice(1)])}function Cp(r){let t=[],e=hi(r);return s(n([]),[]),t;function n(i){let o=r(),a=di(()=>{let c=hi(r).map(u=>e[u]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let u of o)for(let f of u.Q)s(u,[...a,f],c)}}}function Bp(r){return r.toString(16).toUpperCase().padStart(2,"0")}function Lu(r){return`{${Bp(r)}}`}function kp(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function Js(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<e;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function vp(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var Rp="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";const pi=44032,co=4352,lo=4449,uo=4519,Uu=19,Fu=21,Ks=28,fo=Fu*Ks,Tp=Uu*fo,Op=pi+Tp,Sp=co+Uu,Lp=lo+Fu,Up=uo+Ks;function ei(r){return r>>24&255}function Du(r){return r&16777215}let Ia,tl,Pa,ji;function Fp(){let r=Ru(Rp);Ia=new Map(Tu(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),tl=new Set(hi(r)),Pa=new Map,ji=new Map;for(let[t,e]of Ou(r)){if(!tl.has(t)&&e.length==2){let[n,s]=e,i=ji.get(n);i||(i=new Map,ji.set(n,i)),i.set(s,t)}Pa.set(t,e.reverse())}}function Mu(r){return r>=pi&&r<Op}function Dp(r,t){if(r>=co&&r<Sp&&t>=lo&&t<Lp)return pi+(r-co)*fo+(t-lo)*Ks;if(Mu(r)&&t>uo&&t<Up&&(r-pi)%Ks==0)return r+(t-uo);{let e=ji.get(r);return e&&(e=e.get(t),e)?e:-1}}function Hu(r){Ia||Fp();let t=[],e=[],n=!1;function s(i){let o=Ia.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(Mu(i)){let o=i-pi,a=o/fo|0,c=o%fo/Ks|0,u=o%Ks;s(co+a),s(lo+c),u>0&&s(uo+u)}else{let o=Pa.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=ei(t[0]);for(let o=1;o<t.length;o++){let a=ei(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=t[c+1];if(t[c+1]=t[c],t[c]=u,!c||(i=ei(t[--c]),i<=a))break}i=ei(t[o])}}return t}function Mp(r){let t=[],e=[],n=-1,s=0;for(let i of r){let o=ei(i),a=Du(i);if(n==-1)o==0?n=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),s=o;else{let c=Dp(n,a);c>=0?n=c:s==0&&o==0?(t.push(n),n=a):(e.push(a),s=o)}}return n>=0&&t.push(n,...e),t}function Gu(r){return Hu(r).map(Du)}function Hp(r){return Mp(Hu(r))}const el=45,Qu=".",Vu=65039,zu=1,ho=r=>Array.from(r);function gi(r,t){return r.P.has(t)||r.Q.has(t)}class Gp extends Array{get is_emoji(){return!0}}let Ca,Ju,tr,Ba,Ku,Xr,ta,Gr,_n,nl,ka;function sc(){if(Ca)return;let r=Ru(yp);const t=()=>hi(r),e=()=>new Set(t()),n=(f,h)=>h.forEach(p=>f.add(p));Ca=new Map(Ou(r)),Ju=e(),tr=t(),Ba=new Set(t().map(f=>tr[f])),tr=new Set(tr),Ku=e(),e();let s=Tu(r),i=r();const o=()=>{let f=new Set;return t().forEach(h=>n(f,s[h])),n(f,t()),f};Xr=di(f=>{let h=di(r).map(p=>p+96);if(h.length){let p=f>=i;h[0]-=32,h=Js(h),p&&(h=`Restricted[${h}]`);let m=o(),A=o(),w=!r();return{N:h,P:m,Q:A,M:w,R:p}}}),ta=e(),Gr=new Map;let a=t().concat(ho(ta)).sort((f,h)=>f-h);a.forEach((f,h)=>{let p=r(),m=a[h]=p?a[h-p]:{V:[],M:new Map};m.V.push(f),ta.has(f)||Gr.set(f,m)});for(let{V:f,M:h}of new Set(Gr.values())){let p=[];for(let A of f){let w=Xr.filter(x=>gi(x,A)),E=p.find(({G:x})=>w.some(v=>x.has(v)));E||(E={G:new Set,V:[]},p.push(E)),E.V.push(A),n(E.G,w)}let m=p.flatMap(A=>ho(A.G));for(let{G:A,V:w}of p){let E=new Set(m.filter(x=>!A.has(x)));for(let x of w)h.set(x,E)}}_n=new Set;let c=new Set;const u=f=>_n.has(f)?c.add(f):_n.add(f);for(let f of Xr){for(let h of f.P)u(h);for(let h of f.Q)u(h)}for(let f of _n)!Gr.has(f)&&!c.has(f)&&Gr.set(f,zu);n(_n,Gu(_n)),nl=Cp(r).map(f=>Gp.from(f)).sort(vp),ka=new Map;for(let f of nl){let h=[ka];for(let p of f){let m=h.map(A=>{let w=A.get(p);return w||(w=new Map,A.set(p,w)),w});p===Vu?h.push(...m):h=m}for(let p of h)p.V=f}}function ic(r){return(_u(r)?"":`${oc(Uo([r]))} `)+Lu(r)}function oc(r){return`"${r}"‎`}function Qp(r){if(r.length>=4&&r[2]==el&&r[3]==el)throw new Error(`invalid label extension: "${Js(r.slice(0,4))}"`)}function Vp(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function zp(r){let t=r[0],e=qc.get(t);if(e)throw oi(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let o=qc.get(t);if(o){if(s==i)throw oi(`${e} + ${o}`);s=i+1,e=o}}if(s==n)throw oi(`trailing ${e}`)}function Uo(r,t=1/0,e=Lu){let n=[];Jp(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];_u(a)&&(n.push(Js(r.slice(s,o))),n.push(e(a)),s=o+1)}return n.push(Js(r.slice(s,i))),n.join("")}function Jp(r){return sc(),tr.has(r)}function _u(r){return sc(),Ku.has(r)}function Kp(r){return jp(_p(r,Hp,qp))}function _p(r,t,e){if(!r)return[];sc();let n=0;return r.split(Qu).map(s=>{let i=kp(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=Xp(i,t,e),c=a.length,u;if(!c)throw new Error("empty label");let f=o.output=a.flat();if(Vp(f),!(o.emoji=c>1||a[0].is_emoji)&&f.every(p=>p<128))Qp(f),u="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)u="Emoji";else{if(tr.has(f[0]))throw oi("leading combining mark");for(let w=1;w<c;w++){let E=a[w];if(!E.is_emoji&&tr.has(E[0]))throw oi(`emoji + combining mark: "${Js(a[w-1])} + ${Uo([E[0]])}"`)}zp(f);let m=ho(new Set(p)),[A]=Zp(m);Yp(A,p),Wp(A,m),u=A.N}}o.type=u}catch(a){o.error=a}return o})}function Wp(r,t){let e,n=[];for(let s of t){let i=Gr.get(s);if(i===zu)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):ho(o),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>gi(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function Zp(r){let t=Xr;for(let e of r){let n=t.filter(s=>gi(s,e));if(!n.length)throw Xr.some(s=>gi(s,e))?Zu(t[0],e):Wu(e);if(t=n,n.length==1)break}return t}function jp(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${oc(Uo(t,63))}: ${s}`)}return Js(n)}).join(Qu)}function Wu(r){return new Error(`disallowed character: ${ic(r)}`)}function Zu(r,t){let e=ic(t),n=Xr.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function oi(r){return new Error(`illegal placement: ${r}`)}function Yp(r,t){for(let e of t)if(!gi(r,e))throw Zu(r,e);if(r.M){let e=Gu(t);for(let n=1,s=e.length;n<s;n++)if(Ba.has(e[n])){let i=n+1;for(let o;i<s&&Ba.has(o=e[i]);i++)for(let a=n;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${ic(o)}`);if(i-n>$c)throw new Error(`excessive non-spacing marks: ${oc(Uo(e.slice(n-1,i)))} (${i-n}/${$c})`);n=i}}}function Xp(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=$p(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let o=r.pop();if(_n.has(o))s.push(o);else{let a=Ca.get(o);if(a)s.push(...a);else if(!Ju.has(o))throw Wu(o)}}}return s.length&&n.push(t(s)),n}function qp(r){return r.filter(t=>t!=Vu)}function $p(r,t){let e=ka,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const ju=new Uint8Array(32);ju.fill(0);function rl(r){return g(r.length!==0,"invalid ENS name; empty component","comp",r),r}function Yu(r){const t=De(tg(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(rl(t.slice(n,s))),n=s+1);return g(n<t.length,"invalid ENS name; empty component","name",r),e.push(rl(t.slice(n))),e}function tg(r){try{if(r.length===0)throw new Error("empty label");return Kp(r)}catch(t){g(!1,`invalid ENS name (${t.message})`,"name",r)}}function va(r){g(typeof r=="string","invalid ENS name; not a string","name",r),g(r.length,"invalid ENS name (empty label)","name",r);let t=ju;const e=Yu(r);for(;e.length;)t=ft(ct([t,ft(e.pop())]));return k(t)}function eg(r,t){const e=t;return g(e<=255,"DNS encoded label cannot exceed 255","length",e),k(ct(Yu(r).map(n=>{g(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const Xu=new Uint8Array(32);Xu.fill(0);const ng=BigInt(-1),qu=BigInt(0),$u=BigInt(1),rg=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function sg(r){const t=z(r),e=t.length%32;return e?ct([t,Xu.slice(e)]):k(t)}const ig=Un($u,32),og=Un(qu,32),sl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ea=["name","version","chainId","verifyingContract","salt"];function il(r){return function(t){return g(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const ag={name:il("name"),version:il("version"),chainId:function(r){const t=T(r,"domain.chainId");return g(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):ge(t)},verifyingContract:function(r){try{return $(r).toLowerCase()}catch{}g(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=z(r,"domain.salt");return g(t.length===32,'invalid domain value "salt"',"domain.salt",r),k(t)}};function na(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);g(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=qn(rg,e?n-1:n),i=e?(s+$u)*ng:qu;return function(o){const a=T(o,"value");return g(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),Un(e?Hl(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return g(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=z(n);return g(s.length===e,`invalid length for ${r}`,"value",n),sg(n)}}}switch(r){case"address":return function(t){return rn($(t),32)};case"bool":return function(t){return t?ig:og};case"bytes":return function(t){return ft(t)};case"string":return function(t){return Pr(t)}}return null}function ol(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function Ji(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}var Ni,We,xs,Ao,tf;const qt=class qt{constructor(t){b(this,Ao);y(this,"primaryType");b(this,Ni);b(this,We);b(this,xs);d(this,We,new Map),d(this,xs,new Map);const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:u,type:f})=>{let{base:h,index:p}=Ji(f);return h==="int"&&!t.int&&(h="int256"),h==="uint"&&!t.uint&&(h="uint256"),{name:u,type:h+(p||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),d(this,Ni,JSON.stringify(i));for(const c in i){const u=new Set;for(const f of i[c]){g(!u.has(f.name),`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(c)}`,"types",t),u.add(f.name);const h=Ji(f.type).base;g(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",t),!na(h)&&(g(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),n.get(h).push(c),e.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);g(o.length!==0,"missing primary type","types",t),g(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),M(this,{primaryType:o[0]});function a(c,u){g(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),u.add(c);for(const f of e.get(c))if(n.has(f)){a(f,u);for(const h of u)s.get(h).add(f)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const f=Array.from(u);f.sort(),l(this,We).set(c,ol(c,i[c])+f.map(h=>ol(h,i[h])).join(""))}}get types(){return JSON.parse(l(this,Ni))}getEncoder(t){let e=l(this,xs).get(t);return e||(e=I(this,Ao,tf).call(this,t),l(this,xs).set(t,e)),e}encodeType(t){const e=l(this,We).get(t);return g(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return ft(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(na(t))return n(t,e);const s=Ji(t).array;if(s)return g(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});g(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new qt(t)}static getPrimaryType(t){return qt.from(t).primaryType}static hashStruct(t,e,n){return qt.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=sl[n];g(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>ea.indexOf(n.name)-ea.indexOf(s.name)),qt.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return ct(["0x1901",qt.hashDomain(t),qt.from(e).hash(n)])}static hash(t,e,n){return ft(qt.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!rt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=qt.from(e);o.visit(n,(a,c)=>(a==="address"&&!rt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){qt.hashDomain(t);const s={},i=[];ea.forEach(c=>{const u=t[c];u!=null&&(s[c]=ag[c](u),i.push({name:c,type:sl[c]}))});const o=qt.from(e);e=o.types;const a=Object.assign({},e);return g(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return k(z(u));if(c.match(/^u?int/))return T(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return g(typeof u=="string","invalid string","value",u),u}g(!1,"unsupported type","type",c)})}}};Ni=new WeakMap,We=new WeakMap,xs=new WeakMap,Ao=new WeakSet,tf=function(t){{const s=na(t);if(s)return s}const e=Ji(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{g(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return l(this,We).has(s)&&(a=a.map(ft)),ft(ct(a))}}const n=this.types[t];if(n){const s=Pr(l(this,We).get(t));return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return l(this,We).has(c)?ft(u):u});return o.unshift(s),ct(o)}}g(!1,`unknown type: ${t}`,"type",t)};let po=qt;function Lt(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const cg="external public payable override",lg=Lt(cg.split(" ")),ef="constant external internal payable private public pure view override",ug=Lt(ef.split(" ")),nf="constructor error event fallback function receive struct",rf=Lt(nf.split(" ")),sf="calldata memory storage payable indexed",fg=Lt(sf.split(" ")),hg="tuple returns",dg=[nf,sf,hg,ef].join(" "),pg=Lt(dg.split(" ")),gg={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},mg=new RegExp("^(\\s*)"),wg=new RegExp("^([0-9]+)"),yg=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),of=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),af=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var bt,de,Ii,Ra;const Eo=class Eo{constructor(t){b(this,Ii);b(this,bt);b(this,de);d(this,bt,0),d(this,de,t.slice())}get offset(){return l(this,bt)}get length(){return l(this,de).length-l(this,bt)}clone(){return new Eo(l(this,de))}reset(){d(this,bt,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=I(this,Ii,Ra).call(this,l(this,bt)+1,t.match+1);return d(this,bt,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;l(this,bt)<t.match-1;){const n=this.peek().linkNext;e.push(I(this,Ii,Ra).call(this,l(this,bt)+1,n)),d(this,bt,n)}return d(this,bt,t.match+1),e}peek(){if(l(this,bt)>=l(this,de).length)throw new Error("out-of-bounds");return l(this,de)[l(this,bt)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Ys(this,bt)._++,t}toString(){const t=[];for(let e=l(this,bt);e<l(this,de).length;e++){const n=l(this,de)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};bt=new WeakMap,de=new WeakMap,Ii=new WeakSet,Ra=function(t=0,e=0){return new Eo(l(this,de).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let ye=Eo;function Qn(r){const t=[],e=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(mg);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let u=gg[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(u=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let f=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const h=t.pop().text;f=h+f,t[t.length-1].value=Q(h)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=f}continue}if(a=o.match(yg),a){if(c.text=a[1],i+=c.text.length,pg.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(af)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(wg),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ye(t.map(o=>Object.freeze(o)))}function al(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Fo(r,t){if(t.peekKeyword(rf)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function sn(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function cf(r){let t=sn(r,ug);return al(t,Lt("constant payable nonpayable".split(" "))),al(t,Lt("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function nn(r,t){return r.popParams().map(e=>xt.from(e,t))}function lf(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return T(r.pop().text);throw new Error("invalid gas")}return null}function Cr(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const bg=new RegExp(/^(.*)\[([0-9]*)\]$/);function cl(r){const t=r.match(af);if(g(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);g(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);g(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const ot={},Gt=Symbol.for("_ethers_internal"),ll="_ParamTypeInternal",ul="_ErrorInternal",fl="_EventInternal",hl="_ConstructorInternal",dl="_FallbackInternal",pl="_FunctionInternal",gl="_StructInternal";var Ns,Yi;const $t=class $t{constructor(t,e,n,s,i,o,a,c){b(this,Ns);y(this,"name");y(this,"type");y(this,"baseType");y(this,"indexed");y(this,"components");y(this,"arrayLength");y(this,"arrayChildren");if(Oi(t,ot,"ParamType"),Object.defineProperty(this,Gt,{value:ll}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");M(this,{name:e,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],s=[t];return I(this,Ns,Yi).call(this,n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if($t.isParamType(t))return t;if(typeof t=="string")try{return $t.from(Qn(t),e)}catch{g(!1,"invalid param type","obj",t)}else if(t instanceof ye){let a="",c="",u=null;sn(t,Lt(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(w=>$t.from(w)),a=`tuple(${u.map(w=>w.format()).join(",")})`):(a=cl(t.popType("TYPE")),c=a);let f=null,h=null;for(;t.length&&t.peekType("BRACKET");){const w=t.pop();f=new $t(ot,"",a,c,null,u,h,f),h=w.value,a+=w.text,c="array",u=null}let p=null;if(sn(t,fg).has("indexed")){if(!e)throw new Error("");p=!0}const A=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new $t(ot,A,a,c,p,u,h,f)}const n=t.name;g(!n||typeof n=="string"&&n.match(of),"invalid name","obj.name",n);let s=t.indexed;s!=null&&(g(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(bg);if(o){const a=parseInt(o[2]||"-1"),c=$t.from({type:o[1],components:t.components});return new $t(ot,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(u=>$t.from(u)):null;return new $t(ot,n||"",i,"tuple",s,a,null,null)}return i=cl(t.type),new $t(ot,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[Gt]===ll}};Ns=new WeakSet,Yi=function(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,u)=>{var f;I(f=o,Ns,Yi).call(f,t,c,n,h=>{a[u]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var f;I(f=o[u],Ns,Yi).call(f,t,c,n,h=>{a[u]=h})}),s(a);return}const i=n(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let xt=$t;class Br{constructor(t,e,n){y(this,"type");y(this,"inputs");Oi(t,ot,"Fragment"),n=Object.freeze(n.slice()),M(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Br.from(JSON.parse(t))}catch{}return Br.from(Qn(t))}if(t instanceof ye)switch(t.peekKeyword(rf)){case"constructor":return en.from(t);case"error":return Mt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Ve.from(t);case"function":return Le.from(t);case"struct":return Nr.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return en.from(t);case"error":return Mt.from(t);case"event":return Se.from(t);case"fallback":case"receive":return Ve.from(t);case"function":return Le.from(t);case"struct":return Nr.from(t)}N(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}g(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return en.isFragment(t)}static isError(t){return Mt.isFragment(t)}static isEvent(t){return Se.isFragment(t)}static isFunction(t){return Le.isFragment(t)}static isStruct(t){return Nr.isFragment(t)}}class Do extends Br{constructor(e,n,s,i){super(e,n,i);y(this,"name");g(typeof s=="string"&&s.match(of),"invalid identifier","name",s),i=Object.freeze(i.slice()),M(this,{name:s})}}function mi(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class Mt extends Do{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,Gt,{value:ul})}get selector(){return Pr(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+mi(t,this.inputs)),e.join(" ")}static from(t){if(Mt.isFragment(t))return t;if(typeof t=="string")return Mt.from(Qn(t));if(t instanceof ye){const e=Fo("error",t),n=nn(t);return Cr(t),new Mt(ot,e,n)}return new Mt(ot,t.name,t.inputs?t.inputs.map(xt.from):[])}static isFragment(t){return t&&t[Gt]===ul}}class Se extends Do{constructor(e,n,s,i){super(e,"event",n,s);y(this,"anonymous");Object.defineProperty(this,Gt,{value:fl}),M(this,{anonymous:i})}get topicHash(){return Pr(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+mi(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>xt.from(i)),new Se(ot,e,n,!1).topicHash}static from(e){if(Se.isFragment(e))return e;if(typeof e=="string")try{return Se.from(Qn(e))}catch{g(!1,"invalid event fragment","obj",e)}else if(e instanceof ye){const n=Fo("event",e),s=nn(e,!0),i=!!sn(e,Lt(["anonymous"])).has("anonymous");return Cr(e),new Se(ot,n,s,i)}return new Se(ot,e.name,e.inputs?e.inputs.map(n=>xt.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Gt]===fl}}class en extends Br{constructor(e,n,s,i,o){super(e,n,s);y(this,"payable");y(this,"gas");Object.defineProperty(this,Gt,{value:hl}),M(this,{payable:i,gas:o})}format(e){if(N(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[`constructor${mi(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(en.isFragment(e))return e;if(typeof e=="string")try{return en.from(Qn(e))}catch{g(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof ye){sn(e,Lt(["constructor"]));const n=nn(e),s=!!sn(e,lg).has("payable"),i=lf(e);return Cr(e),new en(ot,"constructor",n,s,i)}return new en(ot,"constructor",e.inputs?e.inputs.map(xt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Gt]===hl}}class Ve extends Br{constructor(e,n,s){super(e,"fallback",n);y(this,"payable");Object.defineProperty(this,Gt,{value:dl}),M(this,{payable:s})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(e){if(Ve.isFragment(e))return e;if(typeof e=="string")try{return Ve.from(Qn(e))}catch{g(!1,"invalid fallback fragment","obj",e)}else if(e instanceof ye){const n=e.toString(),s=e.peekKeyword(Lt(["fallback","receive"]));if(g(s,"type must be fallback or receive","obj",n),e.popKeyword(Lt(["fallback","receive"]))==="receive"){const c=nn(e);return g(c.length===0,"receive cannot have arguments","obj.inputs",c),sn(e,Lt(["payable"])),Cr(e),new Ve(ot,[],!0)}let o=nn(e);o.length?g(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[xt.from("bytes")];const a=cf(e);if(g(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),sn(e,Lt(["returns"])).has("returns")){const c=nn(e);g(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Cr(e),new Ve(ot,o,a==="payable")}if(e.type==="receive")return new Ve(ot,[],!0);if(e.type==="fallback"){const n=[xt.from("bytes")],s=e.stateMutability==="payable";return new Ve(ot,n,s)}g(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Gt]===dl}}class Le extends Do{constructor(e,n,s,i,o,a){super(e,"function",n,i);y(this,"constant");y(this,"outputs");y(this,"stateMutability");y(this,"payable");y(this,"gas");Object.defineProperty(this,Gt,{value:pl}),o=Object.freeze(o.slice()),M(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Pr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+mi(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(mi(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>xt.from(i)),new Le(ot,e,"view",n,[],null).selector}static from(e){if(Le.isFragment(e))return e;if(typeof e=="string")try{return Le.from(Qn(e))}catch{g(!1,"invalid function fragment","obj",e)}else if(e instanceof ye){const s=Fo("function",e),i=nn(e),o=cf(e);let a=[];sn(e,Lt(["returns"])).has("returns")&&(a=nn(e));const c=lf(e);return Cr(e),new Le(ot,s,o,i,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Le(ot,e.name,n,e.inputs?e.inputs.map(xt.from):[],e.outputs?e.outputs.map(xt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Gt]===pl}}class Nr extends Do{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,Gt,{value:gl})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Nr.from(Qn(t))}catch{g(!1,"invalid struct fragment","obj",t)}else if(t instanceof ye){const e=Fo("struct",t),n=nn(t);return Cr(t),new Nr(ot,e,n)}return new Nr(ot,t.name,t.inputs?t.inputs.map(xt.from):[])}static isFragment(t){return t&&t[Gt]===gl}}const be=new Map;be.set(0,"GENERIC_PANIC");be.set(1,"ASSERT_FALSE");be.set(17,"OVERFLOW");be.set(18,"DIVIDE_BY_ZERO");be.set(33,"ENUM_RANGE_ERROR");be.set(34,"BAD_STORAGE_DATA");be.set(49,"STACK_UNDERFLOW");be.set(50,"ARRAY_RANGE_ERROR");be.set(65,"OUT_OF_MEMORY");be.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ag=new RegExp(/^bytes([0-9]*)$/),Eg=new RegExp(/^(u?int)([0-9]*)$/);let ra=null,ml=1024;function xg(r,t,e,n){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const u=z(e);if(e=k(e),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(k(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(k(u.slice(0,4))==="0x4e487b71")try{const f=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[f]},i=`Panic due to ${be.get(f)||"UNKNOWN"}(${f})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?$(t.to):null,data:t.data||"0x"};return t.from&&(c.from=$(t.from)),it(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:o,revert:a})}var xn,Qr;const xo=class xo{constructor(){b(this,xn)}getDefaultValue(t){const e=t.map(s=>I(this,xn,Qr).call(this,xt.from(s)));return new zi(e,"_").defaultValue()}encode(t,e){Fl(e.length,t.length,"types/values length mismatch");const n=t.map(o=>I(this,xn,Qr).call(this,xt.from(o))),s=new zi(n,"_"),i=new ma;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(o=>I(this,xn,Qr).call(this,xt.from(o)));return new zi(s,"_").decode(new wa(e,n,ml))}static _setDefaultMaxInflation(t){g(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),ml=t}static defaultAbiCoder(){return ra==null&&(ra=new xo),ra}static getBuiltinCallException(t,e,n){return xg(t,e,n,xo.defaultAbiCoder())}};xn=new WeakSet,Qr=function(t){if(t.isArray())return new Gd(I(this,xn,Qr).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new zi(t.components.map(n=>I(this,xn,Qr).call(this,n)),t.name);switch(t.baseType){case"address":return new Md(t.name);case"bool":return new Qd(t.name);case"string":return new Yd(t.name);case"bytes":return new Vd(t.name);case"":return new Kd(t.name)}let e=t.type.match(Eg);if(e){let n=parseInt(e[2]||"256");return g(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new jd(n/8,e[1]==="int",t.name)}if(e=t.type.match(Ag),e){let n=parseInt(e[1]);return g(n!==0&&n<=32,"invalid bytes length","param",t),new zd(n,t.name)}g(!1,"invalid type","type",t.type)};let wi=xo;class Ng{constructor(t,e,n){y(this,"fragment");y(this,"name");y(this,"signature");y(this,"topic");y(this,"args");const s=t.name,i=t.format();M(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class Ig{constructor(t,e,n,s){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");y(this,"value");const i=t.name,o=t.format();M(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:s})}}class Pg{constructor(t,e,n){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");const s=t.name,i=t.format();M(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class wl{constructor(t){y(this,"hash");y(this,"_isIndexed");M(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const yl={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},bl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&yl[r.toString()]&&(t=yl[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};var Be,ke,ve,It,Me,Xi,qi;const Yn=class Yn{constructor(t){b(this,Me);y(this,"fragments");y(this,"deploy");y(this,"fallback");y(this,"receive");b(this,Be);b(this,ke);b(this,ve);b(this,It);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,d(this,ve,new Map),d(this,Be,new Map),d(this,ke,new Map);const n=[];for(const o of e)try{n.push(Br.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}M(this,{fragments:Object.freeze(n)});let s=null,i=!1;d(this,It,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}M(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(g(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=l(this,ve);break;case"event":c=l(this,ke);break;case"error":c=l(this,Be);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||M(this,{deploy:en.from("constructor()")}),M(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return wi.defaultAbiCoder()}getFunctionName(t){const e=I(this,Me,Xi).call(this,t,null,!1);return g(e,"no matching function","key",t),e.name}hasFunction(t){return!!I(this,Me,Xi).call(this,t,null,!1)}getFunction(t,e){return I(this,Me,Xi).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(l(this,ve).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,ve).get(s),n)}}getEventName(t){const e=I(this,Me,qi).call(this,t,null,!1);return g(e,"no matching event","key",t),e.name}hasEvent(t){return!!I(this,Me,qi).call(this,t,null,!1)}getEvent(t,e){return I(this,Me,qi).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(l(this,ke).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,ke).get(s),n)}}getError(t,e){if(rt(t)){const s=t.toLowerCase();if(bl[s])return Mt.from(bl[s].signature);for(const i of l(this,Be).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of l(this,Be))i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?Mt.from("error Error(string)"):t==="Panic"?Mt.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");g(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=Mt.from(t).format(),t==="Error(string)")return Mt.from("error Error(string)");if(t==="Panic(uint256)")return Mt.from("error Panic(uint256)");const n=l(this,Be).get(t);return n||null}forEachError(t){const e=Array.from(l(this,Be).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,Be).get(s),n)}}_decodeParams(t,e){return l(this,It).decode(t,e)}_encodeParams(t,e){return l(this,It).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);g(n,"unknown error","fragment",t),t=n}return g(at(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,at(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);g(n,"unknown error","fragment",t),t=n}return ct([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);g(n,"unknown function","fragment",t),t=n}return g(at(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,at(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);g(n,"unknown function","fragment",t),t=n}return ct([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);g(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=Tt(e);if(s.length%32===0)try{return l(this,It).decode(t.outputs,s)}catch{n="could not decode result data"}N(!1,n,"BAD_DATA",{value:k(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=z(t,"data"),s=wi.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=k(n.slice(0,4)),c=this.getError(a);if(c)try{const u=l(this,It).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);g(n,"unknown function","fragment",t),t=n}return k(l(this,It).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);g(i,"unknown event","eventFragment",t),t=i}N(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,o)=>i.type==="string"?Pr(o):i.type==="bytes"?ft(k(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Un(o):i.type.match(/^bytes/)?o=Gf(o,32):i.type==="address"&&l(this,It).encode(["address"],[o]),rn(k(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){g(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?g(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);g(o,"unknown event","eventFragment",t),t=o}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),g(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(Pr(c));else if(o.type==="bytes")n.push(ft(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(l(this,It).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:l(this,It).encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const m=this.getEvent(t);g(m,"unknown event","eventFragment",t),t=m}if(n!=null&&!t.anonymous){const m=t.topicHash;g(rt(n[0],32)&&n[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((m,A)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(s.push(xt.from({type:"bytes32",name:m.name})),o.push(!0)):(s.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=n!=null?l(this,It).decode(s,ct(n)):null,c=l(this,It).decode(i,e,!0),u=[],f=[];let h=0,p=0;return t.inputs.forEach((m,A)=>{let w=null;if(m.indexed)if(a==null)w=new wl(null);else if(o[A])w=new wl(a[p++]);else try{w=a[p++]}catch(E){w=E}else try{w=c[h++]}catch(E){w=E}u.push(w),f.push(m.name||null)}),Hs.fromItems(u,f)}parseTransaction(t){const e=z(t.data,"tx.data"),n=T(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(k(e.slice(0,4)));if(!s)return null;const i=l(this,It).decode(s.inputs,e.slice(4));return new Ig(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Ng(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=k(t),n=this.getError(at(e,0,4));if(!n)return null;const s=l(this,It).decode(n.inputs,at(e,4));return new Pg(n,n.selector,s)}static from(t){return t instanceof Yn?t:typeof t=="string"?new Yn(JSON.parse(t)):typeof t.formatJson=="function"?new Yn(t.formatJson()):typeof t.format=="function"?new Yn(t.format("json")):new Yn(t)}};Be=new WeakMap,ke=new WeakMap,ve=new WeakMap,It=new WeakMap,Me=new WeakSet,Xi=function(t,e,n){if(rt(t)){const i=t.toLowerCase();for(const o of l(this,ve).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,ve))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;Bt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const f=i[u].inputs.length;f!==a&&(!c||f!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const f=i[u].inputs;for(let h=0;h<e.length;h++)if(Bt.isTyped(e[h])){if(h>=f.length){if(e[h].type==="overrides")continue;i.splice(u,1);break}if(e[h].type!==f[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");g(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,ve).get(Le.from(t).format());return s||null},qi=function(t,e,n){if(rt(t)){const i=t.toLowerCase();for(const o of l(this,ke).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,ke))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(Bt.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");g(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,ke).get(Se.from(t).format());return s||null};let Ta=Yn;const uf=BigInt(0);function qr(r){return r??null}function lt(r){return r==null?null:r.toString()}class Al{constructor(t,e,n){y(this,"gasPrice");y(this,"maxFeePerGas");y(this,"maxPriorityFeePerGas");M(this,{gasPrice:qr(t),maxFeePerGas:qr(e),maxPriorityFeePerGas:qr(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:lt(t),maxFeePerGas:lt(e),maxPriorityFeePerGas:lt(n)}}}function go(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=k(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=T(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=Q(r[s],`request.${s}`));return r.accessList&&(t.accessList=Tr(r.accessList)),r.authorizationList&&(t.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>Za(s)?k(s):Object.assign({},s))),t}var Ze;class Cg{constructor(t,e){y(this,"provider");y(this,"number");y(this,"hash");y(this,"timestamp");y(this,"parentHash");y(this,"parentBeaconBlockRoot");y(this,"nonce");y(this,"difficulty");y(this,"gasLimit");y(this,"gasUsed");y(this,"stateRoot");y(this,"receiptsRoot");y(this,"blobGasUsed");y(this,"excessBlobGas");y(this,"miner");y(this,"prevRandao");y(this,"extraData");y(this,"baseFeePerGas");b(this,Ze);d(this,Ze,t.transactions.map(n=>typeof n!="string"?new yi(n,e):n)),M(this,{provider:e,hash:qr(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:qr(t.prevRandao),extraData:t.extraData,baseFeePerGas:qr(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return l(this,Ze).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=l(this,Ze).slice();return t.length===0?[]:(N(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:A,timestamp:w,transactions:E}=this;return{_type:"Block",baseFeePerGas:lt(t),difficulty:lt(e),extraData:n,gasLimit:lt(s),gasUsed:lt(i),blobGasUsed:lt(this.blobGasUsed),excessBlobGas:lt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,timestamp:w,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:A,transactions:E}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return l(this,Ze).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=l(this,Ze)[t];else{const n=t.toLowerCase();for(const s of l(this,Ze))if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash!==n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;g(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Bg(this)}}Ze=new WeakMap;class Ui{constructor(t,e){y(this,"provider");y(this,"transactionHash");y(this,"blockHash");y(this,"blockNumber");y(this,"removed");y(this,"address");y(this,"data");y(this,"topics");y(this,"index");y(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());M(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return N(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return kg(this)}}var Pi;class ff{constructor(t,e){y(this,"provider");y(this,"to");y(this,"from");y(this,"contractAddress");y(this,"hash");y(this,"index");y(this,"blockHash");y(this,"blockNumber");y(this,"logsBloom");y(this,"gasUsed");y(this,"blobGasUsed");y(this,"cumulativeGasUsed");y(this,"gasPrice");y(this,"blobGasPrice");y(this,"type");y(this,"status");y(this,"root");b(this,Pi);d(this,Pi,Object.freeze(t.logs.map(s=>new Ui(s,e))));let n=uf;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),M(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return l(this,Pi)}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:f,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:lt(this.cumulativeGasUsed),from:e,gasPrice:lt(this.gasPrice),blobGasUsed:lt(this.blobGasUsed),blobGasPrice:lt(this.blobGasPrice),gasUsed:lt(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:h,status:f,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return df(this)}reorderedEvent(t){return N(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),hf(this,t)}}Pi=new WeakMap;var Nn;const gc=class gc{constructor(t,e){y(this,"provider");y(this,"blockNumber");y(this,"blockHash");y(this,"index");y(this,"hash");y(this,"type");y(this,"to");y(this,"from");y(this,"nonce");y(this,"gasLimit");y(this,"gasPrice");y(this,"maxPriorityFeePerGas");y(this,"maxFeePerGas");y(this,"maxFeePerBlobGas");y(this,"data");y(this,"value");y(this,"chainId");y(this,"signature");y(this,"accessList");y(this,"blobVersionedHashes");y(this,"authorizationList");b(this,Nn);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,d(this,Nn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:f,accessList:h,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:t,blockHash:e,blobVersionedHashes:p,chainId:lt(this.chainId),data:u,from:a,gasLimit:lt(this.gasLimit),gasPrice:lt(this.gasPrice),hash:s,maxFeePerGas:lt(this.maxFeePerGas),maxPriorityFeePerGas:lt(this.maxPriorityFeePerGas),maxFeePerBlobGas:lt(this.maxFeePerBlobGas),nonce:c,signature:f,to:o,index:n,type:i,value:lt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await Rt({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=l(this,Nn),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await Rt({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const A=await this.getTransaction();if(!(A&&A.blockNumber!=null))for(o===-1&&(o=i-3,o<l(this,Nn)&&(o=l(this,Nn)));o<=p;){if(a)return null;const w=await this.provider.getBlock(o,!0);if(w==null)return;for(const E of w)if(E===this.hash)return;for(let E=0;E<w.length;E++){const x=await w.getTransaction(E);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(x.hash);if(v==null||p-v.blockNumber+1<n)return;let P="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?P="repriced":x.data==="0x"&&x.from===x.to&&x.value===uf&&(P="cancelled"),N(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:P==="replaced"||P==="cancelled",reason:P,replacement:x.replaceableTransaction(i),hash:x.hash,receipt:v})}}o++}},u=p=>{if(p==null||p.status!==0)return p;N(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},f=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(f);if(f){if(n===1||await f.confirmations()>=n)return u(f)}else if(await c(),n===0)return null;return await new Promise((p,m)=>{const A=[],w=()=>{A.forEach(x=>x())};if(A.push(()=>{a=!0}),s>0){const x=setTimeout(()=>{w(),m(it("wait for transaction timeout","TIMEOUT"))},s);A.push(()=>{clearTimeout(x)})}const E=async x=>{if(await x.confirmations()>=n){w();try{p(u(x))}catch(v){m(v)}}};if(A.push(()=>{this.provider.off(this.hash,E)}),this.provider.on(this.hash,E),i>=0){const x=async()=>{try{await c()}catch(v){if(Et(v,"TRANSACTION_REPLACED")){w(),m(v);return}}a||this.provider.once("block",x)};A.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),df(this)}reorderedEvent(t){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),hf(this,t)}replaceableTransaction(t){g(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new gc(this,this.provider);return d(e,Nn,t),e}};Nn=new WeakMap;let yi=gc;function Bg(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function hf(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function df(r){return{orphan:"drop-transaction",tx:r}}function kg(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class ac extends Ui{constructor(e,n,s){super(e,e.provider);y(this,"interface");y(this,"fragment");y(this,"args");const i=n.decodeEventLog(s,e.data,e.topics);M(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class pf extends Ui{constructor(e,n){super(e,e.provider);y(this,"error");M(this,{error:n})}}var Is;class vg extends ff{constructor(e,n,s){super(s,n);b(this,Is);d(this,Is,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?l(this,Is).getEvent(e.topics[0]):null;if(n)try{return new ac(e,l(this,Is),n)}catch(s){return new pf(e,s)}return e})}}Is=new WeakMap;var Ci;class cc extends yi{constructor(e,n,s){super(s,n);b(this,Ci);d(this,Ci,e)}async wait(e,n){const s=await super.wait(e,n);return s==null?null:new vg(l(this,Ci),this.provider,s)}}Ci=new WeakMap;class gf extends Gl{constructor(e,n,s,i){super(e,n,s);y(this,"log");M(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Rg extends gf{constructor(t,e,n,s,i){super(t,e,n,new ac(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);M(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const El=BigInt(0);function mf(r){return r&&typeof r.call=="function"}function wf(r){return r&&typeof r.estimateGas=="function"}function Mo(r){return r&&typeof r.resolveName=="function"}function yf(r){return r&&typeof r.sendTransaction=="function"}function bf(r){if(r!=null){if(Mo(r))return r;if(r.provider)return r.provider}}var Bi;class Tg{constructor(t,e,n){b(this,Bi);y(this,"fragment");if(M(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=kr(t.runner,"resolveName"),i=Mo(s)?s:null;d(this,Bi,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(f,h)=>f==="address"?Array.isArray(h)?Promise.all(h.map(p=>St(p,i))):St(h,i):h)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return l(this,Bi)}}Bi=new WeakMap;function kr(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function er(r){return r==null?null:r.provider||null}async function Af(r,t){const e=Bt.dereference(r,"overrides");g(typeof e=="object","invalid overrides parameter","overrides",r);const n=go(e);return g(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),g(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Og(r,t,e){const n=kr(r,"resolveName"),s=Mo(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=Bt.dereference(c,a),a==="address"?St(c,s):c))))}function Sg(r){const t=async function(o){const a=await Af(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await St(a.from,bf(r.runner)));const c=r.interface,u=T(a.value||El,"overrides.value")===El,f=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!f&&!u&&g(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),g(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return g(h||u,"cannot send value to non-payable fallback","overrides.value",a.value),g(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=kr(r.runner,"call");N(mf(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(u){throw Wa(u)&&u.data?r.interface.makeError(u.data,c):u}},n=async function(o){const a=r.runner;N(yf(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),u=er(r.runner);return new cc(r.interface,u,c)},s=async function(o){const a=kr(r.runner,"estimateGas");return N(wf(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return M(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function Lg(r,t){const e=function(...u){const f=r.interface.getFunction(t,u);return N(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),f},n=async function(...u){const f=e(...u);let h={};if(f.inputs.length+1===u.length&&(h=await Af(u.pop()),h.from&&(h.from=await St(h.from,bf(r.runner)))),f.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await Og(r.runner,f.inputs,u);return Object.assign({},h,await Rt({to:r.getAddress(),data:r.interface.encodeFunctionData(f,p)}))},s=async function(...u){const f=await a(...u);return f.length===1?f[0]:f},i=async function(...u){const f=r.runner;N(yf(f),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await f.sendTransaction(await n(...u)),p=er(r.runner);return new cc(r.interface,p,h)},o=async function(...u){const f=kr(r.runner,"estimateGas");return N(wf(f),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await f.estimateGas(await n(...u))},a=async function(...u){const f=kr(r.runner,"call");N(mf(f),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...u);let p="0x";try{p=await f.call(h)}catch(A){throw Wa(A)&&A.data?r.interface.makeError(A.data,h):A}const m=e(...u);return r.interface.decodeFunctionResult(m,p)},c=async(...u)=>e(...u).constant?await s(...u):await i(...u);return M(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=r.interface.getFunction(t);return N(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function Ug(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return N(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new Tg(r,e(...s),s)};return M(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return N(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const mo=Symbol.for("_ethersInternal_contract"),Ef=new WeakMap;function Fg(r,t){Ef.set(r[mo],t)}function Jt(r){return Ef.get(r[mo])}function Dg(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function lc(r,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(rt(o,32))return o;const a=r.interface.getEvent(o);return g(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?rt(t,32)?e=[t]:(n=r.interface.getEvent(t),g(n,"unknown fragment","event",t),e=[n.topicHash]):Dg(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):g(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function ni(r,t){const{subs:e}=Jt(r);return e.get((await lc(r,t)).tag)||null}async function xl(r,t,e){const n=er(r.runner);N(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await lc(r,e),{addr:a,subs:c}=Jt(r);let u=c.get(i);if(!u){const h={address:a||r,topics:o},p=E=>{let x=s;if(x==null)try{x=r.interface.getEvent(E.topics[0])}catch{}if(x){const v=x,P=s?r.interface.decodeEventLog(s,E.data,E.topics):[];Sa(r,e,P,G=>new Rg(r,G,e,v,E))}else Sa(r,e,[],v=>new gf(r,v,e,E))};let m=[];u={tag:i,listeners:[],start:()=>{m.length||m.push(n.on(h,p))},stop:async()=>{if(m.length==0)return;let E=m;m=[],await Promise.all(E),n.off(h,p)}},c.set(i,u)}return u}let Oa=Promise.resolve();async function Mg(r,t,e,n){await Oa;const s=await ni(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Jt(r).subs.delete(s.tag)),i>0}async function Sa(r,t,e,n){try{await Oa}catch{}const s=Mg(r,t,e,n);return Oa=s,await s}const Ki=["then"];var Ul;Ul=mo;const ci=class ci{constructor(t,e,n,s){y(this,"target");y(this,"interface");y(this,"runner");y(this,"filters");y(this,Ul);y(this,"fallback");g(typeof t=="string"||Pu(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=Ta.from(e);M(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,mo,{value:{}});let o,a=null,c=null;if(s){const h=er(n);c=new cc(this.interface,h,s)}let u=new Map;if(typeof t=="string")if(rt(t))a=t,o=Promise.resolve(t);else{const h=kr(n,"resolveName");if(!Mo(h))throw it("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(t).then(p=>{if(p==null)throw it("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Jt(this).addr=p,p})}else o=t.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Jt(this).addr=h,h});Fg(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const f=new Proxy({},{get:(h,p,m)=>{if(typeof p=="symbol"||Ki.indexOf(p)>=0)return Reflect.get(h,p,m);try{return this.getEvent(p)}catch(A){if(!Et(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}},has:(h,p)=>Ki.indexOf(p)>=0?Reflect.has(h,p):Reflect.has(h,p)||this.interface.hasEvent(String(p))});return M(this,{filters:f}),M(this,{fallback:i.receive||i.fallback?Sg(this):null}),new Proxy(this,{get:(h,p,m)=>{if(typeof p=="symbol"||p in h||Ki.indexOf(p)>=0)return Reflect.get(h,p,m);try{return h.getFunction(p)}catch(A){if(!Et(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}},has:(h,p)=>typeof p=="symbol"||p in h||Ki.indexOf(p)>=0?Reflect.has(h,p):h.interface.hasFunction(p)})}connect(t){return new ci(this.target,this.interface,t)}attach(t){return new ci(t,this.interface,this.runner)}async getAddress(){return await Jt(this).addrPromise}async getDeployedCode(){const t=er(this.runner);N(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=er(this.runner);return N(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Jt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Lg(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Ug(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=Jt(this),o=s||await i,{fragment:a,topics:c}=await lc(this,t),u={address:o,topics:c,fromBlock:e,toBlock:n},f=er(this.runner);return N(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await f.getLogs(u)).map(h=>{let p=a;if(p==null)try{p=this.interface.getEvent(h.topics[0])}catch{}if(p)try{return new ac(h,this.interface,p)}catch(m){return new pf(h,m)}return new Ui(h,f)})}async on(t,e){const n=await xl(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await xl(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Sa(this,t,e,null)}async listenerCount(t){if(t){const s=await ni(this,t);return s?s.listeners.length:0}const{subs:e}=Jt(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await ni(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=Jt(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await ni(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),Jt(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await ni(this,t);if(!e)return this;e.stop(),Jt(this).subs.delete(e.tag)}else{const{subs:e}=Jt(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends ci{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let La=ci;function Hg(){return La}class Ir extends Hg(){}function sa(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):g(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class Gg{constructor(t){y(this,"name");M(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const xf=new RegExp("^(ipfs)://(.*)$","i"),Nl=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),xf,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var In,pr,Pn,Vr,No,Nf;const Wr=class Wr{constructor(t,e,n){b(this,Pn);y(this,"provider");y(this,"address");y(this,"name");b(this,In);b(this,pr);M(this,{provider:t,address:e,name:n}),d(this,In,null),d(this,pr,new Ir(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return l(this,In)==null&&d(this,In,(async()=>{try{return await l(this,pr).supportsInterface("0x9061b923")}catch(t){if(Et(t,"CALL_EXCEPTION"))return!1;throw d(this,In,null),t}})()),await l(this,In)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await I(this,Pn,Vr).call(this,"addr(bytes32)");return i==null||i===ui?null:i}catch(i){if(Et(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await I(this,Pn,Vr).call(this,"addr(bytes32,uint)",[i]);if(rt(o,20))return $(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof Gg&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await I(this,Pn,Vr).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;N(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await I(this,Pn,Vr).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await I(this,Pn,Vr).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${Vf("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;N(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Nl.length;n++){const s=e.match(Nl[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=sa(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const u=c[1],f=new Ir(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const w=await f.ownerOf(u);if(a!==w)return t.push({type:"!owner",value:w}),{url:null,linkage:t};t.push({type:"owner",value:w})}else if(i==="erc1155"){const w=await f.balanceOf(a,u);if(!w)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:w.toString()})}let h=await f[o](u);if(h==null||h==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Un(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=sa(h)),t.push({type:"metadata-url",value:h});let p={};const m=await new Fn(h).send();m.assertOk();try{p=m.bodyJson}catch{try{t.push({type:"!metadata",value:m.bodyText})}catch{const x=m.body;return x&&t.push({type:"!metadata",value:k(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!p)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(p)});let A=p.image;if(typeof A!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!A.match(/^(https:\/\/|data:)/i)){if(A.match(xf)==null)return t.push({type:"!imageUrl-ipfs",value:A}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:A}),A=sa(A)}return t.push({type:"url",value:A}),{linkage:t,url:A}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return N(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var s;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await I(s=Wr,No,Nf).call(s,t,n);if(i!=null){const o=new Wr(t,i,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};In=new WeakMap,pr=new WeakMap,Pn=new WeakSet,Vr=async function(t,e){e=(e||[]).slice();const n=l(this,pr).interface;e.unshift(va(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),N(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[eg(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await l(this,pr)[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Et(i,"CALL_EXCEPTION"))throw i}return null},No=new WeakSet,Nf=async function(t,e){const n=await Wr.getEnsAddress(t);try{const i=await new Ir(n,["function resolver(bytes32) view returns (address)"],t).resolver(va(e),{enableCcipRead:!0});return i===ui?null:i}catch(s){throw s}return null},b(Wr,No);let wo=Wr;const Il=BigInt(0);function _(r,t){return function(e){return e==null?t:r(e)}}function bi(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function Fi(r,t){return e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=r[s](e[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";N(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return n}}function Qg(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}g(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function _s(r){return g(rt(r,!0),"invalid data","value",r),r}function At(r){return g(rt(r,32),"invalid hash","value",r),r}const Vg=Fi({address:$,blockHash:At,blockNumber:Q,data:_s,index:Q,removed:_(Qg,!1),topics:bi(At),transactionHash:At,transactionIndex:Q},{index:["logIndex"]});function zg(r){return Vg(r)}const Jg=Fi({hash:_(At),parentHash:At,parentBeaconBlockRoot:_(At,null),number:Q,timestamp:Q,nonce:_(_s),difficulty:T,gasLimit:T,gasUsed:T,stateRoot:_(At,null),receiptsRoot:_(At,null),blobGasUsed:_(T,null),excessBlobGas:_(T,null),miner:_($),prevRandao:_(At,null),extraData:_s,baseFeePerGas:_(T)},{prevRandao:["mixHash"]});function Kg(r){const t=Jg(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:If(e)),t}const _g=Fi({transactionIndex:Q,blockNumber:Q,transactionHash:At,address:$,topics:bi(At),data:_s,index:Q,blockHash:At},{index:["logIndex"]});function Wg(r){return _g(r)}const Zg=Fi({to:_($,null),from:_($,null),contractAddress:_($,null),index:Q,root:_(k),gasUsed:T,blobGasUsed:_(T,null),logsBloom:_(_s),blockHash:At,hash:At,logs:bi(Wg),blockNumber:Q,cumulativeGasUsed:T,effectiveGasPrice:_(T),blobGasPrice:_(T,null),status:_(Q),type:_(Q,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function jg(r){return Zg(r)}function If(r){r.to&&T(r.to)===Il&&(r.to="0x0000000000000000000000000000000000000000");const t=Fi({hash:At,index:_(Q,void 0),type:e=>e==="0x"||e==null?0:Q(e),accessList:_(Tr,null),blobVersionedHashes:_(bi(At,!0),null),authorizationList:_(bi(e=>{let n;if(e.signature)n=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},e,{yParity:s})}return{address:$(e.address),chainId:T(e.chainId),nonce:T(e.nonce),signature:Ht.from(n)}},!1),null),blockHash:_(At,null),blockNumber:_(Q,null),transactionIndex:_(Q,null),from:$,gasPrice:_(T),maxPriorityFeePerGas:_(T),maxFeePerGas:_(T),maxFeePerBlobGas:_(T,null),gasLimit:T,to:_($,null),value:T,nonce:Q,data:_s,creates:_($,null),chainId:_(T,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=Dd(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=Ht.from(r.signature):t.signature=Ht.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&T(t.blockHash)===Il&&(t.blockHash=null),t}const Yg="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Di{constructor(t){y(this,"name");M(this,{name:t})}clone(){return new Di(this.name)}}class Ho extends Di{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);y(this,"effectiveBlock");y(this,"txBase");y(this,"txCreate");y(this,"txDataZero");y(this,"txDataNonzero");y(this,"txAccessListStorageKey");y(this,"txAccessListAddress");const s={effectiveBlock:e};function i(o,a){let c=(n||{})[o];c==null&&(c=a),g(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),M(this,s)}clone(){return new Ho(this.effectiveBlock,this)}}class Go extends Di{constructor(e,n){super("org.ethers.plugins.network.Ens");y(this,"address");y(this,"targetNetwork");M(this,{address:e||Yg,targetNetwork:n??1})}clone(){return new Go(this.address,this.targetNetwork)}}var ki,vi;class Xg extends Di{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");b(this,ki);b(this,vi);d(this,ki,e),d(this,vi,n)}get url(){return l(this,ki)}get processFunc(){return l(this,vi)}clone(){return this}}ki=new WeakMap,vi=new WeakMap;const ia=new Map;var Ps,Cs,Cn;const Zr=class Zr{constructor(t,e){b(this,Ps);b(this,Cs);b(this,Cn);d(this,Ps,t),d(this,Cs,T(e)),d(this,Cn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return l(this,Ps)}set name(t){d(this,Ps,t)}get chainId(){return l(this,Cs)}set chainId(t){d(this,Cs,T(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===T(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===T(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===T(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(l(this,Cn).values())}attachPlugin(t){if(l(this,Cn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,Cn).set(t.name,t.clone()),this}getPlugin(t){return l(this,Cn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Zr(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ho;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=Tr(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(qg(),t==null)return Zr.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=ia.get(t);if(e)return e();if(typeof t=="bigint")return new Zr("unknown",t);g(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){g(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Zr(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Go(t.ensAddress,t.ensNetwork)),e}g(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=ia.get(t);n&&g(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),ia.set(t,e)}};Ps=new WeakMap,Cs=new WeakMap,Cn=new WeakMap;let Ue=Zr;function Pl(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function Cl(r){return new Xg(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Pl(a.maxFee,9),maxPriorityFeePerGas:Pl(a.maxPriorityFee,9)}}catch(i){N(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let Bl=!1;function qg(){if(Bl)return;Bl=!0;function r(t,e,n){const s=function(){const i=new Ue(t,e);return n.ensNetwork!=null&&i.attachPlugin(new Go(null,n.ensNetwork)),i.attachPlugin(new Ho),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ue.register(t,s),Ue.register(e,s),n.altNames&&n.altNames.forEach(i=>{Ue.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Cl("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Cl("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function Ua(r){return JSON.parse(JSON.stringify(r))}var je,te,Bn,Re,Bs,$i;class $g{constructor(t){b(this,Bs);b(this,je);b(this,te);b(this,Bn);b(this,Re);d(this,je,t),d(this,te,null),d(this,Bn,4e3),d(this,Re,-2)}get pollingInterval(){return l(this,Bn)}set pollingInterval(t){d(this,Bn,t)}start(){l(this,te)||(d(this,te,l(this,je)._setTimeout(I(this,Bs,$i).bind(this),l(this,Bn))),I(this,Bs,$i).call(this))}stop(){l(this,te)&&(l(this,je)._clearTimeout(l(this,te)),d(this,te,null))}pause(t){this.stop(),t&&d(this,Re,-2)}resume(){this.start()}}je=new WeakMap,te=new WeakMap,Bn=new WeakMap,Re=new WeakMap,Bs=new WeakSet,$i=async function(){try{const t=await l(this,je).getBlockNumber();if(l(this,Re)===-2){d(this,Re,t);return}if(t!==l(this,Re)){for(let e=l(this,Re)+1;e<=t;e++){if(l(this,te)==null)return;await l(this,je).emit("block",e)}d(this,Re,t)}}catch{}l(this,te)!=null&&d(this,te,l(this,je)._setTimeout(I(this,Bs,$i).bind(this),l(this,Bn)))};var gr,mr,kn;class uc{constructor(t){b(this,gr);b(this,mr);b(this,kn);d(this,gr,t),d(this,kn,!1),d(this,mr,e=>{this._poll(e,l(this,gr))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){l(this,kn)||(d(this,kn,!0),l(this,mr).call(this,-2),l(this,gr).on("block",l(this,mr)))}stop(){l(this,kn)&&(d(this,kn,!1),l(this,gr).off("block",l(this,mr)))}pause(t){this.stop()}resume(){this.start()}}gr=new WeakMap,mr=new WeakMap,kn=new WeakMap;var ks,Ye;class tm extends uc{constructor(e,n){super(e);b(this,ks);b(this,Ye);d(this,ks,n),d(this,Ye,-2)}pause(e){e&&d(this,Ye,-2),super.pause(e)}async _poll(e,n){const s=await n.getBlock(l(this,ks));s!=null&&(l(this,Ye)===-2?d(this,Ye,s.number):s.number>l(this,Ye)&&(n.emit(l(this,ks),s.number),d(this,Ye,s.number)))}}ks=new WeakMap,Ye=new WeakMap;var Io;class em extends uc{constructor(e,n){super(e);b(this,Io);d(this,Io,Ua(n))}async _poll(e,n){throw new Error("@TODO")}}Io=new WeakMap;var vs;class nm extends uc{constructor(e,n){super(e);b(this,vs);d(this,vs,n)}async _poll(e,n){const s=await n.getTransactionReceipt(l(this,vs));s&&n.emit(l(this,vs),s)}}vs=new WeakMap;var Xe,Rs,Ts,vn,ee,Po,Pf;class fc{constructor(t,e){b(this,Po);b(this,Xe);b(this,Rs);b(this,Ts);b(this,vn);b(this,ee);d(this,Xe,t),d(this,Rs,Ua(e)),d(this,Ts,I(this,Po,Pf).bind(this)),d(this,vn,!1),d(this,ee,-2)}start(){l(this,vn)||(d(this,vn,!0),l(this,ee)===-2&&l(this,Xe).getBlockNumber().then(t=>{d(this,ee,t)}),l(this,Xe).on("block",l(this,Ts)))}stop(){l(this,vn)&&(d(this,vn,!1),l(this,Xe).off("block",l(this,Ts)))}pause(t){this.stop(),t&&d(this,ee,-2)}resume(){this.start()}}Xe=new WeakMap,Rs=new WeakMap,Ts=new WeakMap,vn=new WeakMap,ee=new WeakMap,Po=new WeakSet,Pf=async function(t){if(l(this,ee)===-2)return;const e=Ua(l(this,Rs));e.fromBlock=l(this,ee)+1,e.toBlock=t;const n=await l(this,Xe).getLogs(e);if(n.length===0){l(this,ee)<t-60&&d(this,ee,t-60);return}for(const s of n)l(this,Xe).emit(l(this,Rs),s),d(this,ee,s.blockNumber)};const rm=BigInt(2),sm=10;function _i(r){return r&&typeof r.then=="function"}function to(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Cf{constructor(t){y(this,"name");M(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function im(r){return JSON.parse(JSON.stringify(r))}function Fa(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function oa(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(rt(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:to("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:to("orphan",e),filter:im(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Fa(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{rt(a)?s.push(a):i.push((async()=>{s.push(await St(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=Fa(s.map(a=>a.toLowerCase()))}return{filter:n,tag:to("event",n),type:"event"}}g(!1,"unknown ProviderEvent","event",r)}function aa(){return new Date().getTime()}const om={cacheTimeout:250,pollingInterval:4e3};var Pt,Rn,Ct,Os,Zt,wr,Tn,qe,Ri,ne,Ss,Ls,J,zt,Da,Ma,ri,Ha,si,eo;class am{constructor(t,e){b(this,J);b(this,Pt);b(this,Rn);b(this,Ct);b(this,Os);b(this,Zt);b(this,wr);b(this,Tn);b(this,qe);b(this,Ri);b(this,ne);b(this,Ss);b(this,Ls);if(d(this,Ls,Object.assign({},om,e||{})),t==="any")d(this,wr,!0),d(this,Zt,null);else if(t){const n=Ue.from(t);d(this,wr,!1),d(this,Zt,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else d(this,wr,!1),d(this,Zt,null);d(this,qe,-1),d(this,Tn,new Map),d(this,Pt,new Map),d(this,Rn,new Map),d(this,Ct,null),d(this,Os,!1),d(this,Ri,1),d(this,ne,new Map),d(this,Ss,!1)}get pollingInterval(){return l(this,Ls).pollingInterval}get provider(){return this}get plugins(){return Array.from(l(this,Rn).values())}attachPlugin(t){if(l(this,Rn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,Rn).set(t.name,t.connect(this)),this}getPlugin(t){return l(this,Rn).get(t)||null}get disableCcipRead(){return l(this,Ss)}set disableCcipRead(t){d(this,Ss,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),f=new Fn(u);c.indexOf("{data}")===-1&&(f.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:a,urls:n});let h="unknown error",p;try{p=await f.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:m}),m.data;m.message&&(h=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:m})}catch{}N(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:h}}),o.push(h)}N(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new Cg(Kg(t),this)}_wrapLog(t,e){return new Ui(zg(t),this)}_wrapTransactionReceipt(t,e){return new ff(jg(t),this)}_wrapTransactionResponse(t,e){return new yi(If(t),this)}_detectNetwork(){N(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){N(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=Q(await I(this,J,zt).call(this,{method:"getBlockNumber"}),"%response");return l(this,qe)>=0&&d(this,qe,t),t}_getAddress(t){return St(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(rt(t))return rt(t,32)?t:ge(t);if(typeof t=="bigint"&&(t=Q(t,"blockTag")),typeof t=="number")return t>=0?ge(t):l(this,qe)>=0?ge(l(this,qe)+t):this.getBlockNumber().then(e=>ge(e+t));g(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Fa(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,u,f)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(u!=null||f!=null))throw new Error("invalid filter");const p={};return h&&(p.address=h),e.length&&(p.topics=e),u&&(p.fromBlock=u),f&&(p.toBlock=f),n&&(p.blockHash=n),p};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=go(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=St(e[s],this);_i(i)?n.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);_i(s)?n.push(async function(){e.blockTag=await s}()):e.blockTag=s}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(l(this,Zt)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw l(this,Zt)===s&&d(this,Zt,null),i}})();return d(this,Zt,s),(await s).clone()}const t=l(this,Zt),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(l(this,wr)?(this.emit("network",n,e),l(this,Zt)===t&&d(this,Zt,Promise.resolve(n))):N(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Rt({_block:I(this,J,Ha).call(this,"latest",!1),gasPrice:(async()=>{try{const f=await I(this,J,zt).call(this,{method:"getGasPrice"});return T(f,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const f=await I(this,J,zt).call(this,{method:"getPriorityFee"});return T(f,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,t);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*rm+c),new Al(i,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Fn(n.url),i=await n.processFunc(e,this,s);return new Al(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return _i(e)&&(e=await e),T(await I(this,J,zt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await Rt({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await I(this,J,Ma).call(this,I(this,J,Da).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return T(await I(this,J,ri).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return Q(await I(this,J,ri).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return k(await I(this,J,ri).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const s=T(e,"position");return k(await I(this,J,ri).call(this,{method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await Rt({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=ao.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:s}=await Rt({network:this.getNetwork(),params:I(this,J,Ha).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await Rt({network:this.getNetwork(),params:I(this,J,zt).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await Rt({network:this.getNetwork(),params:I(this,J,zt).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await I(this,J,zt).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await Rt({network:this.getNetwork(),result:I(this,J,zt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:k(e)}async getLogs(t){let e=this._getFilter(t);_i(e)&&(e=await e);const{network:n,params:s}=await Rt({network:this.getNetwork(),params:I(this,J,zt).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){N(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await wo.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=$(t);const e=va(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await wo.getEnsAddress(this),i=await new Ir(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===ui)return null;const a=await new Ir(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(Et(n,"BAD_DATA")&&n.value==="0x"||Et(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async u=>{try{const f=await this.getTransactionReceipt(t);if(f!=null&&u-f.blockNumber+1>=s){i(f),a&&(clearTimeout(a),a=null);return}}catch(f){console.log("EEE",f)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(it("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){N(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=l(this,ne).get(t);e&&(e.timer&&clearTimeout(e.timer),l(this,ne).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=Ys(this,Ri)._++,s=()=>{l(this,ne).delete(n),t()};if(this.paused)l(this,ne).set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);l(this,ne).set(n,{timer:i,func:s,time:aa()})}return n}_forEachSubscriber(t){for(const e of l(this,Pt).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Cf(t.type);case"block":{const e=new $g(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new tm(this,t.type);case"event":return new fc(this,t.filter);case"transaction":return new nm(this,t.hash);case"orphan":return new em(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of l(this,Pt).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),l(this,Ct)!=null&&e.pause(l(this,Ct));break}}async on(t,e){const n=await I(this,J,eo).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,l(this,Ct)!=null&&n.subscriber.pause(l(this,Ct))),this}async once(t,e){const n=await I(this,J,eo).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,l(this,Ct)!=null&&n.subscriber.pause(l(this,Ct))),this}async emit(t,...e){const n=await I(this,J,si).call(this,t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new Gl(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),l(this,Pt).delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await I(this,J,si).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of l(this,Pt).values())e+=n.length;return e}async listeners(t){if(t){const n=await I(this,J,si).call(this,t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of l(this,Pt).values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await I(this,J,si).call(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),l(this,Pt).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await I(this,J,eo).call(this,t);n&&s.stop(),l(this,Pt).delete(e)}else for(const[e,{started:n,subscriber:s}]of l(this,Pt))n&&s.stop(),l(this,Pt).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return l(this,Os)}destroy(){this.removeAllListeners();for(const t of l(this,ne).keys())this._clearTimeout(t);d(this,Os,!0)}get paused(){return l(this,Ct)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(d(this,qe,-1),l(this,Ct)!=null){if(l(this,Ct)==!!t)return;N(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),d(this,Ct,!!t);for(const e of l(this,ne).values())e.timer&&clearTimeout(e.timer),e.time=aa()-e.time}resume(){if(l(this,Ct)!=null){this._forEachSubscriber(t=>t.resume()),d(this,Ct,null);for(const t of l(this,ne).values()){let e=t.time;e<0&&(e=0),t.time=aa(),setTimeout(t.func,e)}}}}Pt=new WeakMap,Rn=new WeakMap,Ct=new WeakMap,Os=new WeakMap,Zt=new WeakMap,wr=new WeakMap,Tn=new WeakMap,qe=new WeakMap,Ri=new WeakMap,ne=new WeakMap,Ss=new WeakMap,Ls=new WeakMap,J=new WeakSet,zt=async function(t){const e=l(this,Ls).cacheTimeout;if(e<0)return await this._perform(t);const n=to(t.method,t);let s=l(this,Tn).get(n);return s||(s=this._perform(t),l(this,Tn).set(n,s),setTimeout(()=>{l(this,Tn).get(n)===s&&l(this,Tn).delete(n)},e)),await s},Da=async function(t,e,n){N(n<sm,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=go(t);try{return k(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Wa(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&at(i.data,0,4)==="0x556f1830"){const o=i.data,a=await St(s.to,this);let c;try{c=hm(at(i.data,4))}catch(h){N(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}N(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);N(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const f={to:a,data:ct([c.selector,fm([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const h=await I(this,J,Da).call(this,f,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:h}),h}}throw i}},Ma=async function(t){const{value:e}=await Rt({network:this.getNetwork(),value:t});return e},ri=async function(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await I(this,J,Ma).call(this,I(this,J,zt).call(this,Object.assign(t,{address:s,blockTag:i})))},Ha=async function(t,e){if(rt(t,32))return await I(this,J,zt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await I(this,J,zt).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},si=async function(t,e){let n=await oa(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await oa({orphan:"drop-log",log:e[0]},this)),l(this,Pt).get(n.tag)||null},eo=async function(t){const e=await oa(t,this),n=e.tag;let s=l(this,Pt).get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},l(this,Pt).set(n,s)),s};function cm(r,t){try{const e=Ga(r,t);if(e)return so(e)}catch{}return null}function Ga(r,t){if(r==="0x")return null;try{const e=Q(at(r,t,t+32)),n=Q(at(r,e,e+32));return at(r,e+32,e+32+n)}catch{}return null}function kl(r){const t=ht(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function lm(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const um=new Uint8Array([]);function fm(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(um),e+=32;for(let n=0;n<r.length;n++){const s=z(r[n]);t[n]=kl(e),t.push(kl(s.length)),t.push(lm(s)),e+=32+Math.ceil(s.length/32)*32}return ct(t)}const vl="0x0000000000000000000000000000000000000000000000000000000000000000";function hm(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};N(jr(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=at(r,0,32);N(at(e,0,12)===at(vl,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=at(e,12);try{const n=[],s=Q(at(r,32,64)),i=Q(at(r,s,s+32)),o=at(r,s+32);for(let a=0;a<i;a++){const c=cm(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{N(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Ga(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{N(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}N(at(r,100,128)===at(vl,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=at(r,96,100);try{const n=Ga(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{N(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Jn(r,t){if(r.provider)return r.provider;N(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Rl(r,t){let e=go(t);if(e.to!=null&&(e.to=St(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),St(n,r)]).then(([s,i])=>(g(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await Rt(e)}class dm{constructor(t){y(this,"provider");M(this,{provider:t||null})}async getNonce(t){return Jn(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Rl(this,t)}async populateTransaction(t){const e=Jn(this,"populateTransaction"),n=await Rl(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=T(n.chainId);g(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?g(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&g(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();N(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(N(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):N(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Rt(n)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Jn(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Jn(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Jn(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Jn(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Jn(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=ao.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){N(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function pm(r){return JSON.parse(JSON.stringify(r))}var vt,Te,yr,On,br,Us,Gn,Qa,Va;class Bf{constructor(t){b(this,Gn);b(this,vt);b(this,Te);b(this,yr);b(this,On);b(this,br);b(this,Us);d(this,vt,t),d(this,Te,null),d(this,yr,I(this,Gn,Qa).bind(this)),d(this,On,!1),d(this,br,null),d(this,Us,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){l(this,On)||(d(this,On,!0),I(this,Gn,Qa).call(this,-2))}stop(){l(this,On)&&(d(this,On,!1),d(this,Us,!0),I(this,Gn,Va).call(this),l(this,vt).off("block",l(this,yr)))}pause(t){t&&I(this,Gn,Va).call(this),l(this,vt).off("block",l(this,yr))}resume(){this.start()}}vt=new WeakMap,Te=new WeakMap,yr=new WeakMap,On=new WeakMap,br=new WeakMap,Us=new WeakMap,Gn=new WeakSet,Qa=async function(t){try{l(this,Te)==null&&d(this,Te,this._subscribe(l(this,vt)));let e=null;try{e=await l(this,Te)}catch(i){if(!Et(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){d(this,Te,null),l(this,vt)._recoverSubscriber(this,this._recover(l(this,vt)));return}const n=await l(this,vt).getNetwork();if(l(this,br)||d(this,br,n),l(this,br).chainId!==n.chainId)throw new Error("chaid changed");if(l(this,Us))return;const s=await l(this,vt).send("eth_getFilterChanges",[e]);await this._emitResults(l(this,vt),s)}catch(e){console.log("@TODO",e)}l(this,vt).once("block",l(this,yr))},Va=function(){const t=l(this,Te);t&&(d(this,Te,null),t.then(e=>{l(this,vt).destroyed||l(this,vt).send("eth_uninstallFilter",[e])}))};var Ar;class gm extends Bf{constructor(e,n){super(e);b(this,Ar);d(this,Ar,pm(n))}_recover(e){return new fc(e,l(this,Ar))}async _subscribe(e){return await e.send("eth_newFilter",[l(this,Ar)])}async _emitResults(e,n){for(const s of n)e.emit(l(this,Ar),e._wrapLog(s,e._network))}}Ar=new WeakMap;class mm extends Bf{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const wm="bigint,boolean,function,number,string,symbol".split(/,/g);function no(r){if(r==null||wm.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(no);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function ym(r){return new Promise(t=>{setTimeout(t,r)})}function Hr(r){return r&&r.toLowerCase()}function Tl(r){return r&&typeof r.pollingInterval=="number"}const kf={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class ca extends dm{constructor(e,n){super(e);y(this,"address");n=$(n),M(this,{address:n})}connect(e){N(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=no(e),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await St(o,this.provider);g(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await St(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const f=await this.provider.getTransaction(s);if(f!=null){i(f.replaceableTransaction(n));return}}catch(f){if(Et(f,"CANCELLED")||Et(f,"BAD_DATA")||Et(f,"NETWORK_ERROR")||Et(f,"UNSUPPORTED_OPERATION")){f.info==null&&(f.info={}),f.info.sendTransactionHash=s,o(f);return}if(Et(f,"INVALID_ARGUMENT")&&(c++,f.info==null&&(f.info={}),f.info.sendTransactionHash=s,c>10)){o(f);return}this.provider.emit("error",it("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:f}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(e){const n=no(e);if(n.from){const i=await St(n.from,this.provider);g(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const n=typeof e=="string"?De(e):e;return await this.provider.send("personal_sign",[k(n),this.address.toLowerCase()])}async signTypedData(e,n,s){const i=no(s),o=await po.resolveNames(e,n,i,async a=>{const c=await St(a);return g(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(po.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?De(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),k(n)])}}var Er,Fs,$e,Oe,pe,re,Ft,Ti,za;class bm extends am{constructor(e,n){super(e,n);b(this,Ti);b(this,Er);b(this,Fs);b(this,$e);b(this,Oe);b(this,pe);b(this,re);b(this,Ft);d(this,Fs,1),d(this,Er,Object.assign({},kf,n||{})),d(this,$e,[]),d(this,Oe,null),d(this,re,null),d(this,Ft,null);{let i=null;const o=new Promise(a=>{i=a});d(this,pe,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(g(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&e!=null&&d(this,re,Ue.from(e))):s&&(g(e==null||s.matches(e),"staticNetwork MUST match network object","options",n),d(this,re,s))}_getOption(e){return l(this,Er)[e]}get _network(){return N(l(this,re),"network is not available yet","NETWORK_ERROR"),l(this,re)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&T(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(l(this,re))return l(this,re)}else return e;return l(this,Ft)?await l(this,Ft):this.ready?(d(this,Ft,(async()=>{try{const n=Ue.from(T(await this.send("eth_chainId",[])));return d(this,Ft,null),n}catch(n){throw d(this,Ft,null),n}})()),await l(this,Ft)):(d(this,Ft,(async()=>{const n={id:Ys(this,Fs)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],d(this,Ft,null)}catch(i){throw d(this,Ft,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ue.from(T(s.result));throw this.getRpcError(n,s)})()),await l(this,Ft))}_start(){l(this,pe)==null||l(this,pe).resolve==null||(l(this,pe).resolve(),d(this,pe,null),(async()=>{for(;l(this,re)==null&&!this.destroyed;)try{d(this,re,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",it("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await ym(1e3)}I(this,Ti,za).call(this)})())}async _waitUntilReady(){if(l(this,pe)!=null)return await l(this,pe).promise}_getSubscriber(e){return e.type==="pending"?new mm(this):e.type==="event"?this._getOption("polling")?new fc(this,e.filter):new gm(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Cf("orphan"):super._getSubscriber(e)}get ready(){return l(this,pe)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=ge(T(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(n[s]=k(e[s]))}),e.accessList&&(n.accessList=Tr(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(s=>{const i=vu(s);return{address:i.address,nonce:ge(i.nonce),chainId:ge(i.chainId),yParity:ge(i.signature.yParity),r:ge(i.signature.r),s:ge(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Hr(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Hr(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Hr(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Hr(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Hr):e.filter.address=Hr(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:s}=e,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return it("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return it("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Ja(i),u=wi.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return u.info={error:i,payload:e},u}const o=JSON.stringify(Em(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return it("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return it("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return it("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return it("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return it("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?it("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):it("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=Ys(this,Fs)._++,i=new Promise((o,a)=>{l(this,$e).push({resolve:o,reject:a,payload:{method:e,params:n,id:s,jsonrpc:"2.0"}})});return I(this,Ti,za).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new ca(this,i[e])}const{accounts:s}=await Rt({network:this.getNetwork(),accounts:n});e=$(e);for(const i of s)if($(i)===e)return new ca(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new ca(this,n))}destroy(){l(this,Oe)&&(clearTimeout(l(this,Oe)),d(this,Oe,null));for(const{payload:e,reject:n}of l(this,$e))n(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));d(this,$e,[]),super.destroy()}}Er=new WeakMap,Fs=new WeakMap,$e=new WeakMap,Oe=new WeakMap,pe=new WeakMap,re=new WeakMap,Ft=new WeakMap,Ti=new WeakSet,za=function(){if(l(this,Oe))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");d(this,Oe,setTimeout(()=>{d(this,Oe,null);const n=l(this,$e);for(d(this,$e,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==l(this,Er).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>l(this,Er).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of s){if(this.destroyed){c(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const f=o.filter(h=>h.id===u.id)[0];if(f==null){const h=it("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",h),c(h);continue}if("error"in f){c(this.getRpcError(u,f));continue}a(f.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},e))};var Sn;class Am extends bm{constructor(e,n){super(e,n);b(this,Sn);let s=this._getOption("pollingInterval");s==null&&(s=kf.pollingInterval),d(this,Sn,s)}_getSubscriber(e){const n=super._getSubscriber(e);return Tl(n)&&(n.pollingInterval=l(this,Sn)),n}get pollingInterval(){return l(this,Sn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");d(this,Sn,e),this._forEachSubscriber(n=>{Tl(n)&&(n.pollingInterval=l(this,Sn))})}}Sn=new WeakMap;function Ja(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&rt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=Ja(r[t]);if(e)return e}return null}if(typeof r=="string")try{return Ja(JSON.parse(r))}catch{}return null}function Ka(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)Ka(r[e],t);if(typeof r=="string")try{return Ka(JSON.parse(r),t)}catch{}}}function Em(r){const t=[];return Ka(r,t),t}var Ds,Ms;const Xn=class Xn extends Am{constructor(e,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});g(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(n,i);b(this,Ds);b(this,Ms);d(this,Ms,null),s&&s.providerInfo&&d(this,Ms,s.providerInfo),d(this,Ds,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const f=new Error(u.message);throw f.code=u.code,f.data=u.data,f.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:f}),f}})}get providerInfo(){return l(this,Ms)}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){g(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await l(this,Ds).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await l(this,Ds).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Xn(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const s=e.anyProvider;if(s&&n.ethereum)return new Xn(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const u=p=>{c.push(p.detail),s&&f()},f=()=>{if(clearTimeout(h),c.length)if(e&&e.filter){const p=e.filter(c.map(m=>Object.assign({},m.info)));if(p==null)o(null);else if(p instanceof Xn)o(p);else{let m=null;if(p.uuid&&(m=c.filter(w=>p.uuid===w.info.uuid)[0]),m){const{provider:A,info:w}=m;o(new Xn(A,void 0,{providerInfo:w}))}else a(it("filter returned unknown info","UNSUPPORTED_OPERATION",{value:p}))}}else{const{provider:p,info:m}=c[0];o(new Xn(p,void 0,{providerInfo:m}))}else o(null);n.removeEventListener("eip6963:announceProvider",u)},h=setTimeout(()=>{f()},i);n.addEventListener("eip6963:announceProvider",u),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Ds=new WeakMap,Ms=new WeakMap;let _a=Xn;const mn={address:"0x3b8cB41b97a4F736F95D1b7d62D101F7a0cd251A",network:"sepolia",chainId:11155111,abi:["constructor(address _vrfCoordinator, uint64 _subscriptionId, bytes32 _keyHash, address _creatorsAddress, address _emblemVaultAddress)","function getRound(uint256 roundId) external view returns (tuple(uint256 id, uint64 startTime, uint64 endTime, uint8 status, uint256 totalTickets, uint256 totalWeight, uint256 totalWagered, uint256 vrfRequestId, uint64 vrfRequestedAt, bool feesDistributed, uint256 participantCount))","function getUserStats(uint256 roundId, address user) external view returns (uint256 wagered, uint256 tickets, uint256 weight, bool hasProof)","function getRoundParticipants(uint256 roundId) external view returns (address[])","function getRoundWinners(uint256 roundId) external view returns (tuple(uint256 roundId, address wallet, uint8 prizeTier, uint256 vrfRequestId, uint256 blockNumber)[])","function currentRoundId() external view returns (uint256)","function nextRoundFunds() external view returns (uint256)","function creatorsAddress() external view returns (address)","function emblemVaultAddress() external view returns (address)","function vrfConfig() external view returns (tuple(address coordinator, uint64 subscriptionId, bytes32 keyHash, uint32 callbackGasLimit, uint16 requestConfirmations))","function paused() external view returns (bool)","function emergencyPaused() external view returns (bool)","function denylisted(address user) external view returns (bool)","function lastVRFRequestTime() external view returns (uint256)","function createRound() external","function openRound(uint256 roundId) external","function closeRound(uint256 roundId) external","function snapshotRound(uint256 roundId) external","function requestVRF(uint256 roundId) external","function setDenylistStatus(address user, bool status) external","function setEmergencyPause(bool paused) external","function pause() external","function unpause() external","function updateVRFConfig(address coordinator, uint64 subscriptionId, bytes32 keyHash) external","function updateCreatorsAddress(address newAddress) external","function updateEmblemVaultAddress(address newAddress) external","function placeBet(uint256 tickets) external payable","function submitProof(bytes32 proofHash) external","function MIN_WAGER() external view returns (uint256)","function BUNDLE_5_PRICE() external view returns (uint256)","function BUNDLE_10_PRICE() external view returns (uint256)","function WALLET_CAP() external view returns (uint256)","function PROOF_MULTIPLIER() external view returns (uint256)","event RoundCreated(uint256 indexed roundId, uint64 startTime, uint64 endTime)","event RoundOpened(uint256 indexed roundId)","event RoundClosed(uint256 indexed roundId)","event RoundSnapshot(uint256 indexed roundId, uint256 totalTickets, uint256 totalWeight)","event BetPlaced(uint256 indexed roundId, address indexed user, uint256 amount, uint256 tickets, uint256 weight)","event ProofSubmitted(uint256 indexed roundId, address indexed user, uint256 weight)","event VRFRequested(uint256 indexed roundId, uint256 indexed requestId)","event PrizesDistributed(uint256 indexed roundId, uint256[] randomWords)","event EmblemVaultPrizeAssigned(uint256 indexed roundId, address indexed winner, uint256 indexed assetId, uint256 timestamp)","event RoundPrizesDistributed(uint256 indexed roundId, uint256 winnerCount, uint256 timestamp)","event FeesDistributed(uint256 indexed roundId, uint256 creatorsAmount, uint256 nextRoundAmount)","event AddressDenylisted(address indexed user, bool status)","event EmergencyPauseToggled(bool paused)","event VRFTimeoutDetected(uint256 indexed roundId, uint256 requestTime)","event CircuitBreakerTriggered(uint256 indexed roundId, string reason)","event SecurityValidationFailed(address indexed user, string reason)"]},jt={SUPPORTED_NETWORKS:[11155111],NETWORK_NAMES:{11155111:"Sepolia Testnet"},MAX_PROOF_LENGTH:1e3,MIN_PROOF_LENGTH:1,MIN_TX_INTERVAL:5e3,ENABLE_DENYLIST_CHECK:!0,ENABLE_PAUSE_CHECK:!0,ENABLE_NETWORK_VALIDATION:!0};function xm(){return!mn.address.startsWith("0x")||mn.address.length!==42?(console.error("❌ Invalid contract address format!"),!1):(console.log("✅ Contract configuration valid:",mn.address),!0)}function Qo(r){const t=Number(r);if(!jt.SUPPORTED_NETWORKS.includes(t)){const e=jt.NETWORK_NAMES[t]||`Chain ID ${t}`,n=jt.SUPPORTED_NETWORKS.map(s=>jt.NETWORK_NAMES[s]||`Chain ID ${s}`).join(", ");throw new Error(`Unsupported network: ${e}. Please switch to: ${n}`)}return!0}function Nm(r,t="string"){if(typeof r!="string")throw new Error("Input must be a string");const e=r.replace(/[\x00-\x1f\x7f-\x9f]/g,"");switch(t){case"proof":if(e.length<jt.MIN_PROOF_LENGTH)throw new Error(`Proof too short (minimum ${jt.MIN_PROOF_LENGTH} characters)`);if(e.length>jt.MAX_PROOF_LENGTH)throw new Error(`Proof too long (maximum ${jt.MAX_PROOF_LENGTH} characters)`);return e.trim();case"address":if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error("Invalid Ethereum address format");return e.toLowerCase();default:return e.trim()}}const Ol=new Map;function vf(r){const t=Date.now(),e=Ol.get(r==null?void 0:r.toLowerCase());if(e&&t-e<jt.MIN_TX_INTERVAL){const n=Math.ceil((jt.MIN_TX_INTERVAL-(t-e))/1e3);throw new Error(`Please wait ${n} seconds before submitting another transaction`)}return Ol.set(r==null?void 0:r.toLowerCase(),t),!0}async function Rf(r,t){if(!r||!t)throw new Error("Contract and user address required for security validation");const e=[];return e.push(r.paused().then(n=>{if(n)throw new Error("Contract is currently paused")}),r.emergencyPaused().then(n=>{if(n)throw new Error("Contract is in emergency pause mode")})),e.push(r.denylisted(t).then(n=>{if(n)throw new Error("Address is denylisted and cannot interact with the contract")})),await Promise.all(e),!0}function Im(){console.log("Initializing UI components..."),Pm(),Cm()}function Pm(){const r=window.location.pathname;document.querySelectorAll("nav a").forEach(e=>{e.classList.remove("active"),(e.getAttribute("href")===r||r==="/"&&e.getAttribute("href")==="/")&&e.classList.add("active")})}function Cm(){const r=document.getElementById("wallet-info");r&&(r.style.display="none");const t=document.getElementById("bet-summary");t&&(t.style.display="none"),Bm()}function Bm(){const r=document.getElementById("proof-input");r&&(r.value=""),document.querySelectorAll(".ticket-btn").forEach(e=>e.classList.remove("selected"))}async function Tf(r,t){try{const e=document.getElementById("wallet-info"),n=document.getElementById("wallet-balance"),s=document.getElementById("wallet-address-display"),i=document.getElementById("connect-wallet");if(s&&(s.textContent=Of(r)),t&&n){const o=await t.getBalance(r),a=ii(o);n.textContent=parseFloat(a).toFixed(4)}if(t)try{const o=await t.getNetwork();Qo(o.chainId)}catch{Rm()}e&&(e.style.display="block"),i&&(i.style.display="none")}catch(e){console.error("Error updating wallet info:",e),D("Failed to update wallet information","error")}}async function xe(r){try{if(!r){const o=document.getElementById("round-status-text"),a=document.getElementById("time-remaining"),c=document.getElementById("total-tickets");o&&(o.textContent="No Contract (Mock)"),a&&(a.textContent="7d 0h 0m 0s (Mock)"),c&&(c.textContent="1,234 (Mock)");return}const t=await r.currentRoundId();if(t.toString()==="0"){const o=document.getElementById("round-status-text");o&&(o.textContent="No Active Round");return}const e=await r.getRound(t),n=document.getElementById("round-status-text");if(n){const o=["Created","Open","Closed","Snapshot","VRF Requested","Distributed"];n.textContent=o[e.status]||"Unknown"}const s=document.getElementById("time-remaining");if(s){const o=Number(e.endTime)*1e3;km(s,o)}const i=document.getElementById("total-tickets");i&&(i.textContent=e.totalTickets.toString())}catch(t){console.error("Error updating round status:",t);const e=document.getElementById("round-status-text");e&&(e.textContent="Error Loading")}}async function ai(r){try{const t=document.getElementById("leaderboard-list");if(!t)return;if(!r){const a=`
        <div class="leaderboard-header">
          <span>Rank</span>
          <span>Address</span>
          <span>Tickets</span>
          <span>Weight</span>
          <span>Fake Pack Odds</span>
        </div>
        ${[{address:"0x1234...5678",tickets:50,weight:70,fakeOdds:"12.5%"},{address:"0xabcd...efgh",tickets:35,weight:35,fakeOdds:"8.7%"},{address:"0x9876...4321",tickets:25,weight:35,fakeOdds:"8.7%"}].map((c,u)=>`
          <div class="leaderboard-entry">
            <span class="rank">#${u+1}</span>
            <span class="address">${c.address} (Mock)</span>
            <span class="tickets">${c.tickets}</span>
            <span class="weight">${c.weight}</span>
            <span class="odds">${c.fakeOdds}</span>
          </div>
        `).join("")}
      `;t.innerHTML=a;return}const e=await r.currentRoundId();if(e.toString()==="0"){t.innerHTML="<p>No active round</p>";return}const n=await r.getRound(e);if(n.totalTickets.toString()==="0"){t.innerHTML="<p>No participants yet</p>";return}const s=[];if(window.pepedawn&&window.pepedawn.userAddress&&e>0)try{if(n&&n.status!==void 0){const o=await r.getUserStats(e,window.pepedawn.userAddress),a=n.totalWeight>0?(Number(o.weight)/Number(n.totalWeight)*100).toFixed(1):"0.0";s.push({address:window.pepedawn.userAddress,tickets:Number(o.tickets),weight:Number(o.weight),fakeOdds:a+"%",hasProof:o.hasProof})}}catch(o){!o.message.includes("execution reverted")&&!o.message.includes("Round not initialized")&&console.warn("Error fetching user stats for leaderboard:",o)}s.sort((o,a)=>a.weight-o.weight);const i=`
      <div class="leaderboard-header">
        <span>Rank</span>
        <span>Address</span>
        <span>Tickets</span>
        <span>Weight</span>
        <span>Fake Pack Odds</span>
      </div>
      ${s.map((o,a)=>`
        <div class="leaderboard-entry">
          <span class="rank">#${a+1}</span>
          <span class="address">${Of(o.address)}${o.hasProof?" 🧩":""}</span>
          <span class="tickets">${o.tickets}</span>
          <span class="weight">${o.weight}</span>
          <span class="odds">${o.fakeOdds}</span>
        </div>
      `).join("")}
    `;t.innerHTML=i}catch(t){console.error("Error updating leaderboard:",t);const e=document.getElementById("leaderboard-list");e&&(e.innerHTML="<p>Error loading leaderboard</p>")}}async function vr(r,t){try{const e=document.getElementById("user-tickets"),n=document.getElementById("user-weight"),s=document.getElementById("user-proof-status"),i=document.getElementById("user-fake-odds"),o=document.getElementById("cap-remaining");if(!r||!t){e&&(e.textContent="0 (No Contract)"),n&&(n.textContent="0 (No Contract)"),s&&(s.textContent="No (No Contract)"),i&&(i.textContent="0% (No Contract)"),o&&(o.textContent="1.0 (No Contract)");return}const a=await r.currentRoundId();if(a.toString()==="0"){e&&(e.textContent="0"),n&&(n.textContent="0"),s&&(s.textContent="No Active Round"),i&&(i.textContent="0%"),o&&(o.textContent="1.0");return}let c,u;try{if(u=await r.getRound(a),!u||u.status===void 0)throw new Error("Round not initialized");c=await r.getUserStats(a,t)}catch(f){f.message.includes("execution reverted")||f.message.includes("Round not initialized")||f.message.includes("call revert exception")||f.code==="CALL_EXCEPTION"||console.warn("Unexpected error fetching round data:",f),e&&(e.textContent="0"),n&&(n.textContent="0"),s&&(s.textContent="Round Not Available"),i&&(i.textContent="0%"),o&&(o.textContent="1.0");return}if(e&&(e.textContent=c.tickets.toString()),n&&(n.textContent=c.weight.toString()),s&&(c.hasProof?s.textContent="Yes (+40%)":s.textContent="No"),i)if(Number(u.totalWeight)>0&&Number(c.weight)>0){const f=(Number(c.weight)/Number(u.totalWeight)*100).toFixed(1);i.textContent=f+"%"}else i.textContent="0%";if(o){const h=(1-Number(ii(c.wagered||"0"))).toFixed(3);o.textContent=h}}catch(e){console.error("Error updating user stats:",e);const n=document.getElementById("user-tickets");n&&(n.textContent="Error")}}function km(r,t){function e(){const n=Date.now(),s=t-n;if(s<=0){r.textContent="Round Ended";return}const i=Math.floor(s/(24*60*60*1e3)),o=Math.floor(s%(24*60*60*1e3)/(60*60*1e3)),a=Math.floor(s%(60*60*1e3)/(60*1e3)),c=Math.floor(s%(60*1e3)/1e3);r.textContent=`${i}d ${o}h ${a}m ${c}s`}e(),setInterval(e,1e3)}function Of(r){return r?`${r.slice(0,6)}...${r.slice(-4)}`:""}function D(r,t="info"){let e=document.getElementById("tx-status");e||(e=document.createElement("div"),e.id="tx-status",e.className="tx-status",document.body.appendChild(e)),e.textContent=r,e.className=`tx-status ${t}`,e.style.display="block",(t==="success"||t==="error")&&setTimeout(()=>{e.style.display="none"},5e3)}function vm(){const r=document.getElementById("tx-status");r&&(r.style.display="none")}function Rm(){const t=`Please switch to a supported network: ${jt.SUPPORTED_NETWORKS.map(e=>jt.NETWORK_NAMES[e]||`Chain ID ${e}`).join(", ")}`;if(D(t,"warning"),window.ethereum&&window.ethereum.request){const e=document.createElement("button");e.textContent="Switch to Sepolia",e.className="switch-network-btn",e.onclick=async()=>{try{await Tm(),vm()}catch(s){console.error("Failed to switch network:",s),D("Failed to switch network: "+s.message,"error")}};const n=document.getElementById("tx-status");n&&!n.querySelector(".switch-network-btn")&&n.appendChild(e)}}async function Tm(){if(!window.ethereum)throw new Error("MetaMask not detected");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xaa36a7"}]})}catch(r){if(r.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Testnet",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});else throw r}}function Mn(r,t){if(!r||!t)return;const e=document.getElementById("security-status");e&&Promise.all([r.paused().catch(()=>!1),r.emergencyPaused().catch(()=>!1),r.denylisted(t).catch(()=>!1)]).then(([n,s,i])=>{let o="✅ All systems operational",a="security-status normal";i?(o="🚫 Address is denylisted",a="security-status error"):s?(o="⚠️ Emergency pause active",a="security-status warning"):n&&(o="⏸️ Contract paused",a="security-status warning"),e.textContent=o,e.className=a}).catch(n=>{console.error("Error checking security status:",n),e.textContent="❓ Security status unknown",e.className="security-status unknown"})}function Om(r){const{amount:t,tickets:e,userAddress:n}=r;if(!t||isNaN(t)||t<=0)throw new Error("Invalid bet amount");if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid ticket count");if(!n||!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error("Invalid user address");return!0}function Sf(r,t){console.error(`Transaction error (${t}):`,r);let e="Transaction failed",n="error";return r.message.includes("user rejected")?(e="Transaction cancelled by user",n="info"):r.message.includes("insufficient funds")?e="Insufficient ETH balance for transaction":r.message.includes("gas")?e="Transaction failed due to gas issues":r.message.includes("nonce")?e="Transaction nonce error - please try again":r.message.includes("network")?e="Network error - please check connection":r.code==="CALL_EXCEPTION"&&(e="Contract call failed - check requirements"),D(e,n),{message:e,type:n,originalError:r}}let Fe=null,Hn=null,B=null,U=null,la=null,yo=!1,Xt=new Set;function Nt(r,t){console.log(`🎲 ${r}:`,t)}function Sl(r){return r?`${r.slice(0,6)}...${r.slice(-4)}`:""}async function we(){const r=document.getElementById("submit-proof"),t=document.getElementById("place-bet"),e=document.querySelectorAll(".ticket-btn"),n=document.getElementById("proof-input");if(!B){r&&(r.disabled=!0,r.title="Contract not available"),t&&(t.disabled=!0,t.title="Contract not available"),e.forEach(s=>{s.disabled=!0,s.title="Contract not available"});return}try{const s=await B.currentRoundId();if(s.toString()==="0"){la=null,r&&(r.disabled=!0,r.title="No active round"),t&&(t.disabled=!0,t.title="No active round"),e.forEach(a=>{a.disabled=!0,a.title="No active round"});return}const i=await B.getRound(s);la=Number(i.status);const o=la===1;if(t&&(t.disabled=!o||!U,U?o?t.title="":t.title="Round is not open for betting":t.title="Connect wallet to place bets"),e.forEach(a=>{a.disabled=!o||!U,U?o?a.title="":a.title="Round is not open for betting":a.title="Connect wallet to place bets"}),r&&n){let a=!0,c="";if(!U)a=!0,c="Connect wallet to submit proof";else if(!o)a=!0,c="Round is not open for proof submission";else try{const u=await B.getUserStats(s,U);u.tickets.toString()==="0"?(a=!0,c="Place a bet before submitting proof"):u.hasProof?(a=!0,c="Proof already submitted for this round"):(a=!1,c="")}catch{a=!o,c=o?"":"Round is not open for proof submission"}r.disabled=a,r.title=c,n.disabled=a,a&&c?n.placeholder=c:n.placeholder="Paste your puzzle proof here..."}}catch(s){console.error("Error updating button states:",s),r&&(r.disabled=!0,r.title="Error checking round status"),t&&(t.disabled=!0,t.title="Error checking round status"),e.forEach(i=>{i.disabled=!0,i.title="Error checking round status"})}}async function Ll(){if(console.log("Initializing PEPEDAWN application..."),Im(),Sm(),window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await Vo()}catch(r){console.log("No wallet auto-connection:",r)}await hc(),Mm()}function Sm(){const r=document.getElementById("connect-wallet");r&&r.addEventListener("click",Vo),document.querySelectorAll(".ticket-btn").forEach(s=>{s.addEventListener("click",Dm)});const e=document.getElementById("place-bet");e&&e.addEventListener("click",Lf);const n=document.getElementById("submit-proof");n&&n.addEventListener("click",Uf)}async function Vo(){try{if(!window.ethereum){D("Please install MetaMask or another Web3 wallet","error");return}D("Connecting to wallet...","info"),await window.ethereum.request({method:"eth_requestAccounts"}),Fe=new _a(window.ethereum),Hn=await Fe.getSigner(),U=await Hn.getAddress(),console.log("Wallet connected:",U);try{const r=await Fe.getNetwork();Qo(r.chainId),console.log("✅ Network validated:",jt.NETWORK_NAMES[Number(r.chainId)])}catch(r){console.warn("⚠️ Network validation failed:",r.message),D(r.message,"warning")}window.ethereum.on&&(window.ethereum.on("chainChanged",Lm),window.ethereum.on("accountsChanged",Um)),await Tf(U,Fe),await hc(),B&&(await vr(B,U),Mn(B,U),await we()),D("Wallet connected successfully","success")}catch(r){console.error("Error connecting wallet:",r),D("Failed to connect wallet: "+r.message,"error")}}function Lm(r){console.log("Network changed to:",r);try{Qo(r),console.log("✅ Network change validated"),yo=!1,Xt.clear(),hc().then(()=>{U&&(Tf(U,Fe),B&&(vr(B,U),Mn(B,U),we()))})}catch(t){console.warn("⚠️ Network change validation failed:",t.message),D(t.message,"warning")}}function Um(r){if(console.log("Account changed:",r),r.length===0){U=null,Hn=null,B=null,yo=!1,Xt.clear();const t=document.getElementById("wallet-info");t&&(t.style.display="none");const e=document.getElementById("connect-wallet");e&&(e.textContent="Connect Wallet",e.disabled=!1,e.style.display="inline-block"),D("Wallet disconnected","info")}else Vo()}async function hc(){try{if(console.log("📝 Loading contract..."),!xm()){console.log("Contract not configured - working in mock mode");return}if(Fe)try{const r=await Fe.getNetwork();Qo(r.chainId),console.log("✅ Network validated for contract loading")}catch(r){console.warn("⚠️ Network validation failed:",r.message),D(r.message,"warning");return}if(Hn)B=new Ir(mn.address,mn.abi,Hn);else if(Fe)B=new Ir(mn.address,mn.abi,Fe);else{console.log("⏳ Waiting for wallet connection to load contract");return}console.log("✅ Contract loaded:",mn.address);try{await B.currentRoundId(),console.log("✅ Contract accessibility verified")}catch(r){console.error("❌ Contract not accessible:",r.message),D("Contract not accessible. Please check deployment.","error");return}B&&Fm()}catch(r){console.error("Error loading contract:",r),D("Failed to load contract: "+r.message,"error")}}function Fm(){if(B){if(yo){console.log("⏭️ Event listeners already set up, skipping...");return}try{console.log("🎧 Setting up enhanced contract event listeners..."),B.removeAllListeners(),yo=!0,B.on("RoundCreated",(...r)=>{const t=r[r.length-1],[e,n,s]=r,i=`RoundCreated-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(Xt.has(i))return;Xt.add(i);const o={roundId:e.toString(),startTime:Number(n),endTime:Number(s),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🆕 Round created:",o),Nt("RoundCreated",o),D(`New round #${o.roundId} created!`,"success"),xe(B),we()}),B.on("RoundOpened",(...r)=>{const t=r[r.length-1],[e]=r,n=`RoundOpened-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(Xt.has(n))return;Xt.add(n);const s={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🟢 Round opened:",s),Nt("RoundOpened",s),D(`Round #${s.roundId} is now open for betting!`,"success"),xe(B),we()}),B.on("RoundClosed",(...r)=>{const t=r[r.length-1],[e]=r,n=`RoundClosed-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(Xt.has(n))return;Xt.add(n);const s={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🔴 Round closed:",s),Nt("RoundClosed",s),D(`Round #${s.roundId} closed. No more bets accepted.`,"info"),xe(B),we()}),B.on("RoundSnapshot",(...r)=>{const t=r[r.length-1],[e,n,s]=r,i=`RoundSnapshot-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(Xt.has(i))return;Xt.add(i);const o={roundId:e.toString(),totalTickets:n.toString(),totalWeight:s.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("📸 Round snapshot:",o),Nt("RoundSnapshot",o),D(`Round #${o.roundId} snapshot taken. Preparing for draw...`,"info"),xe(B)}),B.on("BetPlaced",(...r)=>{const t=r[r.length-1],[e,n,s,i,o]=r,a={roundId:e.toString(),user:n.toLowerCase(),amount:ii(s),tickets:i.toString(),weight:o.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🎲 Bet placed:",a),Nt("BetPlaced",a),a.user===(U==null?void 0:U.toLowerCase())?(D(`✅ Your bet confirmed! ${a.tickets} tickets for ${a.amount} ETH`,"success"),vr(B,U),we()):D(`New bet: ${a.tickets} tickets by ${Sl(a.user)}`,"info"),xe(B),ai(B)}),B.on("ProofSubmitted",(r,t,e,n)=>{const s={roundId:r.toString(),user:t.toLowerCase(),weight:e.toString(),blockNumber:n.blockNumber,transactionHash:n.transactionHash};console.log("🧩 Proof submitted:",s),Nt("ProofSubmitted",s),s.user===(U==null?void 0:U.toLowerCase())?(D("✅ Puzzle proof confirmed! Weight bonus applied.","success"),vr(B,U),we()):D(`Puzzle solved by ${Sl(s.user)}!`,"info"),ai(B)}),B.on("VRFRequested",(r,t,e)=>{const n=`VRFRequested-${r.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(Xt.has(n))return;Xt.add(n);const s={roundId:r.toString(),requestId:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🎰 VRF requested:",s),Nt("VRFRequested",s),D(`🎰 Random number requested for round #${s.roundId}. Drawing winners...`,"info"),xe(B)}),B.on("PrizesDistributed",(r,t,e)=>{const n={roundId:r.toString(),randomWords:t.map(s=>s.toString()),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🏆 Prizes distributed:",n),Nt("PrizesDistributed",n),D(`🏆 Winners selected for round #${n.roundId}! Check results.`,"success"),xe(B),ai(B)}),B.on("EmblemVaultPrizeAssigned",(r,t,e,n,s)=>{const i={roundId:r.toString(),winner:t.toLowerCase(),assetId:e.toString(),timestamp:Number(n),blockNumber:s.blockNumber,transactionHash:s.transactionHash};console.log("🎁 Emblem Vault prize assigned:",i),Nt("EmblemVaultPrizeAssigned",i),i.winner===(U==null?void 0:U.toLowerCase())&&D(`🎁 Congratulations! You won asset #${i.assetId}!`,"success")}),B.on("RoundPrizesDistributed",(r,t,e,n)=>{const s={roundId:r.toString(),winnerCount:Number(t),timestamp:Number(e),blockNumber:n.blockNumber,transactionHash:n.transactionHash};console.log("🏆 Round prizes distribution completed:",s),Nt("RoundPrizesDistributed",s),D(`🏆 Round #${s.roundId} completed! ${s.winnerCount} prizes distributed.`,"success"),xe(B)}),B.on("FeesDistributed",(r,t,e,n)=>{const s={roundId:r.toString(),creatorsAmount:ii(t),nextRoundAmount:ii(e),blockNumber:n.blockNumber,transactionHash:n.transactionHash};console.log("💰 Fees distributed:",s),Nt("FeesDistributed",s)}),B.on("AddressDenylisted",(r,t,e)=>{const n={user:r.toLowerCase(),status:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🚫 Address denylist status changed:",n),Nt("AddressDenylisted",n),n.user===(U==null?void 0:U.toLowerCase())&&(D(t?"Your address has been denylisted":"Your address has been removed from denylist",t?"error":"success"),Mn(B,U))}),B.on("EmergencyPauseToggled",(r,t)=>{const e={paused:r,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("⚠️ Emergency pause toggled:",e),Nt("EmergencyPauseToggled",e),D(r?"Emergency pause activated":"Emergency pause deactivated",r?"warning":"success"),U&&Mn(B,U)}),B.on("CircuitBreakerTriggered",(r,t,e)=>{const n={roundId:r.toString(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🔒 Circuit breaker triggered:",n),Nt("CircuitBreakerTriggered",n),D(`⚠️ Circuit breaker: ${n.reason}`,"warning")}),B.on("SecurityValidationFailed",(r,t,e)=>{const n={user:r.toLowerCase(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("❌ Security validation failed:",n),Nt("SecurityValidationFailed",n),n.user===(U==null?void 0:U.toLowerCase())&&D(`Security validation failed: ${n.reason}`,"error")}),B.on("VRFTimeoutDetected",(r,t,e)=>{const n={roundId:r.toString(),requestTime:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("⏰ VRF timeout detected:",n),Nt("VRFTimeoutDetected",n),D(`⏰ VRF timeout detected for round #${n.roundId}`,"warning")}),console.log("✅ Contract event listeners set up successfully")}catch(r){console.error("❌ Error setting up contract event listeners:",r),D("Failed to set up event listeners","error")}}}function Dm(r){const t=r.target,e=parseInt(t.dataset.tickets),n=parseFloat(t.dataset.amount);document.getElementById("selected-tickets").textContent=String(e),document.getElementById("selected-amount").textContent=String(n),document.getElementById("bet-summary").style.display="block",document.querySelectorAll(".ticket-btn").forEach(s=>s.classList.remove("selected")),t.classList.add("selected")}async function Lf(){try{if(!B||!Hn||!U){D("Please connect your wallet first","error");return}const r=parseInt(document.getElementById("selected-tickets").textContent),t=parseFloat(document.getElementById("selected-amount").textContent);if(!r||!t){D("Please select a ticket bundle first","error");return}try{Om({amount:t,tickets:r,userAddress:U})}catch(n){D(n.message,"error");return}try{vf(U)}catch(n){D(n.message,"warning");return}try{await Rf(B,U)}catch(n){D(n.message,"error");return}const e=lh(t.toString());console.log(`Placing bet: ${r} tickets for ${t} ETH`);try{D("Validating bet parameters...","info");const n=await B.currentRoundId();if(n.toString()==="0")throw new Error("No active round available");const s=await B.getRound(n),i=Number(s.status);if(console.log("Round status check:",{status:i,roundData:s}),i!==1)throw new Error(`Round is not currently open for betting (status: ${i})`);D("Submitting bet transaction...","info");const o=await B.placeBet(r,{value:e});D("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",o.hash);const a=await o.wait();console.log("Bet placed successfully:",a),D(`✅ Bet placed successfully! ${r} tickets for ${t} ETH`,"success"),document.getElementById("bet-summary").style.display="none",document.querySelectorAll(".ticket-btn").forEach(c=>c.classList.remove("selected")),await vr(B,U),Mn(B,U),await we()}catch(n){console.error("Contract error:",n),Sf(n,"Place Bet")}}catch(r){console.error("Error placing bet:",r),D("Failed to place bet: "+r.message,"error")}}async function Uf(){try{if(!B||!Hn||!U){D("Please connect your wallet first","error");return}const r=document.getElementById("proof-input");if(!r)return;const t=r.value.trim();if(!t){D("Please enter your puzzle proof","error");return}let e;try{e=Nm(t,"proof")}catch(n){D(n.message,"error");return}try{vf(U)}catch(n){D(n.message,"warning");return}try{await Rf(B,U)}catch(n){D(n.message,"error");return}console.log("Submitting proof:",e.substring(0,50)+"...");try{D("Validating proof submission...","info");const n=await B.currentRoundId();if(n.toString()==="0")throw new Error("No active round available");const s=await B.getRound(n),i=Number(s.status);if(console.log("Round status check (proof):",{status:i,roundData:s}),i!==1)throw new Error(`Round is not currently open for proof submission (status: ${i})`);const o=await B.getUserStats(n,U);if(o.tickets.toString()==="0")throw new Error("You must place a bet before submitting a proof");if(o.hasProof)throw new Error("You have already submitted a proof for this round");D("Submitting puzzle proof...","info");const a=ft(De(e)),c=await B.submitProof(a);D("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",c.hash);const u=await c.wait();console.log("Proof submitted successfully:",u),D("✅ Puzzle proof submitted successfully! +40% weight bonus applied.","success"),r.value="";const f=document.getElementById("proof-status");f&&(f.textContent="✅ Proof submitted successfully! +40% weight bonus applied.",f.className="success",f.style.display="block"),await vr(B,U),Mn(B,U),await we()}catch(n){console.error("Contract error:",n);const s=Sf(n,"Submit Proof"),i=document.getElementById("proof-status");i&&(i.textContent=s.message,i.className="error",i.style.display="block")}}catch(r){console.error("Error submitting proof:",r),D("Failed to submit proof: "+r.message,"error")}}function Mm(){setInterval(async()=>{if(B)try{await xe(B),await ai(B),U&&await vr(B,U),await we()}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Periodic update error:",r)}},6e4),setInterval(async()=>{if(B&&U)try{Mn(B,U)}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Security status error:",r)}},3e4),B&&(xe(B),ai(B),U&&Mn(B,U),we())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ll):Ll();window.pepedawn={provider:Fe,signer:Hn,contract:B,userAddress:U,connectWallet:Vo,placeBet:Lf,submitProof:Uf};
