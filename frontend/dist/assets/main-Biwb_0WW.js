var jd=Object.defineProperty;var Bu=r=>{throw TypeError(r)};var Zd=(r,t,e)=>t in r?jd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var O=(r,t,e)=>Zd(r,typeof t!="symbol"?t+"":t,e),Xa=(r,t,e)=>t.has(r)||Bu("Cannot "+e);var y=(r,t,e)=>(Xa(r,t,"read from private field"),e?e.call(r):t.get(r)),U=(r,t,e)=>t.has(r)?Bu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),F=(r,t,e,n)=>(Xa(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),j=(r,t,e)=>(Xa(r,t,"access private method"),e);var Gs=(r,t,e,n)=>({set _(i){F(r,t,i,e)},get _(){return y(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const Yd="modulepreload",Xd=function(r){return"/"+r},Cu={},aa=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(c=>{if(c=Xd(c),c in Cu)return;Cu[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Yd,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((d,x)=>{f.addEventListener("load",d),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},tp="6.15.0";function ep(r,t,e){const n=t.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${e}`,i.value=r,i}async function fe(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,i,s)=>(n[t[s]]=i,n),{})}function ot(r,t,e){for(let n in t){let i=t[n];const s=e?e[n]:null;s&&ep(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Li(r,t){if(r==null)return"null";if(t==null&&(t=new Set),typeof r=="object"){if(t.has(r))return"[Circular]";t.add(r)}if(Array.isArray(r))return"[ "+r.map(e=>Li(e,t)).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let i=0;i<r.length;i++)n+=e[r[i]>>4],n+=e[r[i]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Li(r.toJSON(),t);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(n=>`${Li(n,t)}: ${Li(r[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Xt(r,t){return r&&r.code===t}function Hc(r){return Xt(r,"CALL_EXCEPTION")}function Ot(r,t,e){let n=r;{const s=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Li(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];s.push(o+"="+Li(a))}}s.push(`code=${t}`),s.push(`version=${tp}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return ot(i,{code:t}),e&&Object.assign(i,e),i.shortMessage==null&&ot(i,{shortMessage:n}),i}function $(r,t,e,n){if(!r)throw Ot(t,e,n)}function P(r,t,e,n){$(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function Ef(r,t,e){e==null&&(e=""),e&&(e=": "+e),$(r>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),$(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function Fo(r,t,e){if(e==null&&(e=""),r!==t){let n=e,i="new";e&&(n+=".",i+=" "+e),$(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function vf(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}P(!1,"invalid BytesLike value",t||"value",r)}function lt(r,t){return vf(r,t,!1)}function he(r,t){return vf(r,t,!0)}function Rt(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function zc(r){return Rt(r,!0)||r instanceof Uint8Array}const Fu="0123456789abcdef";function Y(r){const t=lt(r);let e="0x";for(let n=0;n<t.length;n++){const i=t[n];e+=Fu[(i&240)>>4]+Fu[i&15]}return e}function Lt(r){return"0x"+r.map(t=>Y(t).substring(2)).join("")}function pi(r){return Rt(r,!0)?(r.length-2)/2:lt(r).length}function Ht(r,t,e){const n=lt(r);return e!=null&&e>n.length&&$(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),Y(n.slice(t??0,e??n.length))}function Bf(r,t,e){const n=lt(r);$(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),e?i.set(n,t-n.length):i.set(n,0),Y(i)}function Ge(r,t){return Bf(r,t,!0)}function Cf(r,t){return Bf(r,t,!1)}const Ra=BigInt(0),tn=BigInt(1),Ui=9007199254740991;function ca(r,t){const e=Sa(r,"value"),n=BigInt(ft(t,"width"));if($(e>>n===Ra,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-tn){const i=(tn<<n)-tn;return-((~e&i)+tn)}return e}function Gc(r,t){let e=et(r,"value");const n=BigInt(ft(t,"width")),i=tn<<n-tn;if(e<Ra){e=-e,$(e<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(tn<<n)-tn;return(~e&s)+tn}else $(e<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function Qr(r,t){const e=Sa(r,"value"),n=BigInt(ft(t,"bits"));return e&(tn<<n)-tn}function et(r,t){switch(typeof r){case"bigint":return r;case"number":return P(Number.isInteger(r),"underflow",t||"value",r),P(r>=-Ui&&r<=Ui,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){P(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}P(!1,"invalid BigNumberish value",t||"value",r)}function Sa(r,t){const e=et(r,t);return $(e>=Ra,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Tu="0123456789abcdef";function Na(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Tu[e>>4],t+=Tu[e&15];return BigInt(t)}return et(r)}function ft(r,t){switch(typeof r){case"bigint":return P(r>=-Ui&&r<=Ui,"overflow",t||"value",r),Number(r);case"number":return P(Number.isInteger(r),"underflow",t||"value",r),P(r>=-Ui&&r<=Ui,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return ft(BigInt(r),t)}catch(e){P(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}P(!1,"invalid numeric value",t||"value",r)}function np(r){return ft(Na(r))}function Ir(r,t){let n=Sa(r,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const i=ft(t,"width");for($(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function Vt(r){const t=Sa(r,"value");if(t===Ra)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(e.substring(s,s+2),16)}return n}function Xe(r){let t=Y(zc(r)?r:Vt(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const Iu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const ku=BigInt(58);function rp(r){const t=lt(r);let e=Na(t),n="";for(;e;)n=Iu[Number(e%ku)]+n,e/=ku;for(let i=0;i<t.length&&!t[i];i++)n=Iu[0]+n;return n}function ip(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return lt(t)}function sp(r){const t=lt(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var Wi;class Ff{constructor(t,e,n){O(this,"filter");O(this,"emitter");U(this,Wi);F(this,Wi,e),ot(this,{emitter:t,filter:n})}async removeListener(){y(this,Wi)!=null&&await this.emitter.off(this.filter,y(this,Wi))}}Wi=new WeakMap;function op(r,t,e,n,i){P(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Tf(r,t,e,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)s++;return s}return r==="OVERRUN"?e.length-t-1:0}function ap(r,t,e,n,i){return r==="OVERLONG"?(P(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),Tf(r,t,e))}const cp=Object.freeze({error:op,ignore:Tf,replace:ap});function up(r,t){t==null&&(t=cp.error);const e=lt(r,"bytes"),n=[];let i=0;for(;i<e.length;){const s=e[i++];if(!(s>>7)){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=t("UNEXPECTED_CONTINUE",i-1,e,n):i+=t("BAD_PREFIX",i-1,e,n);continue}if(i-1+o>=e.length){i+=t("OVERRUN",i-1,e,n);continue}let c=s&(1<<8-o-1)-1;for(let u=0;u<o;u++){let l=e[i];if((l&192)!=128){i+=t("MISSING_CONTINUE",i,e,n),c=null;break}c=c<<6|l&63,i++}if(c!==null){if(c>1114111){i+=t("OUT_OF_RANGE",i-1-o,e,n,c);continue}if(c>=55296&&c<=57343){i+=t("UTF16_SURROGATE",i-1-o,e,n,c);continue}if(c<=a){i+=t("OVERLONG",i-1-o,e,n,c);continue}n.push(c)}}return n}function nn(r,t){P(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)e.push(i);else if(i<2048)e.push(i>>6|192),e.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);P(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((i&1023)<<10)+(s&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(i>>12|224),e.push(i>>6&63|128),e.push(i&63|128)}return new Uint8Array(e)}function lp(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function ua(r,t){return lp(up(r,t))}function If(r){async function t(e,n){$(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const i=e.url.split(":")[0].toLowerCase();$(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),$(i==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Ot("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{s=Ot("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let u;try{u=await fetch(e.url,c)}catch(x){throw clearTimeout(a),s||x}clearTimeout(a);const l={};u.headers.forEach((x,g)=>{l[g.toLowerCase()]=x});const f=await u.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:u.status,statusMessage:u.statusText,headers:l,body:d}}return t}const fp=12,hp=250;let Pu=If();const dp=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),pp=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let t0=!1;async function kf(r,t){try{const e=r.match(dp);if(!e)throw new Error("invalid data");return new Cr(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?ip(e[3]):yp(e[3]))}catch{return new Cr(599,"BAD REQUEST (invalid data: URI)",{},null,new kr(r))}}function Pf(r){async function t(e,n){try{const i=e.match(pp);if(!i)throw new Error("invalid link");return new kr(`${r}${i[2]}`)}catch{return new Cr(599,"BAD REQUEST (invalid IPFS URI)",{},null,new kr(e))}}return t}const Ho={data:kf,ipfs:Pf("https://gateway.ipfs.io/ipfs/")},Df=new WeakMap;var qr,cr;class xp{constructor(t){U(this,qr);U(this,cr);F(this,qr,[]),F(this,cr,!1),Df.set(t,()=>{if(!y(this,cr)){F(this,cr,!0);for(const e of y(this,qr))setTimeout(()=>{e()},0);F(this,qr,[])}})}addListener(t){$(!y(this,cr),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),y(this,qr).push(t)}get cancelled(){return y(this,cr)}checkSignal(){$(!this.cancelled,"cancelled","CANCELLED",{})}}qr=new WeakMap,cr=new WeakMap;function zo(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var Ki,$i,$e,Rn,qi,Ji,Kt,Fe,Sn,Jr,jr,Zr,ln,qe,ur,Yr,$s;const Ca=class Ca{constructor(t){U(this,Yr);U(this,Ki);U(this,$i);U(this,$e);U(this,Rn);U(this,qi);U(this,Ji);U(this,Kt);U(this,Fe);U(this,Sn);U(this,Jr);U(this,jr);U(this,Zr);U(this,ln);U(this,qe);U(this,ur);F(this,Ji,String(t)),F(this,Ki,!1),F(this,$i,!0),F(this,$e,{}),F(this,Rn,""),F(this,qi,3e5),F(this,qe,{slotInterval:hp,maxAttempts:fp}),F(this,ur,null)}get url(){return y(this,Ji)}set url(t){F(this,Ji,String(t))}get body(){return y(this,Kt)==null?null:new Uint8Array(y(this,Kt))}set body(t){if(t==null)F(this,Kt,void 0),F(this,Fe,void 0);else if(typeof t=="string")F(this,Kt,nn(t)),F(this,Fe,"text/plain");else if(t instanceof Uint8Array)F(this,Kt,t),F(this,Fe,"application/octet-stream");else if(typeof t=="object")F(this,Kt,nn(JSON.stringify(t))),F(this,Fe,"application/json");else throw new Error("invalid body")}hasBody(){return y(this,Kt)!=null}get method(){return y(this,Rn)?y(this,Rn):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),F(this,Rn,String(t).toUpperCase())}get headers(){const t=Object.assign({},y(this,$e));return y(this,Sn)&&(t.authorization=`Basic ${sp(nn(y(this,Sn)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&y(this,Fe)&&(t["content-type"]=y(this,Fe)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){y(this,$e)[String(t).toLowerCase()]=String(e)}clearHeaders(){F(this,$e,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const i=e[n++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return y(this,Sn)||null}setCredentials(t,e){P(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),F(this,Sn,`${t}:${e}`)}get allowGzip(){return y(this,$i)}set allowGzip(t){F(this,$i,!!t)}get allowInsecureAuthentication(){return!!y(this,Ki)}set allowInsecureAuthentication(t){F(this,Ki,!!t)}get timeout(){return y(this,qi)}set timeout(t){P(t>=0,"timeout must be non-zero","timeout",t),F(this,qi,t)}get preflightFunc(){return y(this,Jr)||null}set preflightFunc(t){F(this,Jr,t)}get processFunc(){return y(this,jr)||null}set processFunc(t){F(this,jr,t)}get retryFunc(){return y(this,Zr)||null}set retryFunc(t){F(this,Zr,t)}get getUrlFunc(){return y(this,ur)||Pu}set getUrlFunc(t){F(this,ur,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${y(this,Kt)?Y(y(this,Kt)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(y(this,qe).slotInterval=t.slotInterval),t.maxAttempts!=null&&(y(this,qe).maxAttempts=t.maxAttempts)}send(){return $(y(this,ln)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),F(this,ln,new xp(this)),j(this,Yr,$s).call(this,0,Du()+this.timeout,0,this,new Cr(0,"",{},null,this))}cancel(){$(y(this,ln)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Df.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();$(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new Ca(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,F(i,$e,Object.assign({},y(this,$e))),y(this,Kt)&&F(i,Kt,new Uint8Array(y(this,Kt))),F(i,Fe,y(this,Fe)),i}clone(){const t=new Ca(this.url);return F(t,Rn,y(this,Rn)),y(this,Kt)&&F(t,Kt,y(this,Kt)),F(t,Fe,y(this,Fe)),F(t,$e,Object.assign({},y(this,$e))),F(t,Sn,y(this,Sn)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),F(t,Jr,y(this,Jr)),F(t,jr,y(this,jr)),F(t,Zr,y(this,Zr)),F(t,qe,Object.assign({},y(this,qe))),F(t,ur,y(this,ur)),t}static lockConfig(){t0=!0}static getGateway(t){return Ho[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(t0)throw new Error("gateways locked");Ho[t]=e}static registerGetUrl(t){if(t0)throw new Error("gateways locked");Pu=t}static createGetUrlFunc(t){return If(t)}static createDataGateway(){return kf}static createIpfsGatewayFunc(t){return Pf(t)}};Ki=new WeakMap,$i=new WeakMap,$e=new WeakMap,Rn=new WeakMap,qi=new WeakMap,Ji=new WeakMap,Kt=new WeakMap,Fe=new WeakMap,Sn=new WeakMap,Jr=new WeakMap,jr=new WeakMap,Zr=new WeakMap,ln=new WeakMap,qe=new WeakMap,ur=new WeakMap,Yr=new WeakSet,$s=async function(t,e,n,i,s){var l,f,d;if(t>=y(this,qe).maxAttempts)return s.makeServerError("exceeded maximum retry limit");$(Du()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await gp(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Ho){const x=await Ho[a](o.url,zo(y(i,ln)));if(x instanceof Cr){let g=x;if(this.processFunc){zo(y(i,ln));try{g=await this.processFunc(o,g)}catch(m){(m.throttle==null||typeof m.stall!="number")&&g.makeServerError("error in post-processing function",m).assertOk()}}return g}o=x}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,zo(y(i,ln)));let u=new Cr(c.statusCode,c.statusMessage,c.headers,c.body,i);if(u.statusCode===301||u.statusCode===302){try{const x=u.headers.location||"";return j(l=o.redirect(x),Yr,$s).call(l,t+1,e,0,i,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,t))){const x=u.headers["retry-after"];let g=y(this,qe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof x=="string"&&x.match(/^[1-9][0-9]*$/)&&(g=parseInt(x)),j(f=o.clone(),Yr,$s).call(f,t+1,e,g,i,u)}if(this.processFunc){zo(y(i,ln));try{u=await this.processFunc(o,u)}catch(x){(x.throttle==null||typeof x.stall!="number")&&u.makeServerError("error in post-processing function",x).assertOk();let g=y(this,qe).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return x.stall>=0&&(g=x.stall),j(d=o.clone(),Yr,$s).call(d,t+1,e,g,i,u)}}return u};let kr=Ca;var po,xo,yo,Te,ji,Xr;const xu=class xu{constructor(t,e,n,i,s){U(this,po);U(this,xo);U(this,yo);U(this,Te);U(this,ji);U(this,Xr);F(this,po,t),F(this,xo,e),F(this,yo,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),F(this,Te,i==null?null:new Uint8Array(i)),F(this,ji,s||null),F(this,Xr,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${y(this,Te)?Y(y(this,Te)):"null"}>`}get statusCode(){return y(this,po)}get statusMessage(){return y(this,xo)}get headers(){return Object.assign({},y(this,yo))}get body(){return y(this,Te)==null?null:new Uint8Array(y(this,Te))}get bodyText(){try{return y(this,Te)==null?"":ua(y(this,Te))}catch{$(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{$(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const i=e[n++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const i=new xu(599,n,this.headers,this.body,y(this,ji)||void 0);return F(i,Xr,{message:t,error:e}),i}throwThrottleError(t,e){e==null?e=-1:P(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw ot(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return y(this,Te)!=null}get request(){return y(this,ji)}ok(){return y(this,Xr).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=y(this,Xr);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{y(this,Te)&&(i=ua(y(this,Te)))}catch{}$(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};po=new WeakMap,xo=new WeakMap,yo=new WeakMap,Te=new WeakMap,ji=new WeakMap,Xr=new WeakMap;let Cr=xu;function Du(){return new Date().getTime()}function yp(r){return nn(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function gp(r){return new Promise(t=>setTimeout(t,r))}const mp=BigInt(-1),Qe=BigInt(0),_i=BigInt(1),wp=BigInt(5),ki={};let Gi="0000";for(;Gi.length<80;)Gi+=Gi;function Or(r){let t=Gi;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function Vs(r,t,e){const n=BigInt(t.width);if(t.signed){const i=_i<<n-_i;$(e==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>Qe?r=ca(Qr(r,n),n):r=-ca(Qr(-r,n),n)}else{const i=_i<<n;$(e==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%i+i)%i&i-_i}return r}function e0(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const s=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);P(s,"invalid fixed format","format",r),t=s[1]!=="u",e=parseInt(s[2]),n=parseInt(s[3])}}else if(r){const s=r,o=(a,c,u)=>s[a]==null?u:(P(typeof s[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,s[a]),s[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}P(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),P(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:i}}function bp(r,t){let e="";r<Qe&&(e="-",r*=mp);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=Gi+n;const i=n.length-t;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var Je,Ft,ue,Ct,Ur,In,rc,ic,sc,oc;const ar=class ar{constructor(t,e,n){U(this,Ct);O(this,"format");U(this,Je);U(this,Ft);U(this,ue);O(this,"_value");Fo(t,ki,"FixedNumber"),F(this,Ft,e),F(this,Je,n);const i=bp(e,n.decimals);ot(this,{format:n.name,_value:i}),F(this,ue,Or(n.decimals))}get signed(){return y(this,Je).signed}get width(){return y(this,Je).width}get decimals(){return y(this,Je).decimals}get value(){return y(this,Ft)}addUnsafe(t){return j(this,Ct,rc).call(this,t)}add(t){return j(this,Ct,rc).call(this,t,"add")}subUnsafe(t){return j(this,Ct,ic).call(this,t)}sub(t){return j(this,Ct,ic).call(this,t,"sub")}mulUnsafe(t){return j(this,Ct,sc).call(this,t)}mul(t){return j(this,Ct,sc).call(this,t,"mul")}mulSignal(t){j(this,Ct,Ur).call(this,t);const e=y(this,Ft)*y(t,Ft);return $(e%y(this,ue)===Qe,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),j(this,Ct,In).call(this,e/y(this,ue),"mulSignal")}divUnsafe(t){return j(this,Ct,oc).call(this,t)}div(t){return j(this,Ct,oc).call(this,t,"div")}divSignal(t){$(y(t,Ft)!==Qe,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),j(this,Ct,Ur).call(this,t);const e=y(this,Ft)*y(this,ue);return $(e%y(t,Ft)===Qe,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),j(this,Ct,In).call(this,e/y(t,Ft),"divSignal")}cmp(t){let e=this.value,n=t.value;const i=this.decimals-t.decimals;return i>0?n*=Or(i):i<0&&(e*=Or(-i)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=y(this,Ft);return y(this,Ft)<Qe&&(t-=y(this,ue)-_i),t=y(this,Ft)/y(this,ue)*y(this,ue),j(this,Ct,In).call(this,t,"floor")}ceiling(){let t=y(this,Ft);return y(this,Ft)>Qe&&(t+=y(this,ue)-_i),t=y(this,Ft)/y(this,ue)*y(this,ue),j(this,Ct,In).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=wp*Or(e-1);let i=this.value+n;const s=Or(e);return i=i/s*s,Vs(i,y(this,Je),"round"),new ar(ki,i,y(this,Je))}isZero(){return y(this,Ft)===Qe}isNegative(){return y(this,Ft)<Qe}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return ar.fromString(this.toString(),t)}static fromValue(t,e,n){const i=e==null?0:ft(e),s=e0(n);let o=et(t,"value");const a=i-s.decimals;if(a>0){const c=Or(a);$(o%c===Qe,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Or(-a));return Vs(o,s,"fromValue"),new ar(ki,o,s)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);P(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const i=e0(e);let s=n[2]||"0",o=n[3]||"";for(;o.length<i.decimals;)o+=Gi;$(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const a=BigInt(n[1]+s+o);return Vs(a,i,"fromString"),new ar(ki,a,i)}static fromBytes(t,e){let n=Na(lt(t,"value"));const i=e0(e);return i.signed&&(n=ca(n,i.width)),Vs(n,i,"fromBytes"),new ar(ki,n,i)}};Je=new WeakMap,Ft=new WeakMap,ue=new WeakMap,Ct=new WeakSet,Ur=function(t){P(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},In=function(t,e){return t=Vs(t,y(this,Je),e),new ar(ki,t,y(this,Je))},rc=function(t,e){return j(this,Ct,Ur).call(this,t),j(this,Ct,In).call(this,y(this,Ft)+y(t,Ft),e)},ic=function(t,e){return j(this,Ct,Ur).call(this,t),j(this,Ct,In).call(this,y(this,Ft)-y(t,Ft),e)},sc=function(t,e){return j(this,Ct,Ur).call(this,t),j(this,Ct,In).call(this,y(this,Ft)*y(t,Ft)/y(this,ue),e)},oc=function(t,e){return $(y(t,Ft)!==Qe,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),j(this,Ct,Ur).call(this,t),j(this,Ct,In).call(this,y(this,Ft)*y(this,ue)/y(t,Ft),e)};let la=ar;function Ap(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Ru(r,t,e){let n=0;for(let i=0;i<e;i++)n=n*256+r[t+i];return n}function Su(r,t,e,n){const i=[];for(;e<t+1+n;){const s=Rf(r,e);i.push(s.result),e+=s.consumed,$(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:i}}function Rf(r,t){$(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{$(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const i=Ru(r,t+1,n);return e(t+1+n+i),Su(r,t,t+1+n,n+i)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Su(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const i=Ru(r,t+1,n);e(t+1+n+i);const s=Y(r.slice(t+1+n,t+1+n+i));return{consumed:1+n+i,result:s}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const i=Y(r.slice(t+1,t+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:Ap(r[t])}}function To(r){const t=lt(r,"data"),e=Rf(t,0);return P(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Nu(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function Sf(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(Sf(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=Nu(n.length);return i.unshift(247+i.length),i.concat(n)}const t=Array.prototype.slice.call(lt(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Nu(t.length);return e.unshift(183+e.length),e.concat(t)}const Ou="0123456789abcdef";function Pr(r){let t="0x";for(const e of Sf(r))t+=Ou[e>>4],t+=Ou[e&15];return t}function Ep(r,t){let e=18;return e=ft(t,"unit"),la.fromValue(r,e,{decimals:e,width:512}).toString()}function vp(r,t){P(typeof r=="string","value must be a string","value",r);let e=18;return e=ft(t,"unit"),la.fromString(r,{decimals:e,width:512}).value}function Fr(r){return Ep(r,18)}function Bp(r){return vp(r,18)}const de=32,ac=new Uint8Array(de),Cp=["then"],Go={},Nf=new WeakMap;function Mr(r){return Nf.get(r)}function Lu(r,t){Nf.set(r,t)}function Qs(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function cc(r,t,e){return r.indexOf(null)>=0?t.map((n,i)=>n instanceof Ds?cc(Mr(n),n,e):n):r.reduce((n,i,s)=>{let o=t.getValue(i);return i in n||(e&&o instanceof Ds&&(o=cc(Mr(o),o,e)),n[i]=o),n},{})}var Zi;const Mi=class Mi extends Array{constructor(...e){const n=e[0];let i=e[1],s=(e[2]||[]).slice(),o=!0;n!==Go&&(i=e,s=[],o=!1);super(i.length);U(this,Zi);i.forEach((u,l)=>{this[l]=u});const a=s.reduce((u,l)=>(typeof l=="string"&&u.set(l,(u.get(l)||0)+1),u),new Map);if(Lu(this,Object.freeze(i.map((u,l)=>{const f=s[l];return f!=null&&a.get(f)===1?f:null}))),F(this,Zi,[]),y(this,Zi)==null&&y(this,Zi),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,l,f)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const x=ft(l,"%index");if(x<0||x>=this.length)throw new RangeError("out of result range");const g=u[x];return g instanceof Error&&Qs(`index ${x}`,g),g}if(Cp.indexOf(l)>=0)return Reflect.get(u,l,f);const d=u[l];if(d instanceof Function)return function(...x){return d.apply(this===f?u:this,x)};if(!(l in u))return u.getValue.apply(this===f?u:this,[l])}return Reflect.get(u,l,f)}});return Lu(c,Mr(this)),c}toArray(e){const n=[];return this.forEach((i,s)=>{i instanceof Error&&Qs(`index ${s}`,i),e&&i instanceof Mi&&(i=i.toArray(e)),n.push(i)}),n}toObject(e){const n=Mr(this);return n.reduce((i,s,o)=>($(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),cc(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=Mr(this),s=[],o=[];for(let a=e;a<n;a++)s.push(this[a]),o.push(i[a]);return new Mi(Go,s,o)}filter(e,n){const i=Mr(this),s=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Qs(`index ${a}`,c),e.call(n,c,a,this)&&(s.push(c),o.push(i[a]))}return new Mi(Go,s,o)}map(e,n){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Qs(`index ${s}`,o),i.push(e.call(n,o,s,this))}return i}getValue(e){const n=Mr(this).indexOf(e);if(n===-1)return;const i=this[n];return i instanceof Error&&Qs(`property ${JSON.stringify(e)}`,i.error),i}static fromItems(e,n){return new Mi(Go,e,n)}};Zi=new WeakMap;let Ds=Mi;function Uu(r){let t=Vt(r);return $(t.length<=de,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:de,offset:t.length}),t.length!==de&&(t=he(Lt([ac.slice(t.length%de),t]))),t}class Jn{constructor(t,e,n,i){O(this,"name");O(this,"type");O(this,"localName");O(this,"dynamic");ot(this,{name:t,type:e,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){P(!1,t,this.localName,e)}}var Nn,ti,Yi,Zo;class uc{constructor(){U(this,Yi);U(this,Nn);U(this,ti);F(this,Nn,[]),F(this,ti,0)}get data(){return Lt(y(this,Nn))}get length(){return y(this,ti)}appendWriter(t){return j(this,Yi,Zo).call(this,he(t.data))}writeBytes(t){let e=he(t);const n=e.length%de;return n&&(e=he(Lt([e,ac.slice(n)]))),j(this,Yi,Zo).call(this,e)}writeValue(t){return j(this,Yi,Zo).call(this,Uu(t))}writeUpdatableValue(){const t=y(this,Nn).length;return y(this,Nn).push(ac),F(this,ti,y(this,ti)+de),e=>{y(this,Nn)[t]=Uu(e)}}}Nn=new WeakMap,ti=new WeakMap,Yi=new WeakSet,Zo=function(t){return y(this,Nn).push(t),F(this,ti,y(this,ti)+t.length),t.length};var ye,Ie,ei,ni,lr,vi,fc,Of;const yu=class yu{constructor(t,e,n){U(this,vi);O(this,"allowLoose");U(this,ye);U(this,Ie);U(this,ei);U(this,ni);U(this,lr);ot(this,{allowLoose:!!e}),F(this,ye,he(t)),F(this,ei,0),F(this,ni,null),F(this,lr,n??1024),F(this,Ie,0)}get data(){return Y(y(this,ye))}get dataLength(){return y(this,ye).length}get consumed(){return y(this,Ie)}get bytes(){return new Uint8Array(y(this,ye))}subReader(t){const e=new yu(y(this,ye).slice(y(this,Ie)+t),this.allowLoose,y(this,lr));return F(e,ni,this),e}readBytes(t,e){let n=j(this,vi,Of).call(this,0,t,!!e);return j(this,vi,fc).call(this,t),F(this,Ie,y(this,Ie)+n.length),n.slice(0,t)}readValue(){return Na(this.readBytes(de))}readIndex(){return np(this.readBytes(de))}};ye=new WeakMap,Ie=new WeakMap,ei=new WeakMap,ni=new WeakMap,lr=new WeakMap,vi=new WeakSet,fc=function(t){var e;if(y(this,ni))return j(e=y(this,ni),vi,fc).call(e,t);F(this,ei,y(this,ei)+t),$(y(this,lr)<1||y(this,ei)<=y(this,lr)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${y(this,lr)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:he(y(this,ye)),offset:y(this,Ie),length:t,info:{bytesRead:y(this,ei),dataLength:this.dataLength}})},Of=function(t,e,n){let i=Math.ceil(e/de)*de;return y(this,Ie)+i>y(this,ye).length&&(this.allowLoose&&n&&y(this,Ie)+e<=y(this,ye).length?i=e:$(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:he(y(this,ye)),length:y(this,ye).length,offset:y(this,Ie)+i})),y(this,ye).slice(y(this,Ie),y(this,Ie)+i)};let lc=yu;function fa(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function Vc(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function Fp(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");fa(r.outputLen),fa(r.blockLen)}function Rs(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Lf(r,t){Vc(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const n0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uf=r=>r instanceof Uint8Array,Tp=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),r0=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),an=(r,t)=>r<<32-t|r>>>t,Ip=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ip)throw new Error("Non little-endian hardware is not supported");function kp(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Oa(r){if(typeof r=="string"&&(r=kp(r)),!Uf(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Pp(...r){const t=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let e=0;return r.forEach(n=>{if(!Uf(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class Qc{clone(){return this._cloneInto()}}function Wc(r){const t=n=>r().update(Oa(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Dp(r=32){if(n0&&typeof n0.getRandomValues=="function")return n0.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class _f extends Qc{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Fp(t);const n=Oa(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Rs(this),this.iHash.update(t),this}digestInto(t){Rs(this),Vc(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Mf=(r,t,e)=>new _f(r,t).update(e).digest();Mf.create=(r,t)=>new _f(r,t);function Rp(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),a=Number(e&s),c=n?4:0,u=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+u,a,n)}class Hf extends Qc{constructor(t,e,n,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=r0(this.buffer)}update(t){Rs(this);const{view:e,buffer:n,blockLen:i}=this;t=Oa(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=r0(t);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Rs(this),Lf(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)e[f]=0;Rp(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=r0(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%e&&t.buffer.set(n),t}}const Sp=(r,t,e)=>r&t^~r&e,Np=(r,t,e)=>r&t^r&e^t&e,Op=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint32Array(64);class Lp extends Hf{constructor(){super(64,32,8,!1),this.A=nr[0]|0,this.B=nr[1]|0,this.C=nr[2]|0,this.D=nr[3]|0,this.E=nr[4]|0,this.F=nr[5]|0,this.G=nr[6]|0,this.H=nr[7]|0}get(){const{A:t,B:e,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[t,e,n,i,s,o,a,c]}set(t,e,n,i,s,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let f=0;f<16;f++,e+=4)rr[f]=t.getUint32(e,!1);for(let f=16;f<64;f++){const d=rr[f-15],x=rr[f-2],g=an(d,7)^an(d,18)^d>>>3,m=an(x,17)^an(x,19)^x>>>10;rr[f]=m+rr[f-7]+g+rr[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=an(a,6)^an(a,11)^an(a,25),x=l+d+Sp(a,c,u)+Op[f]+rr[f]|0,m=(an(n,2)^an(n,13)^an(n,22))+Np(n,i,s)|0;l=u,u=c,c=a,a=o+x|0,o=s,s=i,i=n,n=x+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,i,s,o,a,c,u,l)}roundClean(){rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const zf=Wc(()=>new Lp),Vo=BigInt(2**32-1),hc=BigInt(32);function Gf(r,t=!1){return t?{h:Number(r&Vo),l:Number(r>>hc&Vo)}:{h:Number(r>>hc&Vo)|0,l:Number(r&Vo)|0}}function Vf(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=Gf(r[i],t);[e[i],n[i]]=[s,o]}return[e,n]}const Up=(r,t)=>BigInt(r>>>0)<<hc|BigInt(t>>>0),_p=(r,t,e)=>r>>>e,Mp=(r,t,e)=>r<<32-e|t>>>e,Hp=(r,t,e)=>r>>>e|t<<32-e,zp=(r,t,e)=>r<<32-e|t>>>e,Gp=(r,t,e)=>r<<64-e|t>>>e-32,Vp=(r,t,e)=>r>>>e-32|t<<64-e,Qp=(r,t)=>t,Wp=(r,t)=>r,Qf=(r,t,e)=>r<<e|t>>>32-e,Wf=(r,t,e)=>t<<e|r>>>32-e,Kf=(r,t,e)=>t<<e-32|r>>>64-e,$f=(r,t,e)=>r<<e-32|t>>>64-e;function Kp(r,t,e,n){const i=(t>>>0)+(n>>>0);return{h:r+e+(i/2**32|0)|0,l:i|0}}const $p=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),qp=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Jp=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),jp=(r,t,e,n,i)=>t+e+n+i+(r/2**32|0)|0,Zp=(r,t,e,n,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),Yp=(r,t,e,n,i,s)=>t+e+n+i+s+(r/2**32|0)|0,dt={fromBig:Gf,split:Vf,toBig:Up,shrSH:_p,shrSL:Mp,rotrSH:Hp,rotrSL:zp,rotrBH:Gp,rotrBL:Vp,rotr32H:Qp,rotr32L:Wp,rotlSH:Qf,rotlSL:Wf,rotlBH:Kf,rotlBL:$f,add:Kp,add3L:$p,add3H:qp,add4L:Jp,add4H:jp,add5H:Yp,add5L:Zp},[Xp,tx]=dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ir=new Uint32Array(80),sr=new Uint32Array(80);class ex extends Hf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:d,Gh:x,Gl:g,Hh:m,Hl:w}=this;return[t,e,n,i,s,o,a,c,u,l,f,d,x,g,m,w]}set(t,e,n,i,s,o,a,c,u,l,f,d,x,g,m,w){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=d|0,this.Gh=x|0,this.Gl=g|0,this.Hh=m|0,this.Hl=w|0}process(t,e){for(let A=0;A<16;A++,e+=4)ir[A]=t.getUint32(e),sr[A]=t.getUint32(e+=4);for(let A=16;A<80;A++){const C=ir[A-15]|0,I=sr[A-15]|0,T=dt.rotrSH(C,I,1)^dt.rotrSH(C,I,8)^dt.shrSH(C,I,7),R=dt.rotrSL(C,I,1)^dt.rotrSL(C,I,8)^dt.shrSL(C,I,7),S=ir[A-2]|0,V=sr[A-2]|0,k=dt.rotrSH(S,V,19)^dt.rotrBH(S,V,61)^dt.shrSH(S,V,6),N=dt.rotrSL(S,V,19)^dt.rotrBL(S,V,61)^dt.shrSL(S,V,6),z=dt.add4L(R,N,sr[A-7],sr[A-16]),G=dt.add4H(z,T,k,ir[A-7],ir[A-16]);ir[A]=G|0,sr[A]=z|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:x,Fl:g,Gh:m,Gl:w,Hh:v,Hl:E}=this;for(let A=0;A<80;A++){const C=dt.rotrSH(f,d,14)^dt.rotrSH(f,d,18)^dt.rotrBH(f,d,41),I=dt.rotrSL(f,d,14)^dt.rotrSL(f,d,18)^dt.rotrBL(f,d,41),T=f&x^~f&m,R=d&g^~d&w,S=dt.add5L(E,I,R,tx[A],sr[A]),V=dt.add5H(S,v,C,T,Xp[A],ir[A]),k=S|0,N=dt.rotrSH(n,i,28)^dt.rotrBH(n,i,34)^dt.rotrBH(n,i,39),z=dt.rotrSL(n,i,28)^dt.rotrBL(n,i,34)^dt.rotrBL(n,i,39),G=n&s^n&a^s&a,X=i&o^i&c^o&c;v=m|0,E=w|0,m=x|0,w=g|0,x=f|0,g=d|0,{h:f,l:d}=dt.add(u|0,l|0,V|0,k|0),u=a|0,l=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const M=dt.add3L(k,z,X);n=dt.add3H(M,V,N,G),i=M|0}({h:n,l:i}=dt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=dt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=dt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:d}=dt.add(this.Eh|0,this.El|0,f|0,d|0),{h:x,l:g}=dt.add(this.Fh|0,this.Fl|0,x|0,g|0),{h:m,l:w}=dt.add(this.Gh|0,this.Gl|0,m|0,w|0),{h:v,l:E}=dt.add(this.Hh|0,this.Hl|0,v|0,E|0),this.set(n,i,s,o,a,c,u,l,f,d,x,g,m,w,v,E)}roundClean(){ir.fill(0),sr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const nx=Wc(()=>new ex);function rx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const _u=rx();_u.crypto||_u.msCrypto;function ix(r){switch(r){case"sha256":return zf.create();case"sha512":return nx.create()}P(!1,"invalid hashing algorithm name","algorithm",r)}const[qf,Jf,jf]=[[],[],[]],sx=BigInt(0),Ws=BigInt(1),ox=BigInt(2),ax=BigInt(7),cx=BigInt(256),ux=BigInt(113);for(let r=0,t=Ws,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],qf.push(2*(5*n+e)),Jf.push((r+1)*(r+2)/2%64);let i=sx;for(let s=0;s<7;s++)t=(t<<Ws^(t>>ax)*ux)%cx,t&ox&&(i^=Ws<<(Ws<<BigInt(s))-Ws);jf.push(i)}const[lx,fx]=Vf(jf,!0),Mu=(r,t,e)=>e>32?Kf(r,t,e):Qf(r,t,e),Hu=(r,t,e)=>e>32?$f(r,t,e):Wf(r,t,e);function hx(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=e[c],l=e[c+1],f=Mu(u,l,1)^e[a],d=Hu(u,l,1)^e[a+1];for(let x=0;x<50;x+=10)r[o+x]^=f,r[o+x+1]^=d}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=Jf[o],c=Mu(i,s,a),u=Hu(i,s,a),l=qf[o];i=r[l],s=r[l+1],r[l]=c,r[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=lx[n],r[1]^=fx[n]}e.fill(0)}class Kc extends Qc{constructor(t,e,n,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,fa(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Tp(this.state)}keccak(){hx(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Rs(this);const{blockLen:e,state:n}=this;t=Oa(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(e-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:i}=this;t[n]^=e,e&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Rs(this,!1),Vc(t),this.finish();const e=this.state,{blockLen:n}=this;for(let i=0,s=t.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);t.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return fa(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Lf(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new Kc(e,n,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const dx=(r,t,e)=>Wc(()=>new Kc(t,r,e)),px=dx(1,136,256/8);let Zf=!1;const Yf=function(r){return px(r)};let Xf=Yf;function Mt(r){const t=lt(r,"data");return Y(Xf(t))}Mt._=Yf;Mt.lock=function(){Zf=!0};Mt.register=function(r){if(Zf)throw new TypeError("keccak256 is locked");Xf=r};Object.freeze(Mt);const th=function(r){return ix("sha256").update(r).digest()};let eh=th,nh=!1;function Ms(r){const t=lt(r,"data");return Y(eh(t))}Ms._=th;Ms.lock=function(){nh=!0};Ms.register=function(r){if(nh)throw new Error("sha256 is locked");eh=r};Object.freeze(Ms);Object.freeze(Ms);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rh=BigInt(0),La=BigInt(1),xx=BigInt(2),Ua=r=>r instanceof Uint8Array,yx=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Ss(r){if(!Ua(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=yx[r[e]];return t}function ih(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function $c(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Ns(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const i=n*2,s=r.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function xi(r){return $c(Ss(r))}function qc(r){if(!Ua(r))throw new Error("Uint8Array expected");return $c(Ss(Uint8Array.from(r).reverse()))}function Os(r,t){return Ns(r.toString(16).padStart(t*2,"0"))}function Jc(r,t){return Os(r,t).reverse()}function gx(r){return Ns(ih(r))}function Ke(r,t,e){let n;if(typeof t=="string")try{n=Ns(t)}catch(s){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Ua(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof e=="number"&&i!==e)throw new Error(`${r} expected ${e} bytes, got ${i}`);return n}function to(...r){const t=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let e=0;return r.forEach(n=>{if(!Ua(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function mx(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function wx(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function bx(r){let t;for(t=0;r>rh;r>>=La,t+=1);return t}function Ax(r,t){return r>>BigInt(t)&La}const Ex=(r,t,e)=>r|(e?La:rh)<<BigInt(t),jc=r=>(xx<<BigInt(r-1))-La,i0=r=>new Uint8Array(r),zu=r=>Uint8Array.from(r);function sh(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=i0(r),i=i0(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...f)=>e(i,n,...f),c=(f=i0())=>{i=a(zu([0]),f),n=a(),f.length!==0&&(i=a(zu([1]),f),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<t;){n=a();const x=n.slice();d.push(x),f+=n.length}return to(...d)};return(f,d)=>{o(),c(f);let x;for(;!(x=d(u()));)c();return o(),x}}const vx={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Io(r,t,e={}){const n=(i,s,o)=>{const a=vx[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(e))n(i,s,!0);return r}const Bx=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ax,bitLen:bx,bitMask:jc,bitSet:Ex,bytesToHex:Ss,bytesToNumberBE:xi,bytesToNumberLE:qc,concatBytes:to,createHmacDrbg:sh,ensureBytes:Ke,equalBytes:mx,hexToBytes:Ns,hexToNumber:$c,numberToBytesBE:Os,numberToBytesLE:Jc,numberToHexUnpadded:ih,numberToVarBytesBE:gx,utf8ToBytes:wx,validateObject:Io},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qt=BigInt(0),Gt=BigInt(1),Hr=BigInt(2),Cx=BigInt(3),dc=BigInt(4),Gu=BigInt(5),Vu=BigInt(8);BigInt(9);BigInt(16);function we(r,t){const e=r%t;return e>=qt?e:t+e}function Fx(r,t,e){if(e<=qt||t<qt)throw new Error("Expected power/modulo > 0");if(e===Gt)return qt;let n=Gt;for(;t>qt;)t&Gt&&(n=n*r%e),r=r*r%e,t>>=Gt;return n}function Re(r,t,e){let n=r;for(;t-- >qt;)n*=n,n%=e;return n}function pc(r,t){if(r===qt||t<=qt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=we(r,t),n=t,i=qt,s=Gt;for(;e!==qt;){const a=n/e,c=n%e,u=i-s*a;n=e,e=c,i=s,s=u}if(n!==Gt)throw new Error("invert: does not exist");return we(i,t)}function Tx(r){const t=(r-Gt)/Hr;let e,n,i;for(e=r-Gt,n=0;e%Hr===qt;e/=Hr,n++);for(i=Hr;i<r&&Fx(i,t,r)!==r-Gt;i++);if(n===1){const o=(r+Gt)/dc;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const s=(e+Gt)/Hr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,i),e),f=a.pow(c,s),d=a.pow(c,e);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let x=1;for(let m=a.sqr(d);x<u&&!a.eql(m,a.ONE);x++)m=a.sqr(m);const g=a.pow(l,Gt<<BigInt(u-x-1));l=a.sqr(g),f=a.mul(f,g),d=a.mul(d,l),u=x}return f}}function Ix(r){if(r%dc===Cx){const t=(r+Gt)/dc;return function(n,i){const s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Vu===Gu){const t=(r-Gu)/Vu;return function(n,i){const s=n.mul(i,Hr),o=n.pow(s,t),a=n.mul(i,o),c=n.mul(n.mul(a,Hr),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return Tx(r)}const kx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Px(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=kx.reduce((n,i)=>(n[i]="function",n),t);return Io(r,e)}function Dx(r,t,e){if(e<qt)throw new Error("Expected power > 0");if(e===qt)return r.ONE;if(e===Gt)return t;let n=r.ONE,i=t;for(;e>qt;)e&Gt&&(n=r.mul(n,i)),i=r.sqr(i),e>>=Gt;return n}function Rx(r,t){const e=new Array(t.length),n=t.reduce((s,o,a)=>r.is0(o)?s:(e[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return t.reduceRight((s,o,a)=>r.is0(o)?s:(e[a]=r.mul(s,e[a]),r.mul(s,o)),i),e}function oh(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Sx(r,t,e=!1,n={}){if(r<=qt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=oh(r,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ix(r),a=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:jc(i),ZERO:qt,ONE:Gt,create:c=>we(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return qt<=c&&c<r},is0:c=>c===qt,isOdd:c=>(c&Gt)===Gt,neg:c=>we(-c,r),eql:(c,u)=>c===u,sqr:c=>we(c*c,r),add:(c,u)=>we(c+u,r),sub:(c,u)=>we(c-u,r),mul:(c,u)=>we(c*u,r),pow:(c,u)=>Dx(a,c,u),div:(c,u)=>we(c*pc(u,r),r),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>pc(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Rx(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>e?Jc(c,s):Os(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return e?qc(c):xi(c)}});return Object.freeze(a)}function ah(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function ch(r){const t=ah(r);return t+Math.ceil(t/2)}function Nx(r,t,e=!1){const n=r.length,i=ah(t),s=ch(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=e?xi(r):qc(r),a=we(o,t-Gt)+Gt;return e?Jc(a,i):Os(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ox=BigInt(0),s0=BigInt(1);function Lx(r,t){const e=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:e,unsafeLadder(i,s){let o=r.ZERO,a=i;for(;s>Ox;)s&s0&&(o=o.add(a)),a=a.double(),s>>=s0;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),c=[];let u=i,l=u;for(let f=0;f<o;f++){l=u,c.push(l);for(let d=1;d<a;d++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=n(i);let u=r.ZERO,l=r.BASE;const f=BigInt(2**i-1),d=2**i,x=BigInt(i);for(let g=0;g<a;g++){const m=g*c;let w=Number(o&f);o>>=x,w>c&&(w-=d,o+=s0);const v=m,E=m+Math.abs(w)-1,A=g%2!==0,C=w<0;w===0?l=l.add(e(A,s[v])):u=u.add(e(C,s[E]))}return{p:u,f:l}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}function uh(r){return Px(r.Fp),Io(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...oh(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ux(r){const t=uh(r);Io(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:i}=t;if(e){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:_x,hexToBytes:Mx}=Bx,Wr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=Wr;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_x(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=Wr,e=typeof r=="string"?Mx(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Wr._parseInt(e.subarray(2)),{d:o,l:a}=Wr._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const l=u.toString(16);return l.length&1?`0${l}`:l},n=t(e(r.s)),i=t(e(r.r)),s=n.length/2,o=i.length/2,a=e(s),c=e(o);return`30${e(o+s+4)}02${c}${i}02${a}${n}`}},Vn=BigInt(0),ze=BigInt(1);BigInt(2);const Qu=BigInt(3);BigInt(4);function Hx(r){const t=Ux(r),{Fp:e}=t,n=t.toBytes||((g,m,w)=>{const v=m.toAffine();return to(Uint8Array.from([4]),e.toBytes(v.x),e.toBytes(v.y))}),i=t.fromBytes||(g=>{const m=g.subarray(1),w=e.fromBytes(m.subarray(0,e.BYTES)),v=e.fromBytes(m.subarray(e.BYTES,2*e.BYTES));return{x:w,y:v}});function s(g){const{a:m,b:w}=t,v=e.sqr(g),E=e.mul(v,g);return e.add(e.add(E,e.mul(g,m)),w)}if(!e.eql(e.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&Vn<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:v,n:E}=t;if(m&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Ss(g)),typeof g!="string"||!m.includes(g.length))throw new Error("Invalid key");g=g.padStart(w*2,"0")}let A;try{A=typeof g=="bigint"?g:xi(Ke("private key",g,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof g}`)}return v&&(A=we(A,E)),a(A),A}const u=new Map;function l(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,w,v){if(this.px=m,this.py=w,this.pz=v,m==null||!e.isValid(m))throw new Error("x required");if(w==null||!e.isValid(w))throw new Error("y required");if(v==null||!e.isValid(v))throw new Error("z required")}static fromAffine(m){const{x:w,y:v}=m||{};if(!m||!e.isValid(w)||!e.isValid(v))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const E=A=>e.eql(A,e.ZERO);return E(w)&&E(v)?f.ZERO:new f(w,v,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=e.invertBatch(m.map(v=>v.pz));return m.map((v,E)=>v.toAffine(w[E])).map(f.fromAffine)}static fromHex(m){const w=f.fromAffine(i(Ke("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return f.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=this.toAffine();if(!e.isValid(m)||!e.isValid(w))throw new Error("bad point: x or y not FE");const v=e.sqr(w),E=s(m);if(!e.eql(v,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(e.isOdd)return!e.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:v,pz:E}=this,{px:A,py:C,pz:I}=m,T=e.eql(e.mul(w,I),e.mul(A,E)),R=e.eql(e.mul(v,I),e.mul(C,E));return T&&R}negate(){return new f(this.px,e.neg(this.py),this.pz)}double(){const{a:m,b:w}=t,v=e.mul(w,Qu),{px:E,py:A,pz:C}=this;let I=e.ZERO,T=e.ZERO,R=e.ZERO,S=e.mul(E,E),V=e.mul(A,A),k=e.mul(C,C),N=e.mul(E,A);return N=e.add(N,N),R=e.mul(E,C),R=e.add(R,R),I=e.mul(m,R),T=e.mul(v,k),T=e.add(I,T),I=e.sub(V,T),T=e.add(V,T),T=e.mul(I,T),I=e.mul(N,I),R=e.mul(v,R),k=e.mul(m,k),N=e.sub(S,k),N=e.mul(m,N),N=e.add(N,R),R=e.add(S,S),S=e.add(R,S),S=e.add(S,k),S=e.mul(S,N),T=e.add(T,S),k=e.mul(A,C),k=e.add(k,k),S=e.mul(k,N),I=e.sub(I,S),R=e.mul(k,V),R=e.add(R,R),R=e.add(R,R),new f(I,T,R)}add(m){l(m);const{px:w,py:v,pz:E}=this,{px:A,py:C,pz:I}=m;let T=e.ZERO,R=e.ZERO,S=e.ZERO;const V=t.a,k=e.mul(t.b,Qu);let N=e.mul(w,A),z=e.mul(v,C),G=e.mul(E,I),X=e.add(w,v),M=e.add(A,C);X=e.mul(X,M),M=e.add(N,z),X=e.sub(X,M),M=e.add(w,E);let J=e.add(A,I);return M=e.mul(M,J),J=e.add(N,G),M=e.sub(M,J),J=e.add(v,E),T=e.add(C,I),J=e.mul(J,T),T=e.add(z,G),J=e.sub(J,T),S=e.mul(V,M),T=e.mul(k,G),S=e.add(T,S),T=e.sub(z,S),S=e.add(z,S),R=e.mul(T,S),z=e.add(N,N),z=e.add(z,N),G=e.mul(V,G),M=e.mul(k,M),z=e.add(z,G),G=e.sub(N,G),G=e.mul(V,G),M=e.add(M,G),N=e.mul(z,M),R=e.add(R,N),N=e.mul(J,M),T=e.mul(X,T),T=e.sub(T,N),N=e.mul(X,z),S=e.mul(J,S),S=e.add(S,N),new f(T,R,S)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return x.wNAFCached(this,u,m,w=>{const v=e.invertBatch(w.map(E=>E.pz));return w.map((E,A)=>E.toAffine(v[A])).map(f.fromAffine)})}multiplyUnsafe(m){const w=f.ZERO;if(m===Vn)return w;if(a(m),m===ze)return this;const{endo:v}=t;if(!v)return x.unsafeLadder(this,m);let{k1neg:E,k1:A,k2neg:C,k2:I}=v.splitScalar(m),T=w,R=w,S=this;for(;A>Vn||I>Vn;)A&ze&&(T=T.add(S)),I&ze&&(R=R.add(S)),S=S.double(),A>>=ze,I>>=ze;return E&&(T=T.negate()),C&&(R=R.negate()),R=new f(e.mul(R.px,v.beta),R.py,R.pz),T.add(R)}multiply(m){a(m);let w=m,v,E;const{endo:A}=t;if(A){const{k1neg:C,k1:I,k2neg:T,k2:R}=A.splitScalar(w);let{p:S,f:V}=this.wNAF(I),{p:k,f:N}=this.wNAF(R);S=x.constTimeNegate(C,S),k=x.constTimeNegate(T,k),k=new f(e.mul(k.px,A.beta),k.py,k.pz),v=S.add(k),E=V.add(N)}else{const{p:C,f:I}=this.wNAF(w);v=C,E=I}return f.normalizeZ([v,E])[0]}multiplyAndAddUnsafe(m,w,v){const E=f.BASE,A=(I,T)=>T===Vn||T===ze||!I.equals(E)?I.multiplyUnsafe(T):I.multiply(T),C=A(this,w).add(A(m,v));return C.is0()?void 0:C}toAffine(m){const{px:w,py:v,pz:E}=this,A=this.is0();m==null&&(m=A?e.ONE:e.inv(E));const C=e.mul(w,m),I=e.mul(v,m),T=e.mul(E,m);if(A)return{x:e.ZERO,y:e.ZERO};if(!e.eql(T,e.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}isTorsionFree(){const{h:m,isTorsionFree:w}=t;if(m===ze)return!0;if(w)return w(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=t;return m===ze?this:w?w(f,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return this.assertValidity(),n(f,this,m)}toHex(m=!0){return Ss(this.toRawBytes(m))}}f.BASE=new f(t.Gx,t.Gy,e.ONE),f.ZERO=new f(e.ZERO,e.ONE,e.ZERO);const d=t.nBitLength,x=Lx(f,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function zx(r){const t=uh(r);return Io(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Gx(r){const t=zx(r),{Fp:e,n}=t,i=e.BYTES+1,s=2*e.BYTES+1;function o(M){return Vn<M&&M<e.ORDER}function a(M){return we(M,n)}function c(M){return pc(M,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:d}=Hx({...t,toBytes(M,J,nt){const it=J.toAffine(),st=e.toBytes(it.x),at=to;return nt?at(Uint8Array.from([J.hasEvenY()?2:3]),st):at(Uint8Array.from([4]),st,e.toBytes(it.y))},fromBytes(M){const J=M.length,nt=M[0],it=M.subarray(1);if(J===i&&(nt===2||nt===3)){const st=xi(it);if(!o(st))throw new Error("Point is not on curve");const at=f(st);let _=e.sqrt(at);const H=(_&ze)===ze;return(nt&1)===1!==H&&(_=e.neg(_)),{x:st,y:_}}else if(J===s&&nt===4){const st=e.fromBytes(it.subarray(0,e.BYTES)),at=e.fromBytes(it.subarray(e.BYTES,2*e.BYTES));return{x:st,y:at}}else throw new Error(`Point of length ${J} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),x=M=>Ss(Os(M,t.nByteLength));function g(M){const J=n>>ze;return M>J}function m(M){return g(M)?a(-M):M}const w=(M,J,nt)=>xi(M.slice(J,nt));class v{constructor(J,nt,it){this.r=J,this.s=nt,this.recovery=it,this.assertValidity()}static fromCompact(J){const nt=t.nByteLength;return J=Ke("compactSignature",J,nt*2),new v(w(J,0,nt),w(J,nt,2*nt))}static fromDER(J){const{r:nt,s:it}=Wr.toSig(Ke("DER",J));return new v(nt,it)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(J){return new v(this.r,this.s,J)}recoverPublicKey(J){const{r:nt,s:it,recovery:st}=this,at=R(Ke("msgHash",J));if(st==null||![0,1,2,3].includes(st))throw new Error("recovery id invalid");const _=st===2||st===3?nt+t.n:nt;if(_>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=st&1?"03":"02",q=u.fromHex(H+x(_)),K=c(_),bt=a(-at*K),xt=a(it*K),It=u.BASE.multiplyAndAddUnsafe(q,bt,xt);if(!It)throw new Error("point at infinify");return It.assertValidity(),It}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ns(this.toDERHex())}toDERHex(){return Wr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ns(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}const E={isValidPrivateKey(M){try{return l(M),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const M=ch(t.n);return Nx(t.randomBytes(M),t.n)},precompute(M=8,J=u.BASE){return J._setWindowSize(M),J.multiply(BigInt(3)),J}};function A(M,J=!0){return u.fromPrivateKey(M).toRawBytes(J)}function C(M){const J=M instanceof Uint8Array,nt=typeof M=="string",it=(J||nt)&&M.length;return J?it===i||it===s:nt?it===2*i||it===2*s:M instanceof u}function I(M,J,nt=!0){if(C(M))throw new Error("first arg must be private key");if(!C(J))throw new Error("second arg must be public key");return u.fromHex(J).multiply(l(M)).toRawBytes(nt)}const T=t.bits2int||function(M){const J=xi(M),nt=M.length*8-t.nBitLength;return nt>0?J>>BigInt(nt):J},R=t.bits2int_modN||function(M){return a(T(M))},S=jc(t.nBitLength);function V(M){if(typeof M!="bigint")throw new Error("bigint expected");if(!(Vn<=M&&M<S))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Os(M,t.nByteLength)}function k(M,J,nt=N){if(["recovered","canonical"].some(jt=>jt in nt))throw new Error("sign() legacy options not supported");const{hash:it,randomBytes:st}=t;let{lowS:at,prehash:_,extraEntropy:H}=nt;at==null&&(at=!0),M=Ke("msgHash",M),_&&(M=Ke("prehashed msgHash",it(M)));const q=R(M),K=l(J),bt=[V(K),V(q)];if(H!=null){const jt=H===!0?st(e.BYTES):H;bt.push(Ke("extraEntropy",jt))}const xt=to(...bt),It=q;function ct(jt){const ee=T(jt);if(!d(ee))return;const Zn=c(ee),ce=u.BASE.multiply(ee).toAffine(),vt=a(ce.x);if(vt===Vn)return;const kt=a(Zn*a(It+vt*K));if(kt===Vn)return;let Fn=(ce.x===vt?0:2)|Number(ce.y&ze),on=kt;return at&&g(kt)&&(on=m(kt),Fn^=1),new v(vt,on,Fn)}return{seed:xt,k2sig:ct}}const N={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function G(M,J,nt=N){const{seed:it,k2sig:st}=k(M,J,nt),at=t;return sh(at.hash.outputLen,at.nByteLength,at.hmac)(it,st)}u.BASE._setWindowSize(8);function X(M,J,nt,it=z){var ce;const st=M;if(J=Ke("msgHash",J),nt=Ke("publicKey",nt),"strict"in it)throw new Error("options.strict was renamed to lowS");const{lowS:at,prehash:_}=it;let H,q;try{if(typeof st=="string"||st instanceof Uint8Array)try{H=v.fromDER(st)}catch(vt){if(!(vt instanceof Wr.Err))throw vt;H=v.fromCompact(st)}else if(typeof st=="object"&&typeof st.r=="bigint"&&typeof st.s=="bigint"){const{r:vt,s:kt}=st;H=new v(vt,kt)}else throw new Error("PARSE");q=u.fromHex(nt)}catch(vt){if(vt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(at&&H.hasHighS())return!1;_&&(J=t.hash(J));const{r:K,s:bt}=H,xt=R(J),It=c(bt),ct=a(xt*It),jt=a(K*It),ee=(ce=u.BASE.multiplyAndAddUnsafe(q,ct,jt))==null?void 0:ce.toAffine();return ee?a(ee.x)===K:!1}return{CURVE:t,getPublicKey:A,getSharedSecret:I,sign:G,verify:X,ProjectivePoint:u,Signature:v,utils:E}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vx(r){return{hash:r,hmac:(t,...e)=>Mf(r,t,Pp(...e)),randomBytes:Dp}}function Qx(r,t){const e=n=>Gx({...r,...Vx(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wx=BigInt(1),xc=BigInt(2),Ku=(r,t)=>(r+t/xc)/t;function Kx(r){const t=lh,e=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=r*r*r%t,l=u*u*r%t,f=Re(l,e,t)*l%t,d=Re(f,e,t)*l%t,x=Re(d,xc,t)*u%t,g=Re(x,i,t)*x%t,m=Re(g,s,t)*g%t,w=Re(m,a,t)*m%t,v=Re(w,c,t)*w%t,E=Re(v,a,t)*m%t,A=Re(E,e,t)*l%t,C=Re(A,o,t)*g%t,I=Re(C,n,t)*u%t,T=Re(I,xc,t);if(!yc.eql(yc.sqr(T),r))throw new Error("Cannot find square root");return T}const yc=Sx(lh,void 0,void 0,{sqrt:Kx}),or=Qx({a:BigInt(0),b:BigInt(7),Fp:yc,n:Wu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Wu,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Wx*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),a=Ku(s*r,t),c=Ku(-n*r,t);let u=we(r-a*e-c*i,t),l=we(-a*n-c*s,t);const f=u>o,d=l>o;if(f&&(u=t-u),d&&(l=t-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:u,k2neg:d,k2:l}}}},zf);BigInt(0);or.ProjectivePoint;const mi="0x0000000000000000000000000000000000000000",eo="0x0000000000000000000000000000000000000000000000000000000000000000",$u=BigInt(0),qu=BigInt(1),Ju=BigInt(2),ju=BigInt(27),Zu=BigInt(28),Qo=BigInt(35),Pi={};function Yu(r){return Ge(Vt(r),32)}var Xi,fn,ts,ri;const We=class We{constructor(t,e,n,i){U(this,Xi);U(this,fn);U(this,ts);U(this,ri);Fo(t,Pi,"Signature"),F(this,Xi,e),F(this,fn,n),F(this,ts,i),F(this,ri,null)}get r(){return y(this,Xi)}set r(t){P(pi(t)===32,"invalid r","value",t),F(this,Xi,Y(t))}get s(){return P(parseInt(y(this,fn).substring(0,3))<8,"non-canonical s; use ._s","s",y(this,fn)),y(this,fn)}set s(t){P(pi(t)===32,"invalid s","value",t),F(this,fn,Y(t))}get _s(){return y(this,fn)}isValid(){return parseInt(y(this,fn).substring(0,3))<8}get v(){return y(this,ts)}set v(t){const e=ft(t,"value");P(e===27||e===28,"invalid v","v",t),F(this,ts,e)}get networkV(){return y(this,ri)}get legacyChainId(){const t=this.networkV;return t==null?null:We.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=lt(this.s);return this.yParity&&(t[0]|=128),Y(t)}get compactSerialized(){return Lt([this.r,this.yParityAndS])}get serialized(){return Lt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new We(Pi,this.r,this._s,this.v);return this.networkV&&F(t,ri,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=et(t,"v");return e==ju||e==Zu?$u:(P(e>=Qo,"invalid EIP-155 v","v",t),(e-Qo)/Ju)}static getChainIdV(t,e){return et(t)*Ju+BigInt(35+e-27)}static getNormalizedV(t){const e=et(t);return e===$u||e===ju?27:e===qu||e===Zu?28:(P(e>=Qo,"invalid v","v",t),e&qu?27:28)}static from(t){function e(u,l){P(u,l,"signature",t)}if(t==null)return new We(Pi,eo,eo,27);if(typeof t=="string"){const u=lt(t,"signature");if(u.length===64){const l=Y(u.slice(0,32)),f=u.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new We(Pi,l,Y(f),d)}if(u.length===65){const l=Y(u.slice(0,32)),f=Y(u.slice(32,64)),d=We.getNormalizedV(u[64]);return new We(Pi,l,f,d)}e(!1,"invalid raw signature length")}if(t instanceof We)return t.clone();const n=t.r;e(n!=null,"missing r");const i=Yu(n),s=function(u,l){if(u!=null)return Yu(u);if(l!=null){e(Rt(l,32),"invalid yParityAndS");const f=lt(l);return f[0]&=127,Y(f)}e(!1,"missing s")}(t.s,t.yParityAndS),{networkV:o,v:a}=function(u,l,f){if(u!=null){const d=et(u);return{networkV:d>=Qo?d:void 0,v:We.getNormalizedV(d)}}if(l!=null)return e(Rt(l,32),"invalid yParityAndS"),{v:lt(l)[0]&128?28:27};if(f!=null){switch(ft(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new We(Pi,i,s,a);return o&&F(c,ri,o),e(t.yParity==null||ft(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Xi=new WeakMap,fn=new WeakMap,ts=new WeakMap,ri=new WeakMap;let Ae=We;var On;const zr=class zr{constructor(t){U(this,On);P(pi(t)===32,"invalid private key","privateKey","[REDACTED]"),F(this,On,Y(t))}get privateKey(){return y(this,On)}get publicKey(){return zr.computePublicKey(y(this,On))}get compressedPublicKey(){return zr.computePublicKey(y(this,On),!0)}sign(t){P(pi(t)===32,"invalid digest length","digest",t);const e=or.sign(he(t),he(y(this,On)),{lowS:!0});return Ae.from({r:Ir(e.r,32),s:Ir(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=zr.computePublicKey(t);return Y(or.getSharedSecret(he(y(this,On)),lt(e),!1))}static computePublicKey(t,e){let n=lt(t,"key");if(n.length===32){const s=or.getPublicKey(n,!!e);return Y(s)}if(n.length===64){const s=new Uint8Array(65);s[0]=4,s.set(n,1),n=s}const i=or.ProjectivePoint.fromHex(n);return Y(i.toRawBytes(e))}static recoverPublicKey(t,e){P(pi(t)===32,"invalid digest length","digest",t);const n=Ae.from(e);let i=or.Signature.fromCompact(he(Lt([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const s=i.recoverPublicKey(he(t));return P(s!=null,"invalid signature for digest","signature",e),"0x"+s.toHex(!1)}static addPoints(t,e,n){const i=or.ProjectivePoint.fromHex(zr.computePublicKey(t).substring(2)),s=or.ProjectivePoint.fromHex(zr.computePublicKey(e).substring(2));return"0x"+i.add(s).toHex(!!n)}};On=new WeakMap;let no=zr;const $x=BigInt(0),qx=BigInt(36);function Xu(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let i=0;i<40;i++)e[i]=t[i].charCodeAt(0);const n=lt(Mt(e));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(n[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const Zc={};for(let r=0;r<10;r++)Zc[String(r)]=String(r);for(let r=0;r<26;r++)Zc[String.fromCharCode(65+r)]=String(10+r);const tl=15;function Jx(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>Zc[n]).join("");for(;t.length>=tl;){let n=t.substring(0,tl);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const jx=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function Zx(r){r=r.toLowerCase();let t=$x;for(let e=0;e<r.length;e++)t=t*qx+jx[r[e]];return t}function Et(r){if(P(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=Xu(r);return P(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){P(r.substring(2,4)===Jx(r),"bad icap checksum","address",r);let t=Zx(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Xu("0x"+t)}P(!1,"invalid address","address",r)}function Yx(r){const t=Et(r.from);let n=et(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Et(Ht(Mt(Pr([t,n])),12))}function fh(r){return r&&typeof r.getAddress=="function"}async function o0(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&($(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),P(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Et(e)}function pe(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Et(r):($(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),o0(r,t.resolveName(r)));if(fh(r))return o0(r,r.getAddress());if(r&&typeof r.then=="function")return o0(r,r);P(!1,"unsupported addressable value","target",r)}const kn={};function tt(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new ae(kn,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function At(r,t){return new ae(kn,`bytes${t||""}`,r,{size:t})}const el=Symbol.for("_ethers_typed");var ii;const Pn=class Pn{constructor(t,e,n,i){O(this,"type");O(this,"value");U(this,ii);O(this,"_typedSymbol");i==null&&(i=null),Fo(kn,t,"Typed"),ot(this,{_typedSymbol:el,type:e,value:n}),F(this,ii,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return y(this,ii)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return y(this,ii)===!0?-1:y(this,ii)===!1?this.value.length:null}static from(t,e){return new Pn(kn,t,e)}static uint8(t){return tt(t,8)}static uint16(t){return tt(t,16)}static uint24(t){return tt(t,24)}static uint32(t){return tt(t,32)}static uint40(t){return tt(t,40)}static uint48(t){return tt(t,48)}static uint56(t){return tt(t,56)}static uint64(t){return tt(t,64)}static uint72(t){return tt(t,72)}static uint80(t){return tt(t,80)}static uint88(t){return tt(t,88)}static uint96(t){return tt(t,96)}static uint104(t){return tt(t,104)}static uint112(t){return tt(t,112)}static uint120(t){return tt(t,120)}static uint128(t){return tt(t,128)}static uint136(t){return tt(t,136)}static uint144(t){return tt(t,144)}static uint152(t){return tt(t,152)}static uint160(t){return tt(t,160)}static uint168(t){return tt(t,168)}static uint176(t){return tt(t,176)}static uint184(t){return tt(t,184)}static uint192(t){return tt(t,192)}static uint200(t){return tt(t,200)}static uint208(t){return tt(t,208)}static uint216(t){return tt(t,216)}static uint224(t){return tt(t,224)}static uint232(t){return tt(t,232)}static uint240(t){return tt(t,240)}static uint248(t){return tt(t,248)}static uint256(t){return tt(t,256)}static uint(t){return tt(t,256)}static int8(t){return tt(t,-8)}static int16(t){return tt(t,-16)}static int24(t){return tt(t,-24)}static int32(t){return tt(t,-32)}static int40(t){return tt(t,-40)}static int48(t){return tt(t,-48)}static int56(t){return tt(t,-56)}static int64(t){return tt(t,-64)}static int72(t){return tt(t,-72)}static int80(t){return tt(t,-80)}static int88(t){return tt(t,-88)}static int96(t){return tt(t,-96)}static int104(t){return tt(t,-104)}static int112(t){return tt(t,-112)}static int120(t){return tt(t,-120)}static int128(t){return tt(t,-128)}static int136(t){return tt(t,-136)}static int144(t){return tt(t,-144)}static int152(t){return tt(t,-152)}static int160(t){return tt(t,-160)}static int168(t){return tt(t,-168)}static int176(t){return tt(t,-176)}static int184(t){return tt(t,-184)}static int192(t){return tt(t,-192)}static int200(t){return tt(t,-200)}static int208(t){return tt(t,-208)}static int216(t){return tt(t,-216)}static int224(t){return tt(t,-224)}static int232(t){return tt(t,-232)}static int240(t){return tt(t,-240)}static int248(t){return tt(t,-248)}static int256(t){return tt(t,-256)}static int(t){return tt(t,-256)}static bytes1(t){return At(t,1)}static bytes2(t){return At(t,2)}static bytes3(t){return At(t,3)}static bytes4(t){return At(t,4)}static bytes5(t){return At(t,5)}static bytes6(t){return At(t,6)}static bytes7(t){return At(t,7)}static bytes8(t){return At(t,8)}static bytes9(t){return At(t,9)}static bytes10(t){return At(t,10)}static bytes11(t){return At(t,11)}static bytes12(t){return At(t,12)}static bytes13(t){return At(t,13)}static bytes14(t){return At(t,14)}static bytes15(t){return At(t,15)}static bytes16(t){return At(t,16)}static bytes17(t){return At(t,17)}static bytes18(t){return At(t,18)}static bytes19(t){return At(t,19)}static bytes20(t){return At(t,20)}static bytes21(t){return At(t,21)}static bytes22(t){return At(t,22)}static bytes23(t){return At(t,23)}static bytes24(t){return At(t,24)}static bytes25(t){return At(t,25)}static bytes26(t){return At(t,26)}static bytes27(t){return At(t,27)}static bytes28(t){return At(t,28)}static bytes29(t){return At(t,29)}static bytes30(t){return At(t,30)}static bytes31(t){return At(t,31)}static bytes32(t){return At(t,32)}static address(t){return new Pn(kn,"address",t)}static bool(t){return new Pn(kn,"bool",!!t)}static bytes(t){return new Pn(kn,"bytes",t)}static string(t){return new Pn(kn,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Pn(kn,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===el}static dereference(t,e){if(Pn.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};ii=new WeakMap;let ae=Pn;class Xx extends Jn{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=ae.dereference(e,"string");try{n=Et(n)}catch(i){return this._throwError(i.message,e)}return t.writeValue(n)}decode(t){return Et(Ir(t.readValue(),20))}}class ty extends Jn{constructor(e){super(e.name,e.type,"_",e.dynamic);O(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function hh(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(u=>{const l=u.localName;return $(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),$(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[l]=!0,e[l]})}else P(!1,"invalid tuple value","tuple",e);P(t.length===n.length,"types/value length mismatch","tuple",e);let i=new uc,s=new uc,o=[];t.forEach((c,u)=>{let l=n[u];if(c.dynamic){let f=s.length;c.encode(s,l);let d=i.writeUpdatableValue();o.push(x=>{d(x+f)})}else c.encode(i,l)}),o.forEach(c=>{c(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function dh(r,t){let e=[],n=[],i=r.subReader(0);return t.forEach(s=>{let o=null;if(s.dynamic){let a=r.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(u){if(Xt(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(Xt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");e.push(o),n.push(s.localName||null)}),Ds.fromItems(e,n)}class ey extends Jn{constructor(e,n,i){const s=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",s,i,o);O(this,"coder");O(this,"length");ot(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(e);return n}encode(e,n){const i=ae.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,e.writeValue(i.length)),Ef(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return hh(e,o,i)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),$(n*de<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*de,length:e.dataLength}));let i=[];for(let s=0;s<n;s++)i.push(new ty(this.coder));return dh(e,i)}}class ny extends Jn{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=ae.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class ph extends Jn{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=he(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class ry extends ph{constructor(t){super("bytes",t)}decode(t){return Y(super.decode(t))}}class iy extends Jn{constructor(e,n){let i="bytes"+String(e);super(i,i,n,!1);O(this,"size");ot(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let i=he(ae.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(i)}decode(e){return Y(e.readBytes(this.size))}}const sy=new Uint8Array([]);class oy extends Jn{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(sy)}decode(t){return t.readBytes(0),null}}const ay=BigInt(0),cy=BigInt(1),uy=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class ly extends Jn{constructor(e,n,i){const s=(n?"int":"uint")+e*8;super(s,s,i,!1);O(this,"size");O(this,"signed");ot(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let i=et(ae.dereference(n,this.type)),s=Qr(uy,de*8);if(this.signed){let o=Qr(s,this.size*8-1);(i>o||i<-(o+cy))&&this._throwError("value out-of-bounds",n),i=Gc(i,8*de)}else(i<ay||i>Qr(s,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(i)}decode(e){let n=Qr(e.readValue(),this.size*8);return this.signed&&(n=ca(n,this.size*8)),n}}class fy extends ph{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,nn(ae.dereference(e,"string")))}decode(t){return ua(super.decode(t))}}class Wo extends Jn{constructor(e,n){let i=!1;const s=[];e.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,n,i);O(this,"coders");ot(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(i=>{e.push(i.defaultValue())});const n=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[s]))}),Object.freeze(e)}encode(e,n){const i=ae.dereference(n,"tuple");return hh(e,this.coders,i)}decode(e){return dh(e,this.coders)}}function a0(r,t){return{address:Et(r),storageKeys:t.map((e,n)=>(P(Rt(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Bi(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(P(e.length===2,"invalid slot set",`value[${n}]`,e),a0(e[0],e[1])):(P(e!=null&&typeof e=="object","invalid address-slot set","value",r),a0(e.address,e.storageKeys)));P(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((i,s)=>(i[s]=!0,i),{});return a0(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function xh(r){return{address:Et(r.address),nonce:et(r.nonce!=null?r.nonce:0),chainId:et(r.chainId!=null?r.chainId:0),signature:Ae.from(r.signature)}}function hy(r){let t;return typeof r=="string"?t=no.computePublicKey(r,!1):t=r.publicKey,Et(Mt("0x"+t.substring(4)).substring(26))}function dy(r,t){return hy(no.recoverPublicKey(r,t))}const $t=BigInt(0),py=BigInt(2),xy=BigInt(27),yy=BigInt(28),gy=BigInt(35),my=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),c0=4096*32;function wy(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return lt(r.blobToKzgCommitment(Y(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return lt(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return lt(r.blobToKZGCommitment(Y(n)));P(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,i)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return lt(r.computeBlobProof(Y(n),Y(i)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return lt(r.computeBlobKZGProof(Y(n),Y(i)));P(!1,"unsupported KZG library","kzg",r)}}}function nl(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=Ms(t).substring(4),"0x"+e}function Hs(r){return r==="0x"?null:Et(r)}function _a(r,t){try{return Bi(r)}catch(e){P(!1,e.message,t,r)}}function by(r,t){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const e=[];for(let n=0;n<r.length;n++){const i=r[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);e.push({address:Hs(i[1]),nonce:Tt(i[2],"nonce"),chainId:Tt(i[0],"chainId"),signature:Ae.from({yParity:Ci(i[3],"yParity"),r:Ge(i[4],32),s:Ge(i[5],32)})})}return e}catch(e){P(!1,e.message,t,r)}}function Ci(r,t){return r==="0x"?0:ft(r,t)}function Tt(r,t){if(r==="0x")return $t;const e=et(r,t);return P(e<=my,"value exceeds uint size",t,e),e}function mt(r,t){const e=et(r,"value"),n=Vt(e);return P(n.length<=32,"value too large",`tx.${t}`,e),n}function Ma(r){return Bi(r).map(t=>[t.address,t.storageKeys])}function Ay(r){return r.map(t=>[mt(t.chainId,"chainId"),t.address,mt(t.nonce,"nonce"),mt(t.signature.yParity,"yParity"),Vt(t.signature.r),Vt(t.signature.s)])}function Ey(r,t){P(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)P(Rt(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function vy(r){const t=To(r);P(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:Ci(t[0],"nonce"),gasPrice:Tt(t[1],"gasPrice"),gasLimit:Tt(t[2],"gasLimit"),to:Hs(t[3]),value:Tt(t[4],"value"),data:Y(t[5]),chainId:$t};if(t.length===6)return e;const n=Tt(t[6],"v"),i=Tt(t[7],"r"),s=Tt(t[8],"s");if(i===$t&&s===$t)e.chainId=n;else{let o=(n-gy)/py;o<$t&&(o=$t),e.chainId=o,P(o!==$t||n===xy||n===yy,"non-canonical legacy v","v",t[6]),e.signature=Ae.from({r:Ge(t[7],32),s:Ge(t[8],32),v:n})}return e}function By(r,t){const e=[mt(r.nonce,"nonce"),mt(r.gasPrice||0,"gasPrice"),mt(r.gasLimit,"gasLimit"),r.to||"0x",mt(r.value,"value"),r.data];let n=$t;if(r.chainId!=$t)n=et(r.chainId,"tx.chainId"),P(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const s=r.signature.legacyChainId;s!=null&&(n=s)}if(!t)return n!==$t&&(e.push(Vt(n)),e.push("0x"),e.push("0x")),Pr(e);let i=BigInt(27+t.yParity);return n!==$t?i=Ae.getChainIdV(n,t.v):BigInt(t.v)!==i&&P(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(Vt(i)),e.push(Vt(t.r)),e.push(Vt(t.s)),Pr(e)}function Ha(r,t){let e;try{if(e=Ci(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{P(!1,"invalid yParity","yParity",t[0])}const n=Ge(t[1],32),i=Ge(t[2],32),s=Ae.from({r:n,s:i,yParity:e});r.signature=s}function Cy(r){const t=To(lt(r).slice(1));P(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",Y(r));const e={type:2,chainId:Tt(t[0],"chainId"),nonce:Ci(t[1],"nonce"),maxPriorityFeePerGas:Tt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Tt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tt(t[4],"gasLimit"),to:Hs(t[5]),value:Tt(t[6],"value"),data:Y(t[7]),accessList:_a(t[8],"accessList")};return t.length===9||Ha(e,t.slice(9)),e}function Fy(r,t){const e=[mt(r.chainId,"chainId"),mt(r.nonce,"nonce"),mt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),mt(r.maxFeePerGas||0,"maxFeePerGas"),mt(r.gasLimit,"gasLimit"),r.to||"0x",mt(r.value,"value"),r.data,Ma(r.accessList||[])];return t&&(e.push(mt(t.yParity,"yParity")),e.push(Vt(t.r)),e.push(Vt(t.s))),Lt(["0x02",Pr(e)])}function Ty(r){const t=To(lt(r).slice(1));P(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",Y(r));const e={type:1,chainId:Tt(t[0],"chainId"),nonce:Ci(t[1],"nonce"),gasPrice:Tt(t[2],"gasPrice"),gasLimit:Tt(t[3],"gasLimit"),to:Hs(t[4]),value:Tt(t[5],"value"),data:Y(t[6]),accessList:_a(t[7],"accessList")};return t.length===8||Ha(e,t.slice(8)),e}function Iy(r,t){const e=[mt(r.chainId,"chainId"),mt(r.nonce,"nonce"),mt(r.gasPrice||0,"gasPrice"),mt(r.gasLimit,"gasLimit"),r.to||"0x",mt(r.value,"value"),r.data,Ma(r.accessList||[])];return t&&(e.push(mt(t.yParity,"recoveryParam")),e.push(Vt(t.r)),e.push(Vt(t.s))),Lt(["0x01",Pr(e)])}function ky(r){let t=To(lt(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const s=t[1],o=t[2],a=t[3];P(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),P(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),P(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),P(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),P(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:s[c],commitment:o[c],proof:a[c]});t=t[0]}P(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",Y(r));const i={type:3,chainId:Tt(t[0],"chainId"),nonce:Ci(t[1],"nonce"),maxPriorityFeePerGas:Tt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Tt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tt(t[4],"gasLimit"),to:Hs(t[5]),value:Tt(t[6],"value"),data:Y(t[7]),accessList:_a(t[8],"accessList"),maxFeePerBlobGas:Tt(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(i.blobs=n),P(i.to!=null,`invalid address for transaction type: ${e}`,"data",r),P(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let s=0;s<i.blobVersionedHashes.length;s++)P(Rt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",r);return t.length===11||Ha(i,t.slice(11)),i}function Py(r,t,e){const n=[mt(r.chainId,"chainId"),mt(r.nonce,"nonce"),mt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),mt(r.maxFeePerGas||0,"maxFeePerGas"),mt(r.gasLimit,"gasLimit"),r.to||mi,mt(r.value,"value"),r.data,Ma(r.accessList||[]),mt(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Ey(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(mt(t.yParity,"yParity")),n.push(Vt(t.r)),n.push(Vt(t.s)),e)?Lt(["0x03",Pr([n,e.map(i=>i.data),e.map(i=>i.commitment),e.map(i=>i.proof)])]):Lt(["0x03",Pr(n)])}function Dy(r){const t=To(lt(r).slice(1));P(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",Y(r));const e={type:4,chainId:Tt(t[0],"chainId"),nonce:Ci(t[1],"nonce"),maxPriorityFeePerGas:Tt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Tt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tt(t[4],"gasLimit"),to:Hs(t[5]),value:Tt(t[6],"value"),data:Y(t[7]),accessList:_a(t[8],"accessList"),authorizationList:by(t[9],"authorizationList")};return t.length===10||Ha(e,t.slice(10)),e}function Ry(r,t){const e=[mt(r.chainId,"chainId"),mt(r.nonce,"nonce"),mt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),mt(r.maxFeePerGas||0,"maxFeePerGas"),mt(r.gasLimit,"gasLimit"),r.to||"0x",mt(r.value,"value"),r.data,Ma(r.accessList||[]),Ay(r.authorizationList||[])];return t&&(e.push(mt(t.yParity,"yParity")),e.push(Vt(t.r)),e.push(Vt(t.s))),Lt(["0x04",Pr(e)])}var je,es,ns,rs,is,ss,os,as,cs,us,ls,fs,si,fr,hn,hr,hs,ds,Yo;const cn=class cn{constructor(){U(this,ds);U(this,je);U(this,es);U(this,ns);U(this,rs);U(this,is);U(this,ss);U(this,os);U(this,as);U(this,cs);U(this,us);U(this,ls);U(this,fs);U(this,si);U(this,fr);U(this,hn);U(this,hr);U(this,hs);F(this,je,null),F(this,es,null),F(this,rs,0),F(this,is,$t),F(this,ss,null),F(this,os,null),F(this,as,null),F(this,ns,"0x"),F(this,cs,$t),F(this,us,$t),F(this,ls,null),F(this,fs,null),F(this,si,null),F(this,fr,null),F(this,hn,null),F(this,hr,null),F(this,hs,null)}get type(){return y(this,je)}set type(t){switch(t){case null:F(this,je,null);break;case 0:case"legacy":F(this,je,0);break;case 1:case"berlin":case"eip-2930":F(this,je,1);break;case 2:case"london":case"eip-1559":F(this,je,2);break;case 3:case"cancun":case"eip-4844":F(this,je,3);break;case 4:case"pectra":case"eip-7702":F(this,je,4);break;default:P(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=y(this,es);return t==null&&this.type===3?mi:t}set to(t){F(this,es,t==null?null:Et(t))}get nonce(){return y(this,rs)}set nonce(t){F(this,rs,ft(t,"value"))}get gasLimit(){return y(this,is)}set gasLimit(t){F(this,is,et(t))}get gasPrice(){const t=y(this,ss);return t==null&&(this.type===0||this.type===1)?$t:t}set gasPrice(t){F(this,ss,t==null?null:et(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=y(this,os);return t??(this.type===2||this.type===3?$t:null)}set maxPriorityFeePerGas(t){F(this,os,t==null?null:et(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=y(this,as);return t??(this.type===2||this.type===3?$t:null)}set maxFeePerGas(t){F(this,as,t==null?null:et(t,"maxFeePerGas"))}get data(){return y(this,ns)}set data(t){F(this,ns,Y(t))}get value(){return y(this,cs)}set value(t){F(this,cs,et(t,"value"))}get chainId(){return y(this,us)}set chainId(t){F(this,us,et(t))}get signature(){return y(this,ls)||null}set signature(t){F(this,ls,t==null?null:Ae.from(t))}get accessList(){const t=y(this,fs)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){F(this,fs,t==null?null:Bi(t))}get authorizationList(){const t=y(this,hs)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){F(this,hs,t==null?null:t.map(e=>xh(e)))}get maxFeePerBlobGas(){const t=y(this,si);return t==null&&this.type===3?$t:t}set maxFeePerBlobGas(t){F(this,si,t==null?null:et(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=y(this,fr);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){P(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)P(Rt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}F(this,fr,t)}get blobs(){return y(this,hr)==null?null:y(this,hr).map(t=>Object.assign({},t))}set blobs(t){if(t==null){F(this,hr,null);return}const e=[],n=[];for(let i=0;i<t.length;i++){const s=t[i];if(zc(s)){$(y(this,hn),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=lt(s);if(P(o.length<=c0,"blob is too large",`blobs[${i}]`,s),o.length!==c0){const u=new Uint8Array(c0);u.set(o),o=u}const a=y(this,hn).blobToKzgCommitment(o),c=Y(y(this,hn).computeBlobKzgProof(o,a));e.push({data:Y(o),commitment:Y(a),proof:c}),n.push(nl(1,a))}else{const o=Y(s.commitment);e.push({data:Y(s.data),commitment:o,proof:Y(s.proof)}),n.push(nl(1,o))}}F(this,hr,e),F(this,fr,n)}get kzg(){return y(this,hn)}set kzg(t){t==null?F(this,hn,null):F(this,hn,wy(t))}get hash(){return this.signature==null?null:Mt(j(this,ds,Yo).call(this,!0,!1))}get unsignedHash(){return Mt(this.unsignedSerialized)}get from(){return this.signature==null?null:dy(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:no.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return j(this,ds,Yo).call(this,!0,!0)}get unsignedSerialized(){return j(this,ds,Yo).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=y(this,si)!=null||y(this,fr);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&$(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),$(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),$(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):e?s.push(2):t?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return cn.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new cn;if(typeof t=="string"){const n=lt(t);if(n[0]>=127)return cn.from(vy(n));switch(n[0]){case 1:return cn.from(Ty(n));case 2:return cn.from(Cy(n));case 3:return cn.from(ky(n));case 4:return cn.from(Dy(n))}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new cn;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=Ae.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(P(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),P(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(P(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),P(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};je=new WeakMap,es=new WeakMap,ns=new WeakMap,rs=new WeakMap,is=new WeakMap,ss=new WeakMap,os=new WeakMap,as=new WeakMap,cs=new WeakMap,us=new WeakMap,ls=new WeakMap,fs=new WeakMap,si=new WeakMap,fr=new WeakMap,hn=new WeakMap,hr=new WeakMap,hs=new WeakMap,ds=new WeakSet,Yo=function(t,e){$(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return By(this,n);case 1:return Iy(this,n);case 2:return Fy(this,n);case 3:return Py(this,n,e?this.blobs:null);case 4:return Ry(this,n)}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ha=cn;function wi(r){return Mt(nn(r))}var Sy="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";const rl=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),il=4;function Ny(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),i=1,s=[0,1];for(let I=1;I<n;I++)s.push(i+=e());let o=e(),a=t;t+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|r[t++],c=8),u>>--c&1}const f=31,d=2**f,x=d>>>1,g=x>>1,m=d-1;let w=0;for(let I=0;I<f;I++)w=w<<1|l();let v=[],E=0,A=d;for(;;){let I=Math.floor(((w-E+1)*i-1)/A),T=0,R=n;for(;R-T>1;){let k=T+R>>>1;I<s[k]?R=k:T=k}if(T==0)break;v.push(T);let S=E+Math.floor(A*s[T]/i),V=E+Math.floor(A*s[T+1]/i)-1;for(;!((S^V)&x);)w=w<<1&m|l(),S=S<<1&m,V=V<<1&m|1;for(;S&~V&g;)w=w&x|w<<1&m>>>1|l(),S=S<<1^x,V=(V^x)<<1|x|1;E=S,A=1+V-S}let C=n-4;return v.map(I=>{switch(I-C){case 3:return C+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return C+256+(r[a++]<<8|r[a++]);case 1:return C+r[a++];default:return I-1}})}function Oy(r){let t=0;return()=>r[t++]}function yh(r){return Oy(Ny(Ly(r)))}function Ly(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>t[i.charCodeAt(0)]=s);let e=r.length,n=new Uint8Array(6*e>>3);for(let i=0,s=0,o=0,a=0;i<e;i++)a=a<<6|t[r.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}function Uy(r){return r&1?~r>>1:r>>1}function _y(r,t){let e=Array(r);for(let n=0,i=0;n<r;n++)e[n]=i+=Uy(t());return e}function ro(r,t=0){let e=[];for(;;){let n=r(),i=r();if(!i)break;t+=n;for(let s=0;s<i;s++)e.push(t+s);t+=i+1}return e}function gh(r){return io(()=>{let t=ro(r);if(t.length)return t})}function mh(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(My(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(Hy(e,r))}return t.flat()}function io(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function wh(r,t,e){let n=Array(r).fill().map(()=>[]);for(let i=0;i<t;i++)_y(r,e).forEach((s,o)=>n[o].push(s));return n}function My(r,t){let e=1+t(),n=t(),i=io(t);return wh(i.length,1+r,t).flatMap((o,a)=>{let[c,...u]=o;return Array(i[a]).fill().map((l,f)=>{let d=f*n;return[c+f*e,u.map(x=>x+d)]})})}function Hy(r,t){let e=1+t();return wh(e,1+r,t).map(i=>[i[0],i.slice(1)])}function zy(r){let t=[],e=ro(r);return i(n([]),[]),t;function n(s){let o=r(),a=io(()=>{let c=ro(r).map(u=>e[u]);if(c.length)return n(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&t.push(a);for(let u of o)for(let l of u.Q)i(u,[...a,l],c)}}}function Gy(r){return r.toString(16).toUpperCase().padStart(2,"0")}function bh(r){return`{${Gy(r)}}`}function Vy(r){let t=[];for(let e=0,n=r.length;e<n;){let i=r.codePointAt(e);e+=i<65536?1:2,t.push(i)}return t}function Ls(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<e;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function Qy(r,t){let e=r.length,n=e-t.length;for(let i=0;n==0&&i<e;i++)n=r[i]-t[i];return n}var Wy="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const so=44032,da=4352,pa=4449,xa=4519,Ah=19,Eh=21,Us=28,ya=Eh*Us,Ky=Ah*ya,$y=so+Ky,qy=da+Ah,Jy=pa+Eh,jy=xa+Us;function qs(r){return r>>24&255}function vh(r){return r&16777215}let gc,sl,mc,Xo;function Zy(){let r=yh(Wy);gc=new Map(gh(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),sl=new Set(ro(r)),mc=new Map,Xo=new Map;for(let[t,e]of mh(r)){if(!sl.has(t)&&e.length==2){let[n,i]=e,s=Xo.get(n);s||(s=new Map,Xo.set(n,s)),s.set(i,t)}mc.set(t,e.reverse())}}function Bh(r){return r>=so&&r<$y}function Yy(r,t){if(r>=da&&r<qy&&t>=pa&&t<Jy)return so+(r-da)*ya+(t-pa)*Us;if(Bh(r)&&t>xa&&t<jy&&(r-so)%Us==0)return r+(t-xa);{let e=Xo.get(r);return e&&(e=e.get(t),e)?e:-1}}function Ch(r){gc||Zy();let t=[],e=[],n=!1;function i(s){let o=gc.get(s);o&&(n=!0,s|=o),t.push(s)}for(let s of r)for(;;){if(s<128)t.push(s);else if(Bh(s)){let o=s-so,a=o/ya|0,c=o%ya/Us|0,u=o%Us;i(da+a),i(pa+c),u>0&&i(xa+u)}else{let o=mc.get(s);o?e.push(...o):i(s)}if(!e.length)break;s=e.pop()}if(n&&t.length>1){let s=qs(t[0]);for(let o=1;o<t.length;o++){let a=qs(t[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let u=t[c+1];if(t[c+1]=t[c],t[c]=u,!c||(s=qs(t[--c]),s<=a))break}s=qs(t[o])}}return t}function Xy(r){let t=[],e=[],n=-1,i=0;for(let s of r){let o=qs(s),a=vh(s);if(n==-1)o==0?n=a:t.push(a);else if(i>0&&i>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),i=o;else{let c=Yy(n,a);c>=0?n=c:i==0&&o==0?(t.push(n),n=a):(e.push(a),i=o)}}return n>=0&&t.push(n,...e),t}function Fh(r){return Ch(r).map(vh)}function tg(r){return Xy(Ch(r))}const ol=45,Th=".",Ih=65039,kh=1,ga=r=>Array.from(r);function oo(r,t){return r.P.has(t)||r.Q.has(t)}class eg extends Array{get is_emoji(){return!0}}let wc,Ph,Kr,bc,Dh,Vi,u0,Si,_r,al,Ac;function Yc(){if(wc)return;let r=yh(Sy);const t=()=>ro(r),e=()=>new Set(t()),n=(l,f)=>f.forEach(d=>l.add(d));wc=new Map(mh(r)),Ph=e(),Kr=t(),bc=new Set(t().map(l=>Kr[l])),Kr=new Set(Kr),Dh=e(),e();let i=gh(r),s=r();const o=()=>{let l=new Set;return t().forEach(f=>n(l,i[f])),n(l,t()),l};Vi=io(l=>{let f=io(r).map(d=>d+96);if(f.length){let d=l>=s;f[0]-=32,f=Ls(f),d&&(f=`Restricted[${f}]`);let x=o(),g=o(),m=!r();return{N:f,P:x,Q:g,M:m,R:d}}}),u0=e(),Si=new Map;let a=t().concat(ga(u0)).sort((l,f)=>l-f);a.forEach((l,f)=>{let d=r(),x=a[f]=d?a[f-d]:{V:[],M:new Map};x.V.push(l),u0.has(l)||Si.set(l,x)});for(let{V:l,M:f}of new Set(Si.values())){let d=[];for(let g of l){let m=Vi.filter(v=>oo(v,g)),w=d.find(({G:v})=>m.some(E=>v.has(E)));w||(w={G:new Set,V:[]},d.push(w)),w.V.push(g),n(w.G,m)}let x=d.flatMap(g=>ga(g.G));for(let{G:g,V:m}of d){let w=new Set(x.filter(v=>!g.has(v)));for(let v of m)f.set(v,w)}}_r=new Set;let c=new Set;const u=l=>_r.has(l)?c.add(l):_r.add(l);for(let l of Vi){for(let f of l.P)u(f);for(let f of l.Q)u(f)}for(let l of _r)!Si.has(l)&&!c.has(l)&&Si.set(l,kh);n(_r,Fh(_r)),al=zy(r).map(l=>eg.from(l)).sort(Qy),Ac=new Map;for(let l of al){let f=[Ac];for(let d of l){let x=f.map(g=>{let m=g.get(d);return m||(m=new Map,g.set(d,m)),m});d===Ih?f.push(...x):f=x}for(let d of f)d.V=l}}function Xc(r){return(Rh(r)?"":`${tu(za([r]))} `)+bh(r)}function tu(r){return`"${r}"‎`}function ng(r){if(r.length>=4&&r[2]==ol&&r[3]==ol)throw new Error(`invalid label extension: "${Ls(r.slice(0,4))}"`)}function rg(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function ig(r){let t=r[0],e=rl.get(t);if(e)throw Ys(`leading ${e}`);let n=r.length,i=-1;for(let s=1;s<n;s++){t=r[s];let o=rl.get(t);if(o){if(i==s)throw Ys(`${e} + ${o}`);i=s+1,e=o}}if(i==n)throw Ys(`trailing ${e}`)}function za(r,t=1/0,e=bh){let n=[];sg(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let i=0,s=r.length;for(let o=0;o<s;o++){let a=r[o];Rh(a)&&(n.push(Ls(r.slice(i,o))),n.push(e(a)),i=o+1)}return n.push(Ls(r.slice(i,s))),n.join("")}function sg(r){return Yc(),Kr.has(r)}function Rh(r){return Yc(),Dh.has(r)}function og(r){return lg(ag(r,tg,dg))}function ag(r,t,e){if(!r)return[];Yc();let n=0;return r.split(Th).map(i=>{let s=Vy(i),o={input:s,offset:n};n+=s.length+1;try{let a=o.tokens=hg(s,t,e),c=a.length,u;if(!c)throw new Error("empty label");let l=o.output=a.flat();if(rg(l),!(o.emoji=c>1||a[0].is_emoji)&&l.every(d=>d<128))ng(l),u="ASCII";else{let d=a.flatMap(x=>x.is_emoji?[]:x);if(!d.length)u="Emoji";else{if(Kr.has(l[0]))throw Ys("leading combining mark");for(let m=1;m<c;m++){let w=a[m];if(!w.is_emoji&&Kr.has(w[0]))throw Ys(`emoji + combining mark: "${Ls(a[m-1])} + ${za([w[0]])}"`)}ig(l);let x=ga(new Set(d)),[g]=ug(x);fg(g,d),cg(g,x),u=g.N}}o.type=u}catch(a){o.error=a}return o})}function cg(r,t){let e,n=[];for(let i of t){let s=Si.get(i);if(s===kh)return;if(s){let o=s.M.get(i);if(e=e?e.filter(a=>o.has(a)):ga(o),!e.length)return}else n.push(i)}if(e){for(let i of e)if(n.every(s=>oo(i,s)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function ug(r){let t=Vi;for(let e of r){let n=t.filter(i=>oo(i,e));if(!n.length)throw Vi.some(i=>oo(i,e))?Nh(t[0],e):Sh(e);if(t=n,n.length==1)break}return t}function lg(r){return r.map(({input:t,error:e,output:n})=>{if(e){let i=e.message;throw new Error(r.length==1?i:`Invalid label ${tu(za(t,63))}: ${i}`)}return Ls(n)}).join(Th)}function Sh(r){return new Error(`disallowed character: ${Xc(r)}`)}function Nh(r,t){let e=Xc(t),n=Vi.find(i=>i.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function Ys(r){return new Error(`illegal placement: ${r}`)}function fg(r,t){for(let e of t)if(!oo(r,e))throw Nh(r,e);if(r.M){let e=Fh(t);for(let n=1,i=e.length;n<i;n++)if(bc.has(e[n])){let s=n+1;for(let o;s<i&&bc.has(o=e[s]);s++)for(let a=n;a<s;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${Xc(o)}`);if(s-n>il)throw new Error(`excessive non-spacing marks: ${tu(za(e.slice(n-1,s)))} (${s-n}/${il})`);n=s}}}function hg(r,t,e){let n=[],i=[];for(r=r.slice().reverse();r.length;){let s=pg(r);if(s)i.length&&(n.push(t(i)),i=[]),n.push(e(s));else{let o=r.pop();if(_r.has(o))i.push(o);else{let a=wc.get(o);if(a)i.push(...a);else if(!Ph.has(o))throw Sh(o)}}}return i.length&&n.push(t(i)),n}function dg(r){return r.filter(t=>t!=Ih)}function pg(r,t){let e=Ac,n,i=r.length;for(;i&&(e=e.get(r[--i]),!!e);){let{V:s}=e;s&&(n=s,r.length=i)}return n}const Oh=new Uint8Array(32);Oh.fill(0);function cl(r){return P(r.length!==0,"invalid ENS name; empty component","comp",r),r}function Lh(r){const t=nn(xg(r)),e=[];if(r.length===0)return e;let n=0;for(let i=0;i<t.length;i++)t[i]===46&&(e.push(cl(t.slice(n,i))),n=i+1);return P(n<t.length,"invalid ENS name; empty component","name",r),e.push(cl(t.slice(n))),e}function xg(r){try{if(r.length===0)throw new Error("empty label");return og(r)}catch(t){P(!1,`invalid ENS name (${t.message})`,"name",r)}}function Ec(r){P(typeof r=="string","invalid ENS name; not a string","name",r),P(r.length,"invalid ENS name (empty label)","name",r);let t=Oh;const e=Lh(r);for(;e.length;)t=Mt(Lt([t,Mt(e.pop())]));return Y(t)}function yg(r,t){const e=t;return P(e<=255,"DNS encoded label cannot exceed 255","length",e),Y(Lt(Lh(r).map(n=>{P(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}const gg=new RegExp("^bytes([0-9]+)$"),mg=new RegExp("^(u?int)([0-9]*)$"),wg=new RegExp("^(.*)\\[([0-9]*)\\]$");function Uh(r,t,e){switch(r){case"address":return lt(e?Ge(t,32):Et(t));case"string":return nn(t);case"bytes":return lt(t);case"bool":return t=t?"0x01":"0x00",lt(e?Ge(t,32):t)}let n=r.match(mg);if(n){let i=n[1]==="int",s=parseInt(n[2]||"256");return P((!n[2]||n[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",r),e&&(s=256),i&&(t=Gc(t,s)),lt(Ge(Vt(t),s/8))}if(n=r.match(gg),n){const i=parseInt(n[1]);return P(String(i)===n[1]&&i!==0&&i<=32,"invalid bytes type","type",r),P(pi(t)===i,`invalid value for ${r}`,"value",t),e?lt(Cf(t,32)):t}if(n=r.match(wg),n&&Array.isArray(t)){const i=n[1],s=parseInt(n[2]||String(t.length));P(s===t.length,`invalid array length for ${r}`,"value",t);const o=[];return t.forEach(function(a){o.push(Uh(i,a,!0))}),lt(Lt(o))}P(!1,"invalid type","type",r)}function bg(r,t){P(r.length===t.length,"wrong number of values; expected ${ types.length }","values",t);const e=[];return r.forEach(function(n,i){e.push(Uh(n,t[i]))}),Y(Lt(e))}function _h(r,t){return Mt(bg(r,t))}const Mh=new Uint8Array(32);Mh.fill(0);const Ag=BigInt(-1),Hh=BigInt(0),zh=BigInt(1),Eg=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vg(r){const t=lt(r),e=t.length%32;return e?Lt([t,Mh.slice(e)]):Y(t)}const Bg=Ir(zh,32),Cg=Ir(Hh,32),ul={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},l0=["name","version","chainId","verifyingContract","salt"];function ll(r){return function(t){return P(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const Fg={name:ll("name"),version:ll("version"),chainId:function(r){const t=et(r,"domain.chainId");return P(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):Xe(t)},verifyingContract:function(r){try{return Et(r).toLowerCase()}catch{}P(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=lt(r,"domain.salt");return P(t.length===32,'invalid domain value "salt"',"domain.salt",r),Y(t)}};function f0(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);P(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const i=Qr(Eg,e?n-1:n),s=e?(i+zh)*Ag:Hh;return function(o){const a=et(o,"value");return P(a>=s&&a<=i,`value out-of-bounds for ${r}`,"value",a),Ir(e?Gc(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return P(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const i=lt(n);return P(i.length===e,`invalid length for ${r}`,"value",n),vg(n)}}}switch(r){case"address":return function(t){return Ge(Et(t),32)};case"bool":return function(t){return t?Bg:Cg};case"bytes":return function(t){return Mt(t)};case"string":return function(t){return wi(t)}}return null}function fl(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function Ko(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}var go,Ln,ps,Fa,Gh;const Se=class Se{constructor(t){U(this,Fa);O(this,"primaryType");U(this,go);U(this,Ln);U(this,ps);F(this,Ln,new Map),F(this,ps,new Map);const e=new Map,n=new Map,i=new Map,s={};Object.keys(t).forEach(c=>{s[c]=t[c].map(({name:u,type:l})=>{let{base:f,index:d}=Ko(l);return f==="int"&&!t.int&&(f="int256"),f==="uint"&&!t.uint&&(f="uint256"),{name:u,type:f+(d||"")}}),e.set(c,new Set),n.set(c,[]),i.set(c,new Set)}),F(this,go,JSON.stringify(s));for(const c in s){const u=new Set;for(const l of s[c]){P(!u.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(c)}`,"types",t),u.add(l.name);const f=Ko(l.type).base;P(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",t),!f0(f)&&(P(n.has(f),`unknown type ${JSON.stringify(f)}`,"types",t),n.get(f).push(c),e.get(c).add(f))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);P(o.length!==0,"missing primary type","types",t),P(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),ot(this,{primaryType:o[0]});function a(c,u){P(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),u.add(c);for(const l of e.get(c))if(n.has(l)){a(l,u);for(const f of u)i.get(f).add(l)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of i){const l=Array.from(u);l.sort(),y(this,Ln).set(c,fl(c,s[c])+l.map(f=>fl(f,s[f])).join(""))}}get types(){return JSON.parse(y(this,go))}getEncoder(t){let e=y(this,ps).get(t);return e||(e=j(this,Fa,Gh).call(this,t),y(this,ps).set(t,e)),e}encodeType(t){const e=y(this,Ln).get(t);return P(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Mt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(f0(t))return n(t,e);const i=Ko(t).array;if(i)return P(i.count===-1||i.count===e.length,`array length mismatch; expected length ${i.count}`,"value",e),e.map(o=>this._visit(i.prefix,o,n));const s=this.types[t];if(s)return s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});P(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Se(t)}static getPrimaryType(t){return Se.from(t).primaryType}static hashStruct(t,e,n){return Se.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const i=ul[n];P(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:i})}return e.sort((n,i)=>l0.indexOf(n.name)-l0.indexOf(i.name)),Se.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return Lt(["0x1901",Se.hashDomain(t),Se.from(e).hash(n)])}static hash(t,e,n){return Mt(Se.encode(t,e,n))}static async resolveNames(t,e,n,i){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const s={};t.verifyingContract&&!Rt(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const o=Se.from(e);o.visit(n,(a,c)=>(a==="address"&&!Rt(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=await i(a);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:t,value:n}}static getPayload(t,e,n){Se.hashDomain(t);const i={},s=[];l0.forEach(c=>{const u=t[c];u!=null&&(i[c]=Fg[c](u),s.push({name:c,type:ul[c]}))});const o=Se.from(e);e=o.types;const a=Object.assign({},e);return P(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return Y(lt(u));if(c.match(/^u?int/))return et(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return P(typeof u=="string","invalid string","value",u),u}P(!1,"unsupported type","type",c)})}}};go=new WeakMap,Ln=new WeakMap,ps=new WeakMap,Fa=new WeakSet,Gh=function(t){{const i=f0(t);if(i)return i}const e=Ko(t).array;if(e){const i=e.prefix,s=this.getEncoder(i);return o=>{P(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(s);return y(this,Ln).has(i)&&(a=a.map(Mt)),Mt(Lt(a))}}const n=this.types[t];if(n){const i=wi(y(this,Ln).get(t));return s=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(s[a]);return y(this,Ln).has(c)?Mt(u):u});return o.unshift(i),Lt(o)}}P(!1,`unknown type: ${t}`,"type",t)};let ma=Se;function xe(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const Tg="external public payable override",Ig=xe(Tg.split(" ")),Vh="constant external internal payable private public pure view override",kg=xe(Vh.split(" ")),Qh="constructor error event fallback function receive struct",Wh=xe(Qh.split(" ")),Kh="calldata memory storage payable indexed",Pg=xe(Kh.split(" ")),Dg="tuple returns",Rg=[Qh,Kh,Dg,Vh].join(" "),Sg=xe(Rg.split(" ")),Ng={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Og=new RegExp("^(\\s*)"),Lg=new RegExp("^([0-9]+)"),Ug=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),$h=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),qh=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Zt,Ze,mo,vc;const Ta=class Ta{constructor(t){U(this,mo);U(this,Zt);U(this,Ze);F(this,Zt,0),F(this,Ze,t.slice())}get offset(){return y(this,Zt)}get length(){return y(this,Ze).length-y(this,Zt)}clone(){return new Ta(y(this,Ze))}reset(){F(this,Zt,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=j(this,mo,vc).call(this,y(this,Zt)+1,t.match+1);return F(this,Zt,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;y(this,Zt)<t.match-1;){const n=this.peek().linkNext;e.push(j(this,mo,vc).call(this,y(this,Zt)+1,n)),F(this,Zt,n)}return F(this,Zt,t.match+1),e}peek(){if(y(this,Zt)>=y(this,Ze).length)throw new Error("out-of-bounds");return y(this,Ze)[y(this,Zt)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Gs(this,Zt)._++,t}toString(){const t=[];for(let e=y(this,Zt);e<y(this,Ze).length;e++){const n=y(this,Ze)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};Zt=new WeakMap,Ze=new WeakMap,mo=new WeakSet,vc=function(t=0,e=0){return new Ta(y(this,Ze).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let rn=Ta;function Rr(r){const t=[],e=o=>{const a=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let n=[],i=[],s=0;for(;s<r.length;){let o=r.substring(s),a=o.match(Og);a&&(s+=a[1].length,o=r.substring(s));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(c);let u=Ng[o[0]]||"";if(u){if(c.type=u,c.text=o[0],s++,u==="OPEN_PAREN")n.push(t.length-1),i.push(t.length-1);else if(u=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=i.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=i.pop(),t[c.linkBack].linkNext=t.length-1,i.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const f=t.pop().text;l=f+l,t[t.length-1].value=ft(f)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=l}continue}if(a=o.match(Ug),a){if(c.text=a[1],s+=c.text.length,Sg.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(qh)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Lg),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new rn(t.map(o=>Object.freeze(o)))}function hl(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Ga(r,t){if(t.peekKeyword(Wh)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function Kn(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function Jh(r){let t=Kn(r,kg);return hl(t,xe("constant payable nonpayable".split(" "))),hl(t,xe("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Wn(r,t){return r.popParams().map(e=>te.from(e,t))}function jh(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return et(r.pop().text);throw new Error("invalid gas")}return null}function bi(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const _g=new RegExp(/^(.*)\[([0-9]*)\]$/);function dl(r){const t=r.match(qh);if(P(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);P(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);P(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const _t={},Ee=Symbol.for("_ethers_internal"),pl="_ParamTypeInternal",xl="_ErrorInternal",yl="_EventInternal",gl="_ConstructorInternal",ml="_FallbackInternal",wl="_FunctionInternal",bl="_StructInternal";var xs,ta;const Ne=class Ne{constructor(t,e,n,i,s,o,a,c){U(this,xs);O(this,"name");O(this,"type");O(this,"baseType");O(this,"indexed");O(this,"components");O(this,"arrayLength");O(this,"arrayChildren");if(Fo(t,_t,"ParamType"),Object.defineProperty(this,Ee,{value:pl}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ot(this,{name:e,type:n,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(t)))),JSON.stringify(i)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(i=>n.arrayChildren.walk(i,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((i,s)=>n.components[s].walk(i,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],i=[t];return j(this,xs,ta).call(this,n,t,e,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(t,e){if(Ne.isParamType(t))return t;if(typeof t=="string")try{return Ne.from(Rr(t),e)}catch{P(!1,"invalid param type","obj",t)}else if(t instanceof rn){let a="",c="",u=null;Kn(t,xe(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(m=>Ne.from(m)),a=`tuple(${u.map(m=>m.format()).join(",")})`):(a=dl(t.popType("TYPE")),c=a);let l=null,f=null;for(;t.length&&t.peekType("BRACKET");){const m=t.pop();l=new Ne(_t,"",a,c,null,u,f,l),f=m.value,a+=m.text,c="array",u=null}let d=null;if(Kn(t,Pg).has("indexed")){if(!e)throw new Error("");d=!0}const g=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Ne(_t,g,a,c,d,u,f,l)}const n=t.name;P(!n||typeof n=="string"&&n.match($h),"invalid name","obj.name",n);let i=t.indexed;i!=null&&(P(e,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,o=s.match(_g);if(o){const a=parseInt(o[2]||"-1"),c=Ne.from({type:o[1],components:t.components});return new Ne(_t,n||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=t.components!=null?t.components.map(u=>Ne.from(u)):null;return new Ne(_t,n||"",s,"tuple",i,a,null,null)}return s=dl(t.type),new Ne(_t,n||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[Ee]===pl}};xs=new WeakSet,ta=function(t,e,n,i){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,u)=>{var l;j(l=o,xs,ta).call(l,t,c,n,f=>{a[u]=f})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var l;j(l=o[u],xs,ta).call(l,t,c,n,f=>{a[u]=f})}),i(a);return}const s=n(this.type,e);s.then?t.push(async function(){i(await s)}()):i(s)};let te=Ne;class Ai{constructor(t,e,n){O(this,"type");O(this,"inputs");Fo(t,_t,"Fragment"),n=Object.freeze(n.slice()),ot(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Ai.from(JSON.parse(t))}catch{}return Ai.from(Rr(t))}if(t instanceof rn)switch(t.peekKeyword(Wh)){case"constructor":return Qn.from(t);case"error":return be.from(t);case"event":return wn.from(t);case"fallback":case"receive":return Dn.from(t);case"function":return bn.from(t);case"struct":return yi.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return Qn.from(t);case"error":return be.from(t);case"event":return wn.from(t);case"fallback":case"receive":return Dn.from(t);case"function":return bn.from(t);case"struct":return yi.from(t)}$(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}P(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Qn.isFragment(t)}static isError(t){return be.isFragment(t)}static isEvent(t){return wn.isFragment(t)}static isFunction(t){return bn.isFragment(t)}static isStruct(t){return yi.isFragment(t)}}class Va extends Ai{constructor(e,n,i,s){super(e,n,s);O(this,"name");P(typeof i=="string"&&i.match($h),"invalid identifier","name",i),s=Object.freeze(s.slice()),ot(this,{name:i})}}function ao(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class be extends Va{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,Ee,{value:xl})}get selector(){return wi(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+ao(t,this.inputs)),e.join(" ")}static from(t){if(be.isFragment(t))return t;if(typeof t=="string")return be.from(Rr(t));if(t instanceof rn){const e=Ga("error",t),n=Wn(t);return bi(t),new be(_t,e,n)}return new be(_t,t.name,t.inputs?t.inputs.map(te.from):[])}static isFragment(t){return t&&t[Ee]===xl}}class wn extends Va{constructor(e,n,i,s){super(e,"event",n,i);O(this,"anonymous");Object.defineProperty(this,Ee,{value:yl}),ot(this,{anonymous:s})}get topicHash(){return wi(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+ao(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(s=>te.from(s)),new wn(_t,e,n,!1).topicHash}static from(e){if(wn.isFragment(e))return e;if(typeof e=="string")try{return wn.from(Rr(e))}catch{P(!1,"invalid event fragment","obj",e)}else if(e instanceof rn){const n=Ga("event",e),i=Wn(e,!0),s=!!Kn(e,xe(["anonymous"])).has("anonymous");return bi(e),new wn(_t,n,i,s)}return new wn(_t,e.name,e.inputs?e.inputs.map(n=>te.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Ee]===yl}}class Qn extends Ai{constructor(e,n,i,s,o){super(e,n,i);O(this,"payable");O(this,"gas");Object.defineProperty(this,Ee,{value:gl}),ot(this,{payable:s,gas:o})}format(e){if($(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});const n=[`constructor${ao(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(Qn.isFragment(e))return e;if(typeof e=="string")try{return Qn.from(Rr(e))}catch{P(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof rn){Kn(e,xe(["constructor"]));const n=Wn(e),i=!!Kn(e,Ig).has("payable"),s=jh(e);return bi(e),new Qn(_t,"constructor",n,i,s)}return new Qn(_t,"constructor",e.inputs?e.inputs.map(te.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ee]===gl}}class Dn extends Ai{constructor(e,n,i){super(e,"fallback",n);O(this,"payable");Object.defineProperty(this,Ee,{value:ml}),ot(this,{payable:i})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(e){if(Dn.isFragment(e))return e;if(typeof e=="string")try{return Dn.from(Rr(e))}catch{P(!1,"invalid fallback fragment","obj",e)}else if(e instanceof rn){const n=e.toString(),i=e.peekKeyword(xe(["fallback","receive"]));if(P(i,"type must be fallback or receive","obj",n),e.popKeyword(xe(["fallback","receive"]))==="receive"){const c=Wn(e);return P(c.length===0,"receive cannot have arguments","obj.inputs",c),Kn(e,xe(["payable"])),bi(e),new Dn(_t,[],!0)}let o=Wn(e);o.length?P(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[te.from("bytes")];const a=Jh(e);if(P(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Kn(e,xe(["returns"])).has("returns")){const c=Wn(e);P(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return bi(e),new Dn(_t,o,a==="payable")}if(e.type==="receive")return new Dn(_t,[],!0);if(e.type==="fallback"){const n=[te.from("bytes")],i=e.stateMutability==="payable";return new Dn(_t,n,i)}P(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Ee]===ml}}class bn extends Va{constructor(e,n,i,s,o,a){super(e,"function",n,s);O(this,"constant");O(this,"outputs");O(this,"stateMutability");O(this,"payable");O(this,"gas");Object.defineProperty(this,Ee,{value:wl}),o=Object.freeze(o.slice()),ot(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return wi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e))),outputs:this.outputs.map(i=>JSON.parse(i.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+ao(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(ao(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(s=>te.from(s)),new bn(_t,e,"view",n,[],null).selector}static from(e){if(bn.isFragment(e))return e;if(typeof e=="string")try{return bn.from(Rr(e))}catch{P(!1,"invalid function fragment","obj",e)}else if(e instanceof rn){const i=Ga("function",e),s=Wn(e),o=Jh(e);let a=[];Kn(e,xe(["returns"])).has("returns")&&(a=Wn(e));const c=jh(e);return bi(e),new bn(_t,i,o,s,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new bn(_t,e.name,n,e.inputs?e.inputs.map(te.from):[],e.outputs?e.outputs.map(te.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ee]===wl}}class yi extends Va{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,Ee,{value:bl})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return yi.from(Rr(t))}catch{P(!1,"invalid struct fragment","obj",t)}else if(t instanceof rn){const e=Ga("struct",t),n=Wn(t);return bi(t),new yi(_t,e,n)}return new yi(_t,t.name,t.inputs?t.inputs.map(te.from):[])}static isFragment(t){return t&&t[Ee]===bl}}const sn=new Map;sn.set(0,"GENERIC_PANIC");sn.set(1,"ASSERT_FALSE");sn.set(17,"OVERFLOW");sn.set(18,"DIVIDE_BY_ZERO");sn.set(33,"ENUM_RANGE_ERROR");sn.set(34,"BAD_STORAGE_DATA");sn.set(49,"STACK_UNDERFLOW");sn.set(50,"ARRAY_RANGE_ERROR");sn.set(65,"OUT_OF_MEMORY");sn.set(81,"UNINITIALIZED_FUNCTION_CALL");const Mg=new RegExp(/^bytes([0-9]*)$/),Hg=new RegExp(/^(u?int)([0-9]*)$/);let h0=null,Al=1024;function zg(r,t,e,n){let i="missing revert data",s=null;const o=null;let a=null;if(e){i="execution reverted";const u=lt(e);if(e=Y(e),u.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(u.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Y(u.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Y(u.slice(0,4))==="0x4e487b71")try{const l=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[l]},s=`Panic due to ${sn.get(l)||"UNKNOWN"}(${l})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:t.to?Et(t.to):null,data:t.data||"0x"};return t.from&&(c.from=Et(t.from)),Ot(i,"CALL_EXCEPTION",{action:r,data:e,reason:s,transaction:c,invocation:o,revert:a})}var dr,Ni;const Ia=class Ia{constructor(){U(this,dr)}getDefaultValue(t){const e=t.map(i=>j(this,dr,Ni).call(this,te.from(i)));return new Wo(e,"_").defaultValue()}encode(t,e){Ef(e.length,t.length,"types/values length mismatch");const n=t.map(o=>j(this,dr,Ni).call(this,te.from(o))),i=new Wo(n,"_"),s=new uc;return i.encode(s,e),s.data}decode(t,e,n){const i=t.map(o=>j(this,dr,Ni).call(this,te.from(o)));return new Wo(i,"_").decode(new lc(e,n,Al))}static _setDefaultMaxInflation(t){P(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Al=t}static defaultAbiCoder(){return h0==null&&(h0=new Ia),h0}static getBuiltinCallException(t,e,n){return zg(t,e,n,Ia.defaultAbiCoder())}};dr=new WeakSet,Ni=function(t){if(t.isArray())return new ey(j(this,dr,Ni).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Wo(t.components.map(n=>j(this,dr,Ni).call(this,n)),t.name);switch(t.baseType){case"address":return new Xx(t.name);case"bool":return new ny(t.name);case"string":return new fy(t.name);case"bytes":return new ry(t.name);case"":return new oy(t.name)}let e=t.type.match(Hg);if(e){let n=parseInt(e[2]||"256");return P(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new ly(n/8,e[1]==="int",t.name)}if(e=t.type.match(Mg),e){let n=parseInt(e[1]);return P(n!==0&&n<=32,"invalid bytes length","param",t),new iy(n,t.name)}P(!1,"invalid type","type",t.type)};let co=Ia;class Gg{constructor(t,e,n){O(this,"fragment");O(this,"name");O(this,"signature");O(this,"topic");O(this,"args");const i=t.name,s=t.format();ot(this,{fragment:t,name:i,signature:s,topic:e,args:n})}}class Vg{constructor(t,e,n,i){O(this,"fragment");O(this,"name");O(this,"args");O(this,"signature");O(this,"selector");O(this,"value");const s=t.name,o=t.format();ot(this,{fragment:t,name:s,args:n,signature:o,selector:e,value:i})}}class Qg{constructor(t,e,n){O(this,"fragment");O(this,"name");O(this,"args");O(this,"signature");O(this,"selector");const i=t.name,s=t.format();ot(this,{fragment:t,name:i,args:n,signature:s,selector:e})}}class El{constructor(t){O(this,"hash");O(this,"_isIndexed");ot(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const vl={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Bl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&vl[r.toString()]&&(t=vl[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};var dn,pn,xn,ie,Cn,ea,na;const Gr=class Gr{constructor(t){U(this,Cn);O(this,"fragments");O(this,"deploy");O(this,"fallback");O(this,"receive");U(this,dn);U(this,pn);U(this,xn);U(this,ie);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,F(this,xn,new Map),F(this,dn,new Map),F(this,pn,new Map);const n=[];for(const o of e)try{n.push(Ai.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ot(this,{fragments:Object.freeze(n)});let i=null,s=!1;F(this,ie,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ot(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(P(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=y(this,xn);break;case"event":c=y(this,pn);break;case"error":c=y(this,dn);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||ot(this,{deploy:Qn.from("constructor()")}),ot(this,{fallback:i,receive:s})}format(t){const e=t?"minimal":"full";return this.fragments.map(i=>i.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return co.defaultAbiCoder()}getFunctionName(t){const e=j(this,Cn,ea).call(this,t,null,!1);return P(e,"no matching function","key",t),e.name}hasFunction(t){return!!j(this,Cn,ea).call(this,t,null,!1)}getFunction(t,e){return j(this,Cn,ea).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(y(this,xn).keys());e.sort((n,i)=>n.localeCompare(i));for(let n=0;n<e.length;n++){const i=e[n];t(y(this,xn).get(i),n)}}getEventName(t){const e=j(this,Cn,na).call(this,t,null,!1);return P(e,"no matching event","key",t),e.name}hasEvent(t){return!!j(this,Cn,na).call(this,t,null,!1)}getEvent(t,e){return j(this,Cn,na).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(y(this,pn).keys());e.sort((n,i)=>n.localeCompare(i));for(let n=0;n<e.length;n++){const i=e[n];t(y(this,pn).get(i),n)}}getError(t,e){if(Rt(t)){const i=t.toLowerCase();if(Bl[i])return be.from(Bl[i].signature);for(const s of y(this,dn).values())if(i===s.selector)return s;return null}if(t.indexOf("(")===-1){const i=[];for(const[s,o]of y(this,dn))s.split("(")[0]===t&&i.push(o);if(i.length===0)return t==="Error"?be.from("error Error(string)"):t==="Panic"?be.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");P(!1,`ambiguous error description (i.e. ${s})`,"name",t)}return i[0]}if(t=be.from(t).format(),t==="Error(string)")return be.from("error Error(string)");if(t==="Panic(uint256)")return be.from("error Panic(uint256)");const n=y(this,dn).get(t);return n||null}forEachError(t){const e=Array.from(y(this,dn).keys());e.sort((n,i)=>n.localeCompare(i));for(let n=0;n<e.length;n++){const i=e[n];t(y(this,dn).get(i),n)}}_decodeParams(t,e){return y(this,ie).decode(t,e)}_encodeParams(t,e){return y(this,ie).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);P(n,"unknown error","fragment",t),t=n}return P(Ht(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,Ht(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);P(n,"unknown error","fragment",t),t=n}return Lt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);P(n,"unknown function","fragment",t),t=n}return P(Ht(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,Ht(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);P(n,"unknown function","fragment",t),t=n}return Lt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const s=this.getFunction(t);P(s,"unknown function","fragment",t),t=s}let n="invalid length for result data";const i=he(e);if(i.length%32===0)try{return y(this,ie).decode(t.outputs,i)}catch{n="could not decode result data"}$(!1,n,"BAD_DATA",{value:Y(i),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=lt(t,"data"),i=co.getBuiltinCallException("call",e,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Y(n.slice(0,4)),c=this.getError(a);if(c)try{const u=y(this,ie).decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:u},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);P(n,"unknown function","fragment",t),t=n}return Y(y(this,ie).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const s=this.getEvent(t);P(s,"unknown event","eventFragment",t),t=s}$(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const i=(s,o)=>s.type==="string"?wi(o):s.type==="bytes"?Mt(Y(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Ir(o):s.type.match(/^bytes/)?o=Cf(o,32):s.type==="address"&&y(this,ie).encode(["address"],[o]),Ge(Y(o),32));for(e.forEach((s,o)=>{const a=t.inputs[o];if(!a.indexed){P(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?P(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);P(o,"unknown event","eventFragment",t),t=o}const n=[],i=[],s=[];return t.anonymous||n.push(t.topicHash),P(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(wi(c));else if(o.type==="bytes")n.push(Mt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(y(this,ie).encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:y(this,ie).encode(i,s),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const x=this.getEvent(t);P(x,"unknown event","eventFragment",t),t=x}if(n!=null&&!t.anonymous){const x=t.topicHash;P(Rt(n[0],32)&&n[0].toLowerCase()===x,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],o=[];t.inputs.forEach((x,g)=>{x.indexed?x.type==="string"||x.type==="bytes"||x.baseType==="tuple"||x.baseType==="array"?(i.push(te.from({type:"bytes32",name:x.name})),o.push(!0)):(i.push(x),o.push(!1)):(s.push(x),o.push(!1))});const a=n!=null?y(this,ie).decode(i,Lt(n)):null,c=y(this,ie).decode(s,e,!0),u=[],l=[];let f=0,d=0;return t.inputs.forEach((x,g)=>{let m=null;if(x.indexed)if(a==null)m=new El(null);else if(o[g])m=new El(a[d++]);else try{m=a[d++]}catch(w){m=w}else try{m=c[f++]}catch(w){m=w}u.push(m),l.push(x.name||null)}),Ds.fromItems(u,l)}parseTransaction(t){const e=lt(t.data,"tx.data"),n=et(t.value!=null?t.value:0,"tx.value"),i=this.getFunction(Y(e.slice(0,4)));if(!i)return null;const s=y(this,ie).decode(i.inputs,e.slice(4));return new Vg(i,i.selector,s,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Gg(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=Y(t),n=this.getError(Ht(e,0,4));if(!n)return null;const i=y(this,ie).decode(n.inputs,Ht(e,4));return new Qg(n,n.selector,i)}static from(t){return t instanceof Gr?t:typeof t=="string"?new Gr(JSON.parse(t)):typeof t.formatJson=="function"?new Gr(t.formatJson()):typeof t.format=="function"?new Gr(t.format("json")):new Gr(t)}};dn=new WeakMap,pn=new WeakMap,xn=new WeakMap,ie=new WeakMap,Cn=new WeakSet,ea=function(t,e,n){if(Rt(t)){const s=t.toLowerCase();for(const o of y(this,xn).values())if(s===o.selector)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,xn))o.split("(")[0]===t&&s.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;ae.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=s.length-1;u>=0;u--){const l=s[u].inputs.length;l!==a&&(!c||l!==a-1)&&s.splice(u,1)}for(let u=s.length-1;u>=0;u--){const l=s[u].inputs;for(let f=0;f<e.length;f++)if(ae.isTyped(e[f])){if(f>=l.length){if(e[f].type==="overrides")continue;s.splice(u,1);break}if(e[f].type!==l[f].baseType){s.splice(u,1);break}}}}if(s.length===1&&e&&e.length!==s[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");P(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return s[0]}const i=y(this,xn).get(bn.from(t).format());return i||null},na=function(t,e,n){if(Rt(t)){const s=t.toLowerCase();for(const o of y(this,pn).values())if(s===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,pn))o.split("(")[0]===t&&s.push(a);if(e){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<e.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<e.length;c++)if(ae.isTyped(e[c])&&e[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");P(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return s[0]}const i=y(this,pn).get(wn.from(t).format());return i||null};let Bc=Gr;const Zh=BigInt(0);function Qi(r){return r??null}function zt(r){return r==null?null:r.toString()}class Cl{constructor(t,e,n){O(this,"gasPrice");O(this,"maxFeePerGas");O(this,"maxPriorityFeePerGas");ot(this,{gasPrice:Qi(t),maxFeePerGas:Qi(e),maxPriorityFeePerGas:Qi(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:zt(t),maxFeePerGas:zt(e),maxPriorityFeePerGas:zt(n)}}}function wa(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=Y(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of e)!(i in r)||r[i]==null||(t[i]=et(r[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in r)||r[i]==null||(t[i]=ft(r[i],`request.${i}`));return r.accessList&&(t.accessList=Bi(r.accessList)),r.authorizationList&&(t.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(i=>zc(i)?Y(i):Object.assign({},i))),t}var Un;class Wg{constructor(t,e){O(this,"provider");O(this,"number");O(this,"hash");O(this,"timestamp");O(this,"parentHash");O(this,"parentBeaconBlockRoot");O(this,"nonce");O(this,"difficulty");O(this,"gasLimit");O(this,"gasUsed");O(this,"stateRoot");O(this,"receiptsRoot");O(this,"blobGasUsed");O(this,"excessBlobGas");O(this,"miner");O(this,"prevRandao");O(this,"extraData");O(this,"baseFeePerGas");U(this,Un);F(this,Un,t.transactions.map(n=>typeof n!="string"?new uo(n,e):n)),ot(this,{provider:e,hash:Qi(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:Qi(t.prevRandao),extraData:t.extraData,baseFeePerGas:Qi(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return y(this,Un).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=y(this,Un).slice();return t.length===0?[]:($(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:f,parentBeaconBlockRoot:d,stateRoot:x,receiptsRoot:g,timestamp:m,transactions:w}=this;return{_type:"Block",baseFeePerGas:zt(t),difficulty:zt(e),extraData:n,gasLimit:zt(i),gasUsed:zt(s),blobGasUsed:zt(this.blobGasUsed),excessBlobGas:zt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:f,timestamp:m,parentBeaconBlockRoot:d,stateRoot:x,receiptsRoot:g,transactions:w}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return y(this,Un).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=y(this,Un)[t];else{const n=t.toLowerCase();for(const i of y(this,Un))if(typeof i=="string"){if(i!==n)continue;e=i;break}else{if(i.hash!==n)continue;e=i;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;P(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Kg(this)}}Un=new WeakMap;class ko{constructor(t,e){O(this,"provider");O(this,"transactionHash");O(this,"blockHash");O(this,"blockNumber");O(this,"removed");O(this,"address");O(this,"data");O(this,"topics");O(this,"index");O(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());ot(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return $(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return $(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return $(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return $g(this)}}var wo;class Yh{constructor(t,e){O(this,"provider");O(this,"to");O(this,"from");O(this,"contractAddress");O(this,"hash");O(this,"index");O(this,"blockHash");O(this,"blockNumber");O(this,"logsBloom");O(this,"gasUsed");O(this,"blobGasUsed");O(this,"cumulativeGasUsed");O(this,"gasPrice");O(this,"blobGasPrice");O(this,"type");O(this,"status");O(this,"root");U(this,wo);F(this,wo,Object.freeze(t.logs.map(i=>new ko(i,e))));let n=Zh;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),ot(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return y(this,wo)}toJSON(){const{to:t,from:e,contractAddress:n,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:l,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:zt(this.cumulativeGasUsed),from:e,gasPrice:zt(this.gasPrice),blobGasUsed:zt(this.blobGasUsed),blobGasPrice:zt(this.blobGasPrice),gasUsed:zt(this.gasUsed),hash:i,index:s,logs:u,logsBloom:c,root:f,status:l,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return td(this)}reorderedEvent(t){return $(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Xh(this,t)}}wo=new WeakMap;var pr;const gu=class gu{constructor(t,e){O(this,"provider");O(this,"blockNumber");O(this,"blockHash");O(this,"index");O(this,"hash");O(this,"type");O(this,"to");O(this,"from");O(this,"nonce");O(this,"gasLimit");O(this,"gasPrice");O(this,"maxPriorityFeePerGas");O(this,"maxFeePerGas");O(this,"maxFeePerBlobGas");O(this,"data");O(this,"value");O(this,"chainId");O(this,"signature");O(this,"accessList");O(this,"blobVersionedHashes");O(this,"authorizationList");U(this,pr);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,F(this,pr,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:i,type:s,to:o,from:a,nonce:c,data:u,signature:l,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:t,blockHash:e,blobVersionedHashes:d,chainId:zt(this.chainId),data:u,from:a,gasLimit:zt(this.gasLimit),gasPrice:zt(this.gasPrice),hash:i,maxFeePerGas:zt(this.maxFeePerGas),maxPriorityFeePerGas:zt(this.maxPriorityFeePerGas),maxFeePerBlobGas:zt(this.maxFeePerBlobGas),nonce:c,signature:l,to:o,index:n,type:s,value:zt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await fe({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,i=e??0;let s=y(this,pr),o=-1,a=s===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:x}=await fe({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(x<this.nonce){s=d;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<y(this,pr)&&(o=y(this,pr)));o<=d;){if(a)return null;const m=await this.provider.getBlock(o,!0);if(m==null)return;for(const w of m)if(w===this.hash)return;for(let w=0;w<m.length;w++){const v=await m.getTransaction(w);if(v.from===this.from&&v.nonce===this.nonce){if(a)return null;const E=await this.provider.getTransactionReceipt(v.hash);if(E==null||d-E.blockNumber+1<n)return;let A="replaced";v.data===this.data&&v.to===this.to&&v.value===this.value?A="repriced":v.data==="0x"&&v.from===v.to&&v.value===Zh&&(A="cancelled"),$(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:A==="replaced"||A==="cancelled",reason:A,replacement:v.replaceableTransaction(s),hash:v.hash,receipt:E})}}o++}},u=d=>{if(d==null||d.status!==0)return d;$(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},l=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(l);if(l){if(n===1||await l.confirmations()>=n)return u(l)}else if(await c(),n===0)return null;return await new Promise((d,x)=>{const g=[],m=()=>{g.forEach(v=>v())};if(g.push(()=>{a=!0}),i>0){const v=setTimeout(()=>{m(),x(Ot("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(v)})}const w=async v=>{if(await v.confirmations()>=n){m();try{d(u(v))}catch(E){x(E)}}};if(g.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),s>=0){const v=async()=>{try{await c()}catch(E){if(Xt(E,"TRANSACTION_REPLACED")){m(),x(E);return}}a||this.provider.once("block",v)};g.push(()=>{this.provider.off("block",v)}),this.provider.once("block",v)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),td(this)}reorderedEvent(t){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),$(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Xh(this,t)}replaceableTransaction(t){P(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new gu(this,this.provider);return F(e,pr,t),e}};pr=new WeakMap;let uo=gu;function Kg(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function Xh(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function td(r){return{orphan:"drop-transaction",tx:r}}function $g(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class eu extends ko{constructor(e,n,i){super(e,e.provider);O(this,"interface");O(this,"fragment");O(this,"args");const s=n.decodeEventLog(i,e.data,e.topics);ot(this,{args:s,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ed extends ko{constructor(e,n){super(e,e.provider);O(this,"error");ot(this,{error:n})}}var ys;class qg extends Yh{constructor(e,n,i){super(i,n);U(this,ys);F(this,ys,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?y(this,ys).getEvent(e.topics[0]):null;if(n)try{return new eu(e,y(this,ys),n)}catch(i){return new ed(e,i)}return e})}}ys=new WeakMap;var bo;class nu extends uo{constructor(e,n,i){super(i,n);U(this,bo);F(this,bo,e)}async wait(e,n){const i=await super.wait(e,n);return i==null?null:new qg(y(this,bo),this.provider,i)}}bo=new WeakMap;class nd extends Ff{constructor(e,n,i,s){super(e,n,i);O(this,"log");ot(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Jg extends nd{constructor(t,e,n,i,s){super(t,e,n,new eu(s,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);ot(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Fl=BigInt(0);function rd(r){return r&&typeof r.call=="function"}function id(r){return r&&typeof r.estimateGas=="function"}function Qa(r){return r&&typeof r.resolveName=="function"}function sd(r){return r&&typeof r.sendTransaction=="function"}function od(r){if(r!=null){if(Qa(r))return r;if(r.provider)return r.provider}}var Ao;class jg{constructor(t,e,n){U(this,Ao);O(this,"fragment");if(ot(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const i=Ei(t.runner,"resolveName"),s=Qa(i)?i:null;F(this,Ao,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(l,f)=>l==="address"?Array.isArray(f)?Promise.all(f.map(d=>pe(d,s))):pe(f,s):f)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return y(this,Ao)}}Ao=new WeakMap;function Ei(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function $r(r){return r==null?null:r.provider||null}async function ad(r,t){const e=ae.dereference(r,"overrides");P(typeof e=="object","invalid overrides parameter","overrides",r);const n=wa(e);return P(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),P(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Zg(r,t,e){const n=Ei(r,"resolveName"),i=Qa(n)?n:null;return await Promise.all(t.map((s,o)=>s.walkAsync(e[o],(a,c)=>(c=ae.dereference(c,a),a==="address"?pe(c,i):c))))}function Yg(r){const t=async function(o){const a=await ad(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await pe(a.from,od(r.runner)));const c=r.interface,u=et(a.value||Fl,"overrides.value")===Fl,l=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&P(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),P(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return P(f||u,"cannot send value to non-payable fallback","overrides.value",a.value),P(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=Ei(r.runner,"call");$(rd(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(u){throw Hc(u)&&u.data?r.interface.makeError(u.data,c):u}},n=async function(o){const a=r.runner;$(sd(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),u=$r(r.runner);return new nu(r.interface,u,c)},i=async function(o){const a=Ei(r.runner,"estimateGas");return $(id(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},s=async o=>await n(o);return ot(s,{_contract:r,estimateGas:i,populateTransaction:t,send:n,staticCall:e}),s}function Xg(r,t){const e=function(...u){const l=r.interface.getFunction(t,u);return $(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),l},n=async function(...u){const l=e(...u);let f={};if(l.inputs.length+1===u.length&&(f=await ad(u.pop()),f.from&&(f.from=await pe(f.from,od(r.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await Zg(r.runner,l.inputs,u);return Object.assign({},f,await fe({to:r.getAddress(),data:r.interface.encodeFunctionData(l,d)}))},i=async function(...u){const l=await a(...u);return l.length===1?l[0]:l},s=async function(...u){const l=r.runner;$(sd(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await l.sendTransaction(await n(...u)),d=$r(r.runner);return new nu(r.interface,d,f)},o=async function(...u){const l=Ei(r.runner,"estimateGas");return $(id(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await n(...u))},a=async function(...u){const l=Ei(r.runner,"call");$(rd(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...u);let d="0x";try{d=await l.call(f)}catch(g){throw Hc(g)&&g.data?r.interface.makeError(g.data,f):g}const x=e(...u);return r.interface.decodeFunctionResult(x,d)},c=async(...u)=>e(...u).constant?await i(...u):await s(...u);return ot(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=r.interface.getFunction(t);return $(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function tm(r,t){const e=function(...i){const s=r.interface.getEvent(t,i);return $(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:i}}),s},n=function(...i){return new jg(r,e(...i),i)};return ot(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(t);return $(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),i}}),n}const ba=Symbol.for("_ethersInternal_contract"),cd=new WeakMap;function em(r,t){cd.set(r[ba],t)}function Ce(r){return cd.get(r[ba])}function nm(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function ru(r,t){let e,n=null;if(Array.isArray(t)){const s=function(o){if(Rt(o,32))return o;const a=r.interface.getEvent(o);return P(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else t==="*"?e=[null]:typeof t=="string"?Rt(t,32)?e=[t]:(n=r.interface.getEvent(t),P(n,"unknown fragment","event",t),e=[n.topicHash]):nm(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):P(!1,"unknown event name","event",t);e=e.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=e.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:n,tag:i,topics:e}}async function Js(r,t){const{subs:e}=Ce(r);return e.get((await ru(r,t)).tag)||null}async function Tl(r,t,e){const n=$r(r.runner);$(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:o}=await ru(r,e),{addr:a,subs:c}=Ce(r);let u=c.get(s);if(!u){const f={address:a||r,topics:o},d=w=>{let v=i;if(v==null)try{v=r.interface.getEvent(w.topics[0])}catch{}if(v){const E=v,A=i?r.interface.decodeEventLog(i,w.data,w.topics):[];Fc(r,e,A,C=>new Jg(r,C,e,E,w))}else Fc(r,e,[],E=>new nd(r,E,e,w))};let x=[];u={tag:s,listeners:[],start:()=>{x.length||x.push(n.on(f,d))},stop:async()=>{if(x.length==0)return;let w=x;x=[],await Promise.all(w),n.off(f,d)}},c.set(s,u)}return u}let Cc=Promise.resolve();async function rm(r,t,e,n){await Cc;const i=await Js(r,t);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Ce(r).subs.delete(i.tag)),s>0}async function Fc(r,t,e,n){try{await Cc}catch{}const i=rm(r,t,e,n);return Cc=i,await i}const $o=["then"];var Af;Af=ba;const Xs=class Xs{constructor(t,e,n,i){O(this,"target");O(this,"interface");O(this,"runner");O(this,"filters");O(this,Af);O(this,"fallback");P(typeof t=="string"||fh(t),"invalid value for Contract target","target",t),n==null&&(n=null);const s=Bc.from(e);ot(this,{target:t,runner:n,interface:s}),Object.defineProperty(this,ba,{value:{}});let o,a=null,c=null;if(i){const f=$r(n);c=new nu(this.interface,f,i)}let u=new Map;if(typeof t=="string")if(Rt(t))a=t,o=Promise.resolve(t);else{const f=Ei(n,"resolveName");if(!Qa(f))throw Ot("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(t).then(d=>{if(d==null)throw Ot("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Ce(this).addr=d,d})}else o=t.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Ce(this).addr=f,f});em(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const l=new Proxy({},{get:(f,d,x)=>{if(typeof d=="symbol"||$o.indexOf(d)>=0)return Reflect.get(f,d,x);try{return this.getEvent(d)}catch(g){if(!Xt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>$o.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return ot(this,{filters:l}),ot(this,{fallback:s.receive||s.fallback?Yg(this):null}),new Proxy(this,{get:(f,d,x)=>{if(typeof d=="symbol"||d in f||$o.indexOf(d)>=0)return Reflect.get(f,d,x);try{return f.getFunction(d)}catch(g){if(!Xt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>typeof d=="symbol"||d in f||$o.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(t){return new Xs(this.target,this.interface,t)}attach(t){return new Xs(t,this.interface,this.runner)}async getAddress(){return await Ce(this).addrPromise}async getDeployedCode(){const t=$r(this.runner);$(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=$r(this.runner);return $(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Ce(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Xg(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),tm(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:i,addrPromise:s}=Ce(this),o=i||await s,{fragment:a,topics:c}=await ru(this,t),u={address:o,topics:c,fromBlock:e,toBlock:n},l=$r(this.runner);return $(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(f=>{let d=a;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new eu(f,this.interface,d)}catch(x){return new ed(f,x)}return new ko(f,l)})}async on(t,e){const n=await Tl(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Tl(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Fc(this,t,e,null)}async listenerCount(t){if(t){const i=await Js(this,t);return i?i.listeners.length:0}const{subs:e}=Ce(this);let n=0;for(const{listeners:i}of e.values())n+=i.length;return n}async listeners(t){if(t){const i=await Js(this,t);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:e}=Ce(this);let n=[];for(const{listeners:i}of e.values())n=n.concat(i.map(({listener:s})=>s));return n}async off(t,e){const n=await Js(this,t);if(!n)return this;if(e){const i=n.listeners.map(({listener:s})=>s).indexOf(e);i>=0&&n.listeners.splice(i,1)}return(e==null||n.listeners.length===0)&&(n.stop(),Ce(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await Js(this,t);if(!e)return this;e.stop(),Ce(this).subs.delete(e.tag)}else{const{subs:e}=Ce(this);for(const{tag:n,stop:i}of e.values())i(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends Xs{constructor(i,s=null){super(i,t,s)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let Tc=Xs;function im(){return Tc}class Tr extends im(){}function d0(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):P(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class sm{constructor(t){O(this,"name");ot(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const ud=new RegExp("^(ipfs)://(.*)$","i"),Il=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ud,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var xr,oi,yr,Oi,ka,ld;const Hi=class Hi{constructor(t,e,n){U(this,yr);O(this,"provider");O(this,"address");O(this,"name");U(this,xr);U(this,oi);ot(this,{provider:t,address:e,name:n}),F(this,xr,null),F(this,oi,new Tr(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return y(this,xr)==null&&F(this,xr,(async()=>{try{return await y(this,oi).supportsInterface("0x9061b923")}catch(t){if(Xt(t,"CALL_EXCEPTION"))return!1;throw F(this,xr,null),t}})()),await y(this,xr)}async getAddress(t){if(t==null&&(t=60),t===60)try{const s=await j(this,yr,Oi).call(this,"addr(bytes32)");return s==null||s===mi?null:s}catch(s){if(Xt(s,"CALL_EXCEPTION"))return null;throw s}if(t>=0&&t<2147483648){let s=t+2147483648;const o=await j(this,yr,Oi).call(this,"addr(bytes32,uint)",[s]);if(Rt(o,20))return Et(o)}let e=null;for(const s of this.provider.plugins)if(s instanceof sm&&s.supportsCoinType(t)){e=s;break}if(e==null)return null;const n=await j(this,yr,Oi).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const i=await e.decodeAddress(t,n);if(i!=null)return i;$(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await j(this,yr,Oi).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await j(this,yr,Oi).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const i=e[1]==="e3010170"?"ipfs":"ipns",s=parseInt(e[4],16);if(e[5].length===s*2)return`${i}://${rp("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;$(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Il.length;n++){const i=e.match(Il[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=d0(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(i[2]||"").split("/");if(c.length!==2)return t.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:t};const u=c[1],l=new Tr(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const m=await l.ownerOf(u);if(a!==m)return t.push({type:"!owner",value:m}),{url:null,linkage:t};t.push({type:"owner",value:m})}else if(s==="erc1155"){const m=await l.balanceOf(a,u);if(!m)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:m.toString()})}let f=await l[o](u);if(f==null||f==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",Ir(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=d0(f)),t.push({type:"metadata-url",value:f});let d={};const x=await new kr(f).send();x.assertOk();try{d=x.bodyJson}catch{try{t.push({type:"!metadata",value:x.bodyText})}catch{const v=x.body;return v&&t.push({type:"!metadata",value:Y(v)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!d)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(d)});let g=d.image;if(typeof g!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(ud)==null)return t.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:g}),g=d0(g)}return t.push({type:"url",value:g}),{linkage:t,url:g}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return $(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var i;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const s=await j(i=Hi,ka,ld).call(i,t,n);if(s!=null){const o=new Hi(t,s,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};xr=new WeakMap,oi=new WeakMap,yr=new WeakSet,Oi=async function(t,e){e=(e||[]).slice();const n=y(this,oi).interface;e.unshift(Ec(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(t),$(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[yg(this.name,255),n.encodeFunctionData(i,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const s=await y(this,oi)[t](...e);return i?n.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Xt(s,"CALL_EXCEPTION"))throw s}return null},ka=new WeakSet,ld=async function(t,e){const n=await Hi.getEnsAddress(t);try{const s=await new Tr(n,["function resolver(bytes32) view returns (address)"],t).resolver(Ec(e),{enableCcipRead:!0});return s===mi?null:s}catch(i){throw i}return null},U(Hi,ka);let Aa=Hi;const kl=BigInt(0);function gt(r,t){return function(e){return e==null?t:r(e)}}function lo(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function Po(r,t){return e=>{const n={};for(const i in r){let s=i;if(t&&i in t&&!(s in e)){for(const o of t[i])if(o in e){s=o;break}}try{const o=r[i](e[s]);o!==void 0&&(n[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";$(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:e})}}return n}}function om(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}P(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function _s(r){return P(Rt(r,!0),"invalid data","value",r),r}function Yt(r){return P(Rt(r,32),"invalid hash","value",r),r}const am=Po({address:Et,blockHash:Yt,blockNumber:ft,data:_s,index:ft,removed:gt(om,!1),topics:lo(Yt),transactionHash:Yt,transactionIndex:ft},{index:["logIndex"]});function cm(r){return am(r)}const um=Po({hash:gt(Yt),parentHash:Yt,parentBeaconBlockRoot:gt(Yt,null),number:ft,timestamp:ft,nonce:gt(_s),difficulty:et,gasLimit:et,gasUsed:et,stateRoot:gt(Yt,null),receiptsRoot:gt(Yt,null),blobGasUsed:gt(et,null),excessBlobGas:gt(et,null),miner:gt(Et),prevRandao:gt(Yt,null),extraData:_s,baseFeePerGas:gt(et)},{prevRandao:["mixHash"]});function lm(r){const t=um(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:fd(e)),t}const fm=Po({transactionIndex:ft,blockNumber:ft,transactionHash:Yt,address:Et,topics:lo(Yt),data:_s,index:ft,blockHash:Yt},{index:["logIndex"]});function hm(r){return fm(r)}const dm=Po({to:gt(Et,null),from:gt(Et,null),contractAddress:gt(Et,null),index:ft,root:gt(Y),gasUsed:et,blobGasUsed:gt(et,null),logsBloom:gt(_s),blockHash:Yt,hash:Yt,logs:lo(hm),blockNumber:ft,cumulativeGasUsed:et,effectiveGasPrice:gt(et),blobGasPrice:gt(et,null),status:gt(ft),type:gt(ft,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function pm(r){return dm(r)}function fd(r){r.to&&et(r.to)===kl&&(r.to="0x0000000000000000000000000000000000000000");const t=Po({hash:Yt,index:gt(ft,void 0),type:e=>e==="0x"||e==null?0:ft(e),accessList:gt(Bi,null),blobVersionedHashes:gt(lo(Yt,!0),null),authorizationList:gt(lo(e=>{let n;if(e.signature)n=e.signature;else{let i=e.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),n=Object.assign({},e,{yParity:i})}return{address:Et(e.address),chainId:et(e.chainId),nonce:et(e.nonce),signature:Ae.from(n)}},!1),null),blockHash:gt(Yt,null),blockNumber:gt(ft,null),transactionIndex:gt(ft,null),from:Et,gasPrice:gt(et),maxPriorityFeePerGas:gt(et),maxFeePerGas:gt(et),maxFeePerBlobGas:gt(et,null),gasLimit:et,to:gt(Et,null),value:et,nonce:ft,data:_s,creates:gt(Et,null),chainId:gt(et,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=Yx(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=Ae.from(r.signature):t.signature=Ae.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&et(t.blockHash)===kl&&(t.blockHash=null),t}const xm="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Do{constructor(t){O(this,"name");ot(this,{name:t})}clone(){return new Do(this.name)}}class Wa extends Do{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);O(this,"effectiveBlock");O(this,"txBase");O(this,"txCreate");O(this,"txDataZero");O(this,"txDataNonzero");O(this,"txAccessListStorageKey");O(this,"txAccessListAddress");const i={effectiveBlock:e};function s(o,a){let c=(n||{})[o];c==null&&(c=a),P(typeof c=="number",`invalud value for ${o}`,"costs",n),i[o]=c}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ot(this,i)}clone(){return new Wa(this.effectiveBlock,this)}}class Ka extends Do{constructor(e,n){super("org.ethers.plugins.network.Ens");O(this,"address");O(this,"targetNetwork");ot(this,{address:e||xm,targetNetwork:n??1})}clone(){return new Ka(this.address,this.targetNetwork)}}var Eo,vo;class ym extends Do{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");U(this,Eo);U(this,vo);F(this,Eo,e),F(this,vo,n)}get url(){return y(this,Eo)}get processFunc(){return y(this,vo)}clone(){return this}}Eo=new WeakMap,vo=new WeakMap;const p0=new Map;var gs,ms,gr;const zi=class zi{constructor(t,e){U(this,gs);U(this,ms);U(this,gr);F(this,gs,t),F(this,ms,et(e)),F(this,gr,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return y(this,gs)}set name(t){F(this,gs,t)}get chainId(){return y(this,ms)}set chainId(t){F(this,ms,et(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===et(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===et(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===et(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(y(this,gr).values())}attachPlugin(t){if(y(this,gr).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return y(this,gr).set(t.name,t.clone()),this}getPlugin(t){return y(this,gr).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new zi(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wa;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let i=2;i<t.data.length;i+=2)t.data.substring(i,i+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const i=Bi(t.accessList);for(const s in i)n+=e.txAccessListAddress+e.txAccessListStorageKey*i[s].storageKeys.length}return n}static from(t){if(gm(),t==null)return zi.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=p0.get(t);if(e)return e();if(typeof t=="bigint")return new zi("unknown",t);P(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){P(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new zi(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Ka(t.ensAddress,t.ensNetwork)),e}P(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=p0.get(t);n&&P(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),p0.set(t,e)}};gs=new WeakMap,ms=new WeakMap,gr=new WeakMap;let vn=zi;function Pl(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function Dl(r){return new ym(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([n.send(),t()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Pl(a.maxFee,9),maxPriorityFeePerGas:Pl(a.maxPriorityFee,9)}}catch(s){$(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:s})}})}let Rl=!1;function gm(){if(Rl)return;Rl=!0;function r(t,e,n){const i=function(){const s=new vn(t,e);return n.ensNetwork!=null&&s.attachPlugin(new Ka(null,n.ensNetwork)),s.attachPlugin(new Wa),(n.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};vn.register(t,i),vn.register(e,i),n.altNames&&n.altNames.forEach(s=>{vn.register(s,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Dl("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Dl("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function Ic(r){return JSON.parse(JSON.stringify(r))}var _n,Ue,mr,yn,ws,ra;class mm{constructor(t){U(this,ws);U(this,_n);U(this,Ue);U(this,mr);U(this,yn);F(this,_n,t),F(this,Ue,null),F(this,mr,4e3),F(this,yn,-2)}get pollingInterval(){return y(this,mr)}set pollingInterval(t){F(this,mr,t)}start(){y(this,Ue)||(F(this,Ue,y(this,_n)._setTimeout(j(this,ws,ra).bind(this),y(this,mr))),j(this,ws,ra).call(this))}stop(){y(this,Ue)&&(y(this,_n)._clearTimeout(y(this,Ue)),F(this,Ue,null))}pause(t){this.stop(),t&&F(this,yn,-2)}resume(){this.start()}}_n=new WeakMap,Ue=new WeakMap,mr=new WeakMap,yn=new WeakMap,ws=new WeakSet,ra=async function(){try{const t=await y(this,_n).getBlockNumber();if(y(this,yn)===-2){F(this,yn,t);return}if(t!==y(this,yn)){for(let e=y(this,yn)+1;e<=t;e++){if(y(this,Ue)==null)return;await y(this,_n).emit("block",e)}F(this,yn,t)}}catch{}y(this,Ue)!=null&&F(this,Ue,y(this,_n)._setTimeout(j(this,ws,ra).bind(this),y(this,mr)))};var ai,ci,wr;class iu{constructor(t){U(this,ai);U(this,ci);U(this,wr);F(this,ai,t),F(this,wr,!1),F(this,ci,e=>{this._poll(e,y(this,ai))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){y(this,wr)||(F(this,wr,!0),y(this,ci).call(this,-2),y(this,ai).on("block",y(this,ci)))}stop(){y(this,wr)&&(F(this,wr,!1),y(this,ai).off("block",y(this,ci)))}pause(t){this.stop()}resume(){this.start()}}ai=new WeakMap,ci=new WeakMap,wr=new WeakMap;var bs,Mn;class wm extends iu{constructor(e,n){super(e);U(this,bs);U(this,Mn);F(this,bs,n),F(this,Mn,-2)}pause(e){e&&F(this,Mn,-2),super.pause(e)}async _poll(e,n){const i=await n.getBlock(y(this,bs));i!=null&&(y(this,Mn)===-2?F(this,Mn,i.number):i.number>y(this,Mn)&&(n.emit(y(this,bs),i.number),F(this,Mn,i.number)))}}bs=new WeakMap,Mn=new WeakMap;var Pa;class bm extends iu{constructor(e,n){super(e);U(this,Pa);F(this,Pa,Ic(n))}async _poll(e,n){throw new Error("@TODO")}}Pa=new WeakMap;var As;class Am extends iu{constructor(e,n){super(e);U(this,As);F(this,As,n)}async _poll(e,n){const i=await n.getTransactionReceipt(y(this,As));i&&n.emit(y(this,As),i)}}As=new WeakMap;var Hn,Es,vs,br,_e,Da,hd;class su{constructor(t,e){U(this,Da);U(this,Hn);U(this,Es);U(this,vs);U(this,br);U(this,_e);F(this,Hn,t),F(this,Es,Ic(e)),F(this,vs,j(this,Da,hd).bind(this)),F(this,br,!1),F(this,_e,-2)}start(){y(this,br)||(F(this,br,!0),y(this,_e)===-2&&y(this,Hn).getBlockNumber().then(t=>{F(this,_e,t)}),y(this,Hn).on("block",y(this,vs)))}stop(){y(this,br)&&(F(this,br,!1),y(this,Hn).off("block",y(this,vs)))}pause(t){this.stop(),t&&F(this,_e,-2)}resume(){this.start()}}Hn=new WeakMap,Es=new WeakMap,vs=new WeakMap,br=new WeakMap,_e=new WeakMap,Da=new WeakSet,hd=async function(t){if(y(this,_e)===-2)return;const e=Ic(y(this,Es));e.fromBlock=y(this,_e)+1,e.toBlock=t;const n=await y(this,Hn).getLogs(e);if(n.length===0){y(this,_e)<t-60&&F(this,_e,t-60);return}for(const i of n)y(this,Hn).emit(y(this,Es),i),F(this,_e,i.blockNumber)};const Em=BigInt(2),vm=10;function qo(r){return r&&typeof r.then=="function"}function ia(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((s,o)=>(s[o]=n[o],s),{})}return n})}class dd{constructor(t){O(this,"name");ot(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Bm(r){return JSON.parse(JSON.stringify(r))}function kc(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function x0(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Rt(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:ia("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:ia("orphan",e),filter:Bm(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(i=>i==null?null:Array.isArray(i)?kc(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(e.address){const i=[],s=[],o=a=>{Rt(a)?i.push(a):s.push((async()=>{i.push(await pe(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),s.length&&await Promise.all(s),n.address=kc(i.map(a=>a.toLowerCase()))}return{filter:n,tag:ia("event",n),type:"event"}}P(!1,"unknown ProviderEvent","event",r)}function y0(){return new Date().getTime()}const Cm={cacheTimeout:250,pollingInterval:4e3};var se,Ar,oe,Bs,ke,ui,Er,zn,Bo,Me,Cs,Fs,pt,Be,Pc,Dc,js,Rc,Zs,sa;class Fm{constructor(t,e){U(this,pt);U(this,se);U(this,Ar);U(this,oe);U(this,Bs);U(this,ke);U(this,ui);U(this,Er);U(this,zn);U(this,Bo);U(this,Me);U(this,Cs);U(this,Fs);if(F(this,Fs,Object.assign({},Cm,e||{})),t==="any")F(this,ui,!0),F(this,ke,null);else if(t){const n=vn.from(t);F(this,ui,!1),F(this,ke,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else F(this,ui,!1),F(this,ke,null);F(this,zn,-1),F(this,Er,new Map),F(this,se,new Map),F(this,Ar,new Map),F(this,oe,null),F(this,Bs,!1),F(this,Bo,1),F(this,Me,new Map),F(this,Cs,!1)}get pollingInterval(){return y(this,Fs).pollingInterval}get provider(){return this}get plugins(){return Array.from(y(this,Ar).values())}attachPlugin(t){if(y(this,Ar).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return y(this,Ar).set(t.name,t.connect(this)),this}getPlugin(t){return y(this,Ar).get(t)||null}get disableCcipRead(){return y(this,Cs)}set disableCcipRead(t){F(this,Cs,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const i=t.to.toLowerCase(),s=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",i).replace("{data}",s),l=new kr(u);c.indexOf("{data}")===-1&&(l.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:a,urls:n});let f="unknown error",d;try{d=await l.send()}catch(x){o.push(x.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:x}});continue}try{const x=d.bodyJson;if(x.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:x}),x.data;x.message&&(f=x.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:x})}catch{}$(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:f}}),o.push(f)}$(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new Wg(lm(t),this)}_wrapLog(t,e){return new ko(cm(t),this)}_wrapTransactionReceipt(t,e){return new Yh(pm(t),this)}_wrapTransactionResponse(t,e){return new uo(fd(t),this)}_detectNetwork(){$(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){$(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=ft(await j(this,pt,Be).call(this,{method:"getBlockNumber"}),"%response");return y(this,zn)>=0&&F(this,zn,t),t}_getAddress(t){return pe(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(Rt(t))return Rt(t,32)?t:Xe(t);if(typeof t=="bigint"&&(t=ft(t,"blockTag")),typeof t=="number")return t>=0?Xe(t):y(this,zn)>=0?Xe(y(this,zn)+t):this.getBlockNumber().then(e=>Xe(e+t));P(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?kc(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,i=(c,u,l)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(u!=null||l!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),e.length&&(d.topics=e),u&&(d.fromBlock=u),l&&(d.toBlock=l),n&&(d.blockHash=n),d};let s=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)s.push(this._getAddress(c));else s.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(c=>i(c[0],c[1],c[2])):i(s,o,a)}_getTransactionRequest(t){const e=wa(t),n=[];if(["to","from"].forEach(i=>{if(e[i]==null)return;const s=pe(e[i],this);qo(s)?n.push(async function(){e[i]=await s}()):e[i]=s}),e.blockTag!=null){const i=this._getBlockTag(e.blockTag);qo(i)?n.push(async function(){e.blockTag=await i}()):e.blockTag=i}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(y(this,ke)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw y(this,ke)===i&&F(this,ke,null),s}})();return F(this,ke,i),(await i).clone()}const t=y(this,ke),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(y(this,ui)?(this.emit("network",n,e),y(this,ke)===t&&F(this,ke,Promise.resolve(n))):$(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await fe({_block:j(this,pt,Rc).call(this,"latest",!1),gasPrice:(async()=>{try{const l=await j(this,pt,Be).call(this,{method:"getGasPrice"});return et(l,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const l=await j(this,pt,Be).call(this,{method:"getPriorityFee"});return et(l,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(i,t);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*Em+c),new Cl(s,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new kr(n.url),s=await n.processFunc(e,this,i);return new Cl(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return qo(e)&&(e=await e),et(await j(this,pt,Be).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await fe({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await j(this,pt,Dc).call(this,j(this,pt,Pc).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return et(await j(this,pt,js).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return ft(await j(this,pt,js).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return Y(await j(this,pt,js).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const i=et(e,"position");return Y(await j(this,pt,js).call(this,{method:"getStorage",position:i},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:i}=await fe({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=ha.from(t);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:i}=await fe({network:this.getNetwork(),params:j(this,pt,Rc).call(this,t,!!e)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(t){const{network:e,params:n}=await fe({network:this.getNetwork(),params:j(this,pt,Be).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await fe({network:this.getNetwork(),params:j(this,pt,Be).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await j(this,pt,Be).call(this,{method:"getTransaction",hash:t});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await fe({network:this.getNetwork(),result:j(this,pt,Be).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:Y(e)}async getLogs(t){let e=this._getFilter(t);qo(e)&&(e=await e);const{network:n,params:i}=await fe({network:this.getNetwork(),params:j(this,pt,Be).call(this,{method:"getLogs",filter:e})});return i.map(s=>this._wrapLog(s,n))}_getProvider(t){$(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Aa.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=Et(t);const e=Ec(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await Aa.getEnsAddress(this),s=await new Tr(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(s==null||s===mi)return null;const a=await new Tr(s,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(Xt(n,"BAD_DATA")&&n.value==="0x"||Xt(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const i=e??1;return i===0?this.getTransactionReceipt(t):new Promise(async(s,o)=>{let a=null;const c=async u=>{try{const l=await this.getTransactionReceipt(t);if(l!=null&&u-l.blockNumber+1>=i){s(l),a&&(clearTimeout(a),a=null);return}}catch(l){console.log("EEE",l)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Ot("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){$(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=y(this,Me).get(t);e&&(e.timer&&clearTimeout(e.timer),y(this,Me).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=Gs(this,Bo)._++,i=()=>{y(this,Me).delete(n),t()};if(this.paused)y(this,Me).set(n,{timer:null,func:i,time:e});else{const s=setTimeout(i,e);y(this,Me).set(n,{timer:s,func:i,time:y0()})}return n}_forEachSubscriber(t){for(const e of y(this,se).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new dd(t.type);case"block":{const e=new mm(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new wm(this,t.type);case"event":return new su(this,t.filter);case"transaction":return new Am(this,t.hash);case"orphan":return new bm(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of y(this,se).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),y(this,oe)!=null&&e.pause(y(this,oe));break}}async on(t,e){const n=await j(this,pt,sa).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,y(this,oe)!=null&&n.subscriber.pause(y(this,oe))),this}async once(t,e){const n=await j(this,pt,sa).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,y(this,oe)!=null&&n.subscriber.pause(y(this,oe))),this}async emit(t,...e){const n=await j(this,pt,Zs).call(this,t,e);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:s,once:o})=>{const a=new Ff(this,o?null:s,t);try{s.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),y(this,se).delete(n.tag)),i>0}async listenerCount(t){if(t){const n=await j(this,pt,Zs).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of y(this,se).values())e+=n.length;return e}async listeners(t){if(t){const n=await j(this,pt,Zs).call(this,t);return n?n.listeners.map(({listener:i})=>i):[]}let e=[];for(const{listeners:n}of y(this,se).values())e=e.concat(n.map(({listener:i})=>i));return e}async off(t,e){const n=await j(this,pt,Zs).call(this,t);if(!n)return this;if(e){const i=n.listeners.map(({listener:s})=>s).indexOf(e);i>=0&&n.listeners.splice(i,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),y(this,se).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:i}=await j(this,pt,sa).call(this,t);n&&i.stop(),y(this,se).delete(e)}else for(const[e,{started:n,subscriber:i}]of y(this,se))n&&i.stop(),y(this,se).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return y(this,Bs)}destroy(){this.removeAllListeners();for(const t of y(this,Me).keys())this._clearTimeout(t);F(this,Bs,!0)}get paused(){return y(this,oe)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(F(this,zn,-1),y(this,oe)!=null){if(y(this,oe)==!!t)return;$(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),F(this,oe,!!t);for(const e of y(this,Me).values())e.timer&&clearTimeout(e.timer),e.time=y0()-e.time}resume(){if(y(this,oe)!=null){this._forEachSubscriber(t=>t.resume()),F(this,oe,null);for(const t of y(this,Me).values()){let e=t.time;e<0&&(e=0),t.time=y0(),setTimeout(t.func,e)}}}}se=new WeakMap,Ar=new WeakMap,oe=new WeakMap,Bs=new WeakMap,ke=new WeakMap,ui=new WeakMap,Er=new WeakMap,zn=new WeakMap,Bo=new WeakMap,Me=new WeakMap,Cs=new WeakMap,Fs=new WeakMap,pt=new WeakSet,Be=async function(t){const e=y(this,Fs).cacheTimeout;if(e<0)return await this._perform(t);const n=ia(t.method,t);let i=y(this,Er).get(n);return i||(i=this._perform(t),y(this,Er).set(n,i),setTimeout(()=>{y(this,Er).get(n)===i&&y(this,Er).delete(n)},e)),await i},Pc=async function(t,e,n){$(n<vm,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const i=wa(t);try{return Y(await this._perform({method:"call",transaction:i,blockTag:e}))}catch(s){if(!this.disableCcipRead&&Hc(s)&&s.data&&n>=0&&e==="latest"&&i.to!=null&&Ht(s.data,0,4)==="0x556f1830"){const o=s.data,a=await pe(i.to,this);let c;try{c=Dm(Ht(s.data,4))}catch(f){$(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}$(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(i,c.calldata,c.urls);$(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const l={to:a,data:Lt([c.selector,Pm([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const f=await j(this,pt,Pc).call(this,l,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:f}),f}}throw s}},Dc=async function(t){const{value:e}=await fe({network:this.getNetwork(),value:t});return e},js=async function(t,e,n){let i=this._getAddress(e),s=this._getBlockTag(n);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await j(this,pt,Dc).call(this,j(this,pt,Be).call(this,Object.assign(t,{address:i,blockTag:s})))},Rc=async function(t,e){if(Rt(t,32))return await j(this,pt,Be).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await j(this,pt,Be).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},Zs=async function(t,e){let n=await x0(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await x0({orphan:"drop-log",log:e[0]},this)),y(this,se).get(n.tag)||null},sa=async function(t){const e=await x0(t,this),n=e.tag;let i=y(this,se).get(n);return i||(i={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},y(this,se).set(n,i)),i};function Tm(r,t){try{const e=Sc(r,t);if(e)return ua(e)}catch{}return null}function Sc(r,t){if(r==="0x")return null;try{const e=ft(Ht(r,t,t+32)),n=ft(Ht(r,e,e+32));return Ht(r,e+32,e+32+n)}catch{}return null}function Sl(r){const t=Vt(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function Im(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const km=new Uint8Array([]);function Pm(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(km),e+=32;for(let n=0;n<r.length;n++){const i=lt(r[n]);t[n]=Sl(e),t.push(Sl(i.length)),t.push(Im(i)),e+=32+Math.ceil(i.length/32)*32}return Lt(t)}const Nl="0x0000000000000000000000000000000000000000000000000000000000000000";function Dm(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};$(pi(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=Ht(r,0,32);$(Ht(e,0,12)===Ht(Nl,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Ht(e,12);try{const n=[],i=ft(Ht(r,32,64)),s=ft(Ht(r,i,i+32)),o=Ht(r,i+32);for(let a=0;a<s;a++){const c=Tm(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{$(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Sc(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{$(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}$(Ht(r,100,128)===Ht(Nl,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Ht(r,96,100);try{const n=Sc(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{$(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Lr(r,t){if(r.provider)return r.provider;$(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Ol(r,t){let e=wa(t);if(e.to!=null&&(e.to=pe(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),pe(n,r)]).then(([i,s])=>(P(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else e.from=r.getAddress();return await fe(e)}class Rm{constructor(t){O(this,"provider");ot(this,{provider:t||null})}async getNonce(t){return Lr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Ol(this,t)}async populateTransaction(t){const e=Lr(this,"populateTransaction"),n=await Ol(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const o=et(n.chainId);P(o===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=i.chainId;const s=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||s)?P(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&s&&P(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();$(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?($(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):$(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await fe(n)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Lr(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Lr(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Lr(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Lr(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Lr(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const i=ha.from(n);return await e.broadcastTransaction(await this.signTransaction(i))}authorize(t){$(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Sm(r){return JSON.parse(JSON.stringify(r))}var le,gn,li,vr,fi,Ts,Dr,Nc,Oc;class pd{constructor(t){U(this,Dr);U(this,le);U(this,gn);U(this,li);U(this,vr);U(this,fi);U(this,Ts);F(this,le,t),F(this,gn,null),F(this,li,j(this,Dr,Nc).bind(this)),F(this,vr,!1),F(this,fi,null),F(this,Ts,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){y(this,vr)||(F(this,vr,!0),j(this,Dr,Nc).call(this,-2))}stop(){y(this,vr)&&(F(this,vr,!1),F(this,Ts,!0),j(this,Dr,Oc).call(this),y(this,le).off("block",y(this,li)))}pause(t){t&&j(this,Dr,Oc).call(this),y(this,le).off("block",y(this,li))}resume(){this.start()}}le=new WeakMap,gn=new WeakMap,li=new WeakMap,vr=new WeakMap,fi=new WeakMap,Ts=new WeakMap,Dr=new WeakSet,Nc=async function(t){try{y(this,gn)==null&&F(this,gn,this._subscribe(y(this,le)));let e=null;try{e=await y(this,gn)}catch(s){if(!Xt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(e==null){F(this,gn,null),y(this,le)._recoverSubscriber(this,this._recover(y(this,le)));return}const n=await y(this,le).getNetwork();if(y(this,fi)||F(this,fi,n),y(this,fi).chainId!==n.chainId)throw new Error("chaid changed");if(y(this,Ts))return;const i=await y(this,le).send("eth_getFilterChanges",[e]);await this._emitResults(y(this,le),i)}catch(e){console.log("@TODO",e)}y(this,le).once("block",y(this,li))},Oc=function(){const t=y(this,gn);t&&(F(this,gn,null),t.then(e=>{y(this,le).destroyed||y(this,le).send("eth_uninstallFilter",[e])}))};var hi;class Nm extends pd{constructor(e,n){super(e);U(this,hi);F(this,hi,Sm(n))}_recover(e){return new su(e,y(this,hi))}async _subscribe(e){return await e.send("eth_newFilter",[y(this,hi)])}async _emitResults(e,n){for(const i of n)e.emit(y(this,hi),e._wrapLog(i,e._network))}}hi=new WeakMap;class Om extends pd{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const Lm="bigint,boolean,function,number,string,symbol".split(/,/g);function oa(r){if(r==null||Lm.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(oa);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function Um(r){return new Promise(t=>{setTimeout(t,r)})}function Di(r){return r&&r.toLowerCase()}function Ll(r){return r&&typeof r.pollingInterval=="number"}const xd={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class g0 extends Rm{constructor(e,n){super(e);O(this,"address");n=Et(n),ot(this,{address:n})}connect(e){$(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=oa(e),i=[];if(n.from){const o=n.from;i.push((async()=>{const a=await pe(o,this.provider);P(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;i.push((async()=>{n.to=await pe(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(e);return await new Promise((s,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const l=await this.provider.getTransaction(i);if(l!=null){s(l.replaceableTransaction(n));return}}catch(l){if(Xt(l,"CANCELLED")||Xt(l,"BAD_DATA")||Xt(l,"NETWORK_ERROR")||Xt(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=i,o(l);return}if(Xt(l,"INVALID_ARGUMENT")&&(c++,l.info==null&&(l.info={}),l.info.sendTransactionHash=i,c>10)){o(l);return}this.provider.emit("error",Ot("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(e){const n=oa(e);if(n.from){const s=await pe(n.from,this.provider);P(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=s}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(e){const n=typeof e=="string"?nn(e):e;return await this.provider.send("personal_sign",[Y(n),this.address.toLowerCase()])}async signTypedData(e,n,i){const s=oa(i),o=await ma.resolveNames(e,n,s,async a=>{const c=await pe(a);return P(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ma.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?nn(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Y(n)])}}var di,Is,Gn,mn,Ye,He,ge,Co,Lc;class _m extends Fm{constructor(e,n){super(e,n);U(this,Co);U(this,di);U(this,Is);U(this,Gn);U(this,mn);U(this,Ye);U(this,He);U(this,ge);F(this,Is,1),F(this,di,Object.assign({},xd,n||{})),F(this,Gn,[]),F(this,mn,null),F(this,He,null),F(this,ge,null);{let s=null;const o=new Promise(a=>{s=a});F(this,Ye,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(P(!i||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&e!=null&&F(this,He,vn.from(e))):i&&(P(e==null||i.matches(e),"staticNetwork MUST match network object","options",n),F(this,He,i))}_getOption(e){return y(this,di)[e]}get _network(){return $(y(this,He),"network is not available yet","NETWORK_ERROR"),y(this,He)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let i=e.transaction;if(i&&i.type!=null&&et(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(y(this,He))return y(this,He)}else return e;return y(this,ge)?await y(this,ge):this.ready?(F(this,ge,(async()=>{try{const n=vn.from(et(await this.send("eth_chainId",[])));return F(this,ge,null),n}catch(n){throw F(this,ge,null),n}})()),await y(this,ge)):(F(this,ge,(async()=>{const n={id:Gs(this,Is)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],F(this,ge,null)}catch(s){throw F(this,ge,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return vn.from(et(i.result));throw this.getRpcError(n,i)})()),await y(this,ge))}_start(){y(this,Ye)==null||y(this,Ye).resolve==null||(y(this,Ye).resolve(),F(this,Ye,null),(async()=>{for(;y(this,He)==null&&!this.destroyed;)try{F(this,He,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Ot("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Um(1e3)}j(this,Co,Lc).call(this)})())}async _waitUntilReady(){if(y(this,Ye)!=null)return await y(this,Ye).promise}_getSubscriber(e){return e.type==="pending"?new Om(this):e.type==="event"?this._getOption("polling")?new su(this,e.filter):new Nm(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new dd("orphan"):super._getSubscriber(e)}get ready(){return y(this,Ye)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(e[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),n[s]=Xe(et(e[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{e[i]!=null&&(n[i]=Y(e[i]))}),e.accessList&&(n.accessList=Bi(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(i=>i.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(i=>{const s=xh(i);return{address:s.address,nonce:Xe(s.nonce),chainId:Xe(s.chainId),yParity:Xe(s.signature.yParity),r:Xe(s.signature.r),s:Xe(s.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Di(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Di(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Di(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Di(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Di):e.filter.address=Di(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:i}=e,{error:s}=n;if(i==="eth_estimateGas"&&s.message){const c=s.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Ot("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}});if(c.match(/nonce/i)&&c.match(/too low/i))return Ot("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const c=Uc(s),u=co.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return u.info={error:s,payload:e},u}const o=JSON.stringify(Hm(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Ot("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:e,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Ot("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Ot("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Ot("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:s}});if(o.match(/only replay-protected/i))return Ot("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:c,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Ot("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):Ot("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(Ot("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const i=Gs(this,Is)._++,s=new Promise((o,a)=>{y(this,Gn).push({resolve:o,reject:a,payload:{method:e,params:n,id:i,jsonrpc:"2.0"}})});return j(this,Co,Lc).call(this),s}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const s=await n;if(e>=s.length)throw new Error("no such account");return new g0(this,s[e])}const{accounts:i}=await fe({network:this.getNetwork(),accounts:n});e=Et(e);for(const s of i)if(Et(s)===e)return new g0(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new g0(this,n))}destroy(){y(this,mn)&&(clearTimeout(y(this,mn)),F(this,mn,null));for(const{payload:e,reject:n}of y(this,Gn))n(Ot("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));F(this,Gn,[]),super.destroy()}}di=new WeakMap,Is=new WeakMap,Gn=new WeakMap,mn=new WeakMap,Ye=new WeakMap,He=new WeakMap,ge=new WeakMap,Co=new WeakSet,Lc=function(){if(y(this,mn))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");F(this,mn,setTimeout(()=>{F(this,mn,null);const n=y(this,Gn);for(F(this,Gn,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==y(this,di).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(o=>o.payload)).length>y(this,di).batchMaxSize){n.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of i){if(this.destroyed){c(Ot("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const l=o.filter(f=>f.id===u.id)[0];if(l==null){const f=Ot("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",f),c(f);continue}if("error"in l){c(this.getRpcError(u,l));continue}a(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},e))};var Br;class Mm extends _m{constructor(e,n){super(e,n);U(this,Br);let i=this._getOption("pollingInterval");i==null&&(i=xd.pollingInterval),F(this,Br,i)}_getSubscriber(e){const n=super._getSubscriber(e);return Ll(n)&&(n.pollingInterval=y(this,Br)),n}get pollingInterval(){return y(this,Br)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");F(this,Br,e),this._forEachSubscriber(n=>{Ll(n)&&(n.pollingInterval=y(this,Br))})}}Br=new WeakMap;function Uc(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Rt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=Uc(r[t]);if(e)return e}return null}if(typeof r=="string")try{return Uc(JSON.parse(r))}catch{}return null}function _c(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)_c(r[e],t);if(typeof r=="string")try{return _c(JSON.parse(r),t)}catch{}}}function Hm(r){const t=[];return _c(r,t),t}var ks,Ps;const Vr=class Vr extends Mm{constructor(e,n,i){const s=Object.assign({},i??{},{batchMaxCount:1});P(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(n,s);U(this,ks);U(this,Ps);F(this,Ps,null),i&&i.providerInfo&&F(this,Ps,i.providerInfo),F(this,ks,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const l=new Error(u.message);throw l.code=u.code,l.data=u.data,l.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}})}get providerInfo(){return y(this,Ps)}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){P(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await y(this,ks).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(i=>i.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await y(this,ks).call(this,"eth_requestAccounts",[])}catch(n){const i=n.payload;throw this.getRpcError(i,{id:i.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Vr(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const i=e.anyProvider;if(i&&n.ethereum)return new Vr(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const s=e.timeout?e.timeout:300;return s===0?null:await new Promise((o,a)=>{let c=[];const u=d=>{c.push(d.detail),i&&l()},l=()=>{if(clearTimeout(f),c.length)if(e&&e.filter){const d=e.filter(c.map(x=>Object.assign({},x.info)));if(d==null)o(null);else if(d instanceof Vr)o(d);else{let x=null;if(d.uuid&&(x=c.filter(m=>d.uuid===m.info.uuid)[0]),x){const{provider:g,info:m}=x;o(new Vr(g,void 0,{providerInfo:m}))}else a(Ot("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:x}=c[0];o(new Vr(d,void 0,{providerInfo:x}))}else o(null);n.removeEventListener("eip6963:announceProvider",u)},f=setTimeout(()=>{l()},s);n.addEventListener("eip6963:announceProvider",u),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};ks=new WeakMap,Ps=new WeakMap;let Ea=Vr;const An={address:"0x9b295952839a02CA8f604Ee53C89c289324ab1d8",network:"sepolia",chainId:11155111,abi:[{type:"constructor",inputs:[{name:"_vrfCoordinator",type:"address",internalType:"address"},{name:"_subscriptionId",type:"uint256",internalType:"uint256"},{name:"_keyHash",type:"bytes32",internalType:"bytes32"},{name:"_creatorsAddress",type:"address",internalType:"address"},{name:"_emblemVaultAddress",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"fallback",stateMutability:"payable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"BUNDLE_10_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"BUNDLE_5_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"CREATORS_FEE_PCT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"DEPLOYMENT_TIMESTAMP",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"FAKE_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"KEK_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"MAX_GAS_PRICE",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MAX_PARTICIPANTS_PER_ROUND",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MAX_TOTAL_WAGER_PER_ROUND",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MIN_TICKETS_FOR_DISTRIBUTION",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MIN_WAGER",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"NEXT_ROUND_FEE_PCT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PEPE_PACK_TIER",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"PROOF_MULTIPLIER",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"ROUND_DURATION",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VRF_MAX_CALLBACK_GAS",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_MIN_CALLBACK_GAS",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_REQUEST_TIMEOUT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"VRF_SAFETY_BUFFER_PCT",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"VRF_VOLATILITY_BUFFER_PCT",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"WALLET_CAP",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claim",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"prizeIndex",type:"uint8",internalType:"uint8"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"proof",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimCounts",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"claims",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"closeRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"commitParticipantsRoot",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createRound",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"creatorsAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"currentRoundId",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"denylisted",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"emblemVault",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IERC721"}],stateMutability:"view"},{type:"function",name:"emblemVaultAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"emergencyPaused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"emergencyWithdrawETH",inputs:[{name:"to",type:"address",internalType:"address payable"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"emergencyWithdrawNFT",inputs:[{name:"nftContract",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"estimateVrfCallbackGas",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"getClaimStatus",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"prizeIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"claimer",type:"address",internalType:"address"},{name:"claimed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getParticipantsData",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"getRefundBalance",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct PepedawnRaffle.Round",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}]}],stateMutability:"view"},{type:"function",name:"getRoundParticipants",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getRoundState",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"round",type:"tuple",internalType:"struct PepedawnRaffle.Round",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}]},{name:"participantsCount",type:"uint256",internalType:"uint256"},{name:"winnersCount",type:"uint256",internalType:"uint256"},{name:"prizesClaimed",type:"uint256",internalType:"uint256"},{name:"prizeTokenIds",type:"uint256[10]",internalType:"uint256[10]"},{name:"prizeClaimers",type:"address[10]",internalType:"address[10]"}],stateMutability:"view"},{type:"function",name:"getRoundWinners",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple[]",internalType:"struct PepedawnRaffle.WinnerAssignment[]",components:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"wallet",type:"address",internalType:"address"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"blockNumber",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"getUserStats",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"user",type:"address",internalType:"address"}],outputs:[{name:"wagered",type:"uint256",internalType:"uint256"},{name:"tickets",type:"uint256",internalType:"uint256"},{name:"weight",type:"uint256",internalType:"uint256"},{name:"hasProof",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getWinnersData",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[{name:"root",type:"bytes32",internalType:"bytes32"},{name:"cid",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"isParticipant",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isWinner",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"user",type:"address",internalType:"address"},{name:"prizeIndex",type:"uint8",internalType:"uint8"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"proof",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[{name:"valid",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"lastVrfRequestTime",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"nextRoundFunds",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"openRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"participantsCIDs",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[{name:"reason",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"pauseReason",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"placeBet",inputs:[{name:"tickets",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"prizeNFTs",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"rawFulfillRandomWords",inputs:[{name:"requestId",type:"uint256",internalType:"uint256"},{name:"randomWords",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"refunds",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"requestVrf",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"roundParticipants",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"roundWinners",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"wallet",type:"address",internalType:"address"},{name:"prizeTier",type:"uint8",internalType:"uint8"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"blockNumber",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"rounds",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"id",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint64",internalType:"uint64"},{name:"endTime",type:"uint64",internalType:"uint64"},{name:"status",type:"uint8",internalType:"enum PepedawnRaffle.RoundStatus"},{name:"totalTickets",type:"uint256",internalType:"uint256"},{name:"totalWeight",type:"uint256",internalType:"uint256"},{name:"totalWagered",type:"uint256",internalType:"uint256"},{name:"vrfRequestId",type:"uint256",internalType:"uint256"},{name:"vrfRequestedAt",type:"uint64",internalType:"uint64"},{name:"feesDistributed",type:"bool",internalType:"bool"},{name:"participantCount",type:"uint256",internalType:"uint256"},{name:"validProofHash",type:"bytes32",internalType:"bytes32"},{name:"participantsRoot",type:"bytes32",internalType:"bytes32"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"vrfSeed",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"s_vrfCoordinator",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IVRFCoordinatorV2Plus"}],stateMutability:"view"},{type:"function",name:"setCoordinator",inputs:[{name:"_vrfCoordinator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setDenylistStatus",inputs:[{name:"wallet",type:"address",internalType:"address"},{name:"isDenylisted",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setEmergencyPause",inputs:[{name:"paused",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setPrizesForRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"tokenIds",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setValidProof",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"proofHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"snapshotRound",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"submitProof",inputs:[{name:"proofHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"submitWinnersRoot",inputs:[{name:"roundId",type:"uint256",internalType:"uint256"},{name:"winnersRoot",type:"bytes32",internalType:"bytes32"},{name:"ipfsHash",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateCreatorsAddress",inputs:[{name:"_creatorsAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateEmblemVaultAddress",inputs:[{name:"_emblemVaultAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateVrfConfig",inputs:[{name:"_coordinator",type:"address",internalType:"address"},{name:"_subscriptionId",type:"uint256",internalType:"uint256"},{name:"_keyHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"userHasProofInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"userProofInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"wallet",type:"address",internalType:"address"},{name:"roundId",type:"uint256",internalType:"uint256"},{name:"proofHash",type:"bytes32",internalType:"bytes32"},{name:"verified",type:"bool",internalType:"bool"},{name:"submittedAt",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"userTicketsInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userWageredInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userWeightInRound",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"vrfConfig",inputs:[],outputs:[{name:"coordinator",type:"address",internalType:"contract IVRFCoordinatorV2Plus"},{name:"subscriptionId",type:"uint256",internalType:"uint256"},{name:"keyHash",type:"bytes32",internalType:"bytes32"},{name:"callbackGasLimit",type:"uint32",internalType:"uint32"},{name:"requestConfirmations",type:"uint16",internalType:"uint16"}],stateMutability:"view"},{type:"function",name:"vrfRequestToRound",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"winnersCIDs",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"withdrawRefund",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddressDenylisted",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"denylisted",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"CircuitBreakerTriggered",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"reason",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"ContractPausedWithReason",inputs:[{name:"reason",type:"string",indexed:!1,internalType:"string"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"CoordinatorSet",inputs:[{name:"vrfCoordinator",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"DirectETHReceived",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"EmblemVaultPrizeAssigned",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"assetId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"EmergencyPauseToggled",inputs:[{name:"paused",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"EmergencyWithdrawal",inputs:[{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"assetType",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"FeesDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"creators",type:"address",indexed:!0,internalType:"address"},{name:"creatorsAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"nextRoundAmount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OwnershipTransferRequested",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ParticipantRefunded",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"participant",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ParticipantsRootCommitted",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"root",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"cid",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"PrizeClaimed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"prizeIndex",type:"uint8",indexed:!1,internalType:"uint8"},{name:"prizeTier",type:"uint8",indexed:!1,internalType:"uint8"},{name:"emblemVaultTokenId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PrizeDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winner",type:"address",indexed:!0,internalType:"address"},{name:"prizeTier",type:"uint8",indexed:!1,internalType:"uint8"},{name:"assetId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PrizesSet",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"tokenIds",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"ProofRejected",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"proofHash",type:"bytes32",indexed:!1,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"ProofSubmitted",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"proofHash",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"newWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RefundWithdrawn",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundClosed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundCreated",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"startTime",type:"uint64",indexed:!1,internalType:"uint64"},{name:"endTime",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"RoundOpened",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundPrizesDistributed",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winnerCount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundRefunded",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"participantCount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"totalRefunded",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RoundSnapshot",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"totalTickets",type:"uint256",indexed:!1,internalType:"uint256"},{name:"totalWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SecurityValidationFailed",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"reason",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"VRFFulfilled",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"randomWords",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"VRFRequested",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"VRFTimeoutDetected",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"requestId",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ValidProofSet",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"validProofHash",type:"bytes32",indexed:!1,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"WagerPlaced",inputs:[{name:"wallet",type:"address",indexed:!0,internalType:"address"},{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"tickets",type:"uint256",indexed:!1,internalType:"uint256"},{name:"effectiveWeight",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"WinnersAssigned",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"winners",type:"address[]",indexed:!1,internalType:"address[]"},{name:"prizeTiers",type:"uint8[]",indexed:!1,internalType:"uint8[]"}],anonymous:!1},{type:"event",name:"WinnersCommitted",inputs:[{name:"roundId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"root",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"cid",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"OnlyCoordinatorCanFulfill",inputs:[{name:"have",type:"address",internalType:"address"},{name:"want",type:"address",internalType:"address"}]},{type:"error",name:"OnlyOwnerOrCoordinator",inputs:[{name:"have",type:"address",internalType:"address"},{name:"owner",type:"address",internalType:"address"},{name:"coordinator",type:"address",internalType:"address"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]},{type:"error",name:"ZeroAddress",inputs:[]}]},fo={NETWORK_NAMES:{11155111:"Sepolia",1:"Ethereum Mainnet"},MAX_RETRY_ATTEMPTS:3,REQUEST_TIMEOUT:3e4,ENABLE_PAUSE_CHECK:!0,ENABLE_NETWORK_VALIDATION:!0};function zm(){return!An.address.startsWith("0x")||An.address.length!==42?(console.error("❌ Invalid contract address format!"),!1):(console.log("✅ Contract configuration valid:",An.address),!0)}function $a(r){const t=Number(r);if(!fo.NETWORK_NAMES[t]){const n=`Unsupported network: ${t}`;throw console.error("❌",n),new Error(n)}const e=fo.NETWORK_NAMES[t];return console.log(`✅ Connected to ${e} (${t})`),!0}function Gm(r,t){if(typeof r!="string")throw new Error(`Invalid ${t}: must be a string`);const e=r.replace(/[<>'"&]/g,"").trim().substring(0,1e3);if(e.length===0)throw new Error(`Invalid ${t}: cannot be empty`);return e}const Jo=new Map;function yd(r){const t=Date.now(),e=6e4,n=10;Jo.has(r)||Jo.set(r,[]);const s=Jo.get(r).filter(o=>t-o<e);if(s.length>=n)throw new Error("Rate limit exceeded. Please wait before making another request.");s.push(t),Jo.set(r,s)}async function gd(r,t){if(!r)throw new Error("Contract not available");try{if(await r.paused())throw new Error("Contract is currently paused");if(await r.emergencyPaused())throw new Error("Contract is in emergency pause mode");try{if(await r.denylisted(t))throw new Error("Your address is not allowed to interact with this contract")}catch{console.log("Denylist check not available")}return console.log("✅ Security validation passed"),!0}catch(e){throw console.error("❌ Security validation failed:",e.message),e}}function Vm(){console.log("Initializing UI components..."),Qm(),Wm()}function Qm(){const r=window.location.pathname;document.querySelectorAll("nav a").forEach(e=>{e.classList.remove("active"),(e.getAttribute("href")===r||r==="/"&&e.getAttribute("href")==="/")&&e.classList.add("active")})}function Wm(){const r=document.getElementById("wallet-info");r&&(r.style.display="none");const t=document.getElementById("bet-summary");t&&(t.style.display="none"),Km()}function Km(){const r=document.getElementById("proof-input");r&&(r.value=""),document.querySelectorAll(".ticket-option-card").forEach(e=>e.classList.remove("selected"))}async function ou(r,t){try{const e=document.getElementById("wallet-info"),n=document.getElementById("wallet-balance"),i=document.getElementById("wallet-address-display"),s=document.getElementById("connect-wallet");if(i&&(i.textContent=md(r)),t&&n){const o=await t.getBalance(r),a=Fr(o);n.textContent=parseFloat(a).toFixed(4)}if(t)try{const o=await t.getNetwork();$a(o.chainId)}catch{Jm()}e&&(e.style.display="block"),s&&(s.style.display="none")}catch(e){console.error("Error updating wallet info:",e),rt("Failed to update wallet information","error")}}async function un(r,t=null,e=null){try{if(!r){const d=document.getElementById("time-remaining"),x=document.getElementById("total-tickets");document.querySelectorAll(".status-item").forEach(m=>{m.classList.remove("active");const w=m.dataset.status;(w==="1"||w.includes(",")&&w.split(",").includes("1"))&&m.classList.add("active")}),d&&(d.textContent="7d 0h 0m 0s (Mock)"),x&&(x.textContent="1,234 (Mock)");return}const n=await r.currentRoundId();if(n.toString()==="0"){const d=document.getElementById("current-round-title");d&&(d.textContent="Current Round: Being Created...");const x=document.getElementById("time-remaining");x&&(x.textContent="Coming Soon");const g=document.getElementById("total-tickets");g&&(g.textContent="0"),document.querySelectorAll(".status-item").forEach(w=>{w.classList.remove("active")});return}let i;e?i=e.round:i=await r.getRound(n);const s=document.getElementById("current-round-title");s&&(s.textContent=`Current Round: ${n}`);const o=document.querySelectorAll(".status-item"),a=Number(i.status);o.forEach(d=>{d.classList.remove("active");const x=d.dataset.status;x.includes(",")?x.split(",").map(m=>Number(m.trim())).includes(a)&&d.classList.add("active"):Number(x)===a&&d.classList.add("active")});const c=document.getElementById("merkle-badge");c&&(a>=2?c.classList.add("visible"):c.classList.remove("visible"));const u=document.getElementById("time-remaining");if(u){const d=Number(i.endTime)*1e3;$m(u,d)}const l=document.getElementById("total-tickets");l&&(l.textContent=i.totalTickets.toString());const f=document.getElementById("vaulted-eth");if(f&&t)try{const d=await t.getBalance(An.address),x=Fr(d);f.textContent=parseFloat(x).toFixed(4)}catch{f.textContent="--"}}catch(n){console.error("Error updating round status:",n);const i=document.getElementById("round-status-text");i&&(i.textContent="Error Loading")}}async function va(r,t=null){try{const e=document.getElementById("dispenser-text"),n=document.getElementById("dispenser-badge"),i=document.querySelectorAll(".ticket-icon");if(!r){e&&(e.textContent="minimum 10 tickets required"),i.forEach(c=>c.classList.remove("purchased"));return}const s=await r.currentRoundId();if(s.toString()==="0"){e&&(e.textContent="minimum 10 tickets required"),i.forEach(c=>c.classList.remove("purchased"));return}let o;t?o=t.round:o=await r.getRound(s);const a=Number(o.totalTickets);i.forEach((c,u)=>{u<a?c.classList.add("purchased"):c.classList.remove("purchased")}),e&&n&&(a>=10?(e.textContent="🐸 PEPEDAWN will be dispensed",n.classList.add("dispensing"),n.classList.remove("waiting")):(e.textContent="minimum 10 tickets required",n.classList.add("waiting"),n.classList.remove("dispensing")))}catch(e){console.error("Error updating dispenser progress:",e)}}async function Ul(r){try{const t=document.getElementById("round-select"),e=document.getElementById("winners-round-select"),n=document.getElementById("claims-round-select");if(!r)return;const i=await r.currentRoundId(),s=Number(i);if(t){t.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),t.appendChild(a)}}if(e){e.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),e.appendChild(a)}}if(n){n.innerHTML="";for(let o=Math.max(1,s-5);o<=s;o++){const a=document.createElement("option");a.value=o.toString(),a.textContent=`Round ${o}`,o===s&&(a.textContent+=" (Current)",a.selected=!0),n.appendChild(a)}}}catch(t){console.error("Error populating round selector:",t)}}async function gi(r,t=null){try{const e=document.getElementById("leaderboard-list"),n=document.getElementById("leaderboard-title");if(!e||!window.location.pathname.includes("leaderboard.html"))return;if(!r){const d=`
        <div class="leaderboard-header">
          <span>Rank</span>
          <span>Address</span>
          <span>Tickets</span>
          <span>Weight</span>
          <span>Winning Odds</span>
        </div>
        ${[{address:"0x1234...5678",tickets:50,weight:70,fakeOdds:"12.5%",hasVerifiedProof:!0},{address:"0xabcd...efgh",tickets:35,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!1},{address:"0x9876...4321",tickets:25,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!0}].map((x,g)=>`
          <div class="leaderboard-entry">
            <span class="rank">#${g+1}</span>
            <span class="address">${x.address} (Mock)${x.hasVerifiedProof?" 🧩":""}</span>
            <span class="tickets">${x.tickets}</span>
            <span class="weight">${x.weight}</span>
            <span class="odds">${x.fakeOdds}</span>
          </div>
        `).join("")}
      `;e.innerHTML=d;return}let i,s=!1;if(t?(i=t,s=!1):(i=await r.currentRoundId(),s=!0),n&&(n.textContent=`Leaderboard Round: ${i}`),i.toString()==="0"){e.innerHTML="<p>No active round</p>";return}const o=await r.currentRoundId();if(Number(i)>Number(o)){e.innerHTML=`
        <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-secondary);">
          <h3>🚀 Future Round</h3>
          <p>Round ${i} hasn't started yet.</p>
          <p>This round will begin after Round ${o} ends.</p>
        </div>
      `;return}const a=await r.getRound(i);if(a.totalTickets.toString()==="0"){e.innerHTML="<p>No participants yet</p>";return}const c=Number(a.status)===6,u=[];try{const f=await r.getRoundParticipants(i);for(let d=0;d<f.length;d++){const x=f[d];try{const g=await r.getUserStats(i,x),m=a.totalWeight>0?(Number(g.weight)/Number(a.totalWeight)*100).toFixed(1):"0.0";let w=!1;if(g.hasProof)try{w=(await r.userProofInRound(i,x)).verified}catch{w=!1}u.push({address:x,tickets:Number(g.tickets),weight:Number(g.weight),fakeOdds:m+"%",hasVerifiedProof:w})}catch(g){console.warn(`Could not get stats for participant ${x}:`,g.message)}}}catch(f){!f.message.includes("execution reverted")&&!f.message.includes("Round not initialized")&&console.warn("Error fetching participants for leaderboard:",f)}u.sort((f,d)=>d.weight-f.weight);const l=`
      <div class="leaderboard-header">
        <span>Rank</span>
        <span>Address</span>
        <span>Tickets</span>
        <span>Weight</span>
        <span>Winning Odds</span>
      </div>
      ${u.map((f,d)=>`
        <div class="leaderboard-entry">
          <span class="rank">#${d+1}</span>
          <span class="address">${md(f.address)}${f.hasVerifiedProof?" 🧩":""}</span>
          <span class="tickets">${f.tickets}</span>
          <span class="weight">${f.weight}</span>
          <span class="odds">${f.fakeOdds}</span>
        </div>
      `).join("")}
    `;e.innerHTML=l}catch(e){console.error("Error updating leaderboard:",e);const n=document.getElementById("leaderboard-list");n&&(n.innerHTML="<p>Error loading leaderboard</p>")}}async function Bn(r,t,e=null){try{const n=document.getElementById("user-tickets"),i=document.getElementById("user-weight"),s=document.getElementById("user-proof-status"),o=document.getElementById("user-fake-odds"),a=document.getElementById("cap-remaining");if(!r||!t){n&&(n.textContent="0 (No Contract)"),i&&(i.textContent="0 (No Contract)"),s&&(s.textContent="No (No Contract)"),o&&(o.textContent="0% (No Contract)"),a&&(a.textContent="1.0 (No Contract)");return}const c=await r.currentRoundId();if(c.toString()==="0"){n&&(n.textContent="0"),i&&(i.textContent="0"),s&&(s.textContent="No Active Round"),o&&(o.textContent="0%"),a&&(a.textContent="1.0");return}let u,l;try{if(e?l=e.round:l=await r.getRound(c),!l||l.status===void 0)throw new Error("Round not initialized");u=await r.getUserStats(c,t)}catch(f){f.message.includes("execution reverted")||f.message.includes("Round not initialized")||f.message.includes("call revert exception")||f.code==="CALL_EXCEPTION"||console.warn("Unexpected error fetching round data:",f),n&&(n.textContent="0"),i&&(i.textContent="0"),s&&(s.textContent="Round Not Available"),o&&(o.textContent="0%"),a&&(a.textContent="1.0");return}if(n&&(n.textContent=u.tickets.toString()),i&&(i.textContent=u.weight.toString()),s)if(u.hasProof)try{(await r.userProofInRound(c,t)).verified?(s.textContent="Yes (+40%)",s.className="proof-success"):(s.innerHTML='Yes (<span style="color: red;">failed</span>)',s.className="proof-failed")}catch{s.textContent="Yes"}else s.textContent="No",s.className="";if(o)if(Number(l.totalWeight)>0&&Number(u.weight)>0){const f=(Number(u.weight)/Number(l.totalWeight)*100).toFixed(1);o.textContent=f+"%"}else o.textContent="0%";if(a){const d=(1-Number(Fr(u.wagered||"0"))).toFixed(3);a.textContent=d}}catch(n){console.error("Error updating user stats:",n);const i=document.getElementById("user-tickets");i&&(i.textContent="Error")}}function $m(r,t){function e(){const n=Date.now(),i=t-n;if(i<=0){r.textContent="Round Ended";return}const s=Math.floor(i/(24*60*60*1e3)),o=Math.floor(i%(24*60*60*1e3)/(60*60*1e3)),a=Math.floor(i%(60*60*1e3)/(60*1e3)),c=Math.floor(i%(60*1e3)/1e3);r.textContent=`${s}d ${o}h ${a}m ${c}s`}e(),setInterval(e,1e3)}function md(r){return r?`${r.slice(0,6)}...${r.slice(-4)}`:""}function rt(r,t="info"){let e=document.getElementById("tx-status");e||(e=document.createElement("div"),e.id="tx-status",e.className="tx-status",document.body.appendChild(e)),e.textContent=r,e.className=`tx-status ${t}`,e.style.display="block";let n;switch(t){case"success":n=5e3;break;case"error":n=8e3;break;case"info":n=4e3;break;case"warning":n=6e3;break;default:n=5e3}setTimeout(()=>{e.style.display="none"},n)}function qm(){const r=document.getElementById("tx-status");r&&(r.style.display="none")}function Jm(){const t=`Please switch to a supported network: ${fo.SUPPORTED_NETWORKS.map(e=>fo.NETWORK_NAMES[e]||`Chain ID ${e}`).join(", ")}`;if(rt(t,"warning"),window.ethereum&&window.ethereum.request){const e=document.createElement("button");e.textContent="Switch to Sepolia",e.className="switch-network-btn",e.onclick=async()=>{try{await jm(),qm()}catch(i){console.error("Failed to switch network:",i),rt("Failed to switch network: "+i.message,"error")}};const n=document.getElementById("tx-status");n&&!n.querySelector(".switch-network-btn")&&n.appendChild(e)}}async function jm(){if(!window.ethereum)throw new Error("MetaMask not detected");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xaa36a7"}]})}catch(r){if(r.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Testnet",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});else throw r}}function $n(r,t){if(!r||!t)return;const e=document.getElementById("security-status");e&&Promise.all([r.paused().catch(()=>!1),r.emergencyPaused().catch(()=>!1),r.denylisted(t).catch(()=>!1)]).then(([n,i,s])=>{let o="✅ All systems operational",a="security-status normal";s?(o="🚫 Address is denylisted",a="security-status error"):i?(o="⚠️ Emergency pause active",a="security-status warning"):n&&(o="⏸️ Contract paused",a="security-status warning"),e.textContent=o,e.className=a}).catch(n=>{console.error("Error checking security status:",n),e.textContent="❓ Security status unknown",e.className="security-status unknown"})}function Zm(r){const{amount:t,tickets:e,userAddress:n}=r;if(!t||isNaN(t)||t<=0)throw new Error("Invalid bet amount");if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid ticket count");if(!n||!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error("Invalid user address");return!0}function wd(r,t){console.error(`Transaction error (${t}):`,r);let e="Transaction failed",n="error";return r.message.includes("user rejected")?(e="Transaction cancelled by user",n="info"):r.message.includes("insufficient funds")?e="Insufficient ETH balance for transaction":r.message.includes("gas")?e="Transaction failed due to gas issues":r.message.includes("nonce")?e="Transaction nonce error - please try again":r.message.includes("network")?e="Network error - please check connection":r.code==="CALL_EXCEPTION"&&(e="Contract call failed - check requirements"),rt(e,n),{message:e,type:n,originalError:r}}const m0=["https://dweb.link/ipfs","https://ipfs.io/ipfs","https://w3s.link/ipfs","https://nftstorage.link/ipfs","https://cloudflare-ipfs.com/ipfs","https://cf-ipfs.com/ipfs","https://gateway.pinata.cloud/ipfs"],Ym=6e4;async function bd(r,t=Ym){if(!r||r.trim()==="")throw new Error("Invalid CID provided");const e=[];try{console.log("🏠 Attempting to fetch from local files...");const n=["/winners/winners-round-1.json","/participants/participants-round-1.json"];for(const i of n)try{const s=await fetch(i);if(s.ok){const o=await s.json();return console.log(`✅ Successfully fetched from local file: ${i}`),o}}catch{}}catch{console.log("🏠 Local files not available, trying IPFS gateways...")}for(const n of m0)try{console.log(`Attempting to fetch from ${n}...`);const i=`${n}/${r}`,s=new AbortController,o=setTimeout(()=>s.abort(),t),a=await fetch(i,{signal:s.signal,mode:"cors",headers:{Accept:"application/json"}});if(clearTimeout(o),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const c=await a.json();return console.log(`✅ Successfully fetched from ${n}`),c}catch(i){const s=i.name==="AbortError"?`Timeout after ${t}ms`:i.message;console.warn(`❌ Failed to fetch from ${n}: ${s}`),e.push({gateway:n,error:s}),m0.indexOf(n)<m0.length-1&&await new Promise(o=>setTimeout(o,500))}throw new Error(`Failed to fetch CID ${r} from all gateways. Errors: ${e.map(n=>`${n.gateway}: ${n.error}`).join("; ")}`)}async function au(r,t){const e=await bd(r);if(e.version!=="1.0")throw new Error(`Unsupported Winners File version: ${e.version}`);if(e.roundId.toString()!==t.toString())throw new Error(`Round ID mismatch: expected ${t}, got ${e.roundId}`);if(!e.winners||!Array.isArray(e.winners))throw new Error("Invalid Winners File: missing winners array");if(e.winners.length!==10)throw new Error(`Invalid Winners File: expected 10 winners, got ${e.winners.length}`);if(!e.merkle||!e.merkle.root)throw new Error("Invalid Winners File: missing merkle root");return console.log(`✅ Winners File validated for round ${t}`),e}const Xm=Object.freeze(Object.defineProperty({__proto__:null,fetchFromIPFS:bd,fetchWinnersFile:au},Symbol.toStringTag,{value:"Module"}));var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function t1(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var Ad={},Ro={},So={},qa={};qa.byteLength=r1;qa.toByteArray=s1;qa.fromByteArray=c1;var En=[],Oe=[],e1=typeof Uint8Array<"u"?Uint8Array:Array,w0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ri=0,n1=w0.length;Ri<n1;++Ri)En[Ri]=w0[Ri],Oe[w0.charCodeAt(Ri)]=Ri;Oe[45]=62;Oe[95]=63;function Ed(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function r1(r){var t=Ed(r),e=t[0],n=t[1];return(e+n)*3/4-n}function i1(r,t,e){return(t+e)*3/4-e}function s1(r){var t,e=Ed(r),n=e[0],i=e[1],s=new e1(i1(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)t=Oe[r.charCodeAt(c)]<<18|Oe[r.charCodeAt(c+1)]<<12|Oe[r.charCodeAt(c+2)]<<6|Oe[r.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Oe[r.charCodeAt(c)]<<2|Oe[r.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=Oe[r.charCodeAt(c)]<<10|Oe[r.charCodeAt(c+1)]<<4|Oe[r.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function o1(r){return En[r>>18&63]+En[r>>12&63]+En[r>>6&63]+En[r&63]}function a1(r,t,e){for(var n,i=[],s=t;s<e;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(o1(n));return i.join("")}function c1(r){for(var t,e=r.length,n=e%3,i=[],s=16383,o=0,a=e-n;o<a;o+=s)i.push(a1(r,o,o+s>a?a:o+s));return n===1?(t=r[e-1],i.push(En[t>>2]+En[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],i.push(En[t>>10]+En[t>>4&63]+En[t<<2&63]+"=")),i.join("")}var cu={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cu.read=function(r,t,e,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,f=e?i-1:0,d=e?-1:1,x=r[t+f];for(f+=d,s=x&(1<<-l)-1,x>>=-l,l+=a;l>0;s=s*256+r[t+f],f+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=o*256+r[t+f],f+=d,l-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(x?-1:1)*o*Math.pow(2,s-n)};cu.write=function(r,t,e,n,i,s){var o,a,c,u=s*8-i-1,l=(1<<u)-1,f=l>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:s-1,g=n?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?t+=d/c:t+=d*Math.pow(2,1-f),t*c>=2&&(o++,c/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(t*c-1)*Math.pow(2,i),o=o+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[e+x]=a&255,x+=g,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;r[e+x]=o&255,x+=g,o/=256,u-=8);r[e+x-g]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=qa,e=cu,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=E,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const b=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(b,h),b.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const h=new Uint8Array(b);return Object.setPrototypeOf(h,a.prototype),h}function a(b,h,p){if(typeof b=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(b)}return c(b,h,p)}a.poolSize=8192;function c(b,h,p){if(typeof b=="string")return d(b,h);if(ArrayBuffer.isView(b))return g(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(Ut(b,ArrayBuffer)||b&&Ut(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ut(b,SharedArrayBuffer)||b&&Ut(b.buffer,SharedArrayBuffer)))return m(b,h,p);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=b.valueOf&&b.valueOf();if(B!=null&&B!==b)return a.from(B,h,p);const D=w(b);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return a.from(b[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}a.from=function(b,h,p){return c(b,h,p)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function l(b,h,p){return u(b),b<=0?o(b):h!==void 0?typeof p=="string"?o(b).fill(h,p):o(b).fill(h):o(b)}a.alloc=function(b,h,p){return l(b,h,p)};function f(b){return u(b),o(b<0?0:v(b)|0)}a.allocUnsafe=function(b){return f(b)},a.allocUnsafeSlow=function(b){return f(b)};function d(b,h){if((typeof h!="string"||h==="")&&(h="utf8"),!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const p=A(b,h)|0;let B=o(p);const D=B.write(b,h);return D!==p&&(B=B.slice(0,D)),B}function x(b){const h=b.length<0?0:v(b.length)|0,p=o(h);for(let B=0;B<h;B+=1)p[B]=b[B]&255;return p}function g(b){if(Ut(b,Uint8Array)){const h=new Uint8Array(b);return m(h.buffer,h.byteOffset,h.byteLength)}return x(b)}function m(b,h,p){if(h<0||b.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let B;return h===void 0&&p===void 0?B=new Uint8Array(b):p===void 0?B=new Uint8Array(b,h):B=new Uint8Array(b,h,p),Object.setPrototypeOf(B,a.prototype),B}function w(b){if(a.isBuffer(b)){const h=v(b.length)|0,p=o(h);return p.length===0||b.copy(p,0,0,h),p}if(b.length!==void 0)return typeof b.length!="number"||De(b.length)?o(0):x(b);if(b.type==="Buffer"&&Array.isArray(b.data))return x(b.data)}function v(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function E(b){return+b!=b&&(b=0),a.alloc(+b)}a.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==a.prototype},a.compare=function(h,p){if(Ut(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),Ut(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(h)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;let B=h.length,D=p.length;for(let L=0,Q=Math.min(B,D);L<Q;++L)if(h[L]!==p[L]){B=h[L],D=p[L];break}return B<D?-1:D<B?1:0},a.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return a.alloc(0);let B;if(p===void 0)for(p=0,B=0;B<h.length;++B)p+=h[B].length;const D=a.allocUnsafe(p);let L=0;for(B=0;B<h.length;++B){let Q=h[B];if(Ut(Q,Uint8Array))L+Q.length>D.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(D,L)):Uint8Array.prototype.set.call(D,Q,L);else if(a.isBuffer(Q))Q.copy(D,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=Q.length}return D};function A(b,h){if(a.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||Ut(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const p=b.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&p===0)return 0;let D=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Yn(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Xn(b).length;default:if(D)return B?-1:Yn(b).length;h=(""+h).toLowerCase(),D=!0}}a.byteLength=A;function C(b,h,p){let B=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(b||(b="utf8");;)switch(b){case"hex":return st(this,h,p);case"utf8":case"utf-8":return X(this,h,p);case"ascii":return nt(this,h,p);case"latin1":case"binary":return it(this,h,p);case"base64":return G(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,h,p);default:if(B)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function I(b,h,p){const B=b[h];b[h]=b[p],b[p]=B}a.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<h;p+=2)I(this,p,p+1);return this},a.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<h;p+=4)I(this,p,p+3),I(this,p+1,p+2);return this},a.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<h;p+=8)I(this,p,p+7),I(this,p+1,p+6),I(this,p+2,p+5),I(this,p+3,p+4);return this},a.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?X(this,0,h):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(h){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:a.compare(this,h)===0},a.prototype.inspect=function(){let h="";const p=r.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(h,p,B,D,L){if(Ut(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),B===void 0&&(B=h?h.length:0),D===void 0&&(D=0),L===void 0&&(L=this.length),p<0||B>h.length||D<0||L>this.length)throw new RangeError("out of range index");if(D>=L&&p>=B)return 0;if(D>=L)return-1;if(p>=B)return 1;if(p>>>=0,B>>>=0,D>>>=0,L>>>=0,this===h)return 0;let Q=L-D,ht=B-p;const St=Math.min(Q,ht),Pt=this.slice(D,L),Nt=h.slice(p,B);for(let Bt=0;Bt<St;++Bt)if(Pt[Bt]!==Nt[Bt]){Q=Pt[Bt],ht=Nt[Bt];break}return Q<ht?-1:ht<Q?1:0};function T(b,h,p,B,D){if(b.length===0)return-1;if(typeof p=="string"?(B=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,De(p)&&(p=D?0:b.length-1),p<0&&(p=b.length+p),p>=b.length){if(D)return-1;p=b.length-1}else if(p<0)if(D)p=0;else return-1;if(typeof h=="string"&&(h=a.from(h,B)),a.isBuffer(h))return h.length===0?-1:R(b,h,p,B,D);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(b,h,p):Uint8Array.prototype.lastIndexOf.call(b,h,p):R(b,[h],p,B,D);throw new TypeError("val must be string, number or Buffer")}function R(b,h,p,B,D){let L=1,Q=b.length,ht=h.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(b.length<2||h.length<2)return-1;L=2,Q/=2,ht/=2,p/=2}function St(Nt,Bt){return L===1?Nt[Bt]:Nt.readUInt16BE(Bt*L)}let Pt;if(D){let Nt=-1;for(Pt=p;Pt<Q;Pt++)if(St(b,Pt)===St(h,Nt===-1?0:Pt-Nt)){if(Nt===-1&&(Nt=Pt),Pt-Nt+1===ht)return Nt*L}else Nt!==-1&&(Pt-=Pt-Nt),Nt=-1}else for(p+ht>Q&&(p=Q-ht),Pt=p;Pt>=0;Pt--){let Nt=!0;for(let Bt=0;Bt<ht;Bt++)if(St(b,Pt+Bt)!==St(h,Bt)){Nt=!1;break}if(Nt)return Pt}return-1}a.prototype.includes=function(h,p,B){return this.indexOf(h,p,B)!==-1},a.prototype.indexOf=function(h,p,B){return T(this,h,p,B,!0)},a.prototype.lastIndexOf=function(h,p,B){return T(this,h,p,B,!1)};function S(b,h,p,B){p=Number(p)||0;const D=b.length-p;B?(B=Number(B),B>D&&(B=D)):B=D;const L=h.length;B>L/2&&(B=L/2);let Q;for(Q=0;Q<B;++Q){const ht=parseInt(h.substr(Q*2,2),16);if(De(ht))return Q;b[p+Q]=ht}return Q}function V(b,h,p,B){return ne(Yn(h,b.length-p),b,p,B)}function k(b,h,p,B){return ne(Nr(h),b,p,B)}function N(b,h,p,B){return ne(Xn(h),b,p,B)}function z(b,h,p,B){return ne(zs(h,b.length-p),b,p,B)}a.prototype.write=function(h,p,B,D){if(p===void 0)D="utf8",B=this.length,p=0;else if(B===void 0&&typeof p=="string")D=p,B=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(B)?(B=B>>>0,D===void 0&&(D="utf8")):(D=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-p;if((B===void 0||B>L)&&(B=L),h.length>0&&(B<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let Q=!1;for(;;)switch(D){case"hex":return S(this,h,p,B);case"utf8":case"utf-8":return V(this,h,p,B);case"ascii":case"latin1":case"binary":return k(this,h,p,B);case"base64":return N(this,h,p,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,h,p,B);default:if(Q)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(b,h,p){return h===0&&p===b.length?t.fromByteArray(b):t.fromByteArray(b.slice(h,p))}function X(b,h,p){p=Math.min(b.length,p);const B=[];let D=h;for(;D<p;){const L=b[D];let Q=null,ht=L>239?4:L>223?3:L>191?2:1;if(D+ht<=p){let St,Pt,Nt,Bt;switch(ht){case 1:L<128&&(Q=L);break;case 2:St=b[D+1],(St&192)===128&&(Bt=(L&31)<<6|St&63,Bt>127&&(Q=Bt));break;case 3:St=b[D+1],Pt=b[D+2],(St&192)===128&&(Pt&192)===128&&(Bt=(L&15)<<12|(St&63)<<6|Pt&63,Bt>2047&&(Bt<55296||Bt>57343)&&(Q=Bt));break;case 4:St=b[D+1],Pt=b[D+2],Nt=b[D+3],(St&192)===128&&(Pt&192)===128&&(Nt&192)===128&&(Bt=(L&15)<<18|(St&63)<<12|(Pt&63)<<6|Nt&63,Bt>65535&&Bt<1114112&&(Q=Bt))}}Q===null?(Q=65533,ht=1):Q>65535&&(Q-=65536,B.push(Q>>>10&1023|55296),Q=56320|Q&1023),B.push(Q),D+=ht}return J(B)}const M=4096;function J(b){const h=b.length;if(h<=M)return String.fromCharCode.apply(String,b);let p="",B=0;for(;B<h;)p+=String.fromCharCode.apply(String,b.slice(B,B+=M));return p}function nt(b,h,p){let B="";p=Math.min(b.length,p);for(let D=h;D<p;++D)B+=String.fromCharCode(b[D]&127);return B}function it(b,h,p){let B="";p=Math.min(b.length,p);for(let D=h;D<p;++D)B+=String.fromCharCode(b[D]);return B}function st(b,h,p){const B=b.length;(!h||h<0)&&(h=0),(!p||p<0||p>B)&&(p=B);let D="";for(let L=h;L<p;++L)D+=Ii[b[L]];return D}function at(b,h,p){const B=b.slice(h,p);let D="";for(let L=0;L<B.length-1;L+=2)D+=String.fromCharCode(B[L]+B[L+1]*256);return D}a.prototype.slice=function(h,p){const B=this.length;h=~~h,p=p===void 0?B:~~p,h<0?(h+=B,h<0&&(h=0)):h>B&&(h=B),p<0?(p+=B,p<0&&(p=0)):p>B&&(p=B),p<h&&(p=h);const D=this.subarray(h,p);return Object.setPrototypeOf(D,a.prototype),D};function _(b,h,p){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+h>p)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||_(h,p,this.length);let D=this[h],L=1,Q=0;for(;++Q<p&&(L*=256);)D+=this[h+Q]*L;return D},a.prototype.readUintBE=a.prototype.readUIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||_(h,p,this.length);let D=this[h+--p],L=1;for(;p>0&&(L*=256);)D+=this[h+--p]*L;return D},a.prototype.readUint8=a.prototype.readUInt8=function(h,p){return h=h>>>0,p||_(h,1,this.length),this[h]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||_(h,2,this.length),this[h]|this[h+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||_(h,2,this.length),this[h]<<8|this[h+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||_(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},a.prototype.readBigUInt64LE=Ve(function(h){h=h>>>0,vt(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&kt(h,this.length-8);const D=p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,L=this[++h]+this[++h]*2**8+this[++h]*2**16+B*2**24;return BigInt(D)+(BigInt(L)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(h){h=h>>>0,vt(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&kt(h,this.length-8);const D=p*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],L=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+B;return(BigInt(D)<<BigInt(32))+BigInt(L)}),a.prototype.readIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||_(h,p,this.length);let D=this[h],L=1,Q=0;for(;++Q<p&&(L*=256);)D+=this[h+Q]*L;return L*=128,D>=L&&(D-=Math.pow(2,8*p)),D},a.prototype.readIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||_(h,p,this.length);let D=p,L=1,Q=this[h+--D];for(;D>0&&(L*=256);)Q+=this[h+--D]*L;return L*=128,Q>=L&&(Q-=Math.pow(2,8*p)),Q},a.prototype.readInt8=function(h,p){return h=h>>>0,p||_(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},a.prototype.readInt16LE=function(h,p){h=h>>>0,p||_(h,2,this.length);const B=this[h]|this[h+1]<<8;return B&32768?B|4294901760:B},a.prototype.readInt16BE=function(h,p){h=h>>>0,p||_(h,2,this.length);const B=this[h+1]|this[h]<<8;return B&32768?B|4294901760:B},a.prototype.readInt32LE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},a.prototype.readInt32BE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},a.prototype.readBigInt64LE=Ve(function(h){h=h>>>0,vt(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&kt(h,this.length-8);const D=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(B<<24);return(BigInt(D)<<BigInt(32))+BigInt(p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),a.prototype.readBigInt64BE=Ve(function(h){h=h>>>0,vt(h,"offset");const p=this[h],B=this[h+7];(p===void 0||B===void 0)&&kt(h,this.length-8);const D=(p<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(D)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+B)}),a.prototype.readFloatLE=function(h,p){return h=h>>>0,p||_(h,4,this.length),e.read(this,h,!0,23,4)},a.prototype.readFloatBE=function(h,p){return h=h>>>0,p||_(h,4,this.length),e.read(this,h,!1,23,4)},a.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||_(h,8,this.length),e.read(this,h,!0,52,8)},a.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||_(h,8,this.length),e.read(this,h,!1,52,8)};function H(b,h,p,B,D,L){if(!a.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>D||h<L)throw new RangeError('"value" argument is out of bounds');if(p+B>b.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(h,p,B,D){if(h=+h,p=p>>>0,B=B>>>0,!D){const ht=Math.pow(2,8*B)-1;H(this,h,p,B,ht,0)}let L=1,Q=0;for(this[p]=h&255;++Q<B&&(L*=256);)this[p+Q]=h/L&255;return p+B},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(h,p,B,D){if(h=+h,p=p>>>0,B=B>>>0,!D){const ht=Math.pow(2,8*B)-1;H(this,h,p,B,ht,0)}let L=B-1,Q=1;for(this[p+L]=h&255;--L>=0&&(Q*=256);)this[p+L]=h/Q&255;return p+B},a.prototype.writeUint8=a.prototype.writeUInt8=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,1,255,0),this[p]=h&255,p+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function q(b,h,p,B,D){ce(h,B,D,b,p,7);let L=Number(h&BigInt(4294967295));b[p++]=L,L=L>>8,b[p++]=L,L=L>>8,b[p++]=L,L=L>>8,b[p++]=L;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return b[p++]=Q,Q=Q>>8,b[p++]=Q,Q=Q>>8,b[p++]=Q,Q=Q>>8,b[p++]=Q,p}function K(b,h,p,B,D){ce(h,B,D,b,p,7);let L=Number(h&BigInt(4294967295));b[p+7]=L,L=L>>8,b[p+6]=L,L=L>>8,b[p+5]=L,L=L>>8,b[p+4]=L;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return b[p+3]=Q,Q=Q>>8,b[p+2]=Q,Q=Q>>8,b[p+1]=Q,Q=Q>>8,b[p]=Q,p+8}a.prototype.writeBigUInt64LE=Ve(function(h,p=0){return q(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(h,p=0){return K(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(h,p,B,D){if(h=+h,p=p>>>0,!D){const St=Math.pow(2,8*B-1);H(this,h,p,B,St-1,-St)}let L=0,Q=1,ht=0;for(this[p]=h&255;++L<B&&(Q*=256);)h<0&&ht===0&&this[p+L-1]!==0&&(ht=1),this[p+L]=(h/Q>>0)-ht&255;return p+B},a.prototype.writeIntBE=function(h,p,B,D){if(h=+h,p=p>>>0,!D){const St=Math.pow(2,8*B-1);H(this,h,p,B,St-1,-St)}let L=B-1,Q=1,ht=0;for(this[p+L]=h&255;--L>=0&&(Q*=256);)h<0&&ht===0&&this[p+L+1]!==0&&(ht=1),this[p+L]=(h/Q>>0)-ht&255;return p+B},a.prototype.writeInt8=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},a.prototype.writeInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},a.prototype.writeInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||H(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},a.prototype.writeBigInt64LE=Ve(function(h,p=0){return q(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(h,p=0){return K(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function bt(b,h,p,B,D,L){if(p+B>b.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function xt(b,h,p,B,D){return h=+h,p=p>>>0,D||bt(b,h,p,4),e.write(b,h,p,B,23,4),p+4}a.prototype.writeFloatLE=function(h,p,B){return xt(this,h,p,!0,B)},a.prototype.writeFloatBE=function(h,p,B){return xt(this,h,p,!1,B)};function It(b,h,p,B,D){return h=+h,p=p>>>0,D||bt(b,h,p,8),e.write(b,h,p,B,52,8),p+8}a.prototype.writeDoubleLE=function(h,p,B){return It(this,h,p,!0,B)},a.prototype.writeDoubleBE=function(h,p,B){return It(this,h,p,!1,B)},a.prototype.copy=function(h,p,B,D){if(!a.isBuffer(h))throw new TypeError("argument should be a Buffer");if(B||(B=0),!D&&D!==0&&(D=this.length),p>=h.length&&(p=h.length),p||(p=0),D>0&&D<B&&(D=B),D===B||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),h.length-p<D-B&&(D=h.length-p+B);const L=D-B;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,B,D):Uint8Array.prototype.set.call(h,this.subarray(B,D),p),L},a.prototype.fill=function(h,p,B,D){if(typeof h=="string"){if(typeof p=="string"?(D=p,p=0,B=this.length):typeof B=="string"&&(D=B,B=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!a.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(h.length===1){const Q=h.charCodeAt(0);(D==="utf8"&&Q<128||D==="latin1")&&(h=Q)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<B)throw new RangeError("Out of range index");if(B<=p)return this;p=p>>>0,B=B===void 0?this.length:B>>>0,h||(h=0);let L;if(typeof h=="number")for(L=p;L<B;++L)this[L]=h;else{const Q=a.isBuffer(h)?h:a.from(h,D),ht=Q.length;if(ht===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(L=0;L<B-p;++L)this[L+p]=Q[L%ht]}return this};const ct={};function jt(b,h,p){ct[b]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}jt("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),jt("ERR_INVALID_ARG_TYPE",function(b,h){return`The "${b}" argument must be of type number. Received type ${typeof h}`},TypeError),jt("ERR_OUT_OF_RANGE",function(b,h,p){let B=`The value of "${b}" is out of range.`,D=p;return Number.isInteger(p)&&Math.abs(p)>2**32?D=ee(String(p)):typeof p=="bigint"&&(D=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(D=ee(D)),D+="n"),B+=` It must be ${h}. Received ${D}`,B},RangeError);function ee(b){let h="",p=b.length;const B=b[0]==="-"?1:0;for(;p>=B+4;p-=3)h=`_${b.slice(p-3,p)}${h}`;return`${b.slice(0,p)}${h}`}function Zn(b,h,p){vt(h,"offset"),(b[h]===void 0||b[h+p]===void 0)&&kt(h,b.length-(p+1))}function ce(b,h,p,B,D,L){if(b>p||b<h){const Q=typeof h=="bigint"?"n":"";let ht;throw h===0||h===BigInt(0)?ht=`>= 0${Q} and < 2${Q} ** ${(L+1)*8}${Q}`:ht=`>= -(2${Q} ** ${(L+1)*8-1}${Q}) and < 2 ** ${(L+1)*8-1}${Q}`,new ct.ERR_OUT_OF_RANGE("value",ht,b)}Zn(B,D,L)}function vt(b,h){if(typeof b!="number")throw new ct.ERR_INVALID_ARG_TYPE(h,"number",b)}function kt(b,h,p){throw Math.floor(b)!==b?(vt(b,p),new ct.ERR_OUT_OF_RANGE("offset","an integer",b)):h<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,b)}const Fn=/[^+/0-9A-Za-z-_]/g;function on(b){if(b=b.split("=")[0],b=b.trim().replace(Fn,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function Yn(b,h){h=h||1/0;let p;const B=b.length;let D=null;const L=[];for(let Q=0;Q<B;++Q){if(p=b.charCodeAt(Q),p>55295&&p<57344){if(!D){if(p>56319){(h-=3)>-1&&L.push(239,191,189);continue}else if(Q+1===B){(h-=3)>-1&&L.push(239,191,189);continue}D=p;continue}if(p<56320){(h-=3)>-1&&L.push(239,191,189),D=p;continue}p=(D-55296<<10|p-56320)+65536}else D&&(h-=3)>-1&&L.push(239,191,189);if(D=null,p<128){if((h-=1)<0)break;L.push(p)}else if(p<2048){if((h-=2)<0)break;L.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;L.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;L.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return L}function Nr(b){const h=[];for(let p=0;p<b.length;++p)h.push(b.charCodeAt(p)&255);return h}function zs(b,h){let p,B,D;const L=[];for(let Q=0;Q<b.length&&!((h-=2)<0);++Q)p=b.charCodeAt(Q),B=p>>8,D=p%256,L.push(D),L.push(B);return L}function Xn(b){return t.toByteArray(on(b))}function ne(b,h,p,B){let D;for(D=0;D<B&&!(D+p>=h.length||D>=b.length);++D)h[D+p]=b[D];return D}function Ut(b,h){return b instanceof h||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===h.name}function De(b){return b!==b}const Ii=function(){const b="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){const B=p*16;for(let D=0;D<16;++D)h[B+D]=b[p]+b[D]}return h}();function Ve(b){return typeof BigInt>"u"?tr:b}function tr(){throw new Error("BigInt not supported")}})(So);var u1=function(t){for(var e=new Buffer(t.length),n=0,i=t.length-1;n<=i;++n,--i)e[n]=t[i],e[i]=t[n];return e},vd={exports:{}};function l1(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var b0={exports:{}};const f1={},h1=Object.freeze(Object.defineProperty({__proto__:null,default:f1},Symbol.toStringTag,{value:"Module"})),d1=t1(h1);var _l;function wt(){return _l||(_l=1,function(r,t){(function(e,n){r.exports=n()})(ut,function(){var e=e||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof l1=="function")try{s=d1}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function E(){}return function(A){var C;return E.prototype=A,C=new E,E.prototype=null,C}}(),c={},u=c.lib={},l=u.Base=function(){return{extend:function(E){var A=a(this);return E&&A.mixIn(E),(!A.hasOwnProperty("init")||this.init===A.init)&&(A.init=function(){A.$super.init.apply(this,arguments)}),A.init.prototype=A,A.$super=this,A},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var A in E)E.hasOwnProperty(A)&&(this[A]=E[A]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=l.extend({init:function(E,A){E=this.words=E||[],A!=i?this.sigBytes=A:this.sigBytes=E.length*4},toString:function(E){return(E||x).stringify(this)},concat:function(E){var A=this.words,C=E.words,I=this.sigBytes,T=E.sigBytes;if(this.clamp(),I%4)for(var R=0;R<T;R++){var S=C[R>>>2]>>>24-R%4*8&255;A[I+R>>>2]|=S<<24-(I+R)%4*8}else for(var V=0;V<T;V+=4)A[I+V>>>2]=C[V>>>2];return this.sigBytes+=T,this},clamp:function(){var E=this.words,A=this.sigBytes;E[A>>>2]&=4294967295<<32-A%4*8,E.length=n.ceil(A/4)},clone:function(){var E=l.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var A=[],C=0;C<E;C+=4)A.push(o());return new f.init(A,E)}}),d=c.enc={},x=d.Hex={stringify:function(E){for(var A=E.words,C=E.sigBytes,I=[],T=0;T<C;T++){var R=A[T>>>2]>>>24-T%4*8&255;I.push((R>>>4).toString(16)),I.push((R&15).toString(16))}return I.join("")},parse:function(E){for(var A=E.length,C=[],I=0;I<A;I+=2)C[I>>>3]|=parseInt(E.substr(I,2),16)<<24-I%8*4;return new f.init(C,A/2)}},g=d.Latin1={stringify:function(E){for(var A=E.words,C=E.sigBytes,I=[],T=0;T<C;T++){var R=A[T>>>2]>>>24-T%4*8&255;I.push(String.fromCharCode(R))}return I.join("")},parse:function(E){for(var A=E.length,C=[],I=0;I<A;I++)C[I>>>2]|=(E.charCodeAt(I)&255)<<24-I%4*8;return new f.init(C,A)}},m=d.Utf8={stringify:function(E){try{return decodeURIComponent(escape(g.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return g.parse(unescape(encodeURIComponent(E)))}},w=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=m.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var A,C=this._data,I=C.words,T=C.sigBytes,R=this.blockSize,S=R*4,V=T/S;E?V=n.ceil(V):V=n.max((V|0)-this._minBufferSize,0);var k=V*R,N=n.min(k*4,T);if(k){for(var z=0;z<k;z+=R)this._doProcessBlock(I,z);A=I.splice(0,k),C.sigBytes-=N}return new f.init(A,N)},clone:function(){var E=l.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});u.Hasher=w.extend({cfg:l.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var A=this._doFinalize();return A},blockSize:16,_createHelper:function(E){return function(A,C){return new E.init(C).finalize(A)}},_createHmacHelper:function(E){return function(A,C){return new v.HMAC.init(E,C).finalize(A)}}});var v=c.algo={};return c}(Math);return e})}(b0)),b0.exports}(function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(n){var i=e,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=[],l=[];(function(){function x(v){for(var E=n.sqrt(v),A=2;A<=E;A++)if(!(v%A))return!1;return!0}function g(v){return(v-(v|0))*4294967296|0}for(var m=2,w=0;w<64;)x(m)&&(w<8&&(u[w]=g(n.pow(m,1/2))),l[w]=g(n.pow(m,1/3)),w++),m++})();var f=[],d=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(x,g){for(var m=this._hash.words,w=m[0],v=m[1],E=m[2],A=m[3],C=m[4],I=m[5],T=m[6],R=m[7],S=0;S<64;S++){if(S<16)f[S]=x[g+S]|0;else{var V=f[S-15],k=(V<<25|V>>>7)^(V<<14|V>>>18)^V>>>3,N=f[S-2],z=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;f[S]=k+f[S-7]+z+f[S-16]}var G=C&I^~C&T,X=w&v^w&E^v&E,M=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),J=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),nt=R+J+G+l[S]+f[S],it=M+X;R=T,T=I,I=C,C=A+nt|0,A=E,E=v,v=w,w=nt+it|0}m[0]=m[0]+w|0,m[1]=m[1]+v|0,m[2]=m[2]+E|0,m[3]=m[3]+A|0,m[4]=m[4]+C|0,m[5]=m[5]+I|0,m[6]=m[6]+T|0,m[7]=m[7]+R|0},_doFinalize:function(){var x=this._data,g=x.words,m=this._nDataBytes*8,w=x.sigBytes*8;return g[w>>>5]|=128<<24-w%32,g[(w+64>>>9<<4)+14]=n.floor(m/4294967296),g[(w+64>>>9<<4)+15]=m,x.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var x=a.clone.call(this);return x._hash=this._hash.clone(),x}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),e.SHA256})})(vd);var No=vd.exports,Bd={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(ut,function(){function e(o,a){var c=a?"└":"├";return o?c+="─ ":c+="──┐",c}function n(o,a){var c=[];for(var u in o)o.hasOwnProperty(u)&&(a&&typeof o[u]=="function"||c.push(u));return c}function i(o,a,c,u,l,f,d){var x="",g=0,m,w,v=u.slice(0);if(v.push([a,c])&&u.length>0&&(u.forEach(function(A,C){C>0&&(x+=(A[1]?" ":"│")+"  "),!w&&A[0]===a&&(w=!0)}),x+=e(o,c)+o,l&&(typeof a!="object"||a instanceof Date)&&(x+=": "+a),w&&(x+=" (circular ref.)"),d(x)),!w&&typeof a=="object"){var E=n(a,f);E.forEach(function(A){m=++g===E.length,i(A,a[A],m,v,l,f,d)})}}var s={};return s.asLines=function(o,a,c,u){var l=typeof c!="function"?c:!1;i(".",o,!1,[],a,l,u||c)},s.asTree=function(o,a,c){var u="";return i(".",o,!1,[],a,c,function(l){u+=l+`
`}),u},s})})(Bd);var Cd=Bd.exports,jn={},Fd={exports:{}},A0={exports:{}},Ml;function Ja(){return Ml||(Ml=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(n){var i=e,s=i.lib,o=s.Base,a=s.WordArray,c=i.x64={};c.Word=o.extend({init:function(u,l){this.high=u,this.low=l}}),c.WordArray=o.extend({init:function(u,l){u=this.words=u||[],l!=n?this.sigBytes=l:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,l=u.length,f=[],d=0;d<l;d++){var x=u[d];f.push(x.high),f.push(x.low)}return a.create(f,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),l=u.words=this.words.slice(0),f=l.length,d=0;d<f;d++)l[d]=l[d].clone();return u}})}(),e})}(A0)),A0.exports}var E0={exports:{}},Hl;function p1(){return Hl||(Hl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(){if(typeof ArrayBuffer=="function"){var n=e,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,l=[],f=0;f<u;f++)l[f>>>2]|=c[f]<<24-f%4*8;o.call(this,l,u)}else o.apply(this,arguments)};a.prototype=s}}(),e.lib.WordArray})}(E0)),E0.exports}var v0={exports:{}},zl;function x1(){return zl||(zl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var u=c.words,l=c.sigBytes,f=[],d=0;d<l;d+=2){var x=u[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(x))}return f.join("")},parse:function(c){for(var u=c.length,l=[],f=0;f<u;f++)l[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return s.create(l,u*2)}},o.Utf16LE={stringify:function(c){for(var u=c.words,l=c.sigBytes,f=[],d=0;d<l;d+=2){var x=a(u[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(x))}return f.join("")},parse:function(c){for(var u=c.length,l=[],f=0;f<u;f++)l[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return s.create(l,u*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),e.enc.Utf16})}(v0)),v0.exports}var B0={exports:{}},Gl;function Fi(){return Gl||(Gl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var u=c.words,l=c.sigBytes,f=this._map;c.clamp();for(var d=[],x=0;x<l;x+=3)for(var g=u[x>>>2]>>>24-x%4*8&255,m=u[x+1>>>2]>>>24-(x+1)%4*8&255,w=u[x+2>>>2]>>>24-(x+2)%4*8&255,v=g<<16|m<<8|w,E=0;E<4&&x+E*.75<l;E++)d.push(f.charAt(v>>>6*(3-E)&63));var A=f.charAt(64);if(A)for(;d.length%4;)d.push(A);return d.join("")},parse:function(c){var u=c.length,l=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<l.length;d++)f[l.charCodeAt(d)]=d}var x=l.charAt(64);if(x){var g=c.indexOf(x);g!==-1&&(u=g)}return a(c,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,u,l){for(var f=[],d=0,x=0;x<u;x++)if(x%4){var g=l[c.charCodeAt(x-1)]<<x%4*2,m=l[c.charCodeAt(x)]>>>6-x%4*2,w=g|m;f[d>>>2]|=w<<24-d%4*8,d++}return s.create(f,d)}}(),e.enc.Base64})}(B0)),B0.exports}var C0={exports:{}},Vl;function y1(){return Vl||(Vl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var l=c.words,f=c.sigBytes,d=u?this._safe_map:this._map;c.clamp();for(var x=[],g=0;g<f;g+=3)for(var m=l[g>>>2]>>>24-g%4*8&255,w=l[g+1>>>2]>>>24-(g+1)%4*8&255,v=l[g+2>>>2]>>>24-(g+2)%4*8&255,E=m<<16|w<<8|v,A=0;A<4&&g+A*.75<f;A++)x.push(d.charAt(E>>>6*(3-A)&63));var C=d.charAt(64);if(C)for(;x.length%4;)x.push(C);return x.join("")},parse:function(c,u){u===void 0&&(u=!0);var l=c.length,f=u?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var x=0;x<f.length;x++)d[f.charCodeAt(x)]=x}var g=f.charAt(64);if(g){var m=c.indexOf(g);m!==-1&&(l=m)}return a(c,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,u,l){for(var f=[],d=0,x=0;x<u;x++)if(x%4){var g=l[c.charCodeAt(x-1)]<<x%4*2,m=l[c.charCodeAt(x)]>>>6-x%4*2,w=g|m;f[d>>>2]|=w<<24-d%4*8,d++}return s.create(f,d)}}(),e.enc.Base64url})}(C0)),C0.exports}var F0={exports:{}},Ql;function Ti(){return Ql||(Ql=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(n){var i=e,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=[];(function(){for(var m=0;m<64;m++)u[m]=n.abs(n.sin(m+1))*4294967296|0})();var l=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,w){for(var v=0;v<16;v++){var E=w+v,A=m[E];m[E]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var C=this._hash.words,I=m[w+0],T=m[w+1],R=m[w+2],S=m[w+3],V=m[w+4],k=m[w+5],N=m[w+6],z=m[w+7],G=m[w+8],X=m[w+9],M=m[w+10],J=m[w+11],nt=m[w+12],it=m[w+13],st=m[w+14],at=m[w+15],_=C[0],H=C[1],q=C[2],K=C[3];_=f(_,H,q,K,I,7,u[0]),K=f(K,_,H,q,T,12,u[1]),q=f(q,K,_,H,R,17,u[2]),H=f(H,q,K,_,S,22,u[3]),_=f(_,H,q,K,V,7,u[4]),K=f(K,_,H,q,k,12,u[5]),q=f(q,K,_,H,N,17,u[6]),H=f(H,q,K,_,z,22,u[7]),_=f(_,H,q,K,G,7,u[8]),K=f(K,_,H,q,X,12,u[9]),q=f(q,K,_,H,M,17,u[10]),H=f(H,q,K,_,J,22,u[11]),_=f(_,H,q,K,nt,7,u[12]),K=f(K,_,H,q,it,12,u[13]),q=f(q,K,_,H,st,17,u[14]),H=f(H,q,K,_,at,22,u[15]),_=d(_,H,q,K,T,5,u[16]),K=d(K,_,H,q,N,9,u[17]),q=d(q,K,_,H,J,14,u[18]),H=d(H,q,K,_,I,20,u[19]),_=d(_,H,q,K,k,5,u[20]),K=d(K,_,H,q,M,9,u[21]),q=d(q,K,_,H,at,14,u[22]),H=d(H,q,K,_,V,20,u[23]),_=d(_,H,q,K,X,5,u[24]),K=d(K,_,H,q,st,9,u[25]),q=d(q,K,_,H,S,14,u[26]),H=d(H,q,K,_,G,20,u[27]),_=d(_,H,q,K,it,5,u[28]),K=d(K,_,H,q,R,9,u[29]),q=d(q,K,_,H,z,14,u[30]),H=d(H,q,K,_,nt,20,u[31]),_=x(_,H,q,K,k,4,u[32]),K=x(K,_,H,q,G,11,u[33]),q=x(q,K,_,H,J,16,u[34]),H=x(H,q,K,_,st,23,u[35]),_=x(_,H,q,K,T,4,u[36]),K=x(K,_,H,q,V,11,u[37]),q=x(q,K,_,H,z,16,u[38]),H=x(H,q,K,_,M,23,u[39]),_=x(_,H,q,K,it,4,u[40]),K=x(K,_,H,q,I,11,u[41]),q=x(q,K,_,H,S,16,u[42]),H=x(H,q,K,_,N,23,u[43]),_=x(_,H,q,K,X,4,u[44]),K=x(K,_,H,q,nt,11,u[45]),q=x(q,K,_,H,at,16,u[46]),H=x(H,q,K,_,R,23,u[47]),_=g(_,H,q,K,I,6,u[48]),K=g(K,_,H,q,z,10,u[49]),q=g(q,K,_,H,st,15,u[50]),H=g(H,q,K,_,k,21,u[51]),_=g(_,H,q,K,nt,6,u[52]),K=g(K,_,H,q,S,10,u[53]),q=g(q,K,_,H,M,15,u[54]),H=g(H,q,K,_,T,21,u[55]),_=g(_,H,q,K,G,6,u[56]),K=g(K,_,H,q,at,10,u[57]),q=g(q,K,_,H,N,15,u[58]),H=g(H,q,K,_,it,21,u[59]),_=g(_,H,q,K,V,6,u[60]),K=g(K,_,H,q,J,10,u[61]),q=g(q,K,_,H,R,15,u[62]),H=g(H,q,K,_,X,21,u[63]),C[0]=C[0]+_|0,C[1]=C[1]+H|0,C[2]=C[2]+q|0,C[3]=C[3]+K|0},_doFinalize:function(){var m=this._data,w=m.words,v=this._nDataBytes*8,E=m.sigBytes*8;w[E>>>5]|=128<<24-E%32;var A=n.floor(v/4294967296),C=v;w[(E+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,w[(E+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,m.sigBytes=(w.length+1)*4,this._process();for(var I=this._hash,T=I.words,R=0;R<4;R++){var S=T[R];T[R]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return I},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,w,v,E,A,C,I){var T=m+(w&v|~w&E)+A+I;return(T<<C|T>>>32-C)+w}function d(m,w,v,E,A,C,I){var T=m+(w&E|v&~E)+A+I;return(T<<C|T>>>32-C)+w}function x(m,w,v,E,A,C,I){var T=m+(w^v^E)+A+I;return(T<<C|T>>>32-C)+w}function g(m,w,v,E,A,C,I){var T=m+(v^(w|~E))+A+I;return(T<<C|T>>>32-C)+w}i.MD5=a._createHelper(l),i.HmacMD5=a._createHmacHelper(l)}(Math),e.MD5})}(F0)),F0.exports}var T0={exports:{}},Wl;function Td(){return Wl||(Wl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,c=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,f){for(var d=this._hash.words,x=d[0],g=d[1],m=d[2],w=d[3],v=d[4],E=0;E<80;E++){if(E<16)c[E]=l[f+E]|0;else{var A=c[E-3]^c[E-8]^c[E-14]^c[E-16];c[E]=A<<1|A>>>31}var C=(x<<5|x>>>27)+v+c[E];E<20?C+=(g&m|~g&w)+1518500249:E<40?C+=(g^m^w)+1859775393:E<60?C+=(g&m|g&w|m&w)-1894007588:C+=(g^m^w)-899497514,v=w,w=m,m=g<<30|g>>>2,g=x,x=C}d[0]=d[0]+x|0,d[1]=d[1]+g|0,d[2]=d[2]+m|0,d[3]=d[3]+w|0,d[4]=d[4]+v|0},_doFinalize:function(){var l=this._data,f=l.words,d=this._nDataBytes*8,x=l.sigBytes*8;return f[x>>>5]|=128<<24-x%32,f[(x+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(x+64>>>9<<4)+15]=d,l.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var l=o.clone.call(this);return l._hash=this._hash.clone(),l}});n.SHA1=o._createHelper(u),n.HmacSHA1=o._createHmacHelper(u)}(),e.SHA1})}(T0)),T0.exports}var I0={exports:{}},Kl;function g1(){return Kl||(Kl=1,function(r,t){(function(e,n,i){r.exports=n(wt(),No)})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),e.SHA224})}(I0)),I0.exports}var k0={exports:{}},$l;function Id(){return $l||($l=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Ja())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,c=o.WordArray,u=n.algo;function l(){return a.create.apply(a,arguments)}var f=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],d=[];(function(){for(var g=0;g<80;g++)d[g]=l()})();var x=u.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(g,m){for(var w=this._hash.words,v=w[0],E=w[1],A=w[2],C=w[3],I=w[4],T=w[5],R=w[6],S=w[7],V=v.high,k=v.low,N=E.high,z=E.low,G=A.high,X=A.low,M=C.high,J=C.low,nt=I.high,it=I.low,st=T.high,at=T.low,_=R.high,H=R.low,q=S.high,K=S.low,bt=V,xt=k,It=N,ct=z,jt=G,ee=X,Zn=M,ce=J,vt=nt,kt=it,Fn=st,on=at,Yn=_,Nr=H,zs=q,Xn=K,ne=0;ne<80;ne++){var Ut,De,Ii=d[ne];if(ne<16)De=Ii.high=g[m+ne*2]|0,Ut=Ii.low=g[m+ne*2+1]|0;else{var Ve=d[ne-15],tr=Ve.high,b=Ve.low,h=(tr>>>1|b<<31)^(tr>>>8|b<<24)^tr>>>7,p=(b>>>1|tr<<31)^(b>>>8|tr<<24)^(b>>>7|tr<<25),B=d[ne-2],D=B.high,L=B.low,Q=(D>>>19|L<<13)^(D<<3|L>>>29)^D>>>6,ht=(L>>>19|D<<13)^(L<<3|D>>>29)^(L>>>6|D<<26),St=d[ne-7],Pt=St.high,Nt=St.low,Bt=d[ne-16],zd=Bt.high,mu=Bt.low;Ut=p+Nt,De=h+Pt+(Ut>>>0<p>>>0?1:0),Ut=Ut+ht,De=De+Q+(Ut>>>0<ht>>>0?1:0),Ut=Ut+mu,De=De+zd+(Ut>>>0<mu>>>0?1:0),Ii.high=De,Ii.low=Ut}var Gd=vt&Fn^~vt&Yn,wu=kt&on^~kt&Nr,Vd=bt&It^bt&jt^It&jt,Qd=xt&ct^xt&ee^ct&ee,Wd=(bt>>>28|xt<<4)^(bt<<30|xt>>>2)^(bt<<25|xt>>>7),bu=(xt>>>28|bt<<4)^(xt<<30|bt>>>2)^(xt<<25|bt>>>7),Kd=(vt>>>14|kt<<18)^(vt>>>18|kt<<14)^(vt<<23|kt>>>9),$d=(kt>>>14|vt<<18)^(kt>>>18|vt<<14)^(kt<<23|vt>>>9),Au=f[ne],qd=Au.high,Eu=Au.low,ve=Xn+$d,er=zs+Kd+(ve>>>0<Xn>>>0?1:0),ve=ve+wu,er=er+Gd+(ve>>>0<wu>>>0?1:0),ve=ve+Eu,er=er+qd+(ve>>>0<Eu>>>0?1:0),ve=ve+Ut,er=er+De+(ve>>>0<Ut>>>0?1:0),vu=bu+Qd,Jd=Wd+Vd+(vu>>>0<bu>>>0?1:0);zs=Yn,Xn=Nr,Yn=Fn,Nr=on,Fn=vt,on=kt,kt=ce+ve|0,vt=Zn+er+(kt>>>0<ce>>>0?1:0)|0,Zn=jt,ce=ee,jt=It,ee=ct,It=bt,ct=xt,xt=ve+vu|0,bt=er+Jd+(xt>>>0<ve>>>0?1:0)|0}k=v.low=k+xt,v.high=V+bt+(k>>>0<xt>>>0?1:0),z=E.low=z+ct,E.high=N+It+(z>>>0<ct>>>0?1:0),X=A.low=X+ee,A.high=G+jt+(X>>>0<ee>>>0?1:0),J=C.low=J+ce,C.high=M+Zn+(J>>>0<ce>>>0?1:0),it=I.low=it+kt,I.high=nt+vt+(it>>>0<kt>>>0?1:0),at=T.low=at+on,T.high=st+Fn+(at>>>0<on>>>0?1:0),H=R.low=H+Nr,R.high=_+Yn+(H>>>0<Nr>>>0?1:0),K=S.low=K+Xn,S.high=q+zs+(K>>>0<Xn>>>0?1:0)},_doFinalize:function(){var g=this._data,m=g.words,w=this._nDataBytes*8,v=g.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(w/4294967296),m[(v+128>>>10<<5)+31]=w,g.sigBytes=m.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});n.SHA512=s._createHelper(x),n.HmacSHA512=s._createHmacHelper(x)}(),e.SHA512})}(k0)),k0.exports}var P0={exports:{}},ql;function m1(){return ql||(ql=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Ja(),Id())})(ut,function(e){return function(){var n=e,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var l=c._doFinalize.call(this);return l.sigBytes-=16,l}});n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u)}(),e.SHA384})}(P0)),P0.exports}var D0={exports:{}},Jl;function w1(){return Jl||(Jl=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Ja())})(ut,function(e){return function(n){var i=e,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.x64,u=c.Word,l=i.algo,f=[],d=[],x=[];(function(){for(var w=1,v=0,E=0;E<24;E++){f[w+5*v]=(E+1)*(E+2)/2%64;var A=v%5,C=(2*w+3*v)%5;w=A,v=C}for(var w=0;w<5;w++)for(var v=0;v<5;v++)d[w+5*v]=v+(2*w+3*v)%5*5;for(var I=1,T=0;T<24;T++){for(var R=0,S=0,V=0;V<7;V++){if(I&1){var k=(1<<V)-1;k<32?S^=1<<k:R^=1<<k-32}I&128?I=I<<1^113:I<<=1}x[T]=u.create(R,S)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=u.create()})();var m=l.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],v=0;v<25;v++)w[v]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,v){for(var E=this._state,A=this.blockSize/2,C=0;C<A;C++){var I=w[v+2*C],T=w[v+2*C+1];I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var R=E[C];R.high^=T,R.low^=I}for(var S=0;S<24;S++){for(var V=0;V<5;V++){for(var k=0,N=0,z=0;z<5;z++){var R=E[V+5*z];k^=R.high,N^=R.low}var G=g[V];G.high=k,G.low=N}for(var V=0;V<5;V++)for(var X=g[(V+4)%5],M=g[(V+1)%5],J=M.high,nt=M.low,k=X.high^(J<<1|nt>>>31),N=X.low^(nt<<1|J>>>31),z=0;z<5;z++){var R=E[V+5*z];R.high^=k,R.low^=N}for(var it=1;it<25;it++){var k,N,R=E[it],st=R.high,at=R.low,_=f[it];_<32?(k=st<<_|at>>>32-_,N=at<<_|st>>>32-_):(k=at<<_-32|st>>>64-_,N=st<<_-32|at>>>64-_);var H=g[d[it]];H.high=k,H.low=N}var q=g[0],K=E[0];q.high=K.high,q.low=K.low;for(var V=0;V<5;V++)for(var z=0;z<5;z++){var it=V+5*z,R=E[it],bt=g[it],xt=g[(V+1)%5+5*z],It=g[(V+2)%5+5*z];R.high=bt.high^~xt.high&It.high,R.low=bt.low^~xt.low&It.low}var R=E[0],ct=x[S];R.high^=ct.high,R.low^=ct.low}},_doFinalize:function(){var w=this._data,v=w.words;this._nDataBytes*8;var E=w.sigBytes*8,A=this.blockSize*32;v[E>>>5]|=1<<24-E%32,v[(n.ceil((E+1)/A)*A>>>5)-1]|=128,w.sigBytes=v.length*4,this._process();for(var C=this._state,I=this.cfg.outputLength/8,T=I/8,R=[],S=0;S<T;S++){var V=C[S],k=V.high,N=V.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,R.push(N),R.push(k)}return new o.init(R,I)},clone:function(){for(var w=a.clone.call(this),v=w._state=this._state.slice(0),E=0;E<25;E++)v[E]=v[E].clone();return w}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),e.SHA3})}(D0)),D0.exports}var R0={exports:{}},jl;function b1(){return jl||(jl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=e,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=o.create([0,1518500249,1859775393,2400959708,2840853838]),g=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,R){for(var S=0;S<16;S++){var V=R+S,k=T[V];T[V]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var N=this._hash.words,z=x.words,G=g.words,X=u.words,M=l.words,J=f.words,nt=d.words,it,st,at,_,H,q,K,bt,xt,It;q=it=N[0],K=st=N[1],bt=at=N[2],xt=_=N[3],It=H=N[4];for(var ct,S=0;S<80;S+=1)ct=it+T[R+X[S]]|0,S<16?ct+=w(st,at,_)+z[0]:S<32?ct+=v(st,at,_)+z[1]:S<48?ct+=E(st,at,_)+z[2]:S<64?ct+=A(st,at,_)+z[3]:ct+=C(st,at,_)+z[4],ct=ct|0,ct=I(ct,J[S]),ct=ct+H|0,it=H,H=_,_=I(at,10),at=st,st=ct,ct=q+T[R+M[S]]|0,S<16?ct+=C(K,bt,xt)+G[0]:S<32?ct+=A(K,bt,xt)+G[1]:S<48?ct+=E(K,bt,xt)+G[2]:S<64?ct+=v(K,bt,xt)+G[3]:ct+=w(K,bt,xt)+G[4],ct=ct|0,ct=I(ct,nt[S]),ct=ct+It|0,q=It,It=xt,xt=I(bt,10),bt=K,K=ct;ct=N[1]+at+xt|0,N[1]=N[2]+_+It|0,N[2]=N[3]+H+q|0,N[3]=N[4]+it+K|0,N[4]=N[0]+st+bt|0,N[0]=ct},_doFinalize:function(){var T=this._data,R=T.words,S=this._nDataBytes*8,V=T.sigBytes*8;R[V>>>5]|=128<<24-V%32,R[(V+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,T.sigBytes=(R.length+1)*4,this._process();for(var k=this._hash,N=k.words,z=0;z<5;z++){var G=N[z];N[z]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return k},clone:function(){var T=a.clone.call(this);return T._hash=this._hash.clone(),T}});function w(T,R,S){return T^R^S}function v(T,R,S){return T&R|~T&S}function E(T,R,S){return(T|~R)^S}function A(T,R,S){return T&S|R&~S}function C(T,R,S){return T^(R|~S)}function I(T,R){return T<<R|T>>>32-R}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),e.RIPEMD160})}(R0)),R0.exports}var S0={exports:{}},Zl;function uu(){return Zl||(Zl=1,function(r,t){(function(e,n){r.exports=n(wt())})(ut,function(e){(function(){var n=e,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,c=n.algo;c.HMAC=s.extend({init:function(u,l){u=this._hasher=new u.init,typeof l=="string"&&(l=a.parse(l));var f=u.blockSize,d=f*4;l.sigBytes>d&&(l=u.finalize(l)),l.clamp();for(var x=this._oKey=l.clone(),g=this._iKey=l.clone(),m=x.words,w=g.words,v=0;v<f;v++)m[v]^=1549556828,w[v]^=909522486;x.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var l=this._hasher,f=l.finalize(u);l.reset();var d=l.finalize(this._oKey.clone().concat(f));return d}})})()})}(S0)),S0.exports}var N0={exports:{}},Yl;function A1(){return Yl||(Yl=1,function(r,t){(function(e,n,i){r.exports=n(wt(),No,uu())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.SHA256,u=a.HMAC,l=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var x=this.cfg,g=u.create(x.hasher,f),m=o.create(),w=o.create([1]),v=m.words,E=w.words,A=x.keySize,C=x.iterations;v.length<A;){var I=g.update(d).finalize(w);g.reset();for(var T=I.words,R=T.length,S=I,V=1;V<C;V++){S=g.finalize(S),g.reset();for(var k=S.words,N=0;N<R;N++)T[N]^=k[N]}m.concat(I),E[0]++}return m.sigBytes=A*4,m}});n.PBKDF2=function(f,d,x){return l.create(x).compute(f,d)}}(),e.PBKDF2})}(N0)),N0.exports}var O0={exports:{}},Xl;function Sr(){return Xl||(Xl=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Td(),uu())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.MD5,u=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,f){for(var d,x=this.cfg,g=x.hasher.create(),m=o.create(),w=m.words,v=x.keySize,E=x.iterations;w.length<v;){d&&g.update(d),d=g.update(l).finalize(f),g.reset();for(var A=1;A<E;A++)d=g.finalize(d),g.reset();m.concat(d)}return m.sigBytes=v*4,m}});n.EvpKDF=function(l,f,d){return u.create(d).compute(l,f)}}(),e.EvpKDF})}(O0)),O0.exports}var L0={exports:{}},tf;function Jt(){return tf||(tf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Sr())})(ut,function(e){e.lib.Cipher||function(n){var i=e,s=i.lib,o=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var l=u.Base64,f=i.algo,d=f.EvpKDF,x=s.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(k,N){return this.create(this._ENC_XFORM_MODE,k,N)},createDecryptor:function(k,N){return this.create(this._DEC_XFORM_MODE,k,N)},init:function(k,N,z){this.cfg=this.cfg.extend(z),this._xformMode=k,this._key=N,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(N){return typeof N=="string"?V:T}return function(N){return{encrypt:function(z,G,X){return k(G).encrypt(N,z,G,X)},decrypt:function(z,G,X){return k(G).decrypt(N,z,G,X)}}}}()});s.StreamCipher=x.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var g=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(k,N){return this.Encryptor.create(k,N)},createDecryptor:function(k,N){return this.Decryptor.create(k,N)},init:function(k,N){this._cipher=k,this._iv=N}}),w=g.CBC=function(){var k=m.extend();k.Encryptor=k.extend({processBlock:function(z,G){var X=this._cipher,M=X.blockSize;N.call(this,z,G,M),X.encryptBlock(z,G),this._prevBlock=z.slice(G,G+M)}}),k.Decryptor=k.extend({processBlock:function(z,G){var X=this._cipher,M=X.blockSize,J=z.slice(G,G+M);X.decryptBlock(z,G),N.call(this,z,G,M),this._prevBlock=J}});function N(z,G,X){var M,J=this._iv;J?(M=J,this._iv=n):M=this._prevBlock;for(var nt=0;nt<X;nt++)z[G+nt]^=M[nt]}return k}(),v=i.pad={},E=v.Pkcs7={pad:function(k,N){for(var z=N*4,G=z-k.sigBytes%z,X=G<<24|G<<16|G<<8|G,M=[],J=0;J<G;J+=4)M.push(X);var nt=a.create(M,G);k.concat(nt)},unpad:function(k){var N=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=N}};s.BlockCipher=x.extend({cfg:x.cfg.extend({mode:w,padding:E}),reset:function(){var k;x.reset.call(this);var N=this.cfg,z=N.iv,G=N.mode;this._xformMode==this._ENC_XFORM_MODE?k=G.createEncryptor:(k=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,z&&z.words):(this._mode=k.call(G,this,z&&z.words),this._mode.__creator=k)},_doProcessBlock:function(k,N){this._mode.processBlock(k,N)},_doFinalize:function(){var k,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),N.unpad(k)),k},blockSize:128/32});var A=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),C=i.format={},I=C.OpenSSL={stringify:function(k){var N,z=k.ciphertext,G=k.salt;return G?N=a.create([1398893684,1701076831]).concat(G).concat(z):N=z,N.toString(l)},parse:function(k){var N,z=l.parse(k),G=z.words;return G[0]==1398893684&&G[1]==1701076831&&(N=a.create(G.slice(2,4)),G.splice(0,4),z.sigBytes-=16),A.create({ciphertext:z,salt:N})}},T=s.SerializableCipher=o.extend({cfg:o.extend({format:I}),encrypt:function(k,N,z,G){G=this.cfg.extend(G);var X=k.createEncryptor(z,G),M=X.finalize(N),J=X.cfg;return A.create({ciphertext:M,key:z,iv:J.iv,algorithm:k,mode:J.mode,padding:J.padding,blockSize:k.blockSize,formatter:G.format})},decrypt:function(k,N,z,G){G=this.cfg.extend(G),N=this._parse(N,G.format);var X=k.createDecryptor(z,G).finalize(N.ciphertext);return X},_parse:function(k,N){return typeof k=="string"?N.parse(k,this):k}}),R=i.kdf={},S=R.OpenSSL={execute:function(k,N,z,G,X){if(G||(G=a.random(64/8)),X)var M=d.create({keySize:N+z,hasher:X}).compute(k,G);else var M=d.create({keySize:N+z}).compute(k,G);var J=a.create(M.words.slice(N),z*4);return M.sigBytes=N*4,A.create({key:M,iv:J,salt:G})}},V=s.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:S}),encrypt:function(k,N,z,G){G=this.cfg.extend(G);var X=G.kdf.execute(z,k.keySize,k.ivSize,G.salt,G.hasher);G.iv=X.iv;var M=T.encrypt.call(this,k,N,X.key,G);return M.mixIn(X),M},decrypt:function(k,N,z,G){G=this.cfg.extend(G),N=this._parse(N,G.format);var X=G.kdf.execute(z,k.keySize,k.ivSize,N.salt,G.hasher);G.iv=X.iv;var M=T.decrypt.call(this,k,N,X.key,G);return M}})}()})}(L0)),L0.exports}var U0={exports:{}},ef;function E1(){return ef||(ef=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.mode.CFB=function(){var n=e.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize;i.call(this,s,o,c,a),this._prevBlock=s.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=s.slice(o,o+c);i.call(this,s,o,c,a),this._prevBlock=u}});function i(s,o,a,c){var u,l=this._iv;l?(u=l.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var f=0;f<a;f++)s[o+f]^=u[f]}return n}(),e.mode.CFB})}(U0)),U0.exports}var _0={exports:{}},nf;function v1(){return nf||(nf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.mode.CTR=function(){var n=e.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,l=this._counter;u&&(l=this._counter=u.slice(0),this._iv=void 0);var f=l.slice(0);a.encryptBlock(f,0),l[c-1]=l[c-1]+1|0;for(var d=0;d<c;d++)s[o+d]^=f[d]}});return n.Decryptor=i,n}(),e.mode.CTR})}(_0)),_0.exports}var M0={exports:{}},rf;function B1(){return rf||(rf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return e.mode.CTRGladman=function(){var n=e.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,u=a>>8&255,l=a&255;c===255?(c=0,u===255?(u=0,l===255?l=0:++l):++u):++c,a=0,a+=c<<16,a+=u<<8,a+=l}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,c){var u=this._cipher,l=u.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var x=d.slice(0);u.encryptBlock(x,0);for(var g=0;g<l;g++)a[c+g]^=x[g]}});return n.Decryptor=o,n}(),e.mode.CTRGladman})}(M0)),M0.exports}var H0={exports:{}},sf;function C1(){return sf||(sf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.mode.OFB=function(){var n=e.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,l=this._keystream;u&&(l=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(l,0);for(var f=0;f<c;f++)s[o+f]^=l[f]}});return n.Decryptor=i,n}(),e.mode.OFB})}(H0)),H0.exports}var z0={exports:{}},of;function F1(){return of||(of=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.mode.ECB=function(){var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),e.mode.ECB})}(z0)),z0.exports}var G0={exports:{}},af;function T1(){return af||(af=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,c=s+a-1;n.clamp(),n.words[c>>>2]|=a<<24-c%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},e.pad.Ansix923})}(G0)),G0.exports}var V0={exports:{}},cf;function I1(){return cf||(cf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},e.pad.Iso10126})}(V0)),V0.exports}var Q0={exports:{}},uf;function k1(){return uf||(uf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.pad.Iso97971={pad:function(n,i){n.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(n,i)},unpad:function(n){e.pad.ZeroPadding.unpad(n),n.sigBytes--}},e.pad.Iso97971})}(Q0)),Q0.exports}var W0={exports:{}},lf;function P1(){return lf||(lf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},e.pad.ZeroPadding})}(W0)),W0.exports}var K0={exports:{}},ff;function D1(){return ff||(ff=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})}(K0)),K0.exports}var $0={exports:{}},hf;function R1(){return hf||(hf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Jt())})(ut,function(e){return function(n){var i=e,s=i.lib,o=s.CipherParams,a=i.enc,c=a.Hex,u=i.format;u.Hex={stringify:function(l){return l.ciphertext.toString(c)},parse:function(l){var f=c.parse(l);return o.create({ciphertext:f})}}}(),e.format.Hex})}($0)),$0.exports}var q0={exports:{}},df;function S1(){return df||(df=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],c=[],u=[],l=[],f=[],d=[],x=[],g=[],m=[],w=[];(function(){for(var A=[],C=0;C<256;C++)C<128?A[C]=C<<1:A[C]=C<<1^283;for(var I=0,T=0,C=0;C<256;C++){var R=T^T<<1^T<<2^T<<3^T<<4;R=R>>>8^R&255^99,a[I]=R,c[R]=I;var S=A[I],V=A[S],k=A[V],N=A[R]*257^R*16843008;u[I]=N<<24|N>>>8,l[I]=N<<16|N>>>16,f[I]=N<<8|N>>>24,d[I]=N;var N=k*16843009^V*65537^S*257^I*16843008;x[R]=N<<24|N>>>8,g[R]=N<<16|N>>>16,m[R]=N<<8|N>>>24,w[R]=N,I?(I=S^A[A[A[k^S]]],T^=A[A[T]]):I=T=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],E=o.AES=s.extend({_doReset:function(){var A;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,I=C.words,T=C.sigBytes/4,R=this._nRounds=T+6,S=(R+1)*4,V=this._keySchedule=[],k=0;k<S;k++)k<T?V[k]=I[k]:(A=V[k-1],k%T?T>6&&k%T==4&&(A=a[A>>>24]<<24|a[A>>>16&255]<<16|a[A>>>8&255]<<8|a[A&255]):(A=A<<8|A>>>24,A=a[A>>>24]<<24|a[A>>>16&255]<<16|a[A>>>8&255]<<8|a[A&255],A^=v[k/T|0]<<24),V[k]=V[k-T]^A);for(var N=this._invKeySchedule=[],z=0;z<S;z++){var k=S-z;if(z%4)var A=V[k];else var A=V[k-4];z<4||k<=4?N[z]=A:N[z]=x[a[A>>>24]]^g[a[A>>>16&255]]^m[a[A>>>8&255]]^w[a[A&255]]}}},encryptBlock:function(A,C){this._doCryptBlock(A,C,this._keySchedule,u,l,f,d,a)},decryptBlock:function(A,C){var I=A[C+1];A[C+1]=A[C+3],A[C+3]=I,this._doCryptBlock(A,C,this._invKeySchedule,x,g,m,w,c);var I=A[C+1];A[C+1]=A[C+3],A[C+3]=I},_doCryptBlock:function(A,C,I,T,R,S,V,k){for(var N=this._nRounds,z=A[C]^I[0],G=A[C+1]^I[1],X=A[C+2]^I[2],M=A[C+3]^I[3],J=4,nt=1;nt<N;nt++){var it=T[z>>>24]^R[G>>>16&255]^S[X>>>8&255]^V[M&255]^I[J++],st=T[G>>>24]^R[X>>>16&255]^S[M>>>8&255]^V[z&255]^I[J++],at=T[X>>>24]^R[M>>>16&255]^S[z>>>8&255]^V[G&255]^I[J++],_=T[M>>>24]^R[z>>>16&255]^S[G>>>8&255]^V[X&255]^I[J++];z=it,G=st,X=at,M=_}var it=(k[z>>>24]<<24|k[G>>>16&255]<<16|k[X>>>8&255]<<8|k[M&255])^I[J++],st=(k[G>>>24]<<24|k[X>>>16&255]<<16|k[M>>>8&255]<<8|k[z&255])^I[J++],at=(k[X>>>24]<<24|k[M>>>16&255]<<16|k[z>>>8&255]<<8|k[G&255])^I[J++],_=(k[M>>>24]<<24|k[z>>>16&255]<<16|k[G>>>8&255]<<8|k[X&255])^I[J++];A[C]=it,A[C+1]=st,A[C+2]=at,A[C+3]=_},keySize:256/32});n.AES=s._createHelper(E)}(),e.AES})}(q0)),q0.exports}var J0={exports:{}},pf;function N1(){return pf||(pf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=a.DES=o.extend({_doReset:function(){for(var v=this._key,E=v.words,A=[],C=0;C<56;C++){var I=c[C]-1;A[C]=E[I>>>5]>>>31-I%32&1}for(var T=this._subKeys=[],R=0;R<16;R++){for(var S=T[R]=[],V=l[R],C=0;C<24;C++)S[C/6|0]|=A[(u[C]-1+V)%28]<<31-C%6,S[4+(C/6|0)]|=A[28+(u[C+24]-1+V)%28]<<31-C%6;S[0]=S[0]<<1|S[0]>>>31;for(var C=1;C<7;C++)S[C]=S[C]>>>(C-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var k=this._invSubKeys=[],C=0;C<16;C++)k[C]=T[15-C]},encryptBlock:function(v,E){this._doCryptBlock(v,E,this._subKeys)},decryptBlock:function(v,E){this._doCryptBlock(v,E,this._invSubKeys)},_doCryptBlock:function(v,E,A){this._lBlock=v[E],this._rBlock=v[E+1],g.call(this,4,252645135),g.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),g.call(this,1,1431655765);for(var C=0;C<16;C++){for(var I=A[C],T=this._lBlock,R=this._rBlock,S=0,V=0;V<8;V++)S|=f[V][((R^I[V])&d[V])>>>0];this._lBlock=R,this._rBlock=T^S}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,g.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),v[E]=this._lBlock,v[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(v,E){var A=(this._lBlock>>>v^this._rBlock)&E;this._rBlock^=A,this._lBlock^=A<<v}function m(v,E){var A=(this._rBlock>>>v^this._lBlock)&E;this._lBlock^=A,this._rBlock^=A<<v}n.DES=o._createHelper(x);var w=a.TripleDES=o.extend({_doReset:function(){var v=this._key,E=v.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var A=E.slice(0,2),C=E.length<4?E.slice(0,2):E.slice(2,4),I=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=x.createEncryptor(s.create(A)),this._des2=x.createEncryptor(s.create(C)),this._des3=x.createEncryptor(s.create(I))},encryptBlock:function(v,E){this._des1.encryptBlock(v,E),this._des2.decryptBlock(v,E),this._des3.encryptBlock(v,E)},decryptBlock:function(v,E){this._des3.decryptBlock(v,E),this._des2.encryptBlock(v,E),this._des1.decryptBlock(v,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(w)}(),e.TripleDES})}(J0)),J0.exports}var j0={exports:{}},xf;function O1(){return xf||(xf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var l=this._key,f=l.words,d=l.sigBytes,x=this._S=[],g=0;g<256;g++)x[g]=g;for(var g=0,m=0;g<256;g++){var w=g%d,v=f[w>>>2]>>>24-w%4*8&255;m=(m+x[g]+v)%256;var E=x[g];x[g]=x[m],x[m]=E}this._i=this._j=0},_doProcessBlock:function(l,f){l[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var l=this._S,f=this._i,d=this._j,x=0,g=0;g<4;g++){f=(f+1)%256,d=(d+l[f])%256;var m=l[f];l[f]=l[d],l[d]=m,x|=l[(l[f]+l[d])%256]<<24-g*8}return this._i=f,this._j=d,x}n.RC4=s._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)c.call(this)}});n.RC4Drop=s._createHelper(u)}(),e.RC4})}(j0)),j0.exports}var Z0={exports:{}},yf;function L1(){return yf||(yf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],u=[],l=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,x=this.cfg.iv,g=0;g<4;g++)d[g]=(d[g]<<8|d[g]>>>24)&16711935|(d[g]<<24|d[g]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],w=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)w[g]^=m[g+4&7];if(x){var v=x.words,E=v[0],A=v[1],C=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,T=C>>>16|I&4294901760,R=I<<16|C&65535;w[0]^=C,w[1]^=T,w[2]^=I,w[3]^=R,w[4]^=C,w[5]^=T,w[6]^=I,w[7]^=R;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,x){var g=this._X;f.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[x+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,x=this._C,g=0;g<8;g++)c[g]=x[g];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<c[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<c[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<c[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<c[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<c[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<c[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<c[6]>>>0?1:0)|0,this._b=x[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var m=d[g]+x[g],w=m&65535,v=m>>>16,E=((w*w>>>17)+w*v>>>15)+v*v,A=((m&4294901760)*m|0)+((m&65535)*m|0);u[g]=E^A}d[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,d[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,d[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,d[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,d[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,d[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,d[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,d[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=s._createHelper(l)}(),e.Rabbit})}(Z0)),Z0.exports}var Y0={exports:{}},gf;function U1(){return gf||(gf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],u=[],l=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,x=this.cfg.iv,g=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var w=0;w<4;w++)f.call(this);for(var w=0;w<8;w++)m[w]^=g[w+4&7];if(x){var v=x.words,E=v[0],A=v[1],C=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,T=C>>>16|I&4294901760,R=I<<16|C&65535;m[0]^=C,m[1]^=T,m[2]^=I,m[3]^=R,m[4]^=C,m[5]^=T,m[6]^=I,m[7]^=R;for(var w=0;w<4;w++)f.call(this)}},_doProcessBlock:function(d,x){var g=this._X;f.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[x+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,x=this._C,g=0;g<8;g++)c[g]=x[g];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<c[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<c[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<c[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<c[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<c[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<c[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<c[6]>>>0?1:0)|0,this._b=x[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var m=d[g]+x[g],w=m&65535,v=m>>>16,E=((w*w>>>17)+w*v>>>15)+v*v,A=((m&4294901760)*m|0)+((m&65535)*m|0);u[g]=E^A}d[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,d[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,d[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,d[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,d[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,d[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,d[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,d[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=s._createHelper(l)}(),e.RabbitLegacy})}(Y0)),Y0.exports}var X0={exports:{}},mf;function _1(){return mf||(mf=1,function(r,t){(function(e,n,i){r.exports=n(wt(),Fi(),Ti(),Sr(),Jt())})(ut,function(e){return function(){var n=e,i=n.lib,s=i.BlockCipher,o=n.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function f(w,v){let E=v>>24&255,A=v>>16&255,C=v>>8&255,I=v&255,T=w.sbox[0][E]+w.sbox[1][A];return T=T^w.sbox[2][C],T=T+w.sbox[3][I],T}function d(w,v,E){let A=v,C=E,I;for(let T=0;T<a;++T)A=A^w.pbox[T],C=f(w,A)^C,I=A,A=C,C=I;return I=A,A=C,C=I,C=C^w.pbox[a],A=A^w.pbox[a+1],{left:A,right:C}}function x(w,v,E){let A=v,C=E,I;for(let T=a+1;T>1;--T)A=A^w.pbox[T],C=f(w,A)^C,I=A,A=C,C=I;return I=A,A=C,C=I,C=C^w.pbox[1],A=A^w.pbox[0],{left:A,right:C}}function g(w,v,E){for(let R=0;R<4;R++){w.sbox[R]=[];for(let S=0;S<256;S++)w.sbox[R][S]=u[R][S]}let A=0;for(let R=0;R<a+2;R++)w.pbox[R]=c[R]^v[A],A++,A>=E&&(A=0);let C=0,I=0,T=0;for(let R=0;R<a+2;R+=2)T=d(w,C,I),C=T.left,I=T.right,w.pbox[R]=C,w.pbox[R+1]=I;for(let R=0;R<4;R++)for(let S=0;S<256;S+=2)T=d(w,C,I),C=T.left,I=T.right,w.sbox[R][S]=C,w.sbox[R][S+1]=I;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,v=w.words,E=w.sigBytes/4;g(l,v,E)}},encryptBlock:function(w,v){var E=d(l,w[v],w[v+1]);w[v]=E.left,w[v+1]=E.right},decryptBlock:function(w,v){var E=x(l,w[v],w[v+1]);w[v]=E.left,w[v+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(m)}(),e.Blowfish})}(X0)),X0.exports}(function(r,t){(function(e,n,i){r.exports=n(wt(),Ja(),p1(),x1(),Fi(),y1(),Ti(),Td(),No,g1(),Id(),m1(),w1(),b1(),uu(),A1(),Sr(),Jt(),E1(),v1(),B1(),C1(),F1(),T1(),I1(),k1(),P1(),D1(),R1(),S1(),N1(),O1(),L1(),U1(),_1())})(ut,function(e){return e})})(Fd);var M1=Fd.exports,H1=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jn,"__esModule",{value:!0});jn.Base=void 0;const Qt=So,tc=H1(M1);class Le{print(){Le.print(this)}bufferIndexOf(t,e,n=!1){if(n)return this.binarySearch(t,e,Qt.Buffer.compare);const i=(s,o)=>s.equals(o);return this.linearSearch(t,e,i)}static binarySearch(t,e,n){let i=0,s=t.length-1;for(;i<=s;){const o=Math.floor((i+s)/2),a=n(t[o],e);if(a===0){for(let c=o-1;c>=0;c--)if(n(t[c],e)!==0)return c+1;return 0}else a<0?i=o+1:s=o-1}return-1}binarySearch(t,e,n){return Le.binarySearch(t,e,n)}static linearSearch(t,e,n){for(let i=0;i<t.length;i++)if(n(t[i],e))return i;return-1}linearSearch(t,e,n){return Le.linearSearch(t,e,n)}static bufferify(t){if(!Qt.Buffer.isBuffer(t)){if(typeof t=="object"&&t.words)return Qt.Buffer.from(t.toString(tc.default.enc.Hex),"hex");if(Le.isHexString(t)){const e=t.replace("0x",""),n=e.length%2?"0"+e:e;return Qt.Buffer.from(n,"hex")}else{if(typeof t=="string")return Qt.Buffer.from(t);if(typeof t=="bigint"){const e=t.toString(16).length%2?"0"+t.toString(16):t.toString(16);return Qt.Buffer.from(e,"hex")}else{if(t instanceof Uint8Array)return Qt.Buffer.from(t.buffer,t.byteOffset,t.byteLength);if(typeof t=="number"){let e=t.toString();return e.length%2&&(e=`0${e}`),Qt.Buffer.from(e,"hex")}else if(ArrayBuffer.isView(t))return Qt.Buffer.from(t.buffer,t.byteOffset,t.byteLength)}}}return t}bigNumberify(t){return Le.bigNumberify(t)}static bigNumberify(t){if(typeof t=="bigint")return t;if(typeof t=="string"){if(t.startsWith("0x")&&Le.isHexString(t)){const e=t.replace("0x",""),n=e.length%2?"0"+e:e||"0";return BigInt("0x"+n)}return BigInt(t)}if(Qt.Buffer.isBuffer(t)){const e=t.toString("hex"),n=e.length%2?"0"+e:e||"0";return BigInt("0x"+n)}if(t instanceof Uint8Array){const e=Qt.Buffer.from(t).toString("hex"),n=e.length%2?"0"+e:e||"0";return BigInt("0x"+n)}if(typeof t=="number")return BigInt(t);throw new Error("cannot bigNumberify")}static isHexString(t){return typeof t=="string"&&/^(0x)?[0-9A-Fa-f]*$/.test(t)}static print(t){console.log(t.toString())}bufferToHex(t,e=!0){return Le.bufferToHex(t,e)}static bufferToHex(t,e=!0){return`${e?"0x":""}${(t||Qt.Buffer.alloc(0)).toString("hex")}`}bufferify(t){return Le.bufferify(t)}bufferifyFn(t){return e=>{const n=t(e);if(Qt.Buffer.isBuffer(n))return n;if(this.isHexString(n)){const i=n.replace("0x",""),s=i.length%2?"0"+i:i;return Qt.Buffer.from(s,"hex")}if(typeof n=="string")return Qt.Buffer.from(n);if(typeof n=="bigint"){const i=n.toString(16).length%2?"0"+n.toString(16):n.toString(16);return Qt.Buffer.from(i,"hex")}return ArrayBuffer.isView(n)?Qt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):Qt.Buffer.from(t(tc.default.enc.Hex.parse(e.toString("hex"))).toString(tc.default.enc.Hex),"hex")}}isHexString(t){return Le.isHexString(t)}log2(t){return t===1?0:1+this.log2(t/2|0)}zip(t,e){return t.map((n,i)=>[n,e[i]])}static hexZeroPad(t,e){return"0x"+t.replace("0x","").padStart(e,"0")}bufferArrayIncludes(t,e){return t.some(n=>n.equals(e??Qt.Buffer.alloc(0)))}}jn.Base=Le;jn.default=Le;var ja=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.MerkleTree=void 0;const Wt=So,Tn=ja(u1),ec=ja(No),z1=ja(Cd),G1=ja(jn);class me extends G1.default{constructor(t,e=ec.default,n={}){if(super(),this.duplicateOdd=!1,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.complete=!1,n.complete){if(n.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(n.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}if(this.isBitcoinTree=!!n.isBitcoinTree,this.hashLeaves=!!n.hashLeaves,this.sortLeaves=!!n.sortLeaves,this.sortPairs=!!n.sortPairs,this.complete=!!n.complete,n.fillDefaultHash)if(typeof n.fillDefaultHash=="function")this.fillDefaultHash=n.fillDefaultHash;else if(Wt.Buffer.isBuffer(n.fillDefaultHash)||typeof n.fillDefaultHash=="string")this.fillDefaultHash=(i,s)=>n.fillDefaultHash;else throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');if(this.sort=!!n.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!n.duplicateOdd,n.concatenator?this.concatenator=n.concatenator:this.concatenator=Wt.Buffer.concat,typeof e!="function")throw new Error("hashFn must be a function");this.hashFn=this.bufferifyFn(e),this.processLeaves(t)}getOptions(){var t,e;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:(e=(t=this.fillDefaultHash)===null||t===void 0?void 0:t.toString())!==null&&e!==void 0?e:null,duplicateOdd:this.duplicateOdd}}processLeaves(t){if(this.hashLeaves&&(t=t.map(this.hashFn)),this.leaves=t.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(Wt.Buffer.compare)),this.fillDefaultHash)for(let e=this.leaves.length;e<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));e++)this.leaves.push(this.bufferify(this.fillDefaultHash(e,this.hashFn)));this.createHashes(this.leaves)}createHashes(t){for(this.layers=[t];t.length>1;){const e=this.layers.length;this.layers.push([]);const n=this.complete&&e===1&&!Number.isInteger(Math.log2(t.length))?2*t.length-Math.pow(2,Math.ceil(Math.log2(t.length))):t.length;for(let i=0;i<t.length;i+=2){if(i>=n){this.layers[e].push(...t.slice(n));break}else if(i+1===t.length&&t.length%2===1){const u=t[t.length-1];let l=u;if(this.isBitcoinTree){l=this.hashFn(this.concatenator([Tn.default(u),Tn.default(u)])),l=Tn.default(this.hashFn(l)),this.layers[e].push(l);continue}else if(!this.duplicateOdd){this.layers[e].push(t[i]);continue}}const s=t[i],o=i+1===t.length?s:t[i+1];let a=null;this.isBitcoinTree?a=[Tn.default(s),Tn.default(o)]:a=[s,o],this.sortPairs&&a.sort(Wt.Buffer.compare);let c=this.hashFn(this.concatenator(a));this.isBitcoinTree&&(c=Tn.default(this.hashFn(c))),this.layers[e].push(c)}t=this.layers[e]}}addLeaf(t,e=!1){e&&(t=this.hashFn(t)),this.processLeaves(this.leaves.concat(t))}addLeaves(t,e=!1){e&&(t=t.map(this.hashFn)),this.processLeaves(this.leaves.concat(t))}getLeaves(t){return Array.isArray(t)?(this.hashLeaves&&(t=t.map(this.hashFn),this.sortLeaves&&(t=t.sort(Wt.Buffer.compare))),this.leaves.filter(e=>this.bufferIndexOf(t,e,this.sortLeaves)!==-1)):this.leaves}removeLeaf(t){if(!this.isValidLeafIndex(t))throw new Error(`"${t}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);const e=this.leaves.splice(t,1);return this.processLeaves(this.leaves),e[0]}updateLeaf(t,e,n=!1){if(!this.isValidLeafIndex(t))throw new Error(`"${t}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);n&&(e=this.hashFn(e)),this.leaves[t]=e,this.processLeaves(this.leaves)}getLeaf(t){return t<0||t>this.leaves.length-1?Wt.Buffer.from([]):this.leaves[t]}getLeafIndex(t){t=this.bufferify(t);const e=this.getLeaves();for(let n=0;n<e.length;n++)if(e[n].equals(t))return n;return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(t=>this.bufferToHex(t))}static marshalLeaves(t){return JSON.stringify(t.map(e=>me.bufferToHex(e)),null,2)}static unmarshalLeaves(t){let e=null;if(typeof t=="string")e=JSON.parse(t);else if(t instanceof Object)e=t;else throw new Error("Expected type of string or object");if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(me.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((t,e)=>(Array.isArray(e)?t.push(e.map(n=>this.bufferToHex(n))):t.push(e),t),[])}getLayersFlat(){const t=this.layers.reduce((e,n)=>(Array.isArray(n)?e.unshift(...n):e.unshift(n),e),[]);return t.unshift(Wt.Buffer.from([0])),t}getHexLayersFlat(){return this.getLayersFlat().map(t=>this.bufferToHex(t))}getLayerCount(){return this.getLayers().length}getRoot(){return this.layers.length===0?Wt.Buffer.from([]):this.layers[this.layers.length-1][0]||Wt.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(t,e){if(typeof t>"u")throw new Error("leaf is required");t=this.bufferify(t);const n=[];if(!Number.isInteger(e)){e=-1;for(let i=0;i<this.leaves.length;i++)Wt.Buffer.compare(t,this.leaves[i])===0&&(e=i)}if(e<=-1)return[];for(let i=0;i<this.layers.length;i++){const s=this.layers[i],o=e%2,a=o?e-1:this.isBitcoinTree&&e===s.length-1&&i<this.layers.length-1?e:e+1;a<s.length&&n.push({position:o?"left":"right",data:s[a]}),e=e/2|0}return n}getHexProof(t,e){return this.getProof(t,e).map(n=>this.bufferToHex(n.data))}getProofs(){const t=[],e=[];return this.getProofsDFS(this.layers.length-1,0,t,e),e}getProofsDFS(t,e,n,i){const s=e%2;if(t===-1){s||i.push([...n].reverse());return}if(e>=this.layers[t].length)return;const o=this.layers[t],a=s?e-1:e+1;let c=!1;a<o.length&&(c=!0,n.push({position:s?"left":"right",data:o[a]}));const u=e*2,l=e*2+1;this.getProofsDFS(t-1,u,n,i),this.getProofsDFS(t-1,l,n,i),c&&n.splice(n.length-1,1)}getHexProofs(){return this.getProofs().map(t=>this.bufferToHex(t.data))}getPositionalHexProof(t,e){return this.getProof(t,e).map(n=>[n.position==="left"?0:1,this.bufferToHex(n.data)])}static marshalProof(t){const e=t.map(n=>typeof n=="string"?n:Wt.Buffer.isBuffer(n)?me.bufferToHex(n):{position:n.position,data:me.bufferToHex(n.data)});return JSON.stringify(e,null,2)}static unmarshalProof(t){let e=null;if(typeof t=="string")e=JSON.parse(t);else if(t instanceof Object)e=t;else throw new Error("Expected type of string or object");if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(n=>{if(typeof n=="string")return me.bufferify(n);if(n instanceof Object)return{position:n.position,data:me.bufferify(n.data)};throw new Error("Expected item to be of type string or object")})}static marshalTree(t){const e=t.getHexRoot(),n=t.leaves.map(o=>me.bufferToHex(o)),i=t.getHexLayers(),s=t.getOptions();return JSON.stringify({options:s,root:e,layers:i,leaves:n},null,2)}static unmarshalTree(t,e=ec.default,n={}){let i=null;if(typeof t=="string")i=JSON.parse(t);else if(t instanceof Object)i=t;else throw new Error("Expected type of string or object");if(!i)throw new Error("could not parse json");return n=Object.assign({},i.options||{},n),new me(i.leaves,e,n)}getProofIndices(t,e){const n=Math.pow(2,e);let i=new Set;for(const u of t){let l=n+u;for(;l>1;)i.add(l^1),l=l/2|0}const s=t.map(u=>n+u),o=Array.from(i).sort((u,l)=>u-l).reverse();i=s.concat(o);const a=new Set,c=[];for(let u of i)if(!a.has(u))for(c.push(u);u>1&&(a.add(u),!!a.has(u^1));)u=u/2|0;return c.filter(u=>!t.includes(u-n))}getProofIndicesForUnevenTree(t,e){const n=Math.ceil(Math.log2(e)),i=[];for(let a=0;a<n;a++)e%2!==0&&i.push({index:a,leavesCount:e}),e=Math.ceil(e/2);const s=[];let o=t;for(let a=0;a<n;a++){let u=o.map(f=>f%2===0?f+1:f-1).filter(f=>!o.includes(f));const l=i.find(({index:f})=>f===a);l&&o.includes(l.leavesCount-1)&&(u=u.slice(0,-1)),s.push(u),o=[...new Set(o.map(f=>f%2===0?f/2:f%2===0?(f+1)/2:(f-1)/2))]}return s}getMultiProof(t,e){if(this.complete||console.warn("Warning: For correct multiProofs it's strongly recommended to set complete: true"),e||(e=t,t=this.getLayersFlat()),this.isUnevenTree()&&e.every(Number.isInteger))return this.getMultiProofForUnevenTree(e);if(!e.every(Number.isInteger)){let i=e;this.sortPairs&&(i=i.sort(Wt.Buffer.compare));let s=i.map(u=>this.bufferIndexOf(this.leaves,u,this.sortLeaves)).sort((u,l)=>u===l?0:u>l?1:-1);if(!s.every(u=>u!==-1))throw new Error("Element does not exist in Merkle tree");const o=[],a=[];let c=[];for(let u=0;u<this.layers.length;u++){const l=this.layers[u];for(let f=0;f<s.length;f++){const d=s[f],x=this.getPairNode(l,d);o.push(l[d]),x&&a.push(x),c.push(d/2|0)}s=c.filter((f,d,x)=>x.indexOf(f)===d),c=[]}return a.filter(u=>!o.includes(u))}return this.getProofIndices(e,Math.log2(t.length/2|0)).map(i=>t[i])}getMultiProofForUnevenTree(t,e){e||(e=t,t=this.getLayers());let n=[],i=e;for(const s of t){const o=[];for(const c of i){if(c%2===0){const l=c+1;if(!i.includes(l)&&s[l]){o.push(s[l]);continue}}const u=c-1;if(!i.includes(u)&&s[u]){o.push(s[u]);continue}}n=n.concat(o);const a=new Set;for(const c of i){if(c%2===0){a.add(c/2);continue}if(c%2===0){a.add((c+1)/2);continue}a.add((c-1)/2)}i=Array.from(a)}return n}getHexMultiProof(t,e){return this.getMultiProof(t,e).map(n=>this.bufferToHex(n))}getProofFlags(t,e){if(!Array.isArray(t)||t.length<=0)throw new Error("Invalid Inputs!");let n;if(t.every(Number.isInteger)?n=[...t].sort((a,c)=>a===c?0:a>c?1:-1):n=t.map(a=>this.bufferIndexOf(this.leaves,a,this.sortLeaves)).sort((a,c)=>a===c?0:a>c?1:-1),!n.every(a=>a!==-1))throw new Error("Element does not exist in Merkle tree");const i=e.map(a=>this.bufferify(a)),s=[],o=[];for(let a=0;a<this.layers.length;a++){const c=this.layers[a];n=n.reduce((u,l)=>{if(!s.includes(c[l])){const d=this.getPairNode(c,l),x=this.bufferArrayIncludes(i,c[l])||this.bufferArrayIncludes(i,d);d&&o.push(!x),s.push(c[l]),s.push(d)}return u.push(l/2|0),u},[])}return o}verify(t,e,n){let i=this.bufferify(e);if(n=this.bufferify(n),!Array.isArray(t)||!e||!n)return!1;for(let s=0;s<t.length;s++){const o=t[s];let a=null,c=null;if(typeof o=="string")a=this.bufferify(o),c=!0;else if(Array.isArray(o))c=o[0]===0,a=this.bufferify(o[1]);else if(Wt.Buffer.isBuffer(o))a=o,c=!0;else if(o instanceof Object)a=this.bufferify(o.data),c=o.position==="left";else throw new Error("Expected node to be of type string or object");const u=[];this.isBitcoinTree?(u.push(Tn.default(i)),u[c?"unshift":"push"](Tn.default(a)),i=this.hashFn(this.concatenator(u)),i=Tn.default(this.hashFn(i))):this.sortPairs?Wt.Buffer.compare(i,a)===-1?(u.push(i,a),i=this.hashFn(this.concatenator(u))):(u.push(a,i),i=this.hashFn(this.concatenator(u))):(u.push(i),u[c?"unshift":"push"](a),i=this.hashFn(this.concatenator(u)))}return Wt.Buffer.compare(i,n)===0}verifyMultiProof(t,e,n,i,s){if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(t,e,n,i,s);const a=Math.ceil(Math.log2(i));t=this.bufferify(t),n=n.map(f=>this.bufferify(f)),s=s.map(f=>this.bufferify(f));const c={};for(const[f,d]of this.zip(e,n))c[Math.pow(2,a)+f]=d;for(const[f,d]of this.zip(this.getProofIndices(e,a),s))c[f]=d;let u=Object.keys(c).map(f=>+f).sort((f,d)=>f-d);u=u.slice(0,u.length-1);let l=0;for(;l<u.length;){const f=u[l];if(f>=2&&{}.hasOwnProperty.call(c,f^1)){let d=[c[f-f%2],c[f-f%2+1]];this.sortPairs&&(d=d.sort(Wt.Buffer.compare));const x=d[1]?this.hashFn(this.concatenator(d)):d[0];c[f/2|0]=x,u.push(f/2|0)}l+=1}return!e.length||{}.hasOwnProperty.call(c,1)&&c[1].equals(t)}verifyMultiProofWithFlags(t,e,n,i){t=this.bufferify(t),e=e.map(this.bufferify),n=n.map(this.bufferify);const s=e.length,o=i.length,a=[];let c=0,u=0,l=0;for(let f=0;f<o;f++){const d=i[f]?c<s?e[c++]:a[u++]:n[l++],x=c<s?e[c++]:a[u++],g=[d,x].sort(Wt.Buffer.compare);a[f]=this.hashFn(this.concatenator(g))}return Wt.Buffer.compare(a[o-1],t)===0}verifyMultiProofForUnevenTree(t,e,n,i,s){t=this.bufferify(t),n=n.map(a=>this.bufferify(a)),s=s.map(a=>this.bufferify(a));const o=this.calculateRootForUnevenTree(e,n,i,s);return t.equals(o)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const t=this.getLayers().map(n=>n.map(i=>this.bufferToHex(i,!1))),e=[];for(let n=0;n<t.length;n++){const i=[];for(let s=0;s<t[n].length;s++){const o={[t[n][s]]:null};if(e.length){o[t[n][s]]={};const a=e.shift(),c=Object.keys(a)[0];if(o[t[n][s]][c]=a[c],e.length){const u=e.shift(),l=Object.keys(u)[0];o[t[n][s]][l]=u[l]}}i.push(o)}e.push(...i)}return e[0]}static verify(t,e,n,i=ec.default,s={}){return new me([],i,s).verify(t,e,n)}static getMultiProof(t,e){return new me([]).getMultiProof(t,e)}resetTree(){this.leaves=[],this.layers=[]}getPairNode(t,e){const n=e%2===0?e+1:e-1;return n<t.length?t[n]:null}toTreeString(){const t=this.getLayersAsObject();return z1.default.asTree(t,!0)}toString(){return this.toTreeString()}isUnevenTree(t){const e=(t==null?void 0:t.length)||this.getDepth();return!this.isPowOf2(e)}isPowOf2(t){return t&&!(t&t-1)}isValidLeafIndex(t){return t>=0&&t<this.getLeafCount()}calculateRootForUnevenTree(t,e,n,i){const s=this.zip(t,e).sort(([f],[d])=>f-d),o=s.map(([f])=>f),a=this.getProofIndicesForUnevenTree(o,n);let c=0;const u=[];for(let f=0;f<a.length;f++){const d=a[f],x=c;c+=d.length,u[f]=this.zip(d,i.slice(x,c))}const l=[s];for(let f=0;f<u.length;f++){const d=u[f].concat(l[f]).sort(([w],[v])=>w-v).map(([,w])=>w),x=l[f].map(([w])=>w),g=[...new Set(x.map(w=>w%2===0?w/2:w%2===0?(w+1)/2:(w-1)/2))],m=[];for(let w=0;w<g.length;w++){const v=g[w],E=d[w*2],A=d[w*2+1],C=A?this.hashFn(this.concatenator([E,A])):E;m.push([v,C])}l.push(m)}return l[l.length-1][0][1]}}Ro.MerkleTree=me;typeof window<"u"&&(window.MerkleTree=me);Ro.default=me;var Oo={},kd=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.MerkleMountainRange=void 0;const Ks=So,V1=kd(No),Q1=kd(jn);class lu extends Q1.default{constructor(t=V1.default,e=[],n,i,s){super(),this.root=Ks.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},e=e.map(this.bufferify),this.hashFn=this.bufferifyFn(t),this.hashLeafFn=n,this.peakBaggingFn=i,this.hashBranchFn=s;for(const o of e)this.append(o)}append(t){t=this.bufferify(t);const e=this.hashFn(t),n=this.bufferToHex(e);(!this.data[n]||this.bufferToHex(this.hashFn(this.data[n]))!==n)&&(this.data[n]=t);const i=this.hashLeaf(this.size+1,e);this.hashes[this.size+1]=i,this.width+=1;const s=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const o=[];for(let a=0;a<s.length;a++)o[a]=this._getOrCreateNode(s[a]);this.root=this.peakBagging(this.width,o)}hashLeaf(t,e){return e=this.bufferify(e),this.hashLeafFn?this.bufferify(this.hashLeafFn(t,e)):this.hashFn(Ks.Buffer.concat([this.bufferify(t),e]))}hashBranch(t,e,n){return this.hashBranchFn?this.bufferify(this.hashBranchFn(t,e,n)):this.hashFn(Ks.Buffer.concat([this.bufferify(t),this.bufferify(e),this.bufferify(n)]))}getPeaks(){const t=this.getPeakIndexes(this.width),e=[];for(let n=0;n<t.length;n++)e[n]=this.hashes[t[n]];return e}getLeafIndex(t){return t%2===1?this.getSize(t):this.getSize(t-1)+1}getPeakIndexes(t){const e=this.numOfPeaks(t),n=[];let i=0,s=0;for(let o=255;o>0&&!(t&1<<o-1&&(s=s+(1<<o)-1,n[i++]=s,n.length>=e));o--);if(i!==n.length)throw new Error("invalid bit calculation");return n}numOfPeaks(t){let e=t,n=0;for(;e>0;)e%2===1&&n++,e=e>>1;return n}peakBagging(t,e){const n=this.getSize(t);if(this.numOfPeaks(t)!==e.length)throw new Error("received invalid number of peaks");return t===0&&!e.length?Ks.Buffer.alloc(0):this.peakBaggingFn?this.bufferify(this.peakBaggingFn(n,e)):this.hashFn(Ks.Buffer.concat([this.bufferify(n),...e.map(this.bufferify)]))}getSize(t){return(t<<1)-this.numOfPeaks(t)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(t){return this.hashes[t]}mountainHeight(t){let e=1;for(;1<<e<=t+e;)e++;return e-1}heightAt(t){let e=t,n=0,i=0;for(;e>n;)e-=(1<<i)-1,i=this.mountainHeight(e),n=(1<<i)-1;return i-(n-e)}isLeaf(t){return this.heightAt(t)===1}getChildren(t){const e=t-(1<<this.heightAt(t)-1),n=t-1;if(e===n)throw new Error("not a parent");return[e,n]}getMerkleProof(t){if(t>this.size)throw new Error("out of range");if(!this.isLeaf(t))throw new Error("not a leaf");const e=this.root,n=this.width,i=this.getPeakIndexes(this.width),s=[];let o=0;for(let f=0;f<i.length;f++)s[f]=this.hashes[i[f]],i[f]>=t&&o===0&&(o=i[f]);let a=0,c=0,u=this.heightAt(o);const l=[];for(;o!==t;)u--,[a,c]=this.getChildren(o),o=t<=a?a:c,l[u-1]=this.hashes[t<=a?c:a];return{root:e,width:n,peakBagging:s,siblings:l}}verify(t,e,n,i,s,o){if(i=this.bufferify(i),this.getSize(e)<n)throw new Error("index is out of range");if(!t.equals(this.peakBagging(e,s)))throw new Error("invalid root hash from the peaks");let c=0,u;const l=this.getPeakIndexes(e);for(let w=0;w<l.length;w++)if(l[w]>=n){u=s[w],c=l[w];break}if(!u)throw new Error("target not found");let f=o.length+1;const d=new Array(f);let x=0,g=0;for(;f>0&&(d[--f]=c,c!==n);)[x,g]=this.getChildren(c),c=n>x?g:x;let m;for(;f<d.length;)c=d[f],f===0?m=this.hashLeaf(c,this.hashFn(i)):c-1===d[f-1]?m=this.hashBranch(c,o[f-1],m):m=this.hashBranch(c,m,o[f-1]),f++;if(!m.equals(u))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(t,e){const n={};let i=0,s=0,o=e.length;for(let a=1;a<=32;a++)i=32-a,s=1<<a-1,t&s?n[i]=e[--o]:n[i]=0;if(o!==0)throw new Error("invalid number of peaks");return n}peakMapToPeaks(t,e){const n=this.numOfPeaks(t),i=new Array(n);let s=0;for(let o=0;o<32;o++)e[o]!==0&&(i[s++]=e[o]);if(s!==n)throw new Error("invalid number of peaks");return i}peakUpdate(t,e,n){const i={},s=t+1;let o=this.getLeafIndex(s),a=this.hashLeaf(o,n),c=0,u=0,l=!1,f=!1,d=!1;for(let x=1;x<=32;x++)c=32-x,d?i[c]=e[c]:(u=1<<x-1,l=(t&u)!==0,f=(s&u)!==0,o++,l&&(a=this.hashBranch(o,e[c],a)),f?(l?i[c]=e[c]:i[c]=a,d=!0):i[c]=0);return i}rollUp(t,e,n,i){if(!t.equals(this.peakBagging(e,n)))throw new Error("invalid root hash from the peaks");let s=e,o=this.peaksToPeakMap(e,n);for(let a=0;a<i.length;a++)o=this.peakUpdate(s,o,i[a]),s++;return this.peakBagging(s,this.peakMapToPeaks(s,o))}_getOrCreateNode(t){if(t>this.size)throw new Error("out of range");if(!this.hashes[t]){const[e,n]=this.getChildren(t),i=this._getOrCreateNode(e),s=this._getOrCreateNode(n);this.hashes[t]=this.hashBranch(t,i,s)}return this.hashes[t]}}Oo.MerkleMountainRange=lu;typeof window<"u"&&(window.MerkleMountainRange=lu);Oo.default=lu;var Lo={},Pd=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.IncrementalMerkleTree=void 0;const W1=Pd(jn),K1=Pd(Cd);class fu extends W1.default{constructor(t,e){if(super(),this.hashFn=t,e.depth&&(this.depth=e.depth),e.arity&&(this.arity=e.arity),this.depth<1)throw new Error("depth must be greater than 0");if(this.arity<1)throw new Error("arity must be greater than 0");const n=[];let i=e.zeroValue;if(this.zeroValue=i,this.zeroes=[],this.depth)for(let s=0;s<this.depth;s++)this.zeroes.push(i),n[s]=[],i=this.hashFn(Array(this.arity).fill(i));this.nodes=n,this.root=i}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.bufferify(this.getRoot()))}insert(t){if(this.depth&&this.arity&&this.nodes[0].length>=this.getMaxLeaves())throw new Error("tree is full");let e=t,n=this.nodes[0].length;for(let i=0;i<this.depth;i+=1){const s=n%this.arity,o=n-s,a=o+this.arity,c=[];this.nodes[i][n]=e;for(let u=o;u<a;u+=1)u<this.nodes[i].length?c.push(this.nodes[i][u]):c.push(this.zeroes[i]);e=this.hashFn(c),n=Math.floor(n/this.arity)}this.root=e}delete(t){this.update(t,this.zeroValue)}update(t,e){if(t<0||t>=this.nodes[0].length)throw new Error("out of bounds");let n=e;for(let i=0;i<this.depth;i+=1){const s=t%this.arity,o=t-s,a=o+this.arity,c=[];this.nodes[i][t]=n;for(let u=o;u<a;u+=1)u<this.nodes[i].length?c.push(this.nodes[i][u]):c.push(this.zeroes[i]);n=this.hashFn(c),t=Math.floor(t/this.arity)}this.root=n}getDepth(){return this.depth}getArity(){return this.arity}getMaxLeaves(){return Math.pow(this.depth,this.arity)}indexOf(t){return this.nodes[0].indexOf(t)}getLeaves(){const t=this.copyList(this.nodes[0]),e=this.nodes[0].length;for(let n=e;n<this.getMaxLeaves();n++)t[n]=this.zeroValue;return t}copyList(t){return t.map(e=>BigInt(e))}getLayers(){const t=[];for(const e of this.nodes)t.push(this.copyList(e));if(t[0].length<this.getMaxLeaves()){let e=t[0].length;for(let n=e;n<this.getMaxLeaves();n++)t[0][n]=this.zeroValue;for(let n=0;n<this.depth;n++){const i=e%this.arity,s=e-i,o=s+this.arity;for(let a=s;a<o;a++)a>=t[n].length&&(t[n][a]=this.zeroes[n]);e=Math.floor(e/this.arity)}}return t.push([this.root]),t}getHexLayers(){return this.getLayers().reduce((t,e)=>(Array.isArray(e)?t.push(e.map(n=>this.bufferToHex(this.bufferify(n)))):t.push(e),t),[])}getLayersAsObject(){const t=this.getLayers().map(n=>n.map(i=>this.bufferToHex(this.bufferify(i),!1))),e=[];for(let n=0;n<t.length;n++){const i=[];for(let s=0;s<t[n].length;s++){const o={[t[n][s]]:null};if(e.length){o[t[n][s]]={};const a=e.shift(),c=Object.keys(a)[0];if(o[t[n][s]][c]=a[c],e.length){const u=e.shift(),l=Object.keys(u)[0];o[t[n][s]][l]=u[l]}}i.push(o)}e.push(...i)}return e[0]}computeRoot(){let t,e=this.nodes[0].length;for(let n=0;n<this.depth;n+=1){const i=e%this.arity,s=e-i,o=s+this.arity,a=[];for(let c=s;c<o;c+=1)c<this.nodes[n].length?a.push(this.nodes[n][c]):a.push(this.zeroes[n]);t=this.hashFn(a),e=Math.floor(e/this.arity)}return t}getProof(t){if(t<0||t>=this.nodes[0].length)throw new Error("The leaf does not exist in this tree");const e=[],n=[],i=t;for(let s=0;s<this.depth;s+=1){const o=t%this.arity,a=t-o,c=a+this.arity;n[s]=o,e[s]=[];for(let u=a;u<c;u+=1)u!==t&&(u<this.nodes[s].length?e[s].push(this.nodes[s][u]):e[s].push(this.zeroes[s]));t=Math.floor(t/this.arity)}return{root:this.root,leaf:this.nodes[0][i],pathIndices:n,siblings:e}}verify(t){let e=t.leaf;for(let n=0;n<t.siblings.length;n+=1){const i=t.siblings[n].slice();i.splice(t.pathIndices[n],0,e),e=this.hashFn(i)}return t.root===e}toString(){return this.toTreeString()}toTreeString(){const t=this.getLayersAsObject();return K1.default.asTree(t,!0)}}Lo.IncrementalMerkleTree=fu;typeof window<"u"&&(window.IncrementalMerkleTree=fu);Lo.default=fu;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.MerkleSumTree=en.ProofStep=en.Leaf=en.Bucket=void 0;const $1=jn;class Ba{constructor(t,e){this.size=BigInt(t),this.hashed=e,this.parent=null,this.left=null,this.right=null}}en.Bucket=Ba;class q1{constructor(t,e,n){this.hashFn=t,this.rng=e.map(i=>BigInt(i)),this.data=n}getBucket(){let t;return this.data?t=this.hashFn(this.data):t=Buffer.alloc(32),new Ba(BigInt(this.rng[1])-BigInt(this.rng[0]),t)}}en.Leaf=q1;class Dd{constructor(t,e){this.bucket=t,this.right=e}}en.ProofStep=Dd;class Uo extends $1.Base{constructor(t,e){super(),this.leaves=t,this.hashFn=e,Uo.checkConsecutive(t),this.buckets=[];for(const i of t)this.buckets.push(i.getBucket());let n=[];for(const i of this.buckets)n.push(i);for(;n.length!==1;){const i=[];for(;n.length;)if(n.length>=2){const s=n.shift(),o=n.shift(),a=s.size+o.size,c=this.hashFn(Buffer.concat([this.sizeToBuffer(s.size),this.bufferify(s.hashed),this.sizeToBuffer(o.size),this.bufferify(o.hashed)])),u=new Ba(a,c);o.parent=u,s.parent=o.parent,s.right=o,o.left=s,i.push(u)}else i.push(n.shift());n=i}this.root=n[0]}sizeToBuffer(t){const e=Buffer.alloc(8);return new DataView(e.buffer).setBigInt64(0,BigInt(t),!1),e}static checkConsecutive(t){let e=BigInt(0);for(const n of t){if(n.rng[0]!==e)throw new Error("leaf ranges are invalid");e=BigInt(n.rng[1])}}getProof(t){let e=this.buckets[Number(t)];const n=[];for(;e&&e.parent;){const i=!!e.right,s=e.right?e.right:e.left;e=e.parent,n.push(new Dd(s,i))}return n}sum(t){let e=BigInt(0);for(const n of t)e+=BigInt(n);return e}verifyProof(t,e,n){const i=[this.sum(n.filter(a=>!a.right).map(a=>a.bucket.size)),BigInt(t.size)-this.sum(n.filter(a=>a.right).map(a=>a.bucket.size))];if(!(i[0]===e.rng[0]&&i[1]===e.rng[1]))return!1;let s=e.getBucket(),o;for(const a of n)a.right?o=this.hashFn(Buffer.concat([this.sizeToBuffer(s.size),this.bufferify(s.hashed),this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed)])):o=this.hashFn(Buffer.concat([this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed),this.sizeToBuffer(s.size),this.bufferify(s.hashed)])),s=new Ba(BigInt(s.size)+BigInt(a.bucket.size),o);return s.size===t.size&&s.hashed.toString("hex")===t.hashed.toString("hex")}}en.MerkleSumTree=Uo;typeof window<"u"&&(window.MerkleSumTree=Uo);en.default=Uo;var Za={},J1=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Za,"__esModule",{value:!0});Za.MerkleRadixTree=void 0;const Mc=J1(jn);class jo{constructor(t="",e=null,n){this.key=t,this.value=e,this.children=new Map,this.hashFn=n,this.hash=this.computeHash()}computeHash(){let t=this.hashFn("");t=Buffer.concat([t,Mc.default.bufferify(this.key),this.value!=null?Mc.default.bufferify(this.value):Buffer.alloc(0)]);for(const n of this.children.values())t=Buffer.concat([t,n.hash]);return this.hashFn(t)}updateHash(){this.hash=this.computeHash()}}class j1 extends Mc.default{constructor(t){super(),this.hashFn=this.bufferifyFn(t),this.root=new jo("",null,this.hashFn)}insert(t,e){let n=this.root,i=0;for(;t.length>0;){const s=[...n.children.values()].find(o=>t.startsWith(o.key));if(!s){n.children.set(t,new jo(t,e,this.hashFn)),n.updateHash();return}if(i=this.commonPrefixLength(t,s.key),i===s.key.length)n=s,t=t.slice(i);else{const o=t.slice(0,i),a=s.key.slice(i),c=new jo(o,null,this.hashFn);if(n.children.delete(s.key),n.children.set(o,c),c.children.set(a,s),s.key=a,i<t.length){const u=t.slice(i);c.children.set(u,new jo(u,e,this.hashFn))}else c.value=e;n.updateHash(),c.updateHash();return}}n.value=e,n.updateHash()}lookup(t){let e=this.root;for(;t.length>0;){const n=[...e.children.values()].find(s=>t.startsWith(s.key));if(!n)return null;const i=this.commonPrefixLength(t,n.key);if(i===n.key.length)e=n,t=t.slice(i);else return null}return e.value}commonPrefixLength(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;return n}generateProof(t){let e=this.root;const n=[];for(;t.length>0;){const i=[];for(const a of e.children.values())a.key!==t&&i.push({key:a.key,hash:a.hash});n.push({key:e.key,hash:e.hash,siblings:i});const s=[...e.children.values()].find(a=>t.startsWith(a.key));if(!s)return null;const o=this.commonPrefixLength(t,s.key);if(o===s.key.length)e=s,t=t.slice(o);else return null}return n.push({key:e.key,hash:e.hash,siblings:[]}),n}verifyProof(t,e){if(!t||t.length===0)return!1;let n=t[t.length-1].hash;for(let i=t.length-2;i>=0;i--){const s=t[i];let o=Buffer.concat([this.hashFn(""),this.bufferify(s.key),n]);for(const a of s.siblings)o=Buffer.concat([o,a.hash]);n=this.hashFn(o)}return n.equals(e)}}Za.MerkleRadixTree=j1;(function(r){var t=ut&&ut.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.MerkleTree=void 0;const e=t(Ro);r.MerkleTree=e.default;var n=Oo;Object.defineProperty(r,"MerkleMountainRange",{enumerable:!0,get:function(){return n.MerkleMountainRange}});var i=Lo;Object.defineProperty(r,"IncrementalMerkleTree",{enumerable:!0,get:function(){return i.IncrementalMerkleTree}});var s=en;Object.defineProperty(r,"MerkleSumTree",{enumerable:!0,get:function(){return s.MerkleSumTree}});var o=Za;Object.defineProperty(r,"MerkleRadixTree",{enumerable:!0,get:function(){return o.MerkleRadixTree}}),r.default=e.default})(Ad);typeof window<"u"&&(window.Buffer=So.Buffer);function hu(r){if(!r||r.length===0)throw new Error("Cannot build tree: no winners provided");const t=r.map(n=>_h(["address","uint8","uint8"],[n.address,n.prizeTier,n.prizeIndex]));return new Ad.MerkleTree(t,Mt,{sortPairs:!0})}function Rd(r,t,e){const n=hu(r),i=r.find(a=>a.address.toLowerCase()===t.toLowerCase()&&a.prizeIndex===e);if(!i)throw new Error(`Winner not found: ${t} for prize ${e}`);const s=_h(["address","uint8","uint8"],[i.address,i.prizeTier,i.prizeIndex]);return n.getHexProof(s)}function Sd(r,t){return r.filter(e=>e.address.toLowerCase()===t.toLowerCase())}function Nd(r){switch(r){case 1:return"Fake Pack";case 2:return"Kek Pack";case 3:return"Pepe Pack";default:return`Unknown tier (${r})`}}function Od(r,t,e){if(r.vrfSeed!==e)return console.error("VRF seed mismatch:",r.vrfSeed,"vs",e),!1;const i=hu(r.winners).getHexRoot();return i.toLowerCase()!==t.toLowerCase()?(console.error("Merkle root mismatch:",i,"vs",t),!1):(console.log("✅ Winners File verified against on-chain data"),!0)}const Z1=Object.freeze(Object.defineProperty({__proto__:null,buildWinnersTree:hu,generateWinnerProof:Rd,getPrizeTierName:Nd,getPrizesForAddress:Sd,verifyWinnersFile:Od},Symbol.toStringTag,{value:"Module"}));async function _o(r,t,e){console.log("🎯 displayClaimablePrizes called:",{userAddress:t,roundId:e});const n=document.getElementById("claims-container");if(n)try{console.log("📡 Fetching round state (single optimized call)...");const i=await r.getRoundState(e),s=i.round,o=Number(s.status);if(o!==5&&o!==6){n.style.display="none";return}if(!s.winnersRoot||s.winnersRoot===eo){n.style.display="none";return}const a=await r.winnersCIDs(e);if(!a||a===""){n.innerHTML='<p class="info">Winners file not yet published</p>',n.style.display="block";return}n.innerHTML='<p class="info">Loading winners data from IPFS...</p>',n.style.display="block";const c=await au(a,e),u=s.vrfSeed||eo;if(!Od(c,s.winnersRoot,u)){n.innerHTML='<p class="error">⚠️ Winners file verification failed</p>';return}const f=Sd(c.winners,t);if(console.log("🎁 User prizes found:",f.length,f),f.length===0){n.innerHTML='<p class="info">No prizes won in this round</p>';return}const d=i.prizeTokenIds,x=i.prizeClaimers;console.log("🎨 Building HTML for prizes...");let g='<div class="prizes-grid">';for(const v of f){const E=v.prizeIndex,A=x[E]!==mi,C=d[E].toString()!=="0"?d[E].toString():"TBD";console.log("🎁 Prize",E,"- NFT:",C,"- Claimed:",A),g+=`
        <div class="prize-card ${A?"claimed":""}">
          <div class="prize-tier">${Nd(v.prizeTier)}</div>
          <div class="prize-index">Prize #${v.prizeIndex+1}</div>
          <div class="prize-token">NFT ID: ${C}</div>
          ${A?'<div class="claim-status claimed">✓ Claimed</div>':`<button class="claim-btn" data-round="${e}" data-prize-index="${v.prizeIndex}" data-prize-tier="${v.prizeTier}">🐸 Claim Prize</button>`}
        </div>
      `}g+="</div>",console.log("🎨 Setting innerHTML and showing claims..."),n.innerHTML=g;const m=document.getElementById("claims-section");m&&(console.log("✅ Showing claims section"),m.style.display="block"),n.querySelectorAll(".claim-btn").forEach(v=>{v.addEventListener("click",async()=>{const E=parseInt(v.dataset.round),A=parseInt(v.dataset.prizeIndex),C=parseInt(v.dataset.prizeTier);await Y1(r,t,E,A,C,c)})})}catch(i){console.error("Error displaying claimable prizes:",i),n.innerHTML=`<p class="error">Failed to load prizes: ${i.message}</p>`}}async function Y1(r,t,e,n,i,s){try{rt("Generating Merkle proof...","info");const o=Rd(s.winners,t,n);rt("Submitting claim transaction...","info");const a=await r.claim(e,n,i,o);rt("Waiting for confirmation...","info");const c=await a.wait();console.log("Prize claimed successfully:",c),rt("✅ Prize claimed successfully! NFT transferred to your wallet.","success"),setTimeout(()=>{_o(r,t,e)},2e3)}catch(o){console.error("Error claiming prize:",o);let a="Failed to claim prize";o.message.includes("user rejected")?a="Transaction cancelled by user":o.message.includes("already claimed")?a="This prize has already been claimed":o.message.includes("invalid proof")?a="Invalid Merkle proof - verification failed":o.message.includes("Claim limit")?a="You have reached your claim limit for this round":a=`Failed to claim: ${o.message}`,rt(a,"error")}}async function X1(r,t){const e=document.getElementById("winners-section"),n=document.getElementById("winners-list"),i=document.getElementById("winners-title");if(!(!e||!n))try{const s=await r.getRound(t),o=Number(s.status);if(i&&(i.textContent=`Winners - Round ${t}`),e.style.display="block",!s.winnersRoot||s.winnersRoot===eo){n.innerHTML='<p class="info">Winners not yet determined for this round</p>';return}const a=await r.winnersCIDs(t);if(!a||a===""){n.innerHTML='<p class="info">Winners file not yet published for this round</p>';return}const c=await au(a,t),u=c.winners.filter(x=>x.prizeTier===1),l=c.winners.filter(x=>x.prizeTier===2),f=c.winners.filter(x=>x.prizeTier===3);let d='<div class="winners-podium">';u.length>0&&(d+=`
        <div class="podium-tier tier-1">
          <div class="podium-tier-header">
            <div class="tier-icon">🥇</div>
            <div class="tier-text">
              <div class="tier-label">Fake Pack</div>
              <div class="tier-subtitle">Grand Prize</div>
            </div>
          </div>
          <div class="tier-winners">
            ${u.map(x=>`
              <div class="winner-item" title="${x.address}">
                ${x.address.slice(0,6)}...${x.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),l.length>0&&(d+=`
        <div class="podium-tier tier-2">
          <div class="podium-tier-header">
            <div class="tier-icon">🥈</div>
            <div class="tier-text">
              <div class="tier-label">Kek Pack</div>
              <div class="tier-subtitle">Second Prize</div>
            </div>
          </div>
          <div class="tier-winners">
            ${l.map(x=>`
              <div class="winner-item" title="${x.address}">
                ${x.address.slice(0,6)}...${x.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),f.length>0&&(d+=`
        <div class="podium-tier tier-3">
          <div class="podium-tier-header">
            <div class="tier-icon">🥉</div>
            <div class="tier-text">
              <div class="tier-label">Pepe Packs</div>
              <div class="tier-subtitle">${f.length} Winners</div>
            </div>
          </div>
          <div class="tier-winners">
            ${f.map(x=>`
              <div class="winner-item" title="${x.address}">
                ${x.address.slice(0,6)}...${x.address.slice(-4)}
              </div>
            `).join("")}
          </div>
        </div>
      `),d+="</div>",n.innerHTML=d,e.style.display="block"}catch(s){console.error("Error displaying winners:",s),e.style.display="none"}}async function Mo(r,t){const e=document.getElementById("refund-container");if(e)try{const n=await r.refunds(t);if(n===0n){e.style.display="none";return}const i=Fr(n);e.innerHTML=`
      <div class="refund-card">
        <h3>💰 Refund Available</h3>
        <p class="refund-amount">${i} ETH</p>
        <p class="refund-info">This round didn't meet the minimum ticket threshold.</p>
        <button id="withdraw-refund-btn" class="btn btn-primary">Withdraw Refund</button>
      </div>
    `,e.style.display="block",document.getElementById("withdraw-refund-btn").addEventListener("click",()=>tw(r,t))}catch(n){console.error("Error checking refund:",n)}}async function tw(r,t){try{rt("Withdrawing refund...","info");const e=await r.withdrawRefund();rt("Waiting for confirmation...","info");const n=await e.wait();console.log("Refund withdrawn successfully:",n),rt("✅ Refund withdrawn successfully!","success"),setTimeout(()=>{Mo(r,t)},2e3)}catch(e){console.error("Error withdrawing refund:",e);let n="Failed to withdraw refund";e.message.includes("user rejected")?n="Transaction cancelled by user":e.message.includes("No refund")?n="No refund available":n=`Failed to withdraw: ${e.message}`,rt(n,"error")}}const Ld=Object.freeze(Object.defineProperty({__proto__:null,displayClaimablePrizes:_o,displayRefundButton:Mo,displayWinners:X1},Symbol.toStringTag,{value:"Module"})),ew=console.error;console.error=(...r)=>{const t=r.join(" ");t.includes("No filter for index")||t.includes("eth_getFilterChanges")||ew.apply(console,r)};let Dt=null,qn=null,W=null,Z=null,nc=null,ho=!1;const yt=new Set;function re(r,t){console.log(`🎲 ${r}:`,t)}function wf(r){return r?`${r.slice(0,6)}...${r.slice(-4)}`:""}async function Pe(r=null){const t=document.getElementById("submit-proof"),e=document.getElementById("place-bet"),n=document.querySelectorAll(".ticket-option-card"),i=document.getElementById("proof-input");if(!W){t&&(t.disabled=!0,t.title="Contract not available"),e&&(e.disabled=!0,e.title="Contract not available"),n.forEach(s=>{s.style.pointerEvents="none",s.style.opacity="0.5",s.title="Contract not available"});return}try{const s=await W.currentRoundId();if(s.toString()==="0")nc=0;else{let a;r?a=r.round:a=await W.getRound(s),nc=Number(a.status)}const o=nc===1;if(e&&(e.disabled=!o||!Z,Z?o?e.title="":e.title="Round is not open for betting":e.title="Connect wallet to place bets"),n.forEach(a=>{!o||!Z?(a.style.pointerEvents="none",a.style.opacity="0.5",Z?o||(a.title="Round is not open for betting"):a.title="Connect wallet to place bets"):(a.style.pointerEvents="auto",a.style.opacity="1",a.title="")}),t&&i){let a=!0,c="";if(!Z)a=!0,c="Connect wallet to submit proof";else if(!o)a=!0,c="Round is not open for proof submission";else try{const u=await W.getUserStats(s,Z);u.tickets.toString()==="0"?(a=!0,c="Place a bet before submitting proof"):u.hasProof?(a=!0,c="Proof already submitted for this round"):(a=!1,c="")}catch{a=!o,c=o?"":"Round is not open for proof submission"}t.disabled=a,t.title=c,i.disabled=a,a&&c?i.placeholder=c:i.placeholder="Paste your puzzle proof here..."}}catch(s){console.error("Error updating button states:",s),t&&(t.disabled=!0,t.title="Error checking round status"),e&&(e.disabled=!0,e.title="Error checking round status"),n.forEach(o=>{o.style.pointerEvents="none",o.style.opacity="0.5",o.title="Error checking round status"})}}window.toggleProofSection=function(){const r=document.getElementById("proof-form"),t=document.querySelector("#proof-section .collapse-icon");r.style.display==="none"?(r.style.display="block",t.textContent="▲"):(r.style.display="none",t.textContent="▼")};window.closeTicketOffice=function(){const r=document.getElementById("ticket-office");r&&r.classList.remove("open","receiving"),document.querySelectorAll(".ticket-option-card").forEach(t=>t.classList.remove("selected")),pu()};async function bf(){if(console.log("Initializing PEPEDAWN application..."),Vm(),nw(),(window.location.pathname.includes("leaderboard.html")||window.location.pathname.includes("claim.html"))&&rw(),window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await cw()}catch(r){console.log("No wallet auto-connection:",r),r.message&&r.message.includes("ethereum")&&console.log("Wallet extension conflict detected - user should disable conflicting extensions")}await Ya(),xw()}function nw(){const r=document.getElementById("connect-wallet");r&&r.addEventListener("click",Ud);const t=document.getElementById("betting-form");t&&t.addEventListener("click",function(i){const s=i.target.closest(".ticket-option-card");s&&dw({currentTarget:s})});const e=document.getElementById("place-bet");e&&e.addEventListener("click",Md);const n=document.getElementById("submit-proof");n&&n.addEventListener("click",Hd)}function rw(){const r=document.getElementById("round-select");r&&r.addEventListener("change",async function(){const n=this.value;W&&await gi(W,n)});const t=document.getElementById("winners-round-select");t&&t.addEventListener("change",async function(){const n=this.value;if(W){const{displayWinners:i}=await aa(async()=>{const{displayWinners:s}=await Promise.resolve().then(()=>Ld);return{displayWinners:s}},void 0);await i(W,Number(n))}});const e=document.getElementById("claims-round-select");e&&e.addEventListener("change",async function(){const n=this.value;W&&Z&&await _o(W,Z,Number(n))})}async function iw(r,t){if(!r||!t)return{count:0,rounds:[]};try{const e=await r.currentRoundId(),n=Number(e);if(n===0)return{count:0,rounds:[]};const i=[],s=Math.max(1,n-4);for(let o=s;o<=n;o++)try{const a=await r.getRoundState(o);if(Number(a.round.status)!==6)continue;const u=await r.winnersCIDs(o);if(!u||u==="")continue;const{fetchWinnersFile:l}=await aa(async()=>{const{fetchWinnersFile:g}=await Promise.resolve().then(()=>Xm);return{fetchWinnersFile:g}},void 0),{getPrizesForAddress:f}=await aa(async()=>{const{getPrizesForAddress:g}=await Promise.resolve().then(()=>Z1);return{getPrizesForAddress:g}},void 0),d=await l(u,o);if(!d||!d.winners)continue;const x=f(d.winners,t);if(x.length===0)continue;for(const g of x)a.prizeClaimers[g.prizeIndex]!==mi||i.push({roundId:o,prizeIndex:g.prizeIndex,prizeTier:g.prizeTier})}catch(a){console.log(`Skipping round ${o}:`,a.message)}return{count:i.length,rounds:[...new Set(i.map(o=>o.roundId))],prizes:i}}catch(e){return console.error("Error checking unclaimed prizes:",e),{count:0,rounds:[]}}}async function du(r,t){console.log("🎁 displayUnclaimedPrizesNotification called:",{contract:!!r,userAddress:t});const e=document.getElementById("unclaimed-prizes-notification");if(!e){console.warn("⚠️ Notification element not found");return}try{const n=await iw(r,t);console.log("🎁 Unclaimed prizes check result:",n),n.count>0?(console.log("✅ Showing unclaimed prizes notification"),e.innerHTML=`
        <a href="/claim.html" class="unclaimed-link">
          <span class="unclaimed-icon">🎁</span>
          <span class="unclaimed-text">${n.count} unclaimed prize${n.count>1?"s":""}!</span>
        </a>
      `,e.style.display="block"):(console.log("ℹ️ No unclaimed prizes to show"),e.style.display="none")}catch(n){console.error("Error displaying unclaimed prizes notification:",n),e.style.display="none"}}async function sw(r){if(r)try{const t=An.address;document.getElementById("contract-address").textContent=t;const e=await r.owner();document.getElementById("contract-owner").textContent=e;const n=await Dt.getBalance(t),i=Fr(n);document.getElementById("contract-balance").textContent=`${parseFloat(i).toFixed(4)} ETH`;const s=await r.currentRoundId();document.getElementById("current-round").textContent=s.toString()!=="0"?`Round ${s}`:"No active rounds";try{const o=await r.emblemVaultAddress(),c=await new Tr(o,["function balanceOf(address) view returns (uint256)"],Dt).balanceOf(t);document.getElementById("contract-nfts").textContent=`${c.toString()} NFTs`}catch{document.getElementById("contract-nfts").textContent="Unable to fetch"}ow(t)}catch(t){console.error("Error updating contract info:",t),document.getElementById("contract-owner").textContent="Error loading",document.getElementById("contract-balance").textContent="Error loading",document.getElementById("contract-nfts").textContent="Error loading",document.getElementById("current-round").textContent="Error loading"}}async function ow(r){try{const t=await Dt.getCode(r);t&&t!=="0x"?(document.getElementById("verified-status").style.display="none",document.getElementById("verified-checkmark").style.display="inline"):(document.getElementById("verified-status").textContent="Not verified",document.getElementById("verified-status").style.color="#f44336")}catch{document.getElementById("verified-status").textContent="Unable to check",document.getElementById("verified-status").style.color="#f44336"}}function aw(r){const t=document.getElementById(r),e=t.textContent;navigator.clipboard.writeText(e).then(()=>{const n=t.parentElement.querySelector(".copy-btn"),i=n.textContent;n.textContent="✅",n.style.background="rgba(76, 175, 80, 0.3)",setTimeout(()=>{n.textContent=i,n.style.background=""},1500)}).catch(n=>{console.error("Failed to copy: ",n),alert("Failed to copy to clipboard")})}window.copyToClipboard=aw;async function Ud(){try{if(!window.ethereum){rt("Please install MetaMask or another Web3 wallet","error");return}rt("Connecting to wallet...","info"),await window.ethereum.request({method:"eth_requestAccounts"}),await _d(!0)}catch(r){console.error("Error connecting wallet:",r),rt("Failed to connect wallet: "+r.message,"error")}}async function cw(){try{if(!window.ethereum)return;Dt=new Ea(window.ethereum),qn=await Dt.getSigner(),Z=await qn.getAddress(),console.log("Wallet auto-connected:",Z),await _d(!1)}catch(r){console.log("Silent wallet connection failed:",r.message)}}async function _d(r=!0){try{const t=await Dt.getNetwork();$a(t.chainId),console.log("✅ Network validated:",fo.NETWORK_NAMES[Number(t.chainId)])}catch(t){console.warn("⚠️ Network validation failed:",t.message),rt(t.message,"warning")}if(window.ethereum.on&&(window.ethereum.on("chainChanged",uw),window.ethereum.on("accountsChanged",lw)),await ou(Z,Dt),await Ya(),W){const t=await W.currentRoundId();let e=null;if(t.toString()!=="0"&&(e=await W.getRoundState(t)),await Bn(W,Z,e),$n(W,Z),await Pe(e),console.log("🔍 Current page:",window.location.pathname),console.log("🔍 Current round ID:",t.toString()),t.toString()!=="0"&&window.location.pathname.includes("main.html")&&(await Mo(W,Z),await du(W,Z)),window.location.pathname.includes("claim.html")&&(await Ul(W),t.toString()!=="0"&&await _o(W,Z,Number(t))),window.location.pathname.includes("leaderboard.html")&&(await Ul(W),t.toString()!=="0")){const{displayWinners:n}=await aa(async()=>{const{displayWinners:i}=await Promise.resolve().then(()=>Ld);return{displayWinners:i}},void 0);await n(W,Number(t))}window.location.pathname.includes("rules.html")&&await sw(W)}r&&rt("Wallet connected successfully","success")}function uw(r){console.log("Network changed to:",r);try{$a(r),console.log("✅ Network change validated"),ho=!1,yt.clear(),Ya().then(async()=>{if(Z&&W){const t=await W.currentRoundId();let e=null;t.toString()!=="0"&&(e=await W.getRoundState(t)),ou(Z,Dt),Bn(W,Z,e),$n(W,Z),Pe(e)}})}catch(t){console.warn("⚠️ Network change validation failed:",t.message),rt(t.message,"warning")}}function lw(r){if(console.log("Account changed:",r),r.length===0){Z=null,qn=null,W=null,ho=!1,yt.clear();const t=document.getElementById("wallet-info");t&&(t.style.display="none");const e=document.getElementById("connect-wallet");e&&(e.textContent="Connect Wallet",e.disabled=!1,e.style.display="inline-block"),rt("Wallet disconnected","info")}else fw(r[0])}async function fw(r){try{if(console.log("Reconnecting wallet for account:",r),rt("Switching wallet...","info"),Z=r,Dt=new Ea(window.ethereum),qn=await Dt.getSigner(),ho=!1,yt.clear(),await ou(Z,Dt),await Ya(),W){const t=await W.currentRoundId();let e=null;t.toString()!=="0"&&(e=await W.getRoundState(t)),await Bn(W,Z,e),$n(W,Z),await Pe(e),await un(W,Dt,e),await va(W,e),await gi(W),t.toString()!=="0"&&(window.location.pathname.includes("main.html")&&(await Mo(W,Z),await du(W,Z)),window.location.pathname.includes("claim.html")&&await _o(W,Z,Number(t)))}rt("Wallet switched successfully","success")}catch(t){console.error("Error reconnecting wallet:",t),rt("Failed to switch wallet: "+t.message,"error")}}async function Ya(){try{if(console.log("📝 Loading contract..."),!zm()){console.log("Contract not configured - working in mock mode");return}if(Dt)try{const r=await Dt.getNetwork();$a(r.chainId),console.log("✅ Network validated for contract loading")}catch(r){console.warn("⚠️ Network validation failed:",r.message),rt(r.message,"warning");return}if(qn)W=new Tr(An.address,An.abi,qn);else if(Dt)W=new Tr(An.address,An.abi,Dt);else{console.log("⏳ Waiting for wallet connection to load contract");return}console.log("✅ Contract loaded:",An.address);try{await W.currentRoundId(),console.log("✅ Contract accessibility verified")}catch(r){console.error("❌ Contract not accessible:",r.message),rt("Contract not accessible. Please check deployment.","error");return}W&&hw()}catch(r){console.error("Error loading contract:",r),rt("Failed to load contract: "+r.message,"error")}}function hw(){if(W){if(ho){console.log("⏭️ Event listeners already set up, skipping...");return}try{console.log("🎧 Setting up enhanced contract event listeners..."),W.removeAllListeners(),ho=!0,W.on("RoundCreated",(...r)=>{const t=r[r.length-1],[e,n,i]=r,s=`RoundCreated-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(s))return;yt.add(s);const o={roundId:e.toString(),startTime:Number(n),endTime:Number(i),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🆕 Round created:",o),re("RoundCreated",o),rt(`New round #${o.roundId} created!`,"success"),un(W,Dt),Pe()}),W.on("RoundOpened",(...r)=>{const t=r[r.length-1],[e]=r,n=`RoundOpened-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🟢 Round opened:",i),re("RoundOpened",i),rt(`Round #${i.roundId} is now open for betting!`,"success"),un(W,Dt),Pe()}),W.on("RoundClosed",(...r)=>{const t=r[r.length-1],[e]=r,n=`RoundClosed-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🔴 Round closed:",i),re("RoundClosed",i),rt(`Round #${i.roundId} closed. No more bets accepted.`,"info"),un(W,Dt),Pe()}),W.on("RoundSnapshot",(...r)=>{const t=r[r.length-1],[e,n,i]=r,s=`RoundSnapshot-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(s))return;yt.add(s);const o={roundId:e.toString(),totalTickets:n.toString(),totalWeight:i.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("📸 Round snapshot:",o),re("RoundSnapshot",o),rt(`Round #${o.roundId} snapshot taken. Preparing for draw...`,"info"),un(W,Dt)}),W.on("WagerPlaced",(...r)=>{const t=r[r.length-1],[e,n,i,s,o]=r,a=`WagerPlaced-${n}-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(a))return;yt.add(a);const c={roundId:e.toString(),user:n.toLowerCase(),amount:Fr(i),tickets:s.toString(),weight:o.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🎲 Bet placed:",c),re("WagerPlaced",c),c.user===(Z==null?void 0:Z.toLowerCase())?(rt(`✅ Your bet confirmed! ${c.tickets} tickets for ${c.amount} ETH`,"success"),Bn(W,Z),Pe()):rt(`New bet: ${c.tickets} tickets by ${wf(c.user)}`,"info"),un(W,Dt),va(W),gi(W)}),W.on("ProofSubmitted",(r,t,e,n)=>{const i=`ProofSubmitted-${t}-${r.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(yt.has(i))return;yt.add(i);const s={roundId:r.toString(),user:t.toLowerCase(),weight:e.toString(),blockNumber:n.blockNumber,transactionHash:n.transactionHash};if(console.log("🧩 Proof submitted:",s),re("ProofSubmitted",s),s.user===(Z==null?void 0:Z.toLowerCase())){rt("✅ Puzzle proof confirmed! Weight bonus applied.","success");const o=document.getElementById("proof-status");o&&(o.textContent="✅ Puzzle proof confirmed! Weight bonus applied.",o.className="success",o.style.display="block"),Bn(W,Z),Pe()}else rt(`Puzzle solved by ${wf(s.user)}!`,"info");gi(W)}),W.on("ProofRejected",(r,t,e,n)=>{const i=`ProofRejected-${r}-${t.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(yt.has(i))return;yt.add(i);const s={roundId:t.toString(),user:r.toLowerCase(),proofHash:e,blockNumber:n.blockNumber,transactionHash:n.transactionHash};if(console.log("❌ Proof rejected:",s),re("ProofRejected",s),s.user===(Z==null?void 0:Z.toLowerCase())){rt("❌ Puzzle proof incorrect. No weight bonus applied.","warning");const o=document.getElementById("proof-status");o&&(o.textContent="❌ Puzzle proof incorrect. No weight bonus applied.",o.className="error",o.style.display="block"),Bn(W,Z),Pe()}gi(W)}),W.on("VRFRequested",(r,t,e)=>{const n=`VRFRequested-${r.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={roundId:r.toString(),requestId:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🎰 VRF requested:",i),re("VRFRequested",i),rt(`🎰 Random number requested for round #${i.roundId}. Drawing winners...`,"info"),un(W,Dt)}),W.on("EmblemVaultPrizeAssigned",(...r)=>{const t=r[r.length-1],[e,n,i,s]=r,o=`EmblemVaultPrizeAssigned-${e.toString()}-${n.toLowerCase()}-${i.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(o))return;yt.add(o);const a={roundId:e.toString(),winner:n.toLowerCase(),assetId:i.toString(),timestamp:Number(s),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🎁 Emblem Vault prize assigned:",a),re("EmblemVaultPrizeAssigned",a),a.winner===(Z==null?void 0:Z.toLowerCase())&&rt(`🎁 Congratulations! You won asset #${a.assetId}!`,"success")}),W.on("RoundPrizesDistributed",(...r)=>{const t=r[r.length-1],[e,n,i]=r,s=`RoundPrizesDistributed-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(s))return;yt.add(s);const o={roundId:e.toString(),winnerCount:Number(n),timestamp:Number(i),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🏆 Round prizes distribution completed:",o),re("RoundPrizesDistributed",o),rt(`🏆 Round #${o.roundId} completed! ${o.winnerCount} prizes distributed.`,"success"),un(W,Dt)}),W.on("FeesDistributed",(r,t,e,n)=>{const i=`FeesDistributed-${r.toString()}-${(n==null?void 0:n.transactionHash)||"unknown"}`;if(yt.has(i))return;yt.add(i);const s={roundId:r.toString(),creatorsAmount:Fr(t),nextRoundAmount:Fr(e),blockNumber:n.blockNumber,transactionHash:n.transactionHash};console.log("💰 Fees distributed:",s),re("FeesDistributed",s)}),W.on("AddressDenylisted",(r,t,e)=>{const n=`AddressDenylisted-${r}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={user:r.toLowerCase(),status:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🚫 Address denylist status changed:",i),re("AddressDenylisted",i),i.user===(Z==null?void 0:Z.toLowerCase())&&(rt(t?"Your address has been denylisted":"Your address has been removed from denylist",t?"error":"success"),$n(W,Z))}),W.on("EmergencyPauseToggled",(r,t)=>{const e=`EmergencyPauseToggled-${r}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(yt.has(e))return;yt.add(e);const n={paused:r,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("⚠️ Emergency pause toggled:",n),re("EmergencyPauseToggled",n),rt(r?"Emergency pause activated":"Emergency pause deactivated",r?"warning":"success"),Z&&$n(W,Z)}),W.on("CircuitBreakerTriggered",(r,t,e)=>{const n=`CircuitBreakerTriggered-${r.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={roundId:r.toString(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🔒 Circuit breaker triggered:",i),re("CircuitBreakerTriggered",i),rt(`⚠️ Circuit breaker: ${i.reason}`,"warning")}),W.on("SecurityValidationFailed",(r,t,e)=>{const n=`SecurityValidationFailed-${r}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={user:r.toLowerCase(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("❌ Security validation failed:",i),re("SecurityValidationFailed",i),i.user===(Z==null?void 0:Z.toLowerCase())&&rt(`Security validation failed: ${i.reason}`,"error")}),W.on("VRFTimeoutDetected",(r,t,e)=>{const n=`VRFTimeoutDetected-${r.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(yt.has(n))return;yt.add(n);const i={roundId:r.toString(),requestTime:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("⏰ VRF timeout detected:",i),re("VRFTimeoutDetected",i),rt(`⏰ VRF timeout detected for round #${i.roundId}`,"warning")}),console.log("✅ Contract event listeners set up successfully")}catch(r){console.error("❌ Error setting up contract event listeners:",r),rt("Failed to set up event listeners","error")}}}function dw(r){const t=r.currentTarget;if(t.classList.contains("selected")){t.classList.remove("selected");const s=document.getElementById("ticket-office");s&&s.classList.remove("open","receiving"),pu();return}const e=parseInt(t.dataset.tickets),n=parseFloat(t.dataset.amount);document.getElementById("selected-tickets").textContent=String(e),document.getElementById("selected-amount").textContent=String(n);const i=document.getElementById("ticket-office");i&&setTimeout(()=>{i.classList.add("open"),setTimeout(()=>{i.classList.add("receiving")},200)},10),document.querySelectorAll(".ticket-option-card").forEach(s=>s.classList.remove("selected")),t.classList.add("selected"),setTimeout(()=>{pw(t,i)},50)}function pw(r,t){const e=document.getElementById("ticket-connector"),n=document.getElementById("connector-path");if(document.querySelectorAll(".particle-ticket"),!e||!n||!r||!t)return;const s=document.getElementById("betting-section").getBoundingClientRect(),o=r.getBoundingClientRect(),a=t.getBoundingClientRect(),c=o.right-s.left,u=o.top+o.height/2-s.top,l=a.left-s.left,f=a.top+a.height/2-s.top,d=c+(l-c)*.3,x=u-30,g=c+(l-c)*.7,m=f+30,w=`M ${c} ${u} C ${d} ${x}, ${g} ${m}, ${l} ${f}`;n.setAttribute("d",w),e.classList.add("active"),n.classList.add("animated")}function pu(){const r=document.getElementById("ticket-connector"),t=document.getElementById("connector-path");!r||!t||(r.classList.remove("active"),t.classList.remove("animated"))}async function Md(){try{if(!W||!qn||!Z){rt("Please connect your wallet first","error");return}const r=parseInt(document.getElementById("selected-tickets").textContent),t=parseFloat(document.getElementById("selected-amount").textContent);if(!r||!t){rt("Please select a ticket bundle first","error");return}try{Zm({amount:t,tickets:r,userAddress:Z})}catch(n){rt(n.message,"error");return}try{yd(Z)}catch(n){rt(n.message,"warning");return}try{await gd(W,Z)}catch(n){rt(n.message,"error");return}const e=Bp(t.toString());console.log(`Placing bet: ${r} tickets for ${t} ETH`);try{rt("Validating bet parameters...","info");const n=await W.currentRoundId();if(n.toString()==="0")throw new Error("No active round available");const i=await W.getRound(n),s=Number(i.status);if(console.log("Round status check:",{status:s,roundData:i}),s!==1)throw new Error(`Round is not currently open for betting (status: ${s})`);rt("Submitting bet transaction...","info");const o=await W.placeBet(r,{value:e});rt("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",o.hash);const a=await o.wait();console.log("Bet placed successfully:",a),rt(`✅ Bet placed successfully! ${r} tickets for ${t} ETH`,"success");const c=document.getElementById("ticket-office");c&&c.classList.remove("open","receiving"),document.querySelectorAll(".ticket-option-card").forEach(u=>u.classList.remove("selected")),pu(),await Bn(W,Z),$n(W,Z),await Pe()}catch(n){console.error("Contract error:",n),wd(n,"Place Bet")}}catch(r){console.error("Error placing bet:",r),rt("Failed to place bet: "+r.message,"error")}}async function Hd(){try{if(!W||!qn||!Z){rt("Please connect your wallet first","error");return}const r=document.getElementById("proof-input");if(!r)return;const t=r.value.trim();if(!t){rt("Please enter your puzzle proof","error");return}let e;try{e=Gm(t,"proof")}catch(n){rt(n.message,"error");return}try{yd(Z)}catch(n){rt(n.message,"warning");return}try{await gd(W,Z)}catch(n){rt(n.message,"error");return}console.log("Submitting proof:",e.substring(0,50)+"...");try{rt("Validating proof submission...","info");const n=await W.currentRoundId();if(n.toString()==="0")throw new Error("No active round available");const i=await W.getRound(n),s=Number(i.status);if(console.log("Round status check (proof):",{status:s,roundData:i}),s!==1)throw new Error(`Round is not currently open for proof submission (status: ${s})`);const o=await W.getUserStats(n,Z);if(o.tickets.toString()==="0")throw new Error("You must place a bet before submitting a proof");if(o.hasProof)throw new Error("You have already submitted a proof for this round");rt("Submitting puzzle proof...","info");const a=Mt(nn(e)),c=await W.submitProof(a);rt("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",c.hash);const u=await c.wait();console.log("Proof transaction confirmed:",u),rt("Proof submitted, validating...","info"),r.value="";const l=document.getElementById("proof-status");l&&(l.style.display="none"),await Bn(W,Z),$n(W,Z),await Pe()}catch(n){console.error("Contract error:",n);const i=wd(n,"Submit Proof"),s=document.getElementById("proof-status");s&&(s.textContent=i.message,s.className="error",s.style.display="block")}}catch(r){console.error("Error submitting proof:",r),rt("Failed to submit proof: "+r.message,"error")}}function xw(){setInterval(async()=>{if(W)try{const r=await W.currentRoundId();let t=null;r.toString()!=="0"&&(t=await W.getRoundState(r)),await un(W,Dt,t),await va(W,t),await gi(W),Z&&(await Bn(W,Z,t),r.toString()!=="0"&&window.location.pathname.includes("main.html")&&(await Mo(W,Z),await du(W,Z))),await Pe(t)}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Periodic update error:",r)}},6e4),setInterval(async()=>{if(W&&Z)try{$n(W,Z)}catch(r){r.message.includes("execution reverted")||r.message.includes("call revert exception")||r.code==="CALL_EXCEPTION"||r.code===3||console.error("Security status error:",r)}},3e4),W&&W.currentRoundId().then(async r=>{let t=null;r.toString()!=="0"&&(t=await W.getRoundState(r)),un(W,Dt,t),va(W,t),gi(W),Z&&($n(W,Z),Bn(W,Z,t)),Pe(t)}).catch(r=>{console.error("Initial update error:",r)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",bf):bf();window.pepedawn={provider:Dt,signer:qn,contract:W,userAddress:Z,connectWallet:Ud,placeBet:Md,submitProof:Hd};
