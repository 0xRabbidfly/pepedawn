var Mf=Object.defineProperty;var Ec=n=>{throw TypeError(n)};var Hf=(n,t,e)=>t in n?Mf(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>Hf(n,typeof t!="symbol"?t+"":t,e),Wo=(n,t,e)=>t.has(n)||Ec("Cannot "+e);var l=(n,t,e)=>(Wo(n,t,"read from private field"),e?e.call(n):t.get(n)),A=(n,t,e)=>t.has(n)?Ec("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),d=(n,t,e,r)=>(Wo(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),P=(n,t,e)=>(Wo(n,t,"access private method"),e);var qs=(n,t,e,r)=>({set _(s){d(n,t,s,e)},get _(){return l(n,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const Gf="6.15.0";function Vf(n,t,e){const r=t.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=n,s}async function Tt(n){const t=Object.keys(n);return(await Promise.all(t.map(r=>Promise.resolve(n[r])))).reduce((r,s,i)=>(r[t[i]]=s,r),{})}function M(n,t,e){for(let r in t){let s=t[r];const i=e?e[r]:null;i&&Vf(s,i,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function Jr(n,t){if(n==null)return"null";if(t==null&&(t=new Set),typeof n=="object"){if(t.has(n))return"[Circular]";t.add(n)}if(Array.isArray(n))return"[ "+n.map(e=>Jr(e,t)).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let s=0;s<n.length;s++)r+=e[n[s]>>4],r+=e[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return Jr(n.toJSON(),t);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(r=>`${Jr(r,t)}: ${Jr(n[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Nt(n,t){return n&&n.code===t}function Za(n){return Nt(n,"CALL_EXCEPTION")}function it(n,t,e){let r=n;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Jr(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+Jr(a))}}i.push(`code=${t}`),i.push(`version=${Gf}`),i.length&&(n+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return M(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&M(s,{shortMessage:r}),s}function N(n,t,e,r){if(!n)throw it(t,e,r)}function g(n,t,e,r){N(n,t,"INVALID_ARGUMENT",{argument:e,value:r})}function Ml(n,t,e){e==null&&(e=""),e&&(e=": "+e),N(n>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:n,expectedCount:t}),N(n<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((n,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(t)}catch{}return n},[]);function Li(n,t,e){if(e==null&&(e=""),n!==t){let r=e,s="new";e&&(r+=".",s+=" "+e),N(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Hl(n,t,e){if(n instanceof Uint8Array)return e?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(n.substring(s,s+2),16),s+=2;return r}g(!1,"invalid BytesLike value",t||"value",n)}function z(n,t){return Hl(n,t,!1)}function St(n,t){return Hl(n,t,!0)}function rt(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&n.length!==2+2*t||t===!0&&n.length%2!==0)}function Ya(n){return rt(n,!0)||n instanceof Uint8Array}const xc="0123456789abcdef";function B(n){const t=z(n);let e="0x";for(let r=0;r<t.length;r++){const s=t[r];e+=xc[(s&240)>>4]+xc[s&15]}return e}function ct(n){return"0x"+n.map(t=>B(t).substring(2)).join("")}function Yr(n){return rt(n,!0)?(n.length-2)/2:z(n).length}function at(n,t,e){const r=z(n);return e!=null&&e>r.length&&N(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:e}),B(r.slice(t??0,e??r.length))}function Gl(n,t,e){const r=z(n);N(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(r,t-r.length):s.set(r,0),B(s)}function sn(n,t){return Gl(n,t,!0)}function Qf(n,t){return Gl(n,t,!1)}const vo=BigInt(0),be=BigInt(1),Kr=9007199254740991;function io(n,t){const e=Ro(n,"value"),r=BigInt(V(t,"width"));if(N(e>>r===vo,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),e>>r-be){const s=(be<<r)-be;return-((~e&s)+be)}return e}function Vl(n,t){let e=T(n,"value");const r=BigInt(V(t,"width")),s=be<<r-be;if(e<vo){e=-e,N(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(be<<r)-be;return(~e&i)+be}else N(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return e}function tr(n,t){const e=Ro(n,"value"),r=BigInt(V(t,"bits"));return e&(be<<r)-be}function T(n,t){switch(typeof n){case"bigint":return n;case"number":return g(Number.isInteger(n),"underflow",t||"value",n),g(n>=-Kr&&n<=Kr,"overflow",t||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(e){g(!1,`invalid BigNumberish string: ${e.message}`,t||"value",n)}}g(!1,"invalid BigNumberish value",t||"value",n)}function Ro(n,t){const e=T(n,t);return N(e>=vo,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),e}const Nc="0123456789abcdef";function To(n){if(n instanceof Uint8Array){let t="0x0";for(const e of n)t+=Nc[e>>4],t+=Nc[e&15];return BigInt(t)}return T(n)}function V(n,t){switch(typeof n){case"bigint":return g(n>=-Kr&&n<=Kr,"overflow",t||"value",n),Number(n);case"number":return g(Number.isInteger(n),"underflow",t||"value",n),g(n>=-Kr&&n<=Kr,"overflow",t||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return V(BigInt(n),t)}catch(e){g(!1,`invalid numeric string: ${e.message}`,t||"value",n)}}g(!1,"invalid numeric value",t||"value",n)}function zf(n){return V(To(n))}function Hn(n,t){let r=Ro(n,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const s=V(t,"width");for(N(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function ht(n){const t=Ro(n,"value");if(t===vo)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const r=new Uint8Array(e.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(e.substring(i,i+2),16)}return r}function ye(n){let t=B(Ya(n)?n:ht(n)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const Pc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Ic=BigInt(58);function Jf(n){const t=z(n);let e=To(t),r="";for(;e;)r=Pc[Number(e%Ic)]+r,e/=Ic;for(let s=0;s<t.length&&!t[s];s++)r=Pc[0]+r;return r}function Kf(n){n=atob(n);const t=new Uint8Array(n.length);for(let e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return z(t)}function _f(n){const t=z(n);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var ts;class Ql{constructor(t,e,r){y(this,"filter");y(this,"emitter");A(this,ts);d(this,ts,e),M(this,{emitter:t,filter:r})}async removeListener(){l(this,ts)!=null&&await this.emitter.off(this.filter,l(this,ts))}}ts=new WeakMap;function Wf(n,t,e,r,s){g(!1,`invalid codepoint at offset ${t}; ${n}`,"bytes",e)}function zl(n,t,e,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?e.length-t-1:0}function jf(n,t,e,r,s){return n==="OVERLONG"?(g(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),zl(n,t,e))}const Zf=Object.freeze({error:Wf,ignore:zl,replace:jf});function Yf(n,t){t==null&&(t=Zf.error);const e=z(n,"bytes"),r=[];let s=0;for(;s<e.length;){const i=e[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,r):s+=t("BAD_PREFIX",s-1,e,r);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,r);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let f=e[s];if((f&192)!=128){s+=t("MISSING_CONTINUE",s,e,r),c=null;break}c=c<<6|f&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,r,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,r,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,r,c);continue}r.push(c)}}return r}function De(n,t){g(typeof n=="string","invalid string value","str",n);let e=[];for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){r++;const i=n.charCodeAt(r);g(r<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function qf(n){return n.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function oo(n,t){return qf(Yf(n,t))}function Jl(n){async function t(e,r){N(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();N(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),N(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=it("request timeout","TIMEOUT"),o.abort()},e.timeout);r&&r.addListener(()=>{i=it("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},n,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let u;try{u=await fetch(e.url,c)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const f={};u.headers.forEach((m,b)=>{f[b.toLowerCase()]=m});const h=await u.arrayBuffer(),p=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:f,body:p}}return t}const Xf=12,$f=250;let Cc=Jl();const th=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),eh=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let jo=!1;async function Kl(n,t){try{const e=n.match(th);if(!e)throw new Error("invalid data");return new Mn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?Kf(e[3]):rh(e[3]))}catch{return new Mn(599,"BAD REQUEST (invalid data: URI)",{},null,new Gn(n))}}function _l(n){async function t(e,r){try{const s=e.match(eh);if(!s)throw new Error("invalid link");return new Gn(`${n}${s[2]}`)}catch{return new Mn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Gn(e))}}return t}const Gi={data:Kl,ipfs:_l("https://gateway.ipfs.io/ipfs/")},Wl=new WeakMap;var sr,An;class nh{constructor(t){A(this,sr);A(this,An);d(this,sr,[]),d(this,An,!1),Wl.set(t,()=>{if(!l(this,An)){d(this,An,!0);for(const e of l(this,sr))setTimeout(()=>{e()},0);d(this,sr,[])}})}addListener(t){N(!l(this,An),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),l(this,sr).push(t)}get cancelled(){return l(this,An)}checkSignal(){N(!this.cancelled,"cancelled","CANCELLED",{})}}sr=new WeakMap,An=new WeakMap;function Vi(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var es,ns,he,ze,rs,ss,gt,_t,Je,ir,or,ar,Ie,de,En,cr,ei;const xo=class xo{constructor(t){A(this,cr);A(this,es);A(this,ns);A(this,he);A(this,ze);A(this,rs);A(this,ss);A(this,gt);A(this,_t);A(this,Je);A(this,ir);A(this,or);A(this,ar);A(this,Ie);A(this,de);A(this,En);d(this,ss,String(t)),d(this,es,!1),d(this,ns,!0),d(this,he,{}),d(this,ze,""),d(this,rs,3e5),d(this,de,{slotInterval:$f,maxAttempts:Xf}),d(this,En,null)}get url(){return l(this,ss)}set url(t){d(this,ss,String(t))}get body(){return l(this,gt)==null?null:new Uint8Array(l(this,gt))}set body(t){if(t==null)d(this,gt,void 0),d(this,_t,void 0);else if(typeof t=="string")d(this,gt,De(t)),d(this,_t,"text/plain");else if(t instanceof Uint8Array)d(this,gt,t),d(this,_t,"application/octet-stream");else if(typeof t=="object")d(this,gt,De(JSON.stringify(t))),d(this,_t,"application/json");else throw new Error("invalid body")}hasBody(){return l(this,gt)!=null}get method(){return l(this,ze)?l(this,ze):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),d(this,ze,String(t).toUpperCase())}get headers(){const t=Object.assign({},l(this,he));return l(this,Je)&&(t.authorization=`Basic ${_f(De(l(this,Je)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&l(this,_t)&&(t["content-type"]=l(this,_t)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){l(this,he)[String(t).toLowerCase()]=String(e)}clearHeaders(){d(this,he,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const s=e[r++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return l(this,Je)||null}setCredentials(t,e){g(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),d(this,Je,`${t}:${e}`)}get allowGzip(){return l(this,ns)}set allowGzip(t){d(this,ns,!!t)}get allowInsecureAuthentication(){return!!l(this,es)}set allowInsecureAuthentication(t){d(this,es,!!t)}get timeout(){return l(this,rs)}set timeout(t){g(t>=0,"timeout must be non-zero","timeout",t),d(this,rs,t)}get preflightFunc(){return l(this,ir)||null}set preflightFunc(t){d(this,ir,t)}get processFunc(){return l(this,or)||null}set processFunc(t){d(this,or,t)}get retryFunc(){return l(this,ar)||null}set retryFunc(t){d(this,ar,t)}get getUrlFunc(){return l(this,En)||Cc}set getUrlFunc(t){d(this,En,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${l(this,gt)?B(l(this,gt)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(l(this,de).slotInterval=t.slotInterval),t.maxAttempts!=null&&(l(this,de).maxAttempts=t.maxAttempts)}send(){return N(l(this,Ie)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),d(this,Ie,new nh(this)),P(this,cr,ei).call(this,0,kc()+this.timeout,0,this,new Mn(0,"",{},null,this))}cancel(){N(l(this,Ie)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Wl.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();N(this.method==="GET"&&(e!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new xo(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,d(s,he,Object.assign({},l(this,he))),l(this,gt)&&d(s,gt,new Uint8Array(l(this,gt))),d(s,_t,l(this,_t)),s}clone(){const t=new xo(this.url);return d(t,ze,l(this,ze)),l(this,gt)&&d(t,gt,l(this,gt)),d(t,_t,l(this,_t)),d(t,he,Object.assign({},l(this,he))),d(t,Je,l(this,Je)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),d(t,ir,l(this,ir)),d(t,or,l(this,or)),d(t,ar,l(this,ar)),d(t,de,Object.assign({},l(this,de))),d(t,En,l(this,En)),t}static lockConfig(){jo=!0}static getGateway(t){return Gi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(jo)throw new Error("gateways locked");Gi[t]=e}static registerGetUrl(t){if(jo)throw new Error("gateways locked");Cc=t}static createGetUrlFunc(t){return Jl(t)}static createDataGateway(){return Kl}static createIpfsGatewayFunc(t){return _l(t)}};es=new WeakMap,ns=new WeakMap,he=new WeakMap,ze=new WeakMap,rs=new WeakMap,ss=new WeakMap,gt=new WeakMap,_t=new WeakMap,Je=new WeakMap,ir=new WeakMap,or=new WeakMap,ar=new WeakMap,Ie=new WeakMap,de=new WeakMap,En=new WeakMap,cr=new WeakSet,ei=async function(t,e,r,s,i){var f,h,p;if(t>=l(this,de).maxAttempts)return i.makeServerError("exceeded maximum retry limit");N(kc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await sh(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Gi){const m=await Gi[a](o.url,Vi(l(s,Ie)));if(m instanceof Mn){let b=m;if(this.processFunc){Vi(l(s,Ie));try{b=await this.processFunc(o,b)}catch(w){(w.throttle==null||typeof w.stall!="number")&&b.makeServerError("error in post-processing function",w).assertOk()}}return b}o=m}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Vi(l(s,Ie)));let u=new Mn(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const m=u.headers.location||"";return P(f=o.redirect(m),cr,ei).call(f,t+1,e,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,t))){const m=u.headers["retry-after"];let b=l(this,de).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof m=="string"&&m.match(/^[1-9][0-9]*$/)&&(b=parseInt(m)),P(h=o.clone(),cr,ei).call(h,t+1,e,b,s,u)}if(this.processFunc){Vi(l(s,Ie));try{u=await this.processFunc(o,u)}catch(m){(m.throttle==null||typeof m.stall!="number")&&u.makeServerError("error in post-processing function",m).assertOk();let b=l(this,de).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return m.stall>=0&&(b=m.stall),P(p=o.clone(),cr,ei).call(p,t+1,e,b,s,u)}}return u};let Gn=xo;var xi,Ni,Pi,Wt,is,lr;const gc=class gc{constructor(t,e,r,s,i){A(this,xi);A(this,Ni);A(this,Pi);A(this,Wt);A(this,is);A(this,lr);d(this,xi,t),d(this,Ni,e),d(this,Pi,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),d(this,Wt,s==null?null:new Uint8Array(s)),d(this,is,i||null),d(this,lr,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${l(this,Wt)?B(l(this,Wt)):"null"}>`}get statusCode(){return l(this,xi)}get statusMessage(){return l(this,Ni)}get headers(){return Object.assign({},l(this,Pi))}get body(){return l(this,Wt)==null?null:new Uint8Array(l(this,Wt))}get bodyText(){try{return l(this,Wt)==null?"":oo(l(this,Wt))}catch{N(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{N(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const s=e[r++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new gc(599,r,this.headers,this.body,l(this,is)||void 0);return d(s,lr,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:g(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");throw M(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return l(this,Wt)!=null}get request(){return l(this,is)}ok(){return l(this,lr).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=l(this,lr);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{l(this,Wt)&&(s=oo(l(this,Wt)))}catch{}N(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};xi=new WeakMap,Ni=new WeakMap,Pi=new WeakMap,Wt=new WeakMap,is=new WeakMap,lr=new WeakMap;let Mn=gc;function kc(){return new Date().getTime()}function rh(n){return De(n.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function sh(n){return new Promise(t=>setTimeout(t,n))}const ih=BigInt(-1),ce=BigInt(0),_r=BigInt(1),oh=BigInt(5),Mr={};let qr="0000";for(;qr.length<80;)qr+=qr;function Kn(n){let t=qr;for(;t.length<n;)t+=t;return BigInt("1"+t.substring(0,n))}function Xs(n,t,e){const r=BigInt(t.width);if(t.signed){const s=_r<<r-_r;N(e==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n>ce?n=io(tr(n,r),r):n=-io(tr(-n,r),r)}else{const s=_r<<r;N(e==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:n}),n=(n%s+s)%s&s-_r}return n}function Zo(n){typeof n=="number"&&(n=`fixed128x${n}`);let t=!0,e=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")t=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);g(i,"invalid fixed format","format",n),t=i[1]!=="u",e=parseInt(i[2]),r=parseInt(i[3])}}else if(n){const i=n,o=(a,c,u)=>i[a]==null?u:(g(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),r=o("decimals","number",r)}g(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),g(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(r);return{signed:t,width:e,decimals:r,name:s}}function ah(n,t){let e="";n<ce&&(e="-",n*=ih);let r=n.toString();if(t===0)return e+r;for(;r.length<=t;)r=qr+r;const s=r.length-t;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return e+r}var pe,tt,vt,X,Wn,He,da,pa,ga,ma;const yn=class yn{constructor(t,e,r){A(this,X);y(this,"format");A(this,pe);A(this,tt);A(this,vt);y(this,"_value");Li(t,Mr,"FixedNumber"),d(this,tt,e),d(this,pe,r);const s=ah(e,r.decimals);M(this,{format:r.name,_value:s}),d(this,vt,Kn(r.decimals))}get signed(){return l(this,pe).signed}get width(){return l(this,pe).width}get decimals(){return l(this,pe).decimals}get value(){return l(this,tt)}addUnsafe(t){return P(this,X,da).call(this,t)}add(t){return P(this,X,da).call(this,t,"add")}subUnsafe(t){return P(this,X,pa).call(this,t)}sub(t){return P(this,X,pa).call(this,t,"sub")}mulUnsafe(t){return P(this,X,ga).call(this,t)}mul(t){return P(this,X,ga).call(this,t,"mul")}mulSignal(t){P(this,X,Wn).call(this,t);const e=l(this,tt)*l(t,tt);return N(e%l(this,vt)===ce,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),P(this,X,He).call(this,e/l(this,vt),"mulSignal")}divUnsafe(t){return P(this,X,ma).call(this,t)}div(t){return P(this,X,ma).call(this,t,"div")}divSignal(t){N(l(t,tt)!==ce,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),P(this,X,Wn).call(this,t);const e=l(this,tt)*l(this,vt);return N(e%l(t,tt)===ce,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),P(this,X,He).call(this,e/l(t,tt),"divSignal")}cmp(t){let e=this.value,r=t.value;const s=this.decimals-t.decimals;return s>0?r*=Kn(s):s<0&&(e*=Kn(-s)),e<r?-1:e>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=l(this,tt);return l(this,tt)<ce&&(t-=l(this,vt)-_r),t=l(this,tt)/l(this,vt)*l(this,vt),P(this,X,He).call(this,t,"floor")}ceiling(){let t=l(this,tt);return l(this,tt)>ce&&(t+=l(this,vt)-_r),t=l(this,tt)/l(this,vt)*l(this,vt),P(this,X,He).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=oh*Kn(e-1);let s=this.value+r;const i=Kn(e);return s=s/i*i,Xs(s,l(this,pe),"round"),new yn(Mr,s,l(this,pe))}isZero(){return l(this,tt)===ce}isNegative(){return l(this,tt)<ce}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return yn.fromString(this.toString(),t)}static fromValue(t,e,r){const s=e==null?0:V(e),i=Zo(r);let o=T(t,"value");const a=s-i.decimals;if(a>0){const c=Kn(a);N(o%c===ce,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Kn(-a));return Xs(o,i,"fromValue"),new yn(Mr,o,i)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);g(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const s=Zo(e);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=qr;N(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return Xs(a,s,"fromString"),new yn(Mr,a,s)}static fromBytes(t,e){let r=To(z(t,"value"));const s=Zo(e);return s.signed&&(r=io(r,s.width)),Xs(r,s,"fromBytes"),new yn(Mr,r,s)}};pe=new WeakMap,tt=new WeakMap,vt=new WeakMap,X=new WeakSet,Wn=function(t){g(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},He=function(t,e){return t=Xs(t,l(this,pe),e),new yn(Mr,t,l(this,pe))},da=function(t,e){return P(this,X,Wn).call(this,t),P(this,X,He).call(this,l(this,tt)+l(t,tt),e)},pa=function(t,e){return P(this,X,Wn).call(this,t),P(this,X,He).call(this,l(this,tt)-l(t,tt),e)},ga=function(t,e){return P(this,X,Wn).call(this,t),P(this,X,He).call(this,l(this,tt)*l(t,tt)/l(this,vt),e)},ma=function(t,e){return N(l(t,tt)!==ce,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),P(this,X,Wn).call(this,t),P(this,X,He).call(this,l(this,tt)*l(this,vt)/l(t,tt),e)};let ao=yn;function ch(n){let t=n.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Bc(n,t,e){let r=0;for(let s=0;s<e;s++)r=r*256+n[t+s];return r}function vc(n,t,e,r){const s=[];for(;e<t+1+r;){const i=jl(n,e);s.push(i.result),e+=i.consumed,N(e<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:t})}return{consumed:1+r,result:s}}function jl(n,t){N(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const e=r=>{N(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[t]>=248){const r=n[t]-247;e(t+1+r);const s=Bc(n,t+1,r);return e(t+1+r+s),vc(n,t,t+1+r,r+s)}else if(n[t]>=192){const r=n[t]-192;return e(t+1+r),vc(n,t,t+1,r)}else if(n[t]>=184){const r=n[t]-183;e(t+1+r);const s=Bc(n,t+1,r);e(t+1+r+s);const i=B(n.slice(t+1+r,t+1+r+s));return{consumed:1+r+s,result:i}}else if(n[t]>=128){const r=n[t]-128;e(t+1+r);const s=B(n.slice(t+1,t+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:ch(n[t])}}function Ui(n){const t=z(n,"data"),e=jl(t,0);return g(e.consumed===t.length,"unexpected junk after rlp payload","data",n),e.result}function Rc(n){const t=[];for(;n;)t.unshift(n&255),n>>=8;return t}function Zl(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(i){r=r.concat(Zl(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Rc(r.length);return s.unshift(247+s.length),s.concat(r)}const t=Array.prototype.slice.call(z(n,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Rc(t.length);return e.unshift(183+e.length),e.concat(t)}const Tc="0123456789abcdef";function Vn(n){let t="0x";for(const e of Zl(n))t+=Tc[e>>4],t+=Tc[e&15];return t}function lh(n,t){let e=18;return e=V(t,"unit"),ao.fromValue(n,e,{decimals:e,width:512}).toString()}function uh(n,t){g(typeof n=="string","value must be a string","value",n);let e=18;return e=V(t,"unit"),ao.fromString(n,{decimals:e,width:512}).value}function ai(n){return lh(n,18)}function fh(n){return uh(n,18)}const Ot=32,wa=new Uint8Array(Ot),hh=["then"],Qi={},Yl=new WeakMap;function Zn(n){return Yl.get(n)}function Sc(n,t){Yl.set(n,t)}function $s(n,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw e.error=t,e}function ya(n,t,e){return n.indexOf(null)>=0?t.map((r,s)=>r instanceof Gs?ya(Zn(r),r,e):r):n.reduce((r,s,i)=>{let o=t.getValue(s);return s in r||(e&&o instanceof Gs&&(o=ya(Zn(o),o,e)),r[s]=o),r},{})}var os;const Wr=class Wr extends Array{constructor(...e){const r=e[0];let s=e[1],i=(e[2]||[]).slice(),o=!0;r!==Qi&&(s=e,i=[],o=!1);super(s.length);A(this,os);s.forEach((u,f)=>{this[f]=u});const a=i.reduce((u,f)=>(typeof f=="string"&&u.set(f,(u.get(f)||0)+1),u),new Map);if(Sc(this,Object.freeze(s.map((u,f)=>{const h=i[f];return h!=null&&a.get(h)===1?h:null}))),d(this,os,[]),l(this,os)==null&&l(this,os),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,f,h)=>{if(typeof f=="string"){if(f.match(/^[0-9]+$/)){const m=V(f,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");const b=u[m];return b instanceof Error&&$s(`index ${m}`,b),b}if(hh.indexOf(f)>=0)return Reflect.get(u,f,h);const p=u[f];if(p instanceof Function)return function(...m){return p.apply(this===h?u:this,m)};if(!(f in u))return u.getValue.apply(this===h?u:this,[f])}return Reflect.get(u,f,h)}});return Sc(c,Zn(this)),c}toArray(e){const r=[];return this.forEach((s,i)=>{s instanceof Error&&$s(`index ${i}`,s),e&&s instanceof Wr&&(s=s.toArray(e)),r.push(s)}),r}toObject(e){const r=Zn(this);return r.reduce((s,i,o)=>(N(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ya(r,this,e)),{})}slice(e,r){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Zn(this),i=[],o=[];for(let a=e;a<r;a++)i.push(this[a]),o.push(s[a]);return new Wr(Qi,i,o)}filter(e,r){const s=Zn(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&$s(`index ${a}`,c),e.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Wr(Qi,i,o)}map(e,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&$s(`index ${i}`,o),s.push(e.call(r,o,i,this))}return s}getValue(e){const r=Zn(this).indexOf(e);if(r===-1)return;const s=this[r];return s instanceof Error&&$s(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,r){return new Wr(Qi,e,r)}};os=new WeakMap;let Gs=Wr;function Oc(n){let t=ht(n);return N(t.length<=Ot,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Ot,offset:t.length}),t.length!==Ot&&(t=St(ct([wa.slice(t.length%Ot),t]))),t}class ln{constructor(t,e,r,s){y(this,"name");y(this,"type");y(this,"localName");y(this,"dynamic");M(this,{name:t,type:e,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){g(!1,t,this.localName,e)}}var Ke,ur,as,Zi;class ba{constructor(){A(this,as);A(this,Ke);A(this,ur);d(this,Ke,[]),d(this,ur,0)}get data(){return ct(l(this,Ke))}get length(){return l(this,ur)}appendWriter(t){return P(this,as,Zi).call(this,St(t.data))}writeBytes(t){let e=St(t);const r=e.length%Ot;return r&&(e=St(ct([e,wa.slice(r)]))),P(this,as,Zi).call(this,e)}writeValue(t){return P(this,as,Zi).call(this,Oc(t))}writeUpdatableValue(){const t=l(this,Ke).length;return l(this,Ke).push(wa),d(this,ur,l(this,ur)+Ot),e=>{l(this,Ke)[t]=Oc(e)}}}Ke=new WeakMap,ur=new WeakMap,as=new WeakSet,Zi=function(t){return l(this,Ke).push(t),d(this,ur,l(this,ur)+t.length),t.length};var Ft,jt,fr,hr,xn,Tr,Ea,ql;const mc=class mc{constructor(t,e,r){A(this,Tr);y(this,"allowLoose");A(this,Ft);A(this,jt);A(this,fr);A(this,hr);A(this,xn);M(this,{allowLoose:!!e}),d(this,Ft,St(t)),d(this,fr,0),d(this,hr,null),d(this,xn,r??1024),d(this,jt,0)}get data(){return B(l(this,Ft))}get dataLength(){return l(this,Ft).length}get consumed(){return l(this,jt)}get bytes(){return new Uint8Array(l(this,Ft))}subReader(t){const e=new mc(l(this,Ft).slice(l(this,jt)+t),this.allowLoose,l(this,xn));return d(e,hr,this),e}readBytes(t,e){let r=P(this,Tr,ql).call(this,0,t,!!e);return P(this,Tr,Ea).call(this,t),d(this,jt,l(this,jt)+r.length),r.slice(0,t)}readValue(){return To(this.readBytes(Ot))}readIndex(){return zf(this.readBytes(Ot))}};Ft=new WeakMap,jt=new WeakMap,fr=new WeakMap,hr=new WeakMap,xn=new WeakMap,Tr=new WeakSet,Ea=function(t){var e;if(l(this,hr))return P(e=l(this,hr),Tr,Ea).call(e,t);d(this,fr,l(this,fr)+t),N(l(this,xn)<1||l(this,fr)<=l(this,xn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${l(this,xn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:St(l(this,Ft)),offset:l(this,jt),length:t,info:{bytesRead:l(this,fr),dataLength:this.dataLength}})},ql=function(t,e,r){let s=Math.ceil(e/Ot)*Ot;return l(this,jt)+s>l(this,Ft).length&&(this.allowLoose&&r&&l(this,jt)+e<=l(this,Ft).length?s=e:N(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:St(l(this,Ft)),length:l(this,Ft).length,offset:l(this,jt)+s})),l(this,Ft).slice(l(this,jt),l(this,jt)+s)};let Aa=mc;function co(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function qa(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function dh(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");co(n.outputLen),co(n.blockLen)}function Vs(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Xl(n,t){qa(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Yo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $l=n=>n instanceof Uint8Array,ph=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),qo=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ne=(n,t)=>n<<32-t|n>>>t,gh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!gh)throw new Error("Non little-endian hardware is not supported");function mh(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function So(n){if(typeof n=="string"&&(n=mh(n)),!$l(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function wh(...n){const t=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let e=0;return n.forEach(r=>{if(!$l(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}class Xa{clone(){return this._cloneInto()}}function $a(n){const t=r=>n().update(So(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function yh(n=32){if(Yo&&typeof Yo.getRandomValues=="function")return Yo.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class tu extends Xa{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,dh(t);const r=So(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Vs(this),this.iHash.update(t),this}digestInto(t){Vs(this),qa(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const eu=(n,t,e)=>new tu(n,t).update(e).digest();eu.create=(n,t)=>new tu(n,t);function bh(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=r?4:0,u=r?0:4;n.setUint32(t+c,o,r),n.setUint32(t+u,a,r)}class nu extends Xa{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=qo(this.buffer)}update(t){Vs(this);const{view:e,buffer:r,blockLen:s}=this;t=So(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qo(t);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vs(this),Xl(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)e[h]=0;bh(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qo(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,f[h],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(r),t}}const Ah=(n,t,e)=>n&t^~n&e,Eh=(n,t,e)=>n&t^n&e^t&e,xh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pn=new Uint32Array(64);class Nh extends nu{constructor(){super(64,32,8,!1),this.A=dn[0]|0,this.B=dn[1]|0,this.C=dn[2]|0,this.D=dn[3]|0,this.E=dn[4]|0,this.F=dn[5]|0,this.G=dn[6]|0,this.H=dn[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,r,s,i,o,a,c]}set(t,e,r,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let h=0;h<16;h++,e+=4)pn[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const p=pn[h-15],m=pn[h-2],b=Ne(p,7)^Ne(p,18)^p>>>3,w=Ne(m,17)^Ne(m,19)^m>>>10;pn[h]=w+pn[h-7]+b+pn[h-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:f}=this;for(let h=0;h<64;h++){const p=Ne(a,6)^Ne(a,11)^Ne(a,25),m=f+p+Ah(a,c,u)+xh[h]+pn[h]|0,w=(Ne(r,2)^Ne(r,13)^Ne(r,22))+Eh(r,s,i)|0;f=u,u=c,c=a,a=o+m|0,o=i,i=s,s=r,r=m+w|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,i,o,a,c,u,f)}roundClean(){pn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ru=$a(()=>new Nh),zi=BigInt(2**32-1),xa=BigInt(32);function su(n,t=!1){return t?{h:Number(n&zi),l:Number(n>>xa&zi)}:{h:Number(n>>xa&zi)|0,l:Number(n&zi)|0}}function iu(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=su(n[s],t);[e[s],r[s]]=[i,o]}return[e,r]}const Ph=(n,t)=>BigInt(n>>>0)<<xa|BigInt(t>>>0),Ih=(n,t,e)=>n>>>e,Ch=(n,t,e)=>n<<32-e|t>>>e,kh=(n,t,e)=>n>>>e|t<<32-e,Bh=(n,t,e)=>n<<32-e|t>>>e,vh=(n,t,e)=>n<<64-e|t>>>e-32,Rh=(n,t,e)=>n>>>e-32|t<<64-e,Th=(n,t)=>t,Sh=(n,t)=>n,ou=(n,t,e)=>n<<e|t>>>32-e,au=(n,t,e)=>t<<e|n>>>32-e,cu=(n,t,e)=>t<<e-32|n>>>64-e,lu=(n,t,e)=>n<<e-32|t>>>64-e;function Oh(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Lh=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Uh=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Fh=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Dh=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Mh=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Hh=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Q={fromBig:su,split:iu,toBig:Ph,shrSH:Ih,shrSL:Ch,rotrSH:kh,rotrSL:Bh,rotrBH:vh,rotrBL:Rh,rotr32H:Th,rotr32L:Sh,rotlSH:ou,rotlSL:au,rotlBH:cu,rotlBL:lu,add:Oh,add3L:Lh,add3H:Uh,add4L:Fh,add4H:Dh,add5H:Hh,add5L:Mh},[Gh,Vh]=Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),gn=new Uint32Array(80),mn=new Uint32Array(80);class Qh extends nu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:h,Fl:p,Gh:m,Gl:b,Hh:w,Hl:E}=this;return[t,e,r,s,i,o,a,c,u,f,h,p,m,b,w,E]}set(t,e,r,s,i,o,a,c,u,f,h,p,m,b,w,E){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=m|0,this.Gl=b|0,this.Hh=w|0,this.Hl=E|0}process(t,e){for(let C=0;C<16;C++,e+=4)gn[C]=t.getUint32(e),mn[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){const G=gn[C-15]|0,D=mn[C-15]|0,O=Q.rotrSH(G,D,1)^Q.rotrSH(G,D,8)^Q.shrSH(G,D,7),H=Q.rotrSL(G,D,1)^Q.rotrSL(G,D,8)^Q.shrSL(G,D,7),F=gn[C-2]|0,q=mn[C-2]|0,j=Q.rotrSH(F,q,19)^Q.rotrBH(F,q,61)^Q.shrSH(F,q,6),Z=Q.rotrSL(F,q,19)^Q.rotrBL(F,q,61)^Q.shrSL(F,q,6),dt=Q.add4L(H,Z,mn[C-7],mn[C-16]),yt=Q.add4H(dt,O,j,gn[C-7],gn[C-16]);gn[C]=yt|0,mn[C]=dt|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:h,El:p,Fh:m,Fl:b,Gh:w,Gl:E,Hh:x,Hl:v}=this;for(let C=0;C<80;C++){const G=Q.rotrSH(h,p,14)^Q.rotrSH(h,p,18)^Q.rotrBH(h,p,41),D=Q.rotrSL(h,p,14)^Q.rotrSL(h,p,18)^Q.rotrBL(h,p,41),O=h&m^~h&w,H=p&b^~p&E,F=Q.add5L(v,D,H,Vh[C],mn[C]),q=Q.add5H(F,x,G,O,Gh[C],gn[C]),j=F|0,Z=Q.rotrSH(r,s,28)^Q.rotrBH(r,s,34)^Q.rotrBH(r,s,39),dt=Q.rotrSL(r,s,28)^Q.rotrBL(r,s,34)^Q.rotrBL(r,s,39),yt=r&i^r&a^i&a,xe=s&o^s&c^o&c;x=w|0,v=E|0,w=m|0,E=b|0,m=h|0,b=p|0,{h,l:p}=Q.add(u|0,f|0,q|0,j|0),u=a|0,f=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const k=Q.add3L(j,dt,xe);r=Q.add3H(k,q,Z,yt),s=k|0}({h:r,l:s}=Q.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Q.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Q.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=Q.add(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:p}=Q.add(this.Eh|0,this.El|0,h|0,p|0),{h:m,l:b}=Q.add(this.Fh|0,this.Fl|0,m|0,b|0),{h:w,l:E}=Q.add(this.Gh|0,this.Gl|0,w|0,E|0),{h:x,l:v}=Q.add(this.Hh|0,this.Hl|0,x|0,v|0),this.set(r,s,i,o,a,c,u,f,h,p,m,b,w,E,x,v)}roundClean(){gn.fill(0),mn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const zh=$a(()=>new Qh);function Jh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Lc=Jh();Lc.crypto||Lc.msCrypto;function Kh(n){switch(n){case"sha256":return ru.create();case"sha512":return zh.create()}g(!1,"invalid hashing algorithm name","algorithm",n)}const[uu,fu,hu]=[[],[],[]],_h=BigInt(0),ti=BigInt(1),Wh=BigInt(2),jh=BigInt(7),Zh=BigInt(256),Yh=BigInt(113);for(let n=0,t=ti,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],uu.push(2*(5*r+e)),fu.push((n+1)*(n+2)/2%64);let s=_h;for(let i=0;i<7;i++)t=(t<<ti^(t>>jh)*Yh)%Zh,t&Wh&&(s^=ti<<(ti<<BigInt(i))-ti);hu.push(s)}const[qh,Xh]=iu(hu,!0),Uc=(n,t,e)=>e>32?cu(n,t,e):ou(n,t,e),Fc=(n,t,e)=>e>32?lu(n,t,e):au(n,t,e);function $h(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=e[c],f=e[c+1],h=Uc(u,f,1)^e[a],p=Fc(u,f,1)^e[a+1];for(let m=0;m<50;m+=10)n[o+m]^=h,n[o+m+1]^=p}let s=n[2],i=n[3];for(let o=0;o<24;o++){const a=fu[o],c=Uc(s,i,a),u=Fc(s,i,a),f=uu[o];s=n[f],i=n[f+1],n[f]=c,n[f+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}n[0]^=qh[r],n[1]^=Xh[r]}e.fill(0)}class tc extends Xa{constructor(t,e,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,co(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ph(this.state)}keccak(){$h(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Vs(this);const{blockLen:e,state:r}=this;t=So(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,e&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Vs(this,!1),qa(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return co(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Xl(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new tc(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const td=(n,t,e)=>$a(()=>new tc(t,n,e)),ed=td(1,136,256/8);let du=!1;const pu=function(n){return ed(n)};let gu=pu;function ft(n){const t=z(n,"data");return B(gu(t))}ft._=pu;ft.lock=function(){du=!0};ft.register=function(n){if(du)throw new TypeError("keccak256 is locked");gu=n};Object.freeze(ft);const mu=function(n){return Kh("sha256").update(n).digest()};let wu=mu,yu=!1;function js(n){const t=z(n,"data");return B(wu(t))}js._=mu;js.lock=function(){yu=!0};js.register=function(n){if(yu)throw new Error("sha256 is locked");wu=n};Object.freeze(js);Object.freeze(js);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bu=BigInt(0),Oo=BigInt(1),nd=BigInt(2),Lo=n=>n instanceof Uint8Array,rd=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Qs(n){if(!Lo(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=rd[n[e]];return t}function Au(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function ec(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function zs(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let r=0;r<e.length;r++){const s=r*2,i=n.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function Pr(n){return ec(Qs(n))}function nc(n){if(!Lo(n))throw new Error("Uint8Array expected");return ec(Qs(Uint8Array.from(n).reverse()))}function Js(n,t){return zs(n.toString(16).padStart(t*2,"0"))}function rc(n,t){return Js(n,t).reverse()}function sd(n){return zs(Au(n))}function ue(n,t,e){let r;if(typeof t=="string")try{r=zs(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Lo(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return r}function ui(...n){const t=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let e=0;return n.forEach(r=>{if(!Lo(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}function id(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function od(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ad(n){let t;for(t=0;n>bu;n>>=Oo,t+=1);return t}function cd(n,t){return n>>BigInt(t)&Oo}const ld=(n,t,e)=>n|(e?Oo:bu)<<BigInt(t),sc=n=>(nd<<BigInt(n-1))-Oo,Xo=n=>new Uint8Array(n),Dc=n=>Uint8Array.from(n);function Eu(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Xo(n),s=Xo(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...h)=>e(s,r,...h),c=(h=Xo())=>{s=a(Dc([0]),h),r=a(),h.length!==0&&(s=a(Dc([1]),h),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){r=a();const m=r.slice();p.push(m),h+=r.length}return ui(...p)};return(h,p)=>{o(),c(h);let m;for(;!(m=p(u()));)c();return o(),m}}const ud={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Fi(n,t,e={}){const r=(s,i,o)=>{const a=ud[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}const fd=Object.freeze(Object.defineProperty({__proto__:null,bitGet:cd,bitLen:ad,bitMask:sc,bitSet:ld,bytesToHex:Qs,bytesToNumberBE:Pr,bytesToNumberLE:nc,concatBytes:ui,createHmacDrbg:Eu,ensureBytes:ue,equalBytes:id,hexToBytes:zs,hexToNumber:ec,numberToBytesBE:Js,numberToBytesLE:rc,numberToHexUnpadded:Au,numberToVarBytesBE:sd,utf8ToBytes:od,validateObject:Fi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wt=BigInt(0),ut=BigInt(1),Yn=BigInt(2),hd=BigInt(3),Na=BigInt(4),Mc=BigInt(5),Hc=BigInt(8);BigInt(9);BigInt(16);function Mt(n,t){const e=n%t;return e>=wt?e:t+e}function dd(n,t,e){if(e<=wt||t<wt)throw new Error("Expected power/modulo > 0");if(e===ut)return wt;let r=ut;for(;t>wt;)t&ut&&(r=r*n%e),n=n*n%e,t>>=ut;return r}function $t(n,t,e){let r=n;for(;t-- >wt;)r*=r,r%=e;return r}function Pa(n,t){if(n===wt||t<=wt)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Mt(n,t),r=t,s=wt,i=ut;for(;e!==wt;){const a=r/e,c=r%e,u=s-i*a;r=e,e=c,s=i,i=u}if(r!==ut)throw new Error("invert: does not exist");return Mt(s,t)}function pd(n){const t=(n-ut)/Yn;let e,r,s;for(e=n-ut,r=0;e%Yn===wt;e/=Yn,r++);for(s=Yn;s<n&&dd(s,t,n)!==n-ut;s++);if(r===1){const o=(n+ut)/Na;return function(c,u){const f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const i=(e+ut)/Yn;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,f=a.pow(a.mul(a.ONE,s),e),h=a.pow(c,i),p=a.pow(c,e);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let w=a.sqr(p);m<u&&!a.eql(w,a.ONE);m++)w=a.sqr(w);const b=a.pow(f,ut<<BigInt(u-m-1));f=a.sqr(b),h=a.mul(h,b),p=a.mul(p,f),u=m}return h}}function gd(n){if(n%Na===hd){const t=(n+ut)/Na;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%Hc===Mc){const t=(n-Mc)/Hc;return function(r,s){const i=r.mul(s,Yn),o=r.pow(i,t),a=r.mul(s,o),c=r.mul(r.mul(a,Yn),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return pd(n)}const md=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wd(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=md.reduce((r,s)=>(r[s]="function",r),t);return Fi(n,e)}function yd(n,t,e){if(e<wt)throw new Error("Expected power > 0");if(e===wt)return n.ONE;if(e===ut)return t;let r=n.ONE,s=t;for(;e>wt;)e&ut&&(r=n.mul(r,s)),s=n.sqr(s),e>>=ut;return r}function bd(n,t){const e=new Array(t.length),r=t.reduce((i,o,a)=>n.is0(o)?i:(e[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return t.reduceRight((i,o,a)=>n.is0(o)?i:(e[a]=n.mul(i,e[a]),n.mul(i,o)),s),e}function xu(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Ad(n,t,e=!1,r={}){if(n<=wt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=xu(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=gd(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:sc(s),ZERO:wt,ONE:ut,create:c=>Mt(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return wt<=c&&c<n},is0:c=>c===wt,isOdd:c=>(c&ut)===ut,neg:c=>Mt(-c,n),eql:(c,u)=>c===u,sqr:c=>Mt(c*c,n),add:(c,u)=>Mt(c+u,n),sub:(c,u)=>Mt(c-u,n),mul:(c,u)=>Mt(c*u,n),pow:(c,u)=>yd(a,c,u),div:(c,u)=>Mt(c*Pa(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Pa(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>bd(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>e?rc(c,i):Js(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?nc(c):Pr(c)}});return Object.freeze(a)}function Nu(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Pu(n){const t=Nu(n);return t+Math.ceil(t/2)}function Ed(n,t,e=!1){const r=n.length,s=Nu(t),i=Pu(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=e?Pr(n):nc(n),a=Mt(o,t-ut)+ut;return e?rc(a,s):Js(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xd=BigInt(0),$o=BigInt(1);function Nd(n,t){const e=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=n.ZERO,a=s;for(;i>xd;)i&$o&&(o=o.add(a)),a=a.double(),i>>=$o;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let u=s,f=u;for(let h=0;h<o;h++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let u=n.ZERO,f=n.BASE;const h=BigInt(2**s-1),p=2**s,m=BigInt(s);for(let b=0;b<a;b++){const w=b*c;let E=Number(o&h);o>>=m,E>c&&(E-=p,o+=$o);const x=w,v=w+Math.abs(E)-1,C=b%2!==0,G=E<0;E===0?f=f.add(e(C,i[x])):u=u.add(e(G,i[v]))}return{p:u,f}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function Iu(n){return wd(n.Fp),Fi(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xu(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Pd(n){const t=Iu(n);Fi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Id,hexToBytes:Cd}=fd,er={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=er;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Id(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=er,e=typeof n=="string"?Cd(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=er._parseInt(e.subarray(2)),{d:o,l:a}=er._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},r=t(e(n.s)),s=t(e(n.r)),i=r.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${r}`}},tn=BigInt(0),oe=BigInt(1);BigInt(2);const Gc=BigInt(3);BigInt(4);function kd(n){const t=Pd(n),{Fp:e}=t,r=t.toBytes||((b,w,E)=>{const x=w.toAffine();return ui(Uint8Array.from([4]),e.toBytes(x.x),e.toBytes(x.y))}),s=t.fromBytes||(b=>{const w=b.subarray(1),E=e.fromBytes(w.subarray(0,e.BYTES)),x=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:E,y:x}});function i(b){const{a:w,b:E}=t,x=e.sqr(b),v=e.mul(x,b);return e.add(e.add(v,e.mul(b,w)),E)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return typeof b=="bigint"&&tn<b&&b<t.n}function a(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(b){const{allowedPrivateKeyLengths:w,nByteLength:E,wrapPrivateKey:x,n:v}=t;if(w&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=Qs(b)),typeof b!="string"||!w.includes(b.length))throw new Error("Invalid key");b=b.padStart(E*2,"0")}let C;try{C=typeof b=="bigint"?b:Pr(ue("private key",b,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof b}`)}return x&&(C=Mt(C,v)),a(C),C}const u=new Map;function f(b){if(!(b instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(w,E,x){if(this.px=w,this.py=E,this.pz=x,w==null||!e.isValid(w))throw new Error("x required");if(E==null||!e.isValid(E))throw new Error("y required");if(x==null||!e.isValid(x))throw new Error("z required")}static fromAffine(w){const{x:E,y:x}=w||{};if(!w||!e.isValid(E)||!e.isValid(x))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=C=>e.eql(C,e.ZERO);return v(E)&&v(x)?h.ZERO:new h(E,x,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const E=e.invertBatch(w.map(x=>x.pz));return w.map((x,v)=>x.toAffine(E[v])).map(h.fromAffine)}static fromHex(w){const E=h.fromAffine(s(ue("pointHex",w)));return E.assertValidity(),E}static fromPrivateKey(w){return h.BASE.multiply(c(w))}_setWindowSize(w){this._WINDOW_SIZE=w,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:E}=this.toAffine();if(!e.isValid(w)||!e.isValid(E))throw new Error("bad point: x or y not FE");const x=e.sqr(E),v=i(w);if(!e.eql(x,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(e.isOdd)return!e.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){f(w);const{px:E,py:x,pz:v}=this,{px:C,py:G,pz:D}=w,O=e.eql(e.mul(E,D),e.mul(C,v)),H=e.eql(e.mul(x,D),e.mul(G,v));return O&&H}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:w,b:E}=t,x=e.mul(E,Gc),{px:v,py:C,pz:G}=this;let D=e.ZERO,O=e.ZERO,H=e.ZERO,F=e.mul(v,v),q=e.mul(C,C),j=e.mul(G,G),Z=e.mul(v,C);return Z=e.add(Z,Z),H=e.mul(v,G),H=e.add(H,H),D=e.mul(w,H),O=e.mul(x,j),O=e.add(D,O),D=e.sub(q,O),O=e.add(q,O),O=e.mul(D,O),D=e.mul(Z,D),H=e.mul(x,H),j=e.mul(w,j),Z=e.sub(F,j),Z=e.mul(w,Z),Z=e.add(Z,H),H=e.add(F,F),F=e.add(H,F),F=e.add(F,j),F=e.mul(F,Z),O=e.add(O,F),j=e.mul(C,G),j=e.add(j,j),F=e.mul(j,Z),D=e.sub(D,F),H=e.mul(j,q),H=e.add(H,H),H=e.add(H,H),new h(D,O,H)}add(w){f(w);const{px:E,py:x,pz:v}=this,{px:C,py:G,pz:D}=w;let O=e.ZERO,H=e.ZERO,F=e.ZERO;const q=t.a,j=e.mul(t.b,Gc);let Z=e.mul(E,C),dt=e.mul(x,G),yt=e.mul(v,D),xe=e.add(E,x),k=e.add(C,G);xe=e.mul(xe,k),k=e.add(Z,dt),xe=e.sub(xe,k),k=e.add(E,v);let L=e.add(C,D);return k=e.mul(k,L),L=e.add(Z,yt),k=e.sub(k,L),L=e.add(x,v),O=e.add(G,D),L=e.mul(L,O),O=e.add(dt,yt),L=e.sub(L,O),F=e.mul(q,k),O=e.mul(j,yt),F=e.add(O,F),O=e.sub(dt,F),F=e.add(dt,F),H=e.mul(O,F),dt=e.add(Z,Z),dt=e.add(dt,Z),yt=e.mul(q,yt),k=e.mul(j,k),dt=e.add(dt,yt),yt=e.sub(Z,yt),yt=e.mul(q,yt),k=e.add(k,yt),Z=e.mul(dt,k),H=e.add(H,Z),Z=e.mul(L,k),O=e.mul(xe,O),O=e.sub(O,Z),Z=e.mul(xe,dt),F=e.mul(L,F),F=e.add(F,Z),new h(O,H,F)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return m.wNAFCached(this,u,w,E=>{const x=e.invertBatch(E.map(v=>v.pz));return E.map((v,C)=>v.toAffine(x[C])).map(h.fromAffine)})}multiplyUnsafe(w){const E=h.ZERO;if(w===tn)return E;if(a(w),w===oe)return this;const{endo:x}=t;if(!x)return m.unsafeLadder(this,w);let{k1neg:v,k1:C,k2neg:G,k2:D}=x.splitScalar(w),O=E,H=E,F=this;for(;C>tn||D>tn;)C&oe&&(O=O.add(F)),D&oe&&(H=H.add(F)),F=F.double(),C>>=oe,D>>=oe;return v&&(O=O.negate()),G&&(H=H.negate()),H=new h(e.mul(H.px,x.beta),H.py,H.pz),O.add(H)}multiply(w){a(w);let E=w,x,v;const{endo:C}=t;if(C){const{k1neg:G,k1:D,k2neg:O,k2:H}=C.splitScalar(E);let{p:F,f:q}=this.wNAF(D),{p:j,f:Z}=this.wNAF(H);F=m.constTimeNegate(G,F),j=m.constTimeNegate(O,j),j=new h(e.mul(j.px,C.beta),j.py,j.pz),x=F.add(j),v=q.add(Z)}else{const{p:G,f:D}=this.wNAF(E);x=G,v=D}return h.normalizeZ([x,v])[0]}multiplyAndAddUnsafe(w,E,x){const v=h.BASE,C=(D,O)=>O===tn||O===oe||!D.equals(v)?D.multiplyUnsafe(O):D.multiply(O),G=C(this,E).add(C(w,x));return G.is0()?void 0:G}toAffine(w){const{px:E,py:x,pz:v}=this,C=this.is0();w==null&&(w=C?e.ONE:e.inv(v));const G=e.mul(E,w),D=e.mul(x,w),O=e.mul(v,w);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(O,e.ONE))throw new Error("invZ was invalid");return{x:G,y:D}}isTorsionFree(){const{h:w,isTorsionFree:E}=t;if(w===oe)return!0;if(E)return E(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:E}=t;return w===oe?this:E?E(h,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(h,this,w)}toHex(w=!0){return Qs(this.toRawBytes(w))}}h.BASE=new h(t.Gx,t.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const p=t.nBitLength,m=Nd(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Bd(n){const t=Iu(n);return Fi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function vd(n){const t=Bd(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(k){return tn<k&&k<e.ORDER}function a(k){return Mt(k,r)}function c(k){return Pa(k,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=kd({...t,toBytes(k,L,K){const st=L.toAffine(),nt=e.toBytes(st.x),pt=ui;return K?pt(Uint8Array.from([L.hasEvenY()?2:3]),nt):pt(Uint8Array.from([4]),nt,e.toBytes(st.y))},fromBytes(k){const L=k.length,K=k[0],st=k.subarray(1);if(L===s&&(K===2||K===3)){const nt=Pr(st);if(!o(nt))throw new Error("Point is not on curve");const pt=h(nt);let Qt=e.sqrt(pt);const zt=(Qt&oe)===oe;return(K&1)===1!==zt&&(Qt=e.neg(Qt)),{x:nt,y:Qt}}else if(L===i&&K===4){const nt=e.fromBytes(st.subarray(0,e.BYTES)),pt=e.fromBytes(st.subarray(e.BYTES,2*e.BYTES));return{x:nt,y:pt}}else throw new Error(`Point of length ${L} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),m=k=>Qs(Js(k,t.nByteLength));function b(k){const L=r>>oe;return k>L}function w(k){return b(k)?a(-k):k}const E=(k,L,K)=>Pr(k.slice(L,K));class x{constructor(L,K,st){this.r=L,this.s=K,this.recovery=st,this.assertValidity()}static fromCompact(L){const K=t.nByteLength;return L=ue("compactSignature",L,K*2),new x(E(L,0,K),E(L,K,2*K))}static fromDER(L){const{r:K,s:st}=er.toSig(ue("DER",L));return new x(K,st)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new x(this.r,this.s,L)}recoverPublicKey(L){const{r:K,s:st,recovery:nt}=this,pt=H(ue("msgHash",L));if(nt==null||![0,1,2,3].includes(nt))throw new Error("recovery id invalid");const Qt=nt===2||nt===3?K+t.n:K;if(Qt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const zt=nt&1?"03":"02",un=u.fromHex(zt+m(Qt)),fn=c(Qt),Lr=a(-pt*fn),Ys=a(st*fn),hn=u.BASE.multiplyAndAddUnsafe(un,Lr,Ys);if(!hn)throw new Error("point at infinify");return hn.assertValidity(),hn}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zs(this.toDERHex())}toDERHex(){return er.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zs(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const v={isValidPrivateKey(k){try{return f(k),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const k=Pu(t.n);return Ed(t.randomBytes(k),t.n)},precompute(k=8,L=u.BASE){return L._setWindowSize(k),L.multiply(BigInt(3)),L}};function C(k,L=!0){return u.fromPrivateKey(k).toRawBytes(L)}function G(k){const L=k instanceof Uint8Array,K=typeof k=="string",st=(L||K)&&k.length;return L?st===s||st===i:K?st===2*s||st===2*i:k instanceof u}function D(k,L,K=!0){if(G(k))throw new Error("first arg must be private key");if(!G(L))throw new Error("second arg must be public key");return u.fromHex(L).multiply(f(k)).toRawBytes(K)}const O=t.bits2int||function(k){const L=Pr(k),K=k.length*8-t.nBitLength;return K>0?L>>BigInt(K):L},H=t.bits2int_modN||function(k){return a(O(k))},F=sc(t.nBitLength);function q(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(tn<=k&&k<F))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Js(k,t.nByteLength)}function j(k,L,K=Z){if(["recovered","canonical"].some(Jn=>Jn in K))throw new Error("sign() legacy options not supported");const{hash:st,randomBytes:nt}=t;let{lowS:pt,prehash:Qt,extraEntropy:zt}=K;pt==null&&(pt=!0),k=ue("msgHash",k),Qt&&(k=ue("prehashed msgHash",st(k)));const un=H(k),fn=f(L),Lr=[q(fn),q(un)];if(zt!=null){const Jn=zt===!0?nt(e.BYTES):zt;Lr.push(ue("extraEntropy",Jn))}const Ys=ui(...Lr),hn=un;function _o(Jn){const Ur=O(Jn);if(!p(Ur))return;const yc=c(Ur),Fr=u.BASE.multiply(Ur).toAffine(),ae=a(Fr.x);if(ae===tn)return;const Dr=a(yc*a(hn+ae*fn));if(Dr===tn)return;let bc=(Fr.x===ae?0:2)|Number(Fr.y&oe),Ac=Dr;return pt&&b(Dr)&&(Ac=w(Dr),bc^=1),new x(ae,Ac,bc)}return{seed:Ys,k2sig:_o}}const Z={lowS:t.lowS,prehash:!1},dt={lowS:t.lowS,prehash:!1};function yt(k,L,K=Z){const{seed:st,k2sig:nt}=j(k,L,K),pt=t;return Eu(pt.hash.outputLen,pt.nByteLength,pt.hmac)(st,nt)}u.BASE._setWindowSize(8);function xe(k,L,K,st=dt){var Fr;const nt=k;if(L=ue("msgHash",L),K=ue("publicKey",K),"strict"in st)throw new Error("options.strict was renamed to lowS");const{lowS:pt,prehash:Qt}=st;let zt,un;try{if(typeof nt=="string"||nt instanceof Uint8Array)try{zt=x.fromDER(nt)}catch(ae){if(!(ae instanceof er.Err))throw ae;zt=x.fromCompact(nt)}else if(typeof nt=="object"&&typeof nt.r=="bigint"&&typeof nt.s=="bigint"){const{r:ae,s:Dr}=nt;zt=new x(ae,Dr)}else throw new Error("PARSE");un=u.fromHex(K)}catch(ae){if(ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(pt&&zt.hasHighS())return!1;Qt&&(L=t.hash(L));const{r:fn,s:Lr}=zt,Ys=H(L),hn=c(Lr),_o=a(Ys*hn),Jn=a(fn*hn),Ur=(Fr=u.BASE.multiplyAndAddUnsafe(un,_o,Jn))==null?void 0:Fr.toAffine();return Ur?a(Ur.x)===fn:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:D,sign:yt,verify:xe,ProjectivePoint:u,Signature:x,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rd(n){return{hash:n,hmac:(t,...e)=>eu(n,t,wh(...e)),randomBytes:yh}}function Td(n,t){const e=r=>vd({...n,...Rd(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Vc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Sd=BigInt(1),Ia=BigInt(2),Qc=(n,t)=>(n+t/Ia)/t;function Od(n){const t=Cu,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=n*n*n%t,f=u*u*n%t,h=$t(f,e,t)*f%t,p=$t(h,e,t)*f%t,m=$t(p,Ia,t)*u%t,b=$t(m,s,t)*m%t,w=$t(b,i,t)*b%t,E=$t(w,a,t)*w%t,x=$t(E,c,t)*E%t,v=$t(x,a,t)*w%t,C=$t(v,e,t)*f%t,G=$t(C,o,t)*b%t,D=$t(G,r,t)*u%t,O=$t(D,Ia,t);if(!Ca.eql(Ca.sqr(O),n))throw new Error("Cannot find square root");return O}const Ca=Ad(Cu,void 0,void 0,{sqrt:Od}),wn=Td({a:BigInt(0),b:BigInt(7),Fp:Ca,n:Vc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Vc,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Sd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=Qc(i*n,t),c=Qc(-r*n,t);let u=Mt(n-a*e-c*s,t),f=Mt(-a*r-c*i,t);const h=u>o,p=f>o;if(h&&(u=t-u),p&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:p,k2:f}}}},ru);BigInt(0);wn.ProjectivePoint;const fi="0x0000000000000000000000000000000000000000",zc="0x0000000000000000000000000000000000000000000000000000000000000000",Jc=BigInt(0),Kc=BigInt(1),_c=BigInt(2),Wc=BigInt(27),jc=BigInt(28),Ji=BigInt(35),Hr={};function Zc(n){return sn(ht(n),32)}var cs,Ce,ls,dr;const le=class le{constructor(t,e,r,s){A(this,cs);A(this,Ce);A(this,ls);A(this,dr);Li(t,Hr,"Signature"),d(this,cs,e),d(this,Ce,r),d(this,ls,s),d(this,dr,null)}get r(){return l(this,cs)}set r(t){g(Yr(t)===32,"invalid r","value",t),d(this,cs,B(t))}get s(){return g(parseInt(l(this,Ce).substring(0,3))<8,"non-canonical s; use ._s","s",l(this,Ce)),l(this,Ce)}set s(t){g(Yr(t)===32,"invalid s","value",t),d(this,Ce,B(t))}get _s(){return l(this,Ce)}isValid(){return parseInt(l(this,Ce).substring(0,3))<8}get v(){return l(this,ls)}set v(t){const e=V(t,"value");g(e===27||e===28,"invalid v","v",t),d(this,ls,e)}get networkV(){return l(this,dr)}get legacyChainId(){const t=this.networkV;return t==null?null:le.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=z(this.s);return this.yParity&&(t[0]|=128),B(t)}get compactSerialized(){return ct([this.r,this.yParityAndS])}get serialized(){return ct([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new le(Hr,this.r,this._s,this.v);return this.networkV&&d(t,dr,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=T(t,"v");return e==Wc||e==jc?Jc:(g(e>=Ji,"invalid EIP-155 v","v",t),(e-Ji)/_c)}static getChainIdV(t,e){return T(t)*_c+BigInt(35+e-27)}static getNormalizedV(t){const e=T(t);return e===Jc||e===Wc?27:e===Kc||e===jc?28:(g(e>=Ji,"invalid v","v",t),e&Kc?27:28)}static from(t){function e(u,f){g(u,f,"signature",t)}if(t==null)return new le(Hr,zc,zc,27);if(typeof t=="string"){const u=z(t,"signature");if(u.length===64){const f=B(u.slice(0,32)),h=u.slice(32,64),p=h[0]&128?28:27;return h[0]&=127,new le(Hr,f,B(h),p)}if(u.length===65){const f=B(u.slice(0,32)),h=B(u.slice(32,64)),p=le.getNormalizedV(u[64]);return new le(Hr,f,h,p)}e(!1,"invalid raw signature length")}if(t instanceof le)return t.clone();const r=t.r;e(r!=null,"missing r");const s=Zc(r),i=function(u,f){if(u!=null)return Zc(u);if(f!=null){e(rt(f,32),"invalid yParityAndS");const h=z(f);return h[0]&=127,B(h)}e(!1,"missing s")}(t.s,t.yParityAndS),{networkV:o,v:a}=function(u,f,h){if(u!=null){const p=T(u);return{networkV:p>=Ji?p:void 0,v:le.getNormalizedV(p)}}if(f!=null)return e(rt(f,32),"invalid yParityAndS"),{v:z(f)[0]&128?28:27};if(h!=null){switch(V(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new le(Hr,s,i,a);return o&&d(c,dr,o),e(t.yParity==null||V(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};cs=new WeakMap,Ce=new WeakMap,ls=new WeakMap,dr=new WeakMap;let Gt=le;var _e;const qn=class qn{constructor(t){A(this,_e);g(Yr(t)===32,"invalid private key","privateKey","[REDACTED]"),d(this,_e,B(t))}get privateKey(){return l(this,_e)}get publicKey(){return qn.computePublicKey(l(this,_e))}get compressedPublicKey(){return qn.computePublicKey(l(this,_e),!0)}sign(t){g(Yr(t)===32,"invalid digest length","digest",t);const e=wn.sign(St(t),St(l(this,_e)),{lowS:!0});return Gt.from({r:Hn(e.r,32),s:Hn(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=qn.computePublicKey(t);return B(wn.getSharedSecret(St(l(this,_e)),z(e),!1))}static computePublicKey(t,e){let r=z(t,"key");if(r.length===32){const i=wn.getPublicKey(r,!!e);return B(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=wn.ProjectivePoint.fromHex(r);return B(s.toRawBytes(e))}static recoverPublicKey(t,e){g(Yr(t)===32,"invalid digest length","digest",t);const r=Gt.from(e);let s=wn.Signature.fromCompact(St(ct([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(St(t));return g(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,r){const s=wn.ProjectivePoint.fromHex(qn.computePublicKey(t).substring(2)),i=wn.ProjectivePoint.fromHex(qn.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!r)}};_e=new WeakMap;let hi=qn;const Ld=BigInt(0),Ud=BigInt(36);function Yc(n){n=n.toLowerCase();const t=n.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const r=z(ft(e));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(r[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const ic={};for(let n=0;n<10;n++)ic[String(n)]=String(n);for(let n=0;n<26;n++)ic[String.fromCharCode(65+n)]=String(10+n);const qc=15;function Fd(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let t=n.split("").map(r=>ic[r]).join("");for(;t.length>=qc;){let r=t.substring(0,qc);t=parseInt(r,10)%97+t.substring(r.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Dd=function(){const n={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];n[e]=BigInt(t)}return n}();function Md(n){n=n.toLowerCase();let t=Ld;for(let e=0;e<n.length;e++)t=t*Ud+Dd[n[e]];return t}function $(n){if(g(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const t=Yc(n);return g(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===n,"bad address checksum","address",n),t}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){g(n.substring(2,4)===Fd(n),"bad icap checksum","address",n);let t=Md(n.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Yc("0x"+t)}g(!1,"invalid address","address",n)}function Hd(n){const t=$(n.from);let r=T(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,$(at(ft(Vn([t,r])),12))}function ku(n){return n&&typeof n.getAddress=="function"}async function ta(n,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(N(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),g(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),$(e)}function Lt(n,t){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?$(n):(N(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),ta(n,t.resolveName(n)));if(ku(n))return ta(n,n.getAddress());if(n&&typeof n.then=="function")return ta(n,n);g(!1,"unsupported addressable value","target",n)}const Ge={};function R(n,t){let e=!1;return t<0&&(e=!0,t*=-1),new Bt(Ge,`${e?"":"u"}int${t}`,n,{signed:e,width:t})}function Y(n,t){return new Bt(Ge,`bytes${t||""}`,n,{size:t})}const Xc=Symbol.for("_ethers_typed");var pr;const Ve=class Ve{constructor(t,e,r,s){y(this,"type");y(this,"value");A(this,pr);y(this,"_typedSymbol");s==null&&(s=null),Li(Ge,t,"Typed"),M(this,{_typedSymbol:Xc,type:e,value:r}),d(this,pr,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return l(this,pr)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return l(this,pr)===!0?-1:l(this,pr)===!1?this.value.length:null}static from(t,e){return new Ve(Ge,t,e)}static uint8(t){return R(t,8)}static uint16(t){return R(t,16)}static uint24(t){return R(t,24)}static uint32(t){return R(t,32)}static uint40(t){return R(t,40)}static uint48(t){return R(t,48)}static uint56(t){return R(t,56)}static uint64(t){return R(t,64)}static uint72(t){return R(t,72)}static uint80(t){return R(t,80)}static uint88(t){return R(t,88)}static uint96(t){return R(t,96)}static uint104(t){return R(t,104)}static uint112(t){return R(t,112)}static uint120(t){return R(t,120)}static uint128(t){return R(t,128)}static uint136(t){return R(t,136)}static uint144(t){return R(t,144)}static uint152(t){return R(t,152)}static uint160(t){return R(t,160)}static uint168(t){return R(t,168)}static uint176(t){return R(t,176)}static uint184(t){return R(t,184)}static uint192(t){return R(t,192)}static uint200(t){return R(t,200)}static uint208(t){return R(t,208)}static uint216(t){return R(t,216)}static uint224(t){return R(t,224)}static uint232(t){return R(t,232)}static uint240(t){return R(t,240)}static uint248(t){return R(t,248)}static uint256(t){return R(t,256)}static uint(t){return R(t,256)}static int8(t){return R(t,-8)}static int16(t){return R(t,-16)}static int24(t){return R(t,-24)}static int32(t){return R(t,-32)}static int40(t){return R(t,-40)}static int48(t){return R(t,-48)}static int56(t){return R(t,-56)}static int64(t){return R(t,-64)}static int72(t){return R(t,-72)}static int80(t){return R(t,-80)}static int88(t){return R(t,-88)}static int96(t){return R(t,-96)}static int104(t){return R(t,-104)}static int112(t){return R(t,-112)}static int120(t){return R(t,-120)}static int128(t){return R(t,-128)}static int136(t){return R(t,-136)}static int144(t){return R(t,-144)}static int152(t){return R(t,-152)}static int160(t){return R(t,-160)}static int168(t){return R(t,-168)}static int176(t){return R(t,-176)}static int184(t){return R(t,-184)}static int192(t){return R(t,-192)}static int200(t){return R(t,-200)}static int208(t){return R(t,-208)}static int216(t){return R(t,-216)}static int224(t){return R(t,-224)}static int232(t){return R(t,-232)}static int240(t){return R(t,-240)}static int248(t){return R(t,-248)}static int256(t){return R(t,-256)}static int(t){return R(t,-256)}static bytes1(t){return Y(t,1)}static bytes2(t){return Y(t,2)}static bytes3(t){return Y(t,3)}static bytes4(t){return Y(t,4)}static bytes5(t){return Y(t,5)}static bytes6(t){return Y(t,6)}static bytes7(t){return Y(t,7)}static bytes8(t){return Y(t,8)}static bytes9(t){return Y(t,9)}static bytes10(t){return Y(t,10)}static bytes11(t){return Y(t,11)}static bytes12(t){return Y(t,12)}static bytes13(t){return Y(t,13)}static bytes14(t){return Y(t,14)}static bytes15(t){return Y(t,15)}static bytes16(t){return Y(t,16)}static bytes17(t){return Y(t,17)}static bytes18(t){return Y(t,18)}static bytes19(t){return Y(t,19)}static bytes20(t){return Y(t,20)}static bytes21(t){return Y(t,21)}static bytes22(t){return Y(t,22)}static bytes23(t){return Y(t,23)}static bytes24(t){return Y(t,24)}static bytes25(t){return Y(t,25)}static bytes26(t){return Y(t,26)}static bytes27(t){return Y(t,27)}static bytes28(t){return Y(t,28)}static bytes29(t){return Y(t,29)}static bytes30(t){return Y(t,30)}static bytes31(t){return Y(t,31)}static bytes32(t){return Y(t,32)}static address(t){return new Ve(Ge,"address",t)}static bool(t){return new Ve(Ge,"bool",!!t)}static bytes(t){return new Ve(Ge,"bytes",t)}static string(t){return new Ve(Ge,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Ve(Ge,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Xc}static dereference(t,e){if(Ve.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};pr=new WeakMap;let Bt=Ve;class Gd extends ln{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=Bt.dereference(e,"string");try{r=$(r)}catch(s){return this._throwError(s.message,e)}return t.writeValue(r)}decode(t){return $(Hn(t.readValue(),20))}}class Vd extends ln{constructor(e){super(e.name,e.type,"_",e.dynamic);y(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}function Bu(n,t,e){let r=[];if(Array.isArray(e))r=e;else if(e&&typeof e=="object"){let c={};r=t.map(u=>{const f=u.localName;return N(f,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),N(!c[f],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[f]=!0,e[f]})}else g(!1,"invalid tuple value","tuple",e);g(t.length===r.length,"types/value length mismatch","tuple",e);let s=new ba,i=new ba,o=[];t.forEach((c,u)=>{let f=r[u];if(c.dynamic){let h=i.length;c.encode(i,f);let p=s.writeUpdatableValue();o.push(m=>{p(m+h)})}else c.encode(s,f)}),o.forEach(c=>{c(s.length)});let a=n.appendWriter(s);return a+=n.appendWriter(i),a}function vu(n,t){let e=[],r=[],s=n.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=n.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(Nt(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(a){if(Nt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),r.push(i.localName||null)}),Gs.fromItems(e,r)}class Qd extends ln{constructor(e,r,s){const i=e.type+"["+(r>=0?r:"")+"]",o=r===-1||e.dynamic;super("array",i,s,o);y(this,"coder");y(this,"length");M(this,{coder:e,length:r})}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(e);return r}encode(e,r){const s=Bt.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),Ml(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Bu(e,o,s)}decode(e){let r=this.length;r===-1&&(r=e.readIndex(),N(r*Ot<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:r*Ot,length:e.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Vd(this.coder));return vu(e,s)}}class zd extends ln{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=Bt.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class Ru extends ln{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=St(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Jd extends Ru{constructor(t){super("bytes",t)}decode(t){return B(super.decode(t))}}class Kd extends ln{constructor(e,r){let s="bytes"+String(e);super(s,s,r,!1);y(this,"size");M(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let s=St(Bt.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(s)}decode(e){return B(e.readBytes(this.size))}}const _d=new Uint8Array([]);class Wd extends ln{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(_d)}decode(t){return t.readBytes(0),null}}const jd=BigInt(0),Zd=BigInt(1),Yd=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class qd extends ln{constructor(e,r,s){const i=(r?"int":"uint")+e*8;super(i,i,s,!1);y(this,"size");y(this,"signed");M(this,{size:e,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,r){let s=T(Bt.dereference(r,this.type)),i=tr(Yd,Ot*8);if(this.signed){let o=tr(i,this.size*8-1);(s>o||s<-(o+Zd))&&this._throwError("value out-of-bounds",r),s=Vl(s,8*Ot)}else(s<jd||s>tr(i,this.size*8))&&this._throwError("value out-of-bounds",r);return e.writeValue(s)}decode(e){let r=tr(e.readValue(),this.size*8);return this.signed&&(r=io(r,this.size*8)),r}}class Xd extends Ru{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,De(Bt.dereference(e,"string")))}decode(t){return oo(super.decode(t))}}class Ki extends ln{constructor(e,r){let s=!1;const i=[];e.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);y(this,"coders");M(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,r){const s=Bt.dereference(r,"tuple");return Bu(e,this.coders,s)}decode(e){return vu(e,this.coders)}}function ea(n,t){return{address:$(n),storageKeys:t.map((e,r)=>(g(rt(e,32),"invalid slot",`storageKeys[${r}]`,e),e.toLowerCase()))}}function Sr(n){if(Array.isArray(n))return n.map((e,r)=>Array.isArray(e)?(g(e.length===2,"invalid slot set",`value[${r}]`,e),ea(e[0],e[1])):(g(e!=null&&typeof e=="object","invalid address-slot set","value",n),ea(e.address,e.storageKeys)));g(n!=null&&typeof n=="object","invalid access list","value",n);const t=Object.keys(n).map(e=>{const r=n[e].reduce((s,i)=>(s[i]=!0,s),{});return ea(e,Object.keys(r).sort())});return t.sort((e,r)=>e.address.localeCompare(r.address)),t}function Tu(n){return{address:$(n.address),nonce:T(n.nonce!=null?n.nonce:0),chainId:T(n.chainId!=null?n.chainId:0),signature:Gt.from(n.signature)}}function $d(n){let t;return typeof n=="string"?t=hi.computePublicKey(n,!1):t=n.publicKey,$(ft("0x"+t.substring(4)).substring(26))}function tp(n,t){return $d(hi.recoverPublicKey(n,t))}const mt=BigInt(0),ep=BigInt(2),np=BigInt(27),rp=BigInt(28),sp=BigInt(35),ip=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),na=4096*32;function op(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return z(n.blobToKzgCommitment(B(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return z(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return z(n.blobToKZGCommitment(B(r)));g(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return z(n.computeBlobProof(B(r),B(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return z(n.computeBlobKZGProof(B(r),B(s)));g(!1,"unsupported KZG library","kzg",n)}}}function $c(n,t){let e=n.toString(16);for(;e.length<2;)e="0"+e;return e+=js(t).substring(4),"0x"+e}function Zs(n){return n==="0x"?null:$(n)}function Uo(n,t){try{return Sr(n)}catch(e){g(!1,e.message,t,n)}}function ap(n,t){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const e=[];for(let r=0;r<n.length;r++){const s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);e.push({address:Zs(s[1]),nonce:et(s[2],"nonce"),chainId:et(s[0],"chainId"),signature:Gt.from({yParity:Or(s[3],"yParity"),r:sn(s[4],32),s:sn(s[5],32)})})}return e}catch(e){g(!1,e.message,t,n)}}function Or(n,t){return n==="0x"?0:V(n,t)}function et(n,t){if(n==="0x")return mt;const e=T(n,t);return g(e<=ip,"value exceeds uint size",t,e),e}function W(n,t){const e=T(n,"value"),r=ht(e);return g(r.length<=32,"value too large",`tx.${t}`,e),r}function Fo(n){return Sr(n).map(t=>[t.address,t.storageKeys])}function cp(n){return n.map(t=>[W(t.chainId,"chainId"),t.address,W(t.nonce,"nonce"),W(t.signature.yParity,"yParity"),ht(t.signature.r),ht(t.signature.s)])}function lp(n,t){g(Array.isArray(n),`invalid ${t}`,"value",n);for(let e=0;e<n.length;e++)g(rt(n[e],32),"invalid ${ param } hash",`value[${e}]`,n[e]);return n}function up(n){const t=Ui(n);g(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",n);const e={type:0,nonce:Or(t[0],"nonce"),gasPrice:et(t[1],"gasPrice"),gasLimit:et(t[2],"gasLimit"),to:Zs(t[3]),value:et(t[4],"value"),data:B(t[5]),chainId:mt};if(t.length===6)return e;const r=et(t[6],"v"),s=et(t[7],"r"),i=et(t[8],"s");if(s===mt&&i===mt)e.chainId=r;else{let o=(r-sp)/ep;o<mt&&(o=mt),e.chainId=o,g(o!==mt||r===np||r===rp,"non-canonical legacy v","v",t[6]),e.signature=Gt.from({r:sn(t[7],32),s:sn(t[8],32),v:r})}return e}function fp(n,t){const e=[W(n.nonce,"nonce"),W(n.gasPrice||0,"gasPrice"),W(n.gasLimit,"gasLimit"),n.to||"0x",W(n.value,"value"),n.data];let r=mt;if(n.chainId!=mt)r=T(n.chainId,"tx.chainId"),g(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(r=i)}if(!t)return r!==mt&&(e.push(ht(r)),e.push("0x"),e.push("0x")),Vn(e);let s=BigInt(27+t.yParity);return r!==mt?s=Gt.getChainIdV(r,t.v):BigInt(t.v)!==s&&g(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(ht(s)),e.push(ht(t.r)),e.push(ht(t.s)),Vn(e)}function Do(n,t){let e;try{if(e=Or(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{g(!1,"invalid yParity","yParity",t[0])}const r=sn(t[1],32),s=sn(t[2],32),i=Gt.from({r,s,yParity:e});n.signature=i}function hp(n){const t=Ui(z(n).slice(1));g(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",B(n));const e={type:2,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:B(t[7]),accessList:Uo(t[8],"accessList")};return t.length===9||Do(e,t.slice(9)),e}function dp(n,t){const e=[W(n.chainId,"chainId"),W(n.nonce,"nonce"),W(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(n.maxFeePerGas||0,"maxFeePerGas"),W(n.gasLimit,"gasLimit"),n.to||"0x",W(n.value,"value"),n.data,Fo(n.accessList||[])];return t&&(e.push(W(t.yParity,"yParity")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x02",Vn(e)])}function pp(n){const t=Ui(z(n).slice(1));g(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",B(n));const e={type:1,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),gasPrice:et(t[2],"gasPrice"),gasLimit:et(t[3],"gasLimit"),to:Zs(t[4]),value:et(t[5],"value"),data:B(t[6]),accessList:Uo(t[7],"accessList")};return t.length===8||Do(e,t.slice(8)),e}function gp(n,t){const e=[W(n.chainId,"chainId"),W(n.nonce,"nonce"),W(n.gasPrice||0,"gasPrice"),W(n.gasLimit,"gasLimit"),n.to||"0x",W(n.value,"value"),n.data,Fo(n.accessList||[])];return t&&(e.push(W(t.yParity,"recoveryParam")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x01",Vn(e)])}function mp(n){let t=Ui(z(n).slice(1)),e="3",r=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],o=t[2],a=t[3];g(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),g(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),g(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),g(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),g(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let c=0;c<t[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});t=t[0]}g(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",B(n));const s={type:3,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:B(t[7]),accessList:Uo(t[8],"accessList"),maxFeePerBlobGas:et(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(s.blobs=r),g(s.to!=null,`invalid address for transaction type: ${e}`,"data",n),g(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<s.blobVersionedHashes.length;i++)g(rt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return t.length===11||Do(s,t.slice(11)),s}function wp(n,t,e){const r=[W(n.chainId,"chainId"),W(n.nonce,"nonce"),W(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(n.maxFeePerGas||0,"maxFeePerGas"),W(n.gasLimit,"gasLimit"),n.to||fi,W(n.value,"value"),n.data,Fo(n.accessList||[]),W(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),lp(n.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(W(t.yParity,"yParity")),r.push(ht(t.r)),r.push(ht(t.s)),e)?ct(["0x03",Vn([r,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):ct(["0x03",Vn(r)])}function yp(n){const t=Ui(z(n).slice(1));g(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",B(n));const e={type:4,chainId:et(t[0],"chainId"),nonce:Or(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Zs(t[5]),value:et(t[6],"value"),data:B(t[7]),accessList:Uo(t[8],"accessList"),authorizationList:ap(t[9],"authorizationList")};return t.length===10||Do(e,t.slice(10)),e}function bp(n,t){const e=[W(n.chainId,"chainId"),W(n.nonce,"nonce"),W(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(n.maxFeePerGas||0,"maxFeePerGas"),W(n.gasLimit,"gasLimit"),n.to||"0x",W(n.value,"value"),n.data,Fo(n.accessList||[]),cp(n.authorizationList||[])];return t&&(e.push(W(t.yParity,"yParity")),e.push(ht(t.r)),e.push(ht(t.s))),ct(["0x04",Vn(e)])}var ge,us,fs,hs,ds,ps,gs,ms,ws,ys,bs,As,gr,Nn,ke,Pn,Es,xs,Yi;const Pe=class Pe{constructor(){A(this,xs);A(this,ge);A(this,us);A(this,fs);A(this,hs);A(this,ds);A(this,ps);A(this,gs);A(this,ms);A(this,ws);A(this,ys);A(this,bs);A(this,As);A(this,gr);A(this,Nn);A(this,ke);A(this,Pn);A(this,Es);d(this,ge,null),d(this,us,null),d(this,hs,0),d(this,ds,mt),d(this,ps,null),d(this,gs,null),d(this,ms,null),d(this,fs,"0x"),d(this,ws,mt),d(this,ys,mt),d(this,bs,null),d(this,As,null),d(this,gr,null),d(this,Nn,null),d(this,ke,null),d(this,Pn,null),d(this,Es,null)}get type(){return l(this,ge)}set type(t){switch(t){case null:d(this,ge,null);break;case 0:case"legacy":d(this,ge,0);break;case 1:case"berlin":case"eip-2930":d(this,ge,1);break;case 2:case"london":case"eip-1559":d(this,ge,2);break;case 3:case"cancun":case"eip-4844":d(this,ge,3);break;case 4:case"pectra":case"eip-7702":d(this,ge,4);break;default:g(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=l(this,us);return t==null&&this.type===3?fi:t}set to(t){d(this,us,t==null?null:$(t))}get nonce(){return l(this,hs)}set nonce(t){d(this,hs,V(t,"value"))}get gasLimit(){return l(this,ds)}set gasLimit(t){d(this,ds,T(t))}get gasPrice(){const t=l(this,ps);return t==null&&(this.type===0||this.type===1)?mt:t}set gasPrice(t){d(this,ps,t==null?null:T(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=l(this,gs);return t??(this.type===2||this.type===3?mt:null)}set maxPriorityFeePerGas(t){d(this,gs,t==null?null:T(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=l(this,ms);return t??(this.type===2||this.type===3?mt:null)}set maxFeePerGas(t){d(this,ms,t==null?null:T(t,"maxFeePerGas"))}get data(){return l(this,fs)}set data(t){d(this,fs,B(t))}get value(){return l(this,ws)}set value(t){d(this,ws,T(t,"value"))}get chainId(){return l(this,ys)}set chainId(t){d(this,ys,T(t))}get signature(){return l(this,bs)||null}set signature(t){d(this,bs,t==null?null:Gt.from(t))}get accessList(){const t=l(this,As)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){d(this,As,t==null?null:Sr(t))}get authorizationList(){const t=l(this,Es)||null;return t==null&&this.type===4?[]:t}set authorizationList(t){d(this,Es,t==null?null:t.map(e=>Tu(e)))}get maxFeePerBlobGas(){const t=l(this,gr);return t==null&&this.type===3?mt:t}set maxFeePerBlobGas(t){d(this,gr,t==null?null:T(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=l(this,Nn);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){g(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)g(rt(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}d(this,Nn,t)}get blobs(){return l(this,Pn)==null?null:l(this,Pn).map(t=>Object.assign({},t))}set blobs(t){if(t==null){d(this,Pn,null);return}const e=[],r=[];for(let s=0;s<t.length;s++){const i=t[s];if(Ya(i)){N(l(this,ke),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=z(i);if(g(o.length<=na,"blob is too large",`blobs[${s}]`,i),o.length!==na){const u=new Uint8Array(na);u.set(o),o=u}const a=l(this,ke).blobToKzgCommitment(o),c=B(l(this,ke).computeBlobKzgProof(o,a));e.push({data:B(o),commitment:B(a),proof:c}),r.push($c(1,a))}else{const o=B(i.commitment);e.push({data:B(i.data),commitment:o,proof:B(i.proof)}),r.push($c(1,o))}}d(this,Pn,e),d(this,Nn,r)}get kzg(){return l(this,ke)}set kzg(t){t==null?d(this,ke,null):d(this,ke,op(t))}get hash(){return this.signature==null?null:ft(P(this,xs,Yi).call(this,!0,!1))}get unsignedHash(){return ft(this.unsignedSerialized)}get from(){return this.signature==null?null:tp(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:hi.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return P(this,xs,Yi).call(this,!0,!0)}get unsignedSerialized(){return P(this,xs,Yi).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=l(this,gr)!=null||l(this,Nn);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&N(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),N(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),N(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Pe.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new Pe;if(typeof t=="string"){const r=z(t);if(r[0]>=127)return Pe.from(up(r));switch(r[0]){case 1:return Pe.from(pp(r));case 2:return Pe.from(hp(r));case 3:return Pe.from(mp(r));case 4:return Pe.from(yp(r))}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new Pe;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=Gt.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(g(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),g(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(g(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),g(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};ge=new WeakMap,us=new WeakMap,fs=new WeakMap,hs=new WeakMap,ds=new WeakMap,ps=new WeakMap,gs=new WeakMap,ms=new WeakMap,ws=new WeakMap,ys=new WeakMap,bs=new WeakMap,As=new WeakMap,gr=new WeakMap,Nn=new WeakMap,ke=new WeakMap,Pn=new WeakMap,Es=new WeakMap,xs=new WeakSet,Yi=function(t,e){N(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return fp(this,r);case 1:return gp(this,r);case 2:return dp(this,r);case 3:return wp(this,r,e?this.blobs:null);case 4:return bp(this,r)}N(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let lo=Pe;function kr(n){return ft(De(n))}var Ap="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";const tl=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),el=4;function Ep(n){let t=0;function e(){return n[t++]<<8|n[t++]}let r=e(),s=1,i=[0,1];for(let D=1;D<r;D++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,u=0;function f(){return c==0&&(u=u<<8|n[t++],c=8),u>>--c&1}const h=31,p=2**h,m=p>>>1,b=m>>1,w=p-1;let E=0;for(let D=0;D<h;D++)E=E<<1|f();let x=[],v=0,C=p;for(;;){let D=Math.floor(((E-v+1)*s-1)/C),O=0,H=r;for(;H-O>1;){let j=O+H>>>1;D<i[j]?H=j:O=j}if(O==0)break;x.push(O);let F=v+Math.floor(C*i[O]/s),q=v+Math.floor(C*i[O+1]/s)-1;for(;!((F^q)&m);)E=E<<1&w|f(),F=F<<1&w,q=q<<1&w|1;for(;F&~q&b;)E=E&m|E<<1&w>>>1|f(),F=F<<1^m,q=(q^m)<<1|m|1;v=F,C=1+q-F}let G=r-4;return x.map(D=>{switch(D-G){case 3:return G+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return G+256+(n[a++]<<8|n[a++]);case 1:return G+n[a++];default:return D-1}})}function xp(n){let t=0;return()=>n[t++]}function Su(n){return xp(Ep(Np(n)))}function Np(n){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=n.length,r=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[n.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function Pp(n){return n&1?~n>>1:n>>1}function Ip(n,t){let e=Array(n);for(let r=0,s=0;r<n;r++)e[r]=s+=Pp(t());return e}function di(n,t=0){let e=[];for(;;){let r=n(),s=n();if(!s)break;t+=r;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Ou(n){return pi(()=>{let t=di(n);if(t.length)return t})}function Lu(n){let t=[];for(;;){let e=n();if(e==0)break;t.push(Cp(e,n))}for(;;){let e=n()-1;if(e<0)break;t.push(kp(e,n))}return t.flat()}function pi(n){let t=[];for(;;){let e=n(t.length);if(!e)break;t.push(e)}return t}function Uu(n,t,e){let r=Array(n).fill().map(()=>[]);for(let s=0;s<t;s++)Ip(n,e).forEach((i,o)=>r[o].push(i));return r}function Cp(n,t){let e=1+t(),r=t(),s=pi(t);return Uu(s.length,1+n,t).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((f,h)=>{let p=h*r;return[c+h*e,u.map(m=>m+p)]})})}function kp(n,t){let e=1+t();return Uu(e,1+n,t).map(s=>[s[0],s.slice(1)])}function Bp(n){let t=[],e=di(n);return s(r([]),[]),t;function r(i){let o=n(),a=pi(()=>{let c=di(n).map(u=>e[u]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let u of o)for(let f of u.Q)s(u,[...a,f],c)}}}function vp(n){return n.toString(16).toUpperCase().padStart(2,"0")}function Fu(n){return`{${vp(n)}}`}function Rp(n){let t=[];for(let e=0,r=n.length;e<r;){let s=n.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function Ks(n){let e=n.length;if(e<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<e;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function Tp(n,t){let e=n.length,r=e-t.length;for(let s=0;r==0&&s<e;s++)r=n[s]-t[s];return r}var Sp="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";const gi=44032,uo=4352,fo=4449,ho=4519,Du=19,Mu=21,_s=28,po=Mu*_s,Op=Du*po,Lp=gi+Op,Up=uo+Du,Fp=fo+Mu,Dp=ho+_s;function ni(n){return n>>24&255}function Hu(n){return n&16777215}let ka,nl,Ba,qi;function Mp(){let n=Su(Sp);ka=new Map(Ou(n).flatMap((t,e)=>t.map(r=>[r,e+1<<24]))),nl=new Set(di(n)),Ba=new Map,qi=new Map;for(let[t,e]of Lu(n)){if(!nl.has(t)&&e.length==2){let[r,s]=e,i=qi.get(r);i||(i=new Map,qi.set(r,i)),i.set(s,t)}Ba.set(t,e.reverse())}}function Gu(n){return n>=gi&&n<Lp}function Hp(n,t){if(n>=uo&&n<Up&&t>=fo&&t<Fp)return gi+(n-uo)*po+(t-fo)*_s;if(Gu(n)&&t>ho&&t<Dp&&(n-gi)%_s==0)return n+(t-ho);{let e=qi.get(n);return e&&(e=e.get(t),e)?e:-1}}function Vu(n){ka||Mp();let t=[],e=[],r=!1;function s(i){let o=ka.get(i);o&&(r=!0,i|=o),t.push(i)}for(let i of n)for(;;){if(i<128)t.push(i);else if(Gu(i)){let o=i-gi,a=o/po|0,c=o%po/_s|0,u=o%_s;s(uo+a),s(fo+c),u>0&&s(ho+u)}else{let o=Ba.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(r&&t.length>1){let i=ni(t[0]);for(let o=1;o<t.length;o++){let a=ni(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=t[c+1];if(t[c+1]=t[c],t[c]=u,!c||(i=ni(t[--c]),i<=a))break}i=ni(t[o])}}return t}function Gp(n){let t=[],e=[],r=-1,s=0;for(let i of n){let o=ni(i),a=Hu(i);if(r==-1)o==0?r=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(r,...e),e.length=0,r=a):e.push(a),s=o;else{let c=Hp(r,a);c>=0?r=c:s==0&&o==0?(t.push(r),r=a):(e.push(a),s=o)}}return r>=0&&t.push(r,...e),t}function Qu(n){return Vu(n).map(Hu)}function Vp(n){return Gp(Vu(n))}const rl=45,zu=".",Ju=65039,Ku=1,go=n=>Array.from(n);function mi(n,t){return n.P.has(t)||n.Q.has(t)}class Qp extends Array{get is_emoji(){return!0}}let va,_u,nr,Ra,Wu,Xr,ra,Vr,jn,sl,Ta;function oc(){if(va)return;let n=Su(Ap);const t=()=>di(n),e=()=>new Set(t()),r=(f,h)=>h.forEach(p=>f.add(p));va=new Map(Lu(n)),_u=e(),nr=t(),Ra=new Set(t().map(f=>nr[f])),nr=new Set(nr),Wu=e(),e();let s=Ou(n),i=n();const o=()=>{let f=new Set;return t().forEach(h=>r(f,s[h])),r(f,t()),f};Xr=pi(f=>{let h=pi(n).map(p=>p+96);if(h.length){let p=f>=i;h[0]-=32,h=Ks(h),p&&(h=`Restricted[${h}]`);let m=o(),b=o(),w=!n();return{N:h,P:m,Q:b,M:w,R:p}}}),ra=e(),Vr=new Map;let a=t().concat(go(ra)).sort((f,h)=>f-h);a.forEach((f,h)=>{let p=n(),m=a[h]=p?a[h-p]:{V:[],M:new Map};m.V.push(f),ra.has(f)||Vr.set(f,m)});for(let{V:f,M:h}of new Set(Vr.values())){let p=[];for(let b of f){let w=Xr.filter(x=>mi(x,b)),E=p.find(({G:x})=>w.some(v=>x.has(v)));E||(E={G:new Set,V:[]},p.push(E)),E.V.push(b),r(E.G,w)}let m=p.flatMap(b=>go(b.G));for(let{G:b,V:w}of p){let E=new Set(m.filter(x=>!b.has(x)));for(let x of w)h.set(x,E)}}jn=new Set;let c=new Set;const u=f=>jn.has(f)?c.add(f):jn.add(f);for(let f of Xr){for(let h of f.P)u(h);for(let h of f.Q)u(h)}for(let f of jn)!Vr.has(f)&&!c.has(f)&&Vr.set(f,Ku);r(jn,Qu(jn)),sl=Bp(n).map(f=>Qp.from(f)).sort(Tp),Ta=new Map;for(let f of sl){let h=[Ta];for(let p of f){let m=h.map(b=>{let w=b.get(p);return w||(w=new Map,b.set(p,w)),w});p===Ju?h.push(...m):h=m}for(let p of h)p.V=f}}function ac(n){return(ju(n)?"":`${cc(Mo([n]))} `)+Fu(n)}function cc(n){return`"${n}"‎`}function zp(n){if(n.length>=4&&n[2]==rl&&n[3]==rl)throw new Error(`invalid label extension: "${Ks(n.slice(0,4))}"`)}function Jp(n){for(let e=n.lastIndexOf(95);e>0;)if(n[--e]!==95)throw new Error("underscore allowed only at start")}function Kp(n){let t=n[0],e=tl.get(t);if(e)throw ci(`leading ${e}`);let r=n.length,s=-1;for(let i=1;i<r;i++){t=n[i];let o=tl.get(t);if(o){if(s==i)throw ci(`${e} + ${o}`);s=i+1,e=o}}if(s==r)throw ci(`trailing ${e}`)}function Mo(n,t=1/0,e=Fu){let r=[];_p(n[0])&&r.push("◌"),n.length>t&&(t>>=1,n=[...n.slice(0,t),8230,...n.slice(-t)]);let s=0,i=n.length;for(let o=0;o<i;o++){let a=n[o];ju(a)&&(r.push(Ks(n.slice(s,o))),r.push(e(a)),s=o+1)}return r.push(Ks(n.slice(s,i))),r.join("")}function _p(n){return oc(),nr.has(n)}function ju(n){return oc(),Wu.has(n)}function Wp(n){return qp(jp(n,Vp,tg))}function jp(n,t,e){if(!n)return[];oc();let r=0;return n.split(zu).map(s=>{let i=Rp(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=$p(i,t,e),c=a.length,u;if(!c)throw new Error("empty label");let f=o.output=a.flat();if(Jp(f),!(o.emoji=c>1||a[0].is_emoji)&&f.every(p=>p<128))zp(f),u="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)u="Emoji";else{if(nr.has(f[0]))throw ci("leading combining mark");for(let w=1;w<c;w++){let E=a[w];if(!E.is_emoji&&nr.has(E[0]))throw ci(`emoji + combining mark: "${Ks(a[w-1])} + ${Mo([E[0]])}"`)}Kp(f);let m=go(new Set(p)),[b]=Yp(m);Xp(b,p),Zp(b,m),u=b.N}}o.type=u}catch(a){o.error=a}return o})}function Zp(n,t){let e,r=[];for(let s of t){let i=Vr.get(s);if(i===Ku)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):go(o),!e.length)return}else r.push(s)}if(e){for(let s of e)if(r.every(i=>mi(s,i)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function Yp(n){let t=Xr;for(let e of n){let r=t.filter(s=>mi(s,e));if(!r.length)throw Xr.some(s=>mi(s,e))?Yu(t[0],e):Zu(e);if(t=r,r.length==1)break}return t}function qp(n){return n.map(({input:t,error:e,output:r})=>{if(e){let s=e.message;throw new Error(n.length==1?s:`Invalid label ${cc(Mo(t,63))}: ${s}`)}return Ks(r)}).join(zu)}function Zu(n){return new Error(`disallowed character: ${ac(n)}`)}function Yu(n,t){let e=ac(t),r=Xr.find(s=>s.P.has(t));return r&&(e=`${r.N} ${e}`),new Error(`illegal mixture: ${n.N} + ${e}`)}function ci(n){return new Error(`illegal placement: ${n}`)}function Xp(n,t){for(let e of t)if(!mi(n,e))throw Yu(n,e);if(n.M){let e=Qu(t);for(let r=1,s=e.length;r<s;r++)if(Ra.has(e[r])){let i=r+1;for(let o;i<s&&Ra.has(o=e[i]);i++)for(let a=r;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${ac(o)}`);if(i-r>el)throw new Error(`excessive non-spacing marks: ${cc(Mo(e.slice(r-1,i)))} (${i-r}/${el})`);r=i}}}function $p(n,t,e){let r=[],s=[];for(n=n.slice().reverse();n.length;){let i=eg(n);if(i)s.length&&(r.push(t(s)),s=[]),r.push(e(i));else{let o=n.pop();if(jn.has(o))s.push(o);else{let a=va.get(o);if(a)s.push(...a);else if(!_u.has(o))throw Zu(o)}}}return s.length&&r.push(t(s)),r}function tg(n){return n.filter(t=>t!=Ju)}function eg(n,t){let e=Ta,r,s=n.length;for(;s&&(e=e.get(n[--s]),!!e);){let{V:i}=e;i&&(r=i,n.length=s)}return r}const qu=new Uint8Array(32);qu.fill(0);function il(n){return g(n.length!==0,"invalid ENS name; empty component","comp",n),n}function Xu(n){const t=De(ng(n)),e=[];if(n.length===0)return e;let r=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(il(t.slice(r,s))),r=s+1);return g(r<t.length,"invalid ENS name; empty component","name",n),e.push(il(t.slice(r))),e}function ng(n){try{if(n.length===0)throw new Error("empty label");return Wp(n)}catch(t){g(!1,`invalid ENS name (${t.message})`,"name",n)}}function Sa(n){g(typeof n=="string","invalid ENS name; not a string","name",n),g(n.length,"invalid ENS name (empty label)","name",n);let t=qu;const e=Xu(n);for(;e.length;)t=ft(ct([t,ft(e.pop())]));return B(t)}function rg(n,t){const e=t;return g(e<=255,"DNS encoded label cannot exceed 255","length",e),B(ct(Xu(n).map(r=>{g(r.length<=e,`label ${JSON.stringify(n)} exceeds ${e} bytes`,"name",n);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const $u=new Uint8Array(32);$u.fill(0);const sg=BigInt(-1),tf=BigInt(0),ef=BigInt(1),ig=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function og(n){const t=z(n),e=t.length%32;return e?ct([t,$u.slice(e)]):B(t)}const ag=Hn(ef,32),cg=Hn(tf,32),ol={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},sa=["name","version","chainId","verifyingContract","salt"];function al(n){return function(t){return g(typeof t=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,t),t}}const lg={name:al("name"),version:al("version"),chainId:function(n){const t=T(n,"domain.chainId");return g(t>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(t)?Number(t):ye(t)},verifyingContract:function(n){try{return $(n).toLowerCase()}catch{}g(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const t=z(n,"domain.salt");return g(t.length===32,'invalid domain value "salt"',"domain.salt",n),B(t)}};function ia(n){{const t=n.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",r=parseInt(t[2]);g(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",n);const s=tr(ig,e?r-1:r),i=e?(s+ef)*sg:tf;return function(o){const a=T(o,"value");return g(a>=i&&a<=s,`value out-of-bounds for ${n}`,"value",a),Hn(e?Vl(a,256):a,32)}}}{const t=n.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return g(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",n),function(r){const s=z(r);return g(s.length===e,`invalid length for ${n}`,"value",r),og(r)}}}switch(n){case"address":return function(t){return sn($(t),32)};case"bool":return function(t){return t?ag:cg};case"bytes":return function(t){return ft(t)};case"string":return function(t){return kr(t)}}return null}function cl(n,t){return`${n}(${t.map(({name:e,type:r})=>r+" "+e).join(",")})`}function _i(n){const t=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:n}}var Ii,We,Ns,No,nf;const te=class te{constructor(t){A(this,No);y(this,"primaryType");A(this,Ii);A(this,We);A(this,Ns);d(this,We,new Map),d(this,Ns,new Map);const e=new Map,r=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:u,type:f})=>{let{base:h,index:p}=_i(f);return h==="int"&&!t.int&&(h="int256"),h==="uint"&&!t.uint&&(h="uint256"),{name:u,type:h+(p||"")}}),e.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),d(this,Ii,JSON.stringify(i));for(const c in i){const u=new Set;for(const f of i[c]){g(!u.has(f.name),`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(c)}`,"types",t),u.add(f.name);const h=_i(f.type).base;g(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",t),!ia(h)&&(g(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),r.get(h).push(c),e.get(c).add(h))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);g(o.length!==0,"missing primary type","types",t),g(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),M(this,{primaryType:o[0]});function a(c,u){g(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),u.add(c);for(const f of e.get(c))if(r.has(f)){a(f,u);for(const h of u)s.get(h).add(f)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const f=Array.from(u);f.sort(),l(this,We).set(c,cl(c,i[c])+f.map(h=>cl(h,i[h])).join(""))}}get types(){return JSON.parse(l(this,Ii))}getEncoder(t){let e=l(this,Ns).get(t);return e||(e=P(this,No,nf).call(this,t),l(this,Ns).set(t,e)),e}encodeType(t){const e=l(this,We).get(t);return g(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return ft(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(ia(t))return r(t,e);const s=_i(t).array;if(s)return g(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,r));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],r),o),{});g(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new te(t)}static getPrimaryType(t){return te.from(t).primaryType}static hashStruct(t,e,r){return te.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){if(t[r]==null)continue;const s=ol[r];g(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:s})}return e.sort((r,s)=>sa.indexOf(r.name)-sa.indexOf(s.name)),te.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return ct(["0x1901",te.hashDomain(t),te.from(e).hash(r)])}static hash(t,e,r){return ft(te.encode(t,e,r))}static async resolveNames(t,e,r,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!rt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=te.from(e);o.visit(r,(a,c)=>(a==="address"&&!rt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:r}}static getPayload(t,e,r){te.hashDomain(t);const s={},i=[];sa.forEach(c=>{const u=t[c];u!=null&&(s[c]=lg[c](u),i.push({name:c,type:ol[c]}))});const o=te.from(e);e=o.types;const a=Object.assign({},e);return g(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,u)=>{if(c.match(/^bytes(\d*)/))return B(z(u));if(c.match(/^u?int/))return T(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return g(typeof u=="string","invalid string","value",u),u}g(!1,"unsupported type","type",c)})}}};Ii=new WeakMap,We=new WeakMap,Ns=new WeakMap,No=new WeakSet,nf=function(t){{const s=ia(t);if(s)return s}const e=_i(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{g(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return l(this,We).has(s)&&(a=a.map(ft)),ft(ct(a))}}const r=this.types[t];if(r){const s=kr(l(this,We).get(t));return i=>{const o=r.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return l(this,We).has(c)?ft(u):u});return o.unshift(s),ct(o)}}g(!1,`unknown type: ${t}`,"type",t)};let mo=te;function Ut(n){const t=new Set;return n.forEach(e=>t.add(e)),Object.freeze(t)}const ug="external public payable override",fg=Ut(ug.split(" ")),rf="constant external internal payable private public pure view override",hg=Ut(rf.split(" ")),sf="constructor error event fallback function receive struct",of=Ut(sf.split(" ")),af="calldata memory storage payable indexed",dg=Ut(af.split(" ")),pg="tuple returns",gg=[sf,af,pg,rf].join(" "),mg=Ut(gg.split(" ")),wg={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},yg=new RegExp("^(\\s*)"),bg=new RegExp("^([0-9]+)"),Ag=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),cf=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),lf=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Et,me,Ci,Oa;const Po=class Po{constructor(t){A(this,Ci);A(this,Et);A(this,me);d(this,Et,0),d(this,me,t.slice())}get offset(){return l(this,Et)}get length(){return l(this,me).length-l(this,Et)}clone(){return new Po(l(this,me))}reset(){d(this,Et,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=P(this,Ci,Oa).call(this,l(this,Et)+1,t.match+1);return d(this,Et,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;l(this,Et)<t.match-1;){const r=this.peek().linkNext;e.push(P(this,Ci,Oa).call(this,l(this,Et)+1,r)),d(this,Et,r)}return d(this,Et,t.match+1),e}peek(){if(l(this,Et)>=l(this,me).length)throw new Error("out-of-bounds");return l(this,me)[l(this,Et)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return qs(this,Et)._++,t}toString(){const t=[];for(let e=l(this,Et);e<l(this,me).length;e++){const r=l(this,me)[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};Et=new WeakMap,me=new WeakMap,Ci=new WeakSet,Oa=function(t=0,e=0){return new Po(l(this,me).slice(t,e).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let Ae=Po;function zn(n){const t=[],e=o=>{const a=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<n.length;){let o=n.substring(i),a=o.match(yg);a&&(i+=a[1].length,o=n.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let u=wg[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")r.push(t.length-1),s.push(t.length-1);else if(u=="CLOSE_PAREN")r.length===0&&e("no matching open bracket"),c.match=r.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let f=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const h=t.pop().text;f=h+f,t[t.length-1].value=V(h)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=f}continue}if(a=o.match(Ag),a){if(c.text=a[1],i+=c.text.length,mg.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(lf)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(bg),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ae(t.map(o=>Object.freeze(o)))}function ll(n,t){let e=[];for(const r in t.keys())n.has(r)&&e.push(r);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Ho(n,t){if(t.peekKeyword(of)){const e=t.pop().text;if(e!==n)throw new Error(`expected ${n}, got ${e}`)}return t.popType("ID")}function on(n,t){const e=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(n.pop(),e.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);e.add(r)}return Object.freeze(e)}function uf(n){let t=on(n,hg);return ll(t,Ut("constant payable nonpayable".split(" "))),ll(t,Ut("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function nn(n,t){return n.popParams().map(e=>Pt.from(e,t))}function ff(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return T(n.pop().text);throw new Error("invalid gas")}return null}function Br(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const Eg=new RegExp(/^(.*)\[([0-9]*)\]$/);function ul(n){const t=n.match(lf);if(g(t,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(t[2]){const e=parseInt(t[2]);g(e!==0&&e<=32,"invalid bytes length","type",n)}else if(t[3]){const e=parseInt(t[3]);g(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",n)}return n}const ot={},Vt=Symbol.for("_ethers_internal"),fl="_ParamTypeInternal",hl="_ErrorInternal",dl="_EventInternal",pl="_ConstructorInternal",gl="_FallbackInternal",ml="_FunctionInternal",wl="_StructInternal";var Ps,Xi;const ee=class ee{constructor(t,e,r,s,i,o,a,c){A(this,Ps);y(this,"name");y(this,"type");y(this,"baseType");y(this,"indexed");y(this,"components");y(this,"arrayLength");y(this,"arrayChildren");if(Li(t,ot,"ParamType"),Object.defineProperty(this,Vt,{value:fl}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");M(this,{name:e,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(s=>r.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((s,i)=>r.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const r=[],s=[t];return P(this,Ps,Xi).call(this,r,t,e,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(t,e){if(ee.isParamType(t))return t;if(typeof t=="string")try{return ee.from(zn(t),e)}catch{g(!1,"invalid param type","obj",t)}else if(t instanceof Ae){let a="",c="",u=null;on(t,Ut(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(w=>ee.from(w)),a=`tuple(${u.map(w=>w.format()).join(",")})`):(a=ul(t.popType("TYPE")),c=a);let f=null,h=null;for(;t.length&&t.peekType("BRACKET");){const w=t.pop();f=new ee(ot,"",a,c,null,u,h,f),h=w.value,a+=w.text,c="array",u=null}let p=null;if(on(t,dg).has("indexed")){if(!e)throw new Error("");p=!0}const b=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ee(ot,b,a,c,p,u,h,f)}const r=t.name;g(!r||typeof r=="string"&&r.match(cf),"invalid name","obj.name",r);let s=t.indexed;s!=null&&(g(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(Eg);if(o){const a=parseInt(o[2]||"-1"),c=ee.from({type:o[1],components:t.components});return new ee(ot,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(u=>ee.from(u)):null;return new ee(ot,r||"",i,"tuple",s,a,null,null)}return i=ul(t.type),new ee(ot,r||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[Vt]===fl}};Ps=new WeakSet,Xi=function(t,e,r,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,u)=>{var f;P(f=o,Ps,Xi).call(f,t,c,r,h=>{a[u]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var f;P(f=o[u],Ps,Xi).call(f,t,c,r,h=>{a[u]=h})}),s(a);return}const i=r(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Pt=ee;class vr{constructor(t,e,r){y(this,"type");y(this,"inputs");Li(t,ot,"Fragment"),r=Object.freeze(r.slice()),M(this,{type:e,inputs:r})}static from(t){if(typeof t=="string"){try{vr.from(JSON.parse(t))}catch{}return vr.from(zn(t))}if(t instanceof Ae)switch(t.peekKeyword(of)){case"constructor":return en.from(t);case"error":return Ht.from(t);case"event":return Le.from(t);case"fallback":case"receive":return Qe.from(t);case"function":return Ue.from(t);case"struct":return Ir.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return en.from(t);case"error":return Ht.from(t);case"event":return Le.from(t);case"fallback":case"receive":return Qe.from(t);case"function":return Ue.from(t);case"struct":return Ir.from(t)}N(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}g(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return en.isFragment(t)}static isError(t){return Ht.isFragment(t)}static isEvent(t){return Le.isFragment(t)}static isFunction(t){return Ue.isFragment(t)}static isStruct(t){return Ir.isFragment(t)}}class Go extends vr{constructor(e,r,s,i){super(e,r,i);y(this,"name");g(typeof s=="string"&&s.match(cf),"invalid identifier","name",s),i=Object.freeze(i.slice()),M(this,{name:s})}}function wi(n,t){return"("+t.map(e=>e.format(n)).join(n==="full"?", ":",")+")"}class Ht extends Go{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,Vt,{value:hl})}get selector(){return kr(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+wi(t,this.inputs)),e.join(" ")}static from(t){if(Ht.isFragment(t))return t;if(typeof t=="string")return Ht.from(zn(t));if(t instanceof Ae){const e=Ho("error",t),r=nn(t);return Br(t),new Ht(ot,e,r)}return new Ht(ot,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Vt]===hl}}class Le extends Go{constructor(e,r,s,i){super(e,"event",r,s);y(this,"anonymous");Object.defineProperty(this,Vt,{value:dl}),M(this,{anonymous:i})}get topicHash(){return kr(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const r=[];return e!=="sighash"&&r.push("event"),r.push(this.name+wi(e,this.inputs)),e!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(e,r){return r=(r||[]).map(i=>Pt.from(i)),new Le(ot,e,r,!1).topicHash}static from(e){if(Le.isFragment(e))return e;if(typeof e=="string")try{return Le.from(zn(e))}catch{g(!1,"invalid event fragment","obj",e)}else if(e instanceof Ae){const r=Ho("event",e),s=nn(e,!0),i=!!on(e,Ut(["anonymous"])).has("anonymous");return Br(e),new Le(ot,r,s,i)}return new Le(ot,e.name,e.inputs?e.inputs.map(r=>Pt.from(r,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Vt]===dl}}class en extends vr{constructor(e,r,s,i,o){super(e,r,s);y(this,"payable");y(this,"gas");Object.defineProperty(this,Vt,{value:pl}),M(this,{payable:i,gas:o})}format(e){if(N(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const r=[`constructor${wi(e,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(e){if(en.isFragment(e))return e;if(typeof e=="string")try{return en.from(zn(e))}catch{g(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Ae){on(e,Ut(["constructor"]));const r=nn(e),s=!!on(e,fg).has("payable"),i=ff(e);return Br(e),new en(ot,"constructor",r,s,i)}return new en(ot,"constructor",e.inputs?e.inputs.map(Pt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Vt]===pl}}class Qe extends vr{constructor(e,r,s){super(e,"fallback",r);y(this,"payable");Object.defineProperty(this,Vt,{value:gl}),M(this,{payable:s})}format(e){const r=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(e){if(Qe.isFragment(e))return e;if(typeof e=="string")try{return Qe.from(zn(e))}catch{g(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Ae){const r=e.toString(),s=e.peekKeyword(Ut(["fallback","receive"]));if(g(s,"type must be fallback or receive","obj",r),e.popKeyword(Ut(["fallback","receive"]))==="receive"){const c=nn(e);return g(c.length===0,"receive cannot have arguments","obj.inputs",c),on(e,Ut(["payable"])),Br(e),new Qe(ot,[],!0)}let o=nn(e);o.length?g(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Pt.from("bytes")];const a=uf(e);if(g(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),on(e,Ut(["returns"])).has("returns")){const c=nn(e);g(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Br(e),new Qe(ot,o,a==="payable")}if(e.type==="receive")return new Qe(ot,[],!0);if(e.type==="fallback"){const r=[Pt.from("bytes")],s=e.stateMutability==="payable";return new Qe(ot,r,s)}g(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Vt]===gl}}class Ue extends Go{constructor(e,r,s,i,o,a){super(e,"function",r,i);y(this,"constant");y(this,"outputs");y(this,"stateMutability");y(this,"payable");y(this,"gas");Object.defineProperty(this,Vt,{value:ml}),o=Object.freeze(o.slice()),M(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return kr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const r=[];return e!=="sighash"&&r.push("function"),r.push(this.name+wi(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(wi(e,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(e,r){return r=(r||[]).map(i=>Pt.from(i)),new Ue(ot,e,"view",r,[],null).selector}static from(e){if(Ue.isFragment(e))return e;if(typeof e=="string")try{return Ue.from(zn(e))}catch{g(!1,"invalid function fragment","obj",e)}else if(e instanceof Ae){const s=Ho("function",e),i=nn(e),o=uf(e);let a=[];on(e,Ut(["returns"])).has("returns")&&(a=nn(e));const c=ff(e);return Br(e),new Ue(ot,s,o,i,a,c)}let r=e.stateMutability;return r==null&&(r="payable",typeof e.constant=="boolean"?(r="view",e.constant||(r="payable",typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable")),new Ue(ot,e.name,r,e.inputs?e.inputs.map(Pt.from):[],e.outputs?e.outputs.map(Pt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Vt]===ml}}class Ir extends Go{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,Vt,{value:wl})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Ir.from(zn(t))}catch{g(!1,"invalid struct fragment","obj",t)}else if(t instanceof Ae){const e=Ho("struct",t),r=nn(t);return Br(t),new Ir(ot,e,r)}return new Ir(ot,t.name,t.inputs?t.inputs.map(Pt.from):[])}static isFragment(t){return t&&t[Vt]===wl}}const Ee=new Map;Ee.set(0,"GENERIC_PANIC");Ee.set(1,"ASSERT_FALSE");Ee.set(17,"OVERFLOW");Ee.set(18,"DIVIDE_BY_ZERO");Ee.set(33,"ENUM_RANGE_ERROR");Ee.set(34,"BAD_STORAGE_DATA");Ee.set(49,"STACK_UNDERFLOW");Ee.set(50,"ARRAY_RANGE_ERROR");Ee.set(65,"OUT_OF_MEMORY");Ee.set(81,"UNINITIALIZED_FUNCTION_CALL");const xg=new RegExp(/^bytes([0-9]*)$/),Ng=new RegExp(/^(u?int)([0-9]*)$/);let oa=null,yl=1024;function Pg(n,t,e,r){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const u=z(e);if(e=B(e),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(B(u.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(B(u.slice(0,4))==="0x4e487b71")try{const f=Number(r.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[f]},i=`Panic due to ${Ee.get(f)||"UNKNOWN"}(${f})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?$(t.to):null,data:t.data||"0x"};return t.from&&(c.from=$(t.from)),it(s,"CALL_EXCEPTION",{action:n,data:e,reason:i,transaction:c,invocation:o,revert:a})}var In,Qr;const Io=class Io{constructor(){A(this,In)}getDefaultValue(t){const e=t.map(s=>P(this,In,Qr).call(this,Pt.from(s)));return new Ki(e,"_").defaultValue()}encode(t,e){Ml(e.length,t.length,"types/values length mismatch");const r=t.map(o=>P(this,In,Qr).call(this,Pt.from(o))),s=new Ki(r,"_"),i=new ba;return s.encode(i,e),i.data}decode(t,e,r){const s=t.map(o=>P(this,In,Qr).call(this,Pt.from(o)));return new Ki(s,"_").decode(new Aa(e,r,yl))}static _setDefaultMaxInflation(t){g(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),yl=t}static defaultAbiCoder(){return oa==null&&(oa=new Io),oa}static getBuiltinCallException(t,e,r){return Pg(t,e,r,Io.defaultAbiCoder())}};In=new WeakSet,Qr=function(t){if(t.isArray())return new Qd(P(this,In,Qr).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ki(t.components.map(r=>P(this,In,Qr).call(this,r)),t.name);switch(t.baseType){case"address":return new Gd(t.name);case"bool":return new zd(t.name);case"string":return new Xd(t.name);case"bytes":return new Jd(t.name);case"":return new Wd(t.name)}let e=t.type.match(Ng);if(e){let r=parseInt(e[2]||"256");return g(r!==0&&r<=256&&r%8===0,"invalid "+e[1]+" bit length","param",t),new qd(r/8,e[1]==="int",t.name)}if(e=t.type.match(xg),e){let r=parseInt(e[1]);return g(r!==0&&r<=32,"invalid bytes length","param",t),new Kd(r,t.name)}g(!1,"invalid type","type",t.type)};let yi=Io;class Ig{constructor(t,e,r){y(this,"fragment");y(this,"name");y(this,"signature");y(this,"topic");y(this,"args");const s=t.name,i=t.format();M(this,{fragment:t,name:s,signature:i,topic:e,args:r})}}class Cg{constructor(t,e,r,s){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");y(this,"value");const i=t.name,o=t.format();M(this,{fragment:t,name:i,args:r,signature:o,selector:e,value:s})}}class kg{constructor(t,e,r){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");const s=t.name,i=t.format();M(this,{fragment:t,name:s,args:r,signature:i,selector:e})}}class bl{constructor(t){y(this,"hash");y(this,"_isIndexed");M(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Al={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},El={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let t="unknown panic code";return n>=0&&n<=255&&Al[n.toString()]&&(t=Al[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${t})`}}};var Be,ve,Re,It,Me,$i,to;const Xn=class Xn{constructor(t){A(this,Me);y(this,"fragments");y(this,"deploy");y(this,"fallback");y(this,"receive");A(this,Be);A(this,ve);A(this,Re);A(this,It);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,d(this,Re,new Map),d(this,Be,new Map),d(this,ve,new Map);const r=[];for(const o of e)try{r.push(vr.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}M(this,{fragments:Object.freeze(r)});let s=null,i=!1;d(this,It,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}M(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(g(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=l(this,Re);break;case"event":c=l(this,ve);break;case"error":c=l(this,Be);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||M(this,{deploy:en.from("constructor()")}),M(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return yi.defaultAbiCoder()}getFunctionName(t){const e=P(this,Me,$i).call(this,t,null,!1);return g(e,"no matching function","key",t),e.name}hasFunction(t){return!!P(this,Me,$i).call(this,t,null,!1)}getFunction(t,e){return P(this,Me,$i).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(l(this,Re).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(l(this,Re).get(s),r)}}getEventName(t){const e=P(this,Me,to).call(this,t,null,!1);return g(e,"no matching event","key",t),e.name}hasEvent(t){return!!P(this,Me,to).call(this,t,null,!1)}getEvent(t,e){return P(this,Me,to).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(l(this,ve).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(l(this,ve).get(s),r)}}getError(t,e){if(rt(t)){const s=t.toLowerCase();if(El[s])return Ht.from(El[s].signature);for(const i of l(this,Be).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of l(this,Be))i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?Ht.from("error Error(string)"):t==="Panic"?Ht.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");g(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=Ht.from(t).format(),t==="Error(string)")return Ht.from("error Error(string)");if(t==="Panic(uint256)")return Ht.from("error Panic(uint256)");const r=l(this,Be).get(t);return r||null}forEachError(t){const e=Array.from(l(this,Be).keys());e.sort((r,s)=>r.localeCompare(s));for(let r=0;r<e.length;r++){const s=e[r];t(l(this,Be).get(s),r)}}_decodeParams(t,e){return l(this,It).decode(t,e)}_encodeParams(t,e){return l(this,It).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const r=this.getError(t);g(r,"unknown error","fragment",t),t=r}return g(at(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,at(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const r=this.getError(t);g(r,"unknown error","fragment",t),t=r}return ct([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const r=this.getFunction(t);g(r,"unknown function","fragment",t),t=r}return g(at(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,at(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const r=this.getFunction(t);g(r,"unknown function","fragment",t),t=r}return ct([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);g(i,"unknown function","fragment",t),t=i}let r="invalid length for result data";const s=St(e);if(s.length%32===0)try{return l(this,It).decode(t.outputs,s)}catch{r="could not decode result data"}N(!1,r,"BAD_DATA",{value:B(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=z(t,"data"),s=yi.getBuiltinCallException("call",e,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=B(r.slice(0,4)),c=this.getError(a);if(c)try{const u=l(this,It).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const r=this.getFunction(t);g(r,"unknown function","fragment",t),t=r}return B(l(this,It).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);g(i,"unknown event","eventFragment",t),t=i}N(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const s=(i,o)=>i.type==="string"?kr(o):i.type==="bytes"?ft(B(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Hn(o):i.type.match(/^bytes/)?o=Qf(o,32):i.type==="address"&&l(this,It).encode(["address"],[o]),sn(B(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){g(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?g(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);g(o,"unknown event","eventFragment",t),t=o}const r=[],s=[],i=[];return t.anonymous||r.push(t.topicHash),g(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")r.push(kr(c));else if(o.type==="bytes")r.push(ft(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(l(this,It).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:l(this,It).encode(s,i),topics:r}}decodeEventLog(t,e,r){if(typeof t=="string"){const m=this.getEvent(t);g(m,"unknown event","eventFragment",t),t=m}if(r!=null&&!t.anonymous){const m=t.topicHash;g(rt(r[0],32)&&r[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((m,b)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(s.push(Pt.from({type:"bytes32",name:m.name})),o.push(!0)):(s.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=r!=null?l(this,It).decode(s,ct(r)):null,c=l(this,It).decode(i,e,!0),u=[],f=[];let h=0,p=0;return t.inputs.forEach((m,b)=>{let w=null;if(m.indexed)if(a==null)w=new bl(null);else if(o[b])w=new bl(a[p++]);else try{w=a[p++]}catch(E){w=E}else try{w=c[h++]}catch(E){w=E}u.push(w),f.push(m.name||null)}),Gs.fromItems(u,f)}parseTransaction(t){const e=z(t.data,"tx.data"),r=T(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(B(e.slice(0,4)));if(!s)return null;const i=l(this,It).decode(s.inputs,e.slice(4));return new Cg(s,s.selector,i,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Ig(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=B(t),r=this.getError(at(e,0,4));if(!r)return null;const s=l(this,It).decode(r.inputs,at(e,4));return new kg(r,r.selector,s)}static from(t){return t instanceof Xn?t:typeof t=="string"?new Xn(JSON.parse(t)):typeof t.formatJson=="function"?new Xn(t.formatJson()):typeof t.format=="function"?new Xn(t.format("json")):new Xn(t)}};Be=new WeakMap,ve=new WeakMap,Re=new WeakMap,It=new WeakMap,Me=new WeakSet,$i=function(t,e,r){if(rt(t)){const i=t.toLowerCase();for(const o of l(this,Re).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,Re))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;Bt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const f=i[u].inputs.length;f!==a&&(!c||f!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const f=i[u].inputs;for(let h=0;h<e.length;h++)if(Bt.isTyped(e[h])){if(h>=f.length){if(e[h].type==="overrides")continue;i.splice(u,1);break}if(e[h].type!==f[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");g(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,Re).get(Ue.from(t).format());return s||null},to=function(t,e,r){if(rt(t)){const i=t.toLowerCase();for(const o of l(this,ve).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,ve))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(Bt.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");g(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,ve).get(Le.from(t).format());return s||null};let La=Xn;const hf=BigInt(0);function $r(n){return n??null}function lt(n){return n==null?null:n.toString()}class xl{constructor(t,e,r){y(this,"gasPrice");y(this,"maxFeePerGas");y(this,"maxPriorityFeePerGas");M(this,{gasPrice:$r(t),maxFeePerGas:$r(e),maxPriorityFeePerGas:$r(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:lt(t),maxFeePerGas:lt(e),maxPriorityFeePerGas:lt(r)}}}function wo(n){const t={};n.to&&(t.to=n.to),n.from&&(t.from=n.from),n.data&&(t.data=B(n.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in n)||n[s]==null||(t[s]=T(n[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in n)||n[s]==null||(t[s]=V(n[s],`request.${s}`));return n.accessList&&(t.accessList=Sr(n.accessList)),n.authorizationList&&(t.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(t.blockTag=n.blockTag),"enableCcipRead"in n&&(t.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(t.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(t.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(t.kzg=n.kzg),"blobs"in n&&n.blobs&&(t.blobs=n.blobs.map(s=>Ya(s)?B(s):Object.assign({},s))),t}var je;class Bg{constructor(t,e){y(this,"provider");y(this,"number");y(this,"hash");y(this,"timestamp");y(this,"parentHash");y(this,"parentBeaconBlockRoot");y(this,"nonce");y(this,"difficulty");y(this,"gasLimit");y(this,"gasUsed");y(this,"stateRoot");y(this,"receiptsRoot");y(this,"blobGasUsed");y(this,"excessBlobGas");y(this,"miner");y(this,"prevRandao");y(this,"extraData");y(this,"baseFeePerGas");A(this,je);d(this,je,t.transactions.map(r=>typeof r!="string"?new bi(r,e):r)),M(this,{provider:e,hash:$r(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:$r(t.prevRandao),extraData:t.extraData,baseFeePerGas:$r(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return l(this,je).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=l(this,je).slice();return t.length===0?[]:(N(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:b,timestamp:w,transactions:E}=this;return{_type:"Block",baseFeePerGas:lt(t),difficulty:lt(e),extraData:r,gasLimit:lt(s),gasUsed:lt(i),blobGasUsed:lt(this.blobGasUsed),excessBlobGas:lt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,timestamp:w,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:b,transactions:E}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return l(this,je).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=l(this,je)[t];else{const r=t.toLowerCase();for(const s of l(this,je))if(typeof s=="string"){if(s!==r)continue;e=s;break}else{if(s.hash!==r)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;g(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return vg(this)}}je=new WeakMap;class Di{constructor(t,e){y(this,"provider");y(this,"transactionHash");y(this,"blockHash");y(this,"blockNumber");y(this,"removed");y(this,"address");y(this,"data");y(this,"topics");y(this,"index");y(this,"transactionIndex");this.provider=e;const r=Object.freeze(t.topics.slice());M(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return N(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return Rg(this)}}var ki;class df{constructor(t,e){y(this,"provider");y(this,"to");y(this,"from");y(this,"contractAddress");y(this,"hash");y(this,"index");y(this,"blockHash");y(this,"blockNumber");y(this,"logsBloom");y(this,"gasUsed");y(this,"blobGasUsed");y(this,"cumulativeGasUsed");y(this,"gasPrice");y(this,"blobGasPrice");y(this,"type");y(this,"status");y(this,"root");A(this,ki);d(this,ki,Object.freeze(t.logs.map(s=>new Di(s,e))));let r=hf;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),M(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return l(this,ki)}toJSON(){const{to:t,from:e,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:f,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:lt(this.cumulativeGasUsed),from:e,gasPrice:lt(this.gasPrice),blobGasUsed:lt(this.blobGasUsed),blobGasPrice:lt(this.blobGasPrice),gasUsed:lt(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:h,status:f,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return gf(this)}reorderedEvent(t){return N(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),pf(this,t)}}ki=new WeakMap;var Cn;const wc=class wc{constructor(t,e){y(this,"provider");y(this,"blockNumber");y(this,"blockHash");y(this,"index");y(this,"hash");y(this,"type");y(this,"to");y(this,"from");y(this,"nonce");y(this,"gasLimit");y(this,"gasPrice");y(this,"maxPriorityFeePerGas");y(this,"maxFeePerGas");y(this,"maxFeePerBlobGas");y(this,"data");y(this,"value");y(this,"chainId");y(this,"signature");y(this,"accessList");y(this,"blobVersionedHashes");y(this,"authorizationList");A(this,Cn);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,d(this,Cn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:f,accessList:h,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:t,blockHash:e,blobVersionedHashes:p,chainId:lt(this.chainId),data:u,from:a,gasLimit:lt(this.gasLimit),gasPrice:lt(this.gasPrice),hash:s,maxFeePerGas:lt(this.maxFeePerGas),maxPriorityFeePerGas:lt(this.maxPriorityFeePerGas),maxFeePerBlobGas:lt(this.maxFeePerBlobGas),nonce:c,signature:f,to:o,index:r,type:i,value:lt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:r}=await Tt({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:r-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const r=t??1,s=e??0;let i=l(this,Cn),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await Tt({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const b=await this.getTransaction();if(!(b&&b.blockNumber!=null))for(o===-1&&(o=i-3,o<l(this,Cn)&&(o=l(this,Cn)));o<=p;){if(a)return null;const w=await this.provider.getBlock(o,!0);if(w==null)return;for(const E of w)if(E===this.hash)return;for(let E=0;E<w.length;E++){const x=await w.getTransaction(E);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(x.hash);if(v==null||p-v.blockNumber+1<r)return;let C="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?C="repriced":x.data==="0x"&&x.from===x.to&&x.value===hf&&(C="cancelled"),N(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:x.replaceableTransaction(i),hash:x.hash,receipt:v})}}o++}},u=p=>{if(p==null||p.status!==0)return p;N(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},f=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(f);if(f){if(r===1||await f.confirmations()>=r)return u(f)}else if(await c(),r===0)return null;return await new Promise((p,m)=>{const b=[],w=()=>{b.forEach(x=>x())};if(b.push(()=>{a=!0}),s>0){const x=setTimeout(()=>{w(),m(it("wait for transaction timeout","TIMEOUT"))},s);b.push(()=>{clearTimeout(x)})}const E=async x=>{if(await x.confirmations()>=r){w();try{p(u(x))}catch(v){m(v)}}};if(b.push(()=>{this.provider.off(this.hash,E)}),this.provider.on(this.hash,E),i>=0){const x=async()=>{try{await c()}catch(v){if(Nt(v,"TRANSACTION_REPLACED")){w(),m(v);return}}a||this.provider.once("block",x)};b.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),gf(this)}reorderedEvent(t){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),pf(this,t)}replaceableTransaction(t){g(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new wc(this,this.provider);return d(e,Cn,t),e}};Cn=new WeakMap;let bi=wc;function vg(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function pf(n,t){return{orphan:"reorder-transaction",tx:n,other:t}}function gf(n){return{orphan:"drop-transaction",tx:n}}function Rg(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class lc extends Di{constructor(e,r,s){super(e,e.provider);y(this,"interface");y(this,"fragment");y(this,"args");const i=r.decodeEventLog(s,e.data,e.topics);M(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class mf extends Di{constructor(e,r){super(e,e.provider);y(this,"error");M(this,{error:r})}}var Is;class Tg extends df{constructor(e,r,s){super(s,r);A(this,Is);d(this,Is,e)}get logs(){return super.logs.map(e=>{const r=e.topics.length?l(this,Is).getEvent(e.topics[0]):null;if(r)try{return new lc(e,l(this,Is),r)}catch(s){return new mf(e,s)}return e})}}Is=new WeakMap;var Bi;class uc extends bi{constructor(e,r,s){super(s,r);A(this,Bi);d(this,Bi,e)}async wait(e,r){const s=await super.wait(e,r);return s==null?null:new Tg(l(this,Bi),this.provider,s)}}Bi=new WeakMap;class wf extends Ql{constructor(e,r,s,i){super(e,r,s);y(this,"log");M(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Sg extends wf{constructor(t,e,r,s,i){super(t,e,r,new lc(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);M(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Nl=BigInt(0);function yf(n){return n&&typeof n.call=="function"}function bf(n){return n&&typeof n.estimateGas=="function"}function Vo(n){return n&&typeof n.resolveName=="function"}function Af(n){return n&&typeof n.sendTransaction=="function"}function Ef(n){if(n!=null){if(Vo(n))return n;if(n.provider)return n.provider}}var vi;class Og{constructor(t,e,r){A(this,vi);y(this,"fragment");if(M(this,{fragment:e}),e.inputs.length<r.length)throw new Error("too many arguments");const s=Rr(t.runner,"resolveName"),i=Vo(s)?s:null;d(this,vi,async function(){const o=await Promise.all(e.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(f,h)=>f==="address"?Array.isArray(h)?Promise.all(h.map(p=>Lt(p,i))):Lt(h,i):h)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return l(this,vi)}}vi=new WeakMap;function Rr(n,t){return n==null?null:typeof n[t]=="function"?n:n.provider&&typeof n.provider[t]=="function"?n.provider:null}function rr(n){return n==null?null:n.provider||null}async function xf(n,t){const e=Bt.dereference(n,"overrides");g(typeof e=="object","invalid overrides parameter","overrides",n);const r=wo(e);return g(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),g(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Lg(n,t,e){const r=Rr(n,"resolveName"),s=Vo(r)?r:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=Bt.dereference(c,a),a==="address"?Lt(c,s):c))))}function Ug(n){const t=async function(o){const a=await xf(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await Lt(a.from,Ef(n.runner)));const c=n.interface,u=T(a.value||Nl,"overrides.value")===Nl,f=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!f&&!u&&g(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),g(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return g(h||u,"cannot send value to non-payable fallback","overrides.value",a.value),g(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=Rr(n.runner,"call");N(yf(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(u){throw Za(u)&&u.data?n.interface.makeError(u.data,c):u}},r=async function(o){const a=n.runner;N(Af(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),u=rr(n.runner);return new uc(n.interface,u,c)},s=async function(o){const a=Rr(n.runner,"estimateGas");return N(bf(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await r(o);return M(i,{_contract:n,estimateGas:s,populateTransaction:t,send:r,staticCall:e}),i}function Fg(n,t){const e=function(...u){const f=n.interface.getFunction(t,u);return N(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),f},r=async function(...u){const f=e(...u);let h={};if(f.inputs.length+1===u.length&&(h=await xf(u.pop()),h.from&&(h.from=await Lt(h.from,Ef(n.runner)))),f.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await Lg(n.runner,f.inputs,u);return Object.assign({},h,await Tt({to:n.getAddress(),data:n.interface.encodeFunctionData(f,p)}))},s=async function(...u){const f=await a(...u);return f.length===1?f[0]:f},i=async function(...u){const f=n.runner;N(Af(f),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await f.sendTransaction(await r(...u)),p=rr(n.runner);return new uc(n.interface,p,h)},o=async function(...u){const f=Rr(n.runner,"estimateGas");return N(bf(f),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await f.estimateGas(await r(...u))},a=async function(...u){const f=Rr(n.runner,"call");N(yf(f),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...u);let p="0x";try{p=await f.call(h)}catch(b){throw Za(b)&&b.data?n.interface.makeError(b.data,h):b}const m=e(...u);return n.interface.decodeFunctionResult(m,p)},c=async(...u)=>e(...u).constant?await s(...u):await i(...u);return M(c,{name:n.interface.getFunctionName(t),_contract:n,_key:t,getFragment:e,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=n.interface.getFunction(t);return N(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function Dg(n,t){const e=function(...s){const i=n.interface.getEvent(t,s);return N(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},r=function(...s){return new Og(n,e(...s),s)};return M(r,{name:n.interface.getEventName(t),_contract:n,_key:t,getFragment:e}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=n.interface.getEvent(t);return N(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),r}const yo=Symbol.for("_ethersInternal_contract"),Nf=new WeakMap;function Mg(n,t){Nf.set(n[yo],t)}function Kt(n){return Nf.get(n[yo])}function Hg(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function fc(n,t){let e,r=null;if(Array.isArray(t)){const i=function(o){if(rt(o,32))return o;const a=n.interface.getEvent(o);return g(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?rt(t,32)?e=[t]:(r=n.interface.getEvent(t),g(r,"unknown fragment","event",t),e=[r.topicHash]):Hg(t)?e=await t.getTopicFilter():"fragment"in t?(r=t.fragment,e=[r.topicHash]):g(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:e}}async function ri(n,t){const{subs:e}=Kt(n);return e.get((await fc(n,t)).tag)||null}async function Pl(n,t,e){const r=rr(n.runner);N(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await fc(n,e),{addr:a,subs:c}=Kt(n);let u=c.get(i);if(!u){const h={address:a||n,topics:o},p=E=>{let x=s;if(x==null)try{x=n.interface.getEvent(E.topics[0])}catch{}if(x){const v=x,C=s?n.interface.decodeEventLog(s,E.data,E.topics):[];Fa(n,e,C,G=>new Sg(n,G,e,v,E))}else Fa(n,e,[],v=>new wf(n,v,e,E))};let m=[];u={tag:i,listeners:[],start:()=>{m.length||m.push(r.on(h,p))},stop:async()=>{if(m.length==0)return;let E=m;m=[],await Promise.all(E),r.off(h,p)}},c.set(i,u)}return u}let Ua=Promise.resolve();async function Gg(n,t,e,r){await Ua;const s=await ri(n,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);r&&c.push(r(a?null:o));try{o.call(n,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Kt(n).subs.delete(s.tag)),i>0}async function Fa(n,t,e,r){try{await Ua}catch{}const s=Gg(n,t,e,r);return Ua=s,await s}const Wi=["then"];var Dl;Dl=yo;const li=class li{constructor(t,e,r,s){y(this,"target");y(this,"interface");y(this,"runner");y(this,"filters");y(this,Dl);y(this,"fallback");g(typeof t=="string"||ku(t),"invalid value for Contract target","target",t),r==null&&(r=null);const i=La.from(e);M(this,{target:t,runner:r,interface:i}),Object.defineProperty(this,yo,{value:{}});let o,a=null,c=null;if(s){const h=rr(r);c=new uc(this.interface,h,s)}let u=new Map;if(typeof t=="string")if(rt(t))a=t,o=Promise.resolve(t);else{const h=Rr(r,"resolveName");if(!Vo(h))throw it("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(t).then(p=>{if(p==null)throw it("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Kt(this).addr=p,p})}else o=t.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Kt(this).addr=h,h});Mg(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const f=new Proxy({},{get:(h,p,m)=>{if(typeof p=="symbol"||Wi.indexOf(p)>=0)return Reflect.get(h,p,m);try{return this.getEvent(p)}catch(b){if(!Nt(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(h,p)=>Wi.indexOf(p)>=0?Reflect.has(h,p):Reflect.has(h,p)||this.interface.hasEvent(String(p))});return M(this,{filters:f}),M(this,{fallback:i.receive||i.fallback?Ug(this):null}),new Proxy(this,{get:(h,p,m)=>{if(typeof p=="symbol"||p in h||Wi.indexOf(p)>=0)return Reflect.get(h,p,m);try{return h.getFunction(p)}catch(b){if(!Nt(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(h,p)=>typeof p=="symbol"||p in h||Wi.indexOf(p)>=0?Reflect.has(h,p):h.interface.hasFunction(p)})}connect(t){return new li(this.target,this.interface,t)}attach(t){return new li(t,this.interface,this.runner)}async getAddress(){return await Kt(this).addrPromise}async getDeployedCode(){const t=rr(this.runner);N(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=rr(this.runner);return N(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Kt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Fg(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Dg(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){e==null&&(e=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Kt(this),o=s||await i,{fragment:a,topics:c}=await fc(this,t),u={address:o,topics:c,fromBlock:e,toBlock:r},f=rr(this.runner);return N(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await f.getLogs(u)).map(h=>{let p=a;if(p==null)try{p=this.interface.getEvent(h.topics[0])}catch{}if(p)try{return new lc(h,this.interface,p)}catch(m){return new mf(h,m)}return new Di(h,f)})}async on(t,e){const r=await Pl(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){const r=await Pl(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await Fa(this,t,e,null)}async listenerCount(t){if(t){const s=await ri(this,t);return s?s.listeners.length:0}const{subs:e}=Kt(this);let r=0;for(const{listeners:s}of e.values())r+=s.length;return r}async listeners(t){if(t){const s=await ri(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=Kt(this);let r=[];for(const{listeners:s}of e.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(t,e){const r=await ri(this,t);if(!r)return this;if(e){const s=r.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&r.listeners.splice(s,1)}return(e==null||r.listeners.length===0)&&(r.stop(),Kt(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const e=await ri(this,t);if(!e)return this;e.stop(),Kt(this).subs.delete(e.tag)}else{const{subs:e}=Kt(this);for(const{tag:r,stop:s}of e.values())s(),e.delete(r)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends li{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,r){return r==null&&(r=null),new this(t,e,r)}};let Da=li;function Vg(){return Da}class Cr extends Vg(){}function aa(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):g(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class Qg{constructor(t){y(this,"name");M(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Pf=new RegExp("^(ipfs)://(.*)$","i"),Il=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Pf,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var kn,mr,Bn,zr,Co,If;const jr=class jr{constructor(t,e,r){A(this,Bn);y(this,"provider");y(this,"address");y(this,"name");A(this,kn);A(this,mr);M(this,{provider:t,address:e,name:r}),d(this,kn,null),d(this,mr,new Cr(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return l(this,kn)==null&&d(this,kn,(async()=>{try{return await l(this,mr).supportsInterface("0x9061b923")}catch(t){if(Nt(t,"CALL_EXCEPTION"))return!1;throw d(this,kn,null),t}})()),await l(this,kn)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await P(this,Bn,zr).call(this,"addr(bytes32)");return i==null||i===fi?null:i}catch(i){if(Nt(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await P(this,Bn,zr).call(this,"addr(bytes32,uint)",[i]);if(rt(o,20))return $(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof Qg&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const r=await P(this,Bn,zr).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const s=await e.decodeAddress(t,r);if(s!=null)return s;N(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await P(this,Bn,zr).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await P(this,Bn,zr).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${Jf("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;N(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<Il.length;r++){const s=e.match(Il[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=aa(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const u=c[1],f=new Cr(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const w=await f.ownerOf(u);if(a!==w)return t.push({type:"!owner",value:w}),{url:null,linkage:t};t.push({type:"owner",value:w})}else if(i==="erc1155"){const w=await f.balanceOf(a,u);if(!w)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:w.toString()})}let h=await f[o](u);if(h==null||h==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Hn(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=aa(h)),t.push({type:"metadata-url",value:h});let p={};const m=await new Gn(h).send();m.assertOk();try{p=m.bodyJson}catch{try{t.push({type:"!metadata",value:m.bodyText})}catch{const x=m.body;return x&&t.push({type:"!metadata",value:B(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!p)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(p)});let b=p.image;if(typeof b!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!b.match(/^(https:\/\/|data:)/i)){if(b.match(Pf)==null)return t.push({type:"!imageUrl-ipfs",value:b}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:b}),b=aa(b)}return t.push({type:"url",value:b}),{linkage:t,url:b}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return N(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async fromName(t,e){var s;let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const i=await P(s=jr,Co,If).call(s,t,r);if(i!=null){const o=new jr(t,i,e);return r!==e&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};kn=new WeakMap,mr=new WeakMap,Bn=new WeakSet,zr=async function(t,e){e=(e||[]).slice();const r=l(this,mr).interface;e.unshift(Sa(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(t),N(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[rg(this.name,255),r.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await l(this,mr)[t](...e);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Nt(i,"CALL_EXCEPTION"))throw i}return null},Co=new WeakSet,If=async function(t,e){const r=await jr.getEnsAddress(t);try{const i=await new Cr(r,["function resolver(bytes32) view returns (address)"],t).resolver(Sa(e),{enableCcipRead:!0});return i===fi?null:i}catch(s){throw s}return null},A(jr,Co);let bo=jr;const Cl=BigInt(0);function _(n,t){return function(e){return e==null?t:n(e)}}function Ai(n,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(r=>n(r))}}function Mi(n,t){return e=>{const r={};for(const s in n){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=n[s](e[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";N(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return r}}function zg(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}g(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Ws(n){return g(rt(n,!0),"invalid data","value",n),n}function xt(n){return g(rt(n,32),"invalid hash","value",n),n}const Jg=Mi({address:$,blockHash:xt,blockNumber:V,data:Ws,index:V,removed:_(zg,!1),topics:Ai(xt),transactionHash:xt,transactionIndex:V},{index:["logIndex"]});function Kg(n){return Jg(n)}const _g=Mi({hash:_(xt),parentHash:xt,parentBeaconBlockRoot:_(xt,null),number:V,timestamp:V,nonce:_(Ws),difficulty:T,gasLimit:T,gasUsed:T,stateRoot:_(xt,null),receiptsRoot:_(xt,null),blobGasUsed:_(T,null),excessBlobGas:_(T,null),miner:_($),prevRandao:_(xt,null),extraData:Ws,baseFeePerGas:_(T)},{prevRandao:["mixHash"]});function Wg(n){const t=_g(n);return t.transactions=n.transactions.map(e=>typeof e=="string"?e:Cf(e)),t}const jg=Mi({transactionIndex:V,blockNumber:V,transactionHash:xt,address:$,topics:Ai(xt),data:Ws,index:V,blockHash:xt},{index:["logIndex"]});function Zg(n){return jg(n)}const Yg=Mi({to:_($,null),from:_($,null),contractAddress:_($,null),index:V,root:_(B),gasUsed:T,blobGasUsed:_(T,null),logsBloom:_(Ws),blockHash:xt,hash:xt,logs:Ai(Zg),blockNumber:V,cumulativeGasUsed:T,effectiveGasPrice:_(T),blobGasPrice:_(T,null),status:_(V),type:_(V,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function qg(n){return Yg(n)}function Cf(n){n.to&&T(n.to)===Cl&&(n.to="0x0000000000000000000000000000000000000000");const t=Mi({hash:xt,index:_(V,void 0),type:e=>e==="0x"||e==null?0:V(e),accessList:_(Sr,null),blobVersionedHashes:_(Ai(xt,!0),null),authorizationList:_(Ai(e=>{let r;if(e.signature)r=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},e,{yParity:s})}return{address:$(e.address),chainId:T(e.chainId),nonce:T(e.nonce),signature:Gt.from(r)}},!1),null),blockHash:_(xt,null),blockNumber:_(V,null),transactionIndex:_(V,null),from:$,gasPrice:_(T),maxPriorityFeePerGas:_(T),maxFeePerGas:_(T),maxFeePerBlobGas:_(T,null),gasLimit:T,to:_($,null),value:T,nonce:V,data:Ws,creates:_($,null),chainId:_(T,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(t.to==null&&t.creates==null&&(t.creates=Hd(t)),(n.type===1||n.type===2)&&n.accessList==null&&(t.accessList=[]),n.signature?t.signature=Gt.from(n.signature):t.signature=Gt.from(n),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&T(t.blockHash)===Cl&&(t.blockHash=null),t}const Xg="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Hi{constructor(t){y(this,"name");M(this,{name:t})}clone(){return new Hi(this.name)}}class Qo extends Hi{constructor(e,r){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);y(this,"effectiveBlock");y(this,"txBase");y(this,"txCreate");y(this,"txDataZero");y(this,"txDataNonzero");y(this,"txAccessListStorageKey");y(this,"txAccessListAddress");const s={effectiveBlock:e};function i(o,a){let c=(r||{})[o];c==null&&(c=a),g(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),M(this,s)}clone(){return new Qo(this.effectiveBlock,this)}}class zo extends Hi{constructor(e,r){super("org.ethers.plugins.network.Ens");y(this,"address");y(this,"targetNetwork");M(this,{address:e||Xg,targetNetwork:r??1})}clone(){return new zo(this.address,this.targetNetwork)}}var Ri,Ti;class $g extends Hi{constructor(e,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");A(this,Ri);A(this,Ti);d(this,Ri,e),d(this,Ti,r)}get url(){return l(this,Ri)}get processFunc(){return l(this,Ti)}clone(){return this}}Ri=new WeakMap,Ti=new WeakMap;const ca=new Map;var Cs,ks,vn;const Zr=class Zr{constructor(t,e){A(this,Cs);A(this,ks);A(this,vn);d(this,Cs,t),d(this,ks,T(e)),d(this,vn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return l(this,Cs)}set name(t){d(this,Cs,t)}get chainId(){return l(this,ks)}set chainId(t){d(this,ks,T(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===T(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===T(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===T(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(l(this,vn).values())}attachPlugin(t){if(l(this,vn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,vn).set(t.name,t.clone()),this}getPlugin(t){return l(this,vn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Zr(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Qo;let r=e.txBase;if(t.to==null&&(r+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const s=Sr(t.accessList);for(const i in s)r+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(t){if(tm(),t==null)return Zr.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=ca.get(t);if(e)return e();if(typeof t=="bigint")return new Zr("unknown",t);g(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){g(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Zr(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new zo(t.ensAddress,t.ensNetwork)),e}g(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const r=ca.get(t);r&&g(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),ca.set(t,e)}};Cs=new WeakMap,ks=new WeakMap,vn=new WeakMap;let Fe=Zr;function kl(n,t){const e=String(n);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=e.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function Bl(n){return new $g(n,async(t,e,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:kl(a.maxFee,9),maxPriorityFeePerGas:kl(a.maxPriorityFee,9)}}catch(i){N(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let vl=!1;function tm(){if(vl)return;vl=!0;function n(t,e,r){const s=function(){const i=new Fe(t,e);return r.ensNetwork!=null&&i.attachPlugin(new zo(null,r.ensNetwork)),i.attachPlugin(new Qo),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Fe.register(t,s),Fe.register(e,s),r.altNames&&r.altNames.forEach(i=>{Fe.register(i,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[Bl("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Bl("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Ma(n){return JSON.parse(JSON.stringify(n))}var Ze,ne,Rn,Te,Bs,eo;class em{constructor(t){A(this,Bs);A(this,Ze);A(this,ne);A(this,Rn);A(this,Te);d(this,Ze,t),d(this,ne,null),d(this,Rn,4e3),d(this,Te,-2)}get pollingInterval(){return l(this,Rn)}set pollingInterval(t){d(this,Rn,t)}start(){l(this,ne)||(d(this,ne,l(this,Ze)._setTimeout(P(this,Bs,eo).bind(this),l(this,Rn))),P(this,Bs,eo).call(this))}stop(){l(this,ne)&&(l(this,Ze)._clearTimeout(l(this,ne)),d(this,ne,null))}pause(t){this.stop(),t&&d(this,Te,-2)}resume(){this.start()}}Ze=new WeakMap,ne=new WeakMap,Rn=new WeakMap,Te=new WeakMap,Bs=new WeakSet,eo=async function(){try{const t=await l(this,Ze).getBlockNumber();if(l(this,Te)===-2){d(this,Te,t);return}if(t!==l(this,Te)){for(let e=l(this,Te)+1;e<=t;e++){if(l(this,ne)==null)return;await l(this,Ze).emit("block",e)}d(this,Te,t)}}catch{}l(this,ne)!=null&&d(this,ne,l(this,Ze)._setTimeout(P(this,Bs,eo).bind(this),l(this,Rn)))};var wr,yr,Tn;class hc{constructor(t){A(this,wr);A(this,yr);A(this,Tn);d(this,wr,t),d(this,Tn,!1),d(this,yr,e=>{this._poll(e,l(this,wr))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){l(this,Tn)||(d(this,Tn,!0),l(this,yr).call(this,-2),l(this,wr).on("block",l(this,yr)))}stop(){l(this,Tn)&&(d(this,Tn,!1),l(this,wr).off("block",l(this,yr)))}pause(t){this.stop()}resume(){this.start()}}wr=new WeakMap,yr=new WeakMap,Tn=new WeakMap;var vs,Ye;class nm extends hc{constructor(e,r){super(e);A(this,vs);A(this,Ye);d(this,vs,r),d(this,Ye,-2)}pause(e){e&&d(this,Ye,-2),super.pause(e)}async _poll(e,r){const s=await r.getBlock(l(this,vs));s!=null&&(l(this,Ye)===-2?d(this,Ye,s.number):s.number>l(this,Ye)&&(r.emit(l(this,vs),s.number),d(this,Ye,s.number)))}}vs=new WeakMap,Ye=new WeakMap;var ko;class rm extends hc{constructor(e,r){super(e);A(this,ko);d(this,ko,Ma(r))}async _poll(e,r){throw new Error("@TODO")}}ko=new WeakMap;var Rs;class sm extends hc{constructor(e,r){super(e);A(this,Rs);d(this,Rs,r)}async _poll(e,r){const s=await r.getTransactionReceipt(l(this,Rs));s&&r.emit(l(this,Rs),s)}}Rs=new WeakMap;var qe,Ts,Ss,Sn,re,Bo,kf;class dc{constructor(t,e){A(this,Bo);A(this,qe);A(this,Ts);A(this,Ss);A(this,Sn);A(this,re);d(this,qe,t),d(this,Ts,Ma(e)),d(this,Ss,P(this,Bo,kf).bind(this)),d(this,Sn,!1),d(this,re,-2)}start(){l(this,Sn)||(d(this,Sn,!0),l(this,re)===-2&&l(this,qe).getBlockNumber().then(t=>{d(this,re,t)}),l(this,qe).on("block",l(this,Ss)))}stop(){l(this,Sn)&&(d(this,Sn,!1),l(this,qe).off("block",l(this,Ss)))}pause(t){this.stop(),t&&d(this,re,-2)}resume(){this.start()}}qe=new WeakMap,Ts=new WeakMap,Ss=new WeakMap,Sn=new WeakMap,re=new WeakMap,Bo=new WeakSet,kf=async function(t){if(l(this,re)===-2)return;const e=Ma(l(this,Ts));e.fromBlock=l(this,re)+1,e.toBlock=t;const r=await l(this,qe).getLogs(e);if(r.length===0){l(this,re)<t-60&&d(this,re,t-60);return}for(const s of r)l(this,qe).emit(l(this,Ts),s),d(this,re,s.blockNumber)};const im=BigInt(2),om=10;function ji(n){return n&&typeof n.then=="function"}function no(n,t){return n+":"+JSON.stringify(t,(e,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Bf{constructor(t){y(this,"name");M(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function am(n){return JSON.parse(JSON.stringify(n))}function Ha(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function la(n,t){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(rt(n,32)){const e=n.toLowerCase();return{type:"transaction",tag:no("tx",{hash:e}),hash:e}}if(n.orphan){const e=n;return{type:"orphan",tag:no("orphan",e),filter:am(e)}}if(n.address||n.topics){const e=n,r={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Ha(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{rt(a)?s.push(a):i.push((async()=>{s.push(await Lt(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),r.address=Ha(s.map(a=>a.toLowerCase()))}return{filter:r,tag:no("event",r),type:"event"}}g(!1,"unknown ProviderEvent","event",n)}function ua(){return new Date().getTime()}const cm={cacheTimeout:250,pollingInterval:4e3};var Ct,On,kt,Os,Zt,br,Ln,Xe,Si,se,Ls,Us,J,Jt,Ga,Va,si,Qa,ii,ro;class lm{constructor(t,e){A(this,J);A(this,Ct);A(this,On);A(this,kt);A(this,Os);A(this,Zt);A(this,br);A(this,Ln);A(this,Xe);A(this,Si);A(this,se);A(this,Ls);A(this,Us);if(d(this,Us,Object.assign({},cm,e||{})),t==="any")d(this,br,!0),d(this,Zt,null);else if(t){const r=Fe.from(t);d(this,br,!1),d(this,Zt,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else d(this,br,!1),d(this,Zt,null);d(this,Xe,-1),d(this,Ln,new Map),d(this,Ct,new Map),d(this,On,new Map),d(this,kt,null),d(this,Os,!1),d(this,Si,1),d(this,se,new Map),d(this,Ls,!1)}get pollingInterval(){return l(this,Us).pollingInterval}get provider(){return this}get plugins(){return Array.from(l(this,On).values())}attachPlugin(t){if(l(this,On).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,On).set(t.name,t.connect(this)),this}getPlugin(t){return l(this,On).get(t)||null}get disableCcipRead(){return l(this,Ls)}set disableCcipRead(t){d(this,Ls,!!t)}async ccipReadFetch(t,e,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],u=c.replace("{sender}",s).replace("{data}",i),f=new Gn(u);c.indexOf("{data}")===-1&&(f.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:a,urls:r});let h="unknown error",p;try{p=await f.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:m}),m.data;m.message&&(h=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:m})}catch{}N(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:h}}),o.push(h)}N(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,e){return new Bg(Wg(t),this)}_wrapLog(t,e){return new Di(Kg(t),this)}_wrapTransactionReceipt(t,e){return new df(qg(t),this)}_wrapTransactionResponse(t,e){return new bi(Cf(t),this)}_detectNetwork(){N(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){N(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=V(await P(this,J,Jt).call(this,{method:"getBlockNumber"}),"%response");return l(this,Xe)>=0&&d(this,Xe,t),t}_getAddress(t){return Lt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(rt(t))return rt(t,32)?t:ye(t);if(typeof t=="bigint"&&(t=V(t,"blockTag")),typeof t=="number")return t>=0?ye(t):l(this,Xe)>=0?ye(l(this,Xe)+t):this.getBlockNumber().then(e=>ye(e+t));g(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Ha(c.map(u=>u.toLowerCase())):c.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,s=(c,u,f)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(r&&(u!=null||f!=null))throw new Error("invalid filter");const p={};return h&&(p.address=h),e.length&&(p.topics=e),u&&(p.fromBlock=u),f&&(p.toBlock=f),r&&(p.blockHash=r),p};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=wo(t),r=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=Lt(e[s],this);ji(i)?r.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);ji(s)?r.push(async function(){e.blockTag=await s}()):e.blockTag=s}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(l(this,Zt)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw l(this,Zt)===s&&d(this,Zt,null),i}})();return d(this,Zt,s),(await s).clone()}const t=l(this,Zt),[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(l(this,br)?(this.emit("network",r,e),l(this,Zt)===t&&d(this,Zt,Promise.resolve(r))):N(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Tt({_block:P(this,J,Qa).call(this,"latest",!1),gasPrice:(async()=>{try{const f=await P(this,J,Jt).call(this,{method:"getGasPrice"});return T(f,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const f=await P(this,J,Jt).call(this,{method:"getPriorityFee"});return T(f,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,t);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*im+c),new xl(i,a,c)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Gn(r.url),i=await r.processFunc(e,this,s);return new xl(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return ji(e)&&(e=await e),T(await P(this,J,Jt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:r}=await Tt({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await P(this,J,Va).call(this,P(this,J,Ga).call(this,e,r,t.enableCcipRead?0:-1))}async getBalance(t,e){return T(await P(this,J,si).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return V(await P(this,J,si).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return B(await P(this,J,si).call(this,{method:"getCode"},t,e))}async getStorage(t,e,r){const s=T(e,"position");return B(await P(this,J,si).call(this,{method:"getStorage",position:s},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:s}=await Tt({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=lo.from(t);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:r,params:s}=await Tt({network:this.getNetwork(),params:P(this,J,Qa).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(t){const{network:e,params:r}=await Tt({network:this.getNetwork(),params:P(this,J,Jt).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await Tt({network:this.getNetwork(),params:P(this,J,Jt).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await P(this,J,Jt).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await Tt({network:this.getNetwork(),result:P(this,J,Jt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:B(e)}async getLogs(t){let e=this._getFilter(t);ji(e)&&(e=await e);const{network:r,params:s}=await Tt({network:this.getNetwork(),params:P(this,J,Jt).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,r))}_getProvider(t){N(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await bo.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=$(t);const e=Sa(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await bo.getEnsAddress(this),i=await new Cr(r,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===fi)return null;const a=await new Cr(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(r){if(Nt(r,"BAD_DATA")&&r.value==="0x"||Nt(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,e,r){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async u=>{try{const f=await this.getTransactionReceipt(t);if(f!=null&&u-f.blockNumber+1>=s){i(f),a&&(clearTimeout(a),a=null);return}}catch(f){console.log("EEE",f)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(it("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(t){N(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=l(this,se).get(t);e&&(e.timer&&clearTimeout(e.timer),l(this,se).delete(t))}_setTimeout(t,e){e==null&&(e=0);const r=qs(this,Si)._++,s=()=>{l(this,se).delete(r),t()};if(this.paused)l(this,se).set(r,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);l(this,se).set(r,{timer:i,func:s,time:ua()})}return r}_forEachSubscriber(t){for(const e of l(this,Ct).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Bf(t.type);case"block":{const e=new em(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new nm(this,t.type);case"event":return new dc(this,t.filter);case"transaction":return new sm(this,t.hash);case"orphan":return new rm(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of l(this,Ct).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),l(this,kt)!=null&&e.pause(l(this,kt));break}}async on(t,e){const r=await P(this,J,ro).call(this,t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,l(this,kt)!=null&&r.subscriber.pause(l(this,kt))),this}async once(t,e){const r=await P(this,J,ro).call(this,t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,l(this,kt)!=null&&r.subscriber.pause(l(this,kt))),this}async emit(t,...e){const r=await P(this,J,ii).call(this,t,e);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Ql(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),l(this,Ct).delete(r.tag)),s>0}async listenerCount(t){if(t){const r=await P(this,J,ii).call(this,t);return r?r.listeners.length:0}let e=0;for(const{listeners:r}of l(this,Ct).values())e+=r.length;return e}async listeners(t){if(t){const r=await P(this,J,ii).call(this,t);return r?r.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:r}of l(this,Ct).values())e=e.concat(r.map(({listener:s})=>s));return e}async off(t,e){const r=await P(this,J,ii).call(this,t);if(!r)return this;if(e){const s=r.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&r.listeners.splice(s,1)}return(!e||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),l(this,Ct).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:s}=await P(this,J,ro).call(this,t);r&&s.stop(),l(this,Ct).delete(e)}else for(const[e,{started:r,subscriber:s}]of l(this,Ct))r&&s.stop(),l(this,Ct).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return l(this,Os)}destroy(){this.removeAllListeners();for(const t of l(this,se).keys())this._clearTimeout(t);d(this,Os,!0)}get paused(){return l(this,kt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(d(this,Xe,-1),l(this,kt)!=null){if(l(this,kt)==!!t)return;N(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),d(this,kt,!!t);for(const e of l(this,se).values())e.timer&&clearTimeout(e.timer),e.time=ua()-e.time}resume(){if(l(this,kt)!=null){this._forEachSubscriber(t=>t.resume()),d(this,kt,null);for(const t of l(this,se).values()){let e=t.time;e<0&&(e=0),t.time=ua(),setTimeout(t.func,e)}}}}Ct=new WeakMap,On=new WeakMap,kt=new WeakMap,Os=new WeakMap,Zt=new WeakMap,br=new WeakMap,Ln=new WeakMap,Xe=new WeakMap,Si=new WeakMap,se=new WeakMap,Ls=new WeakMap,Us=new WeakMap,J=new WeakSet,Jt=async function(t){const e=l(this,Us).cacheTimeout;if(e<0)return await this._perform(t);const r=no(t.method,t);let s=l(this,Ln).get(r);return s||(s=this._perform(t),l(this,Ln).set(r,s),setTimeout(()=>{l(this,Ln).get(r)===s&&l(this,Ln).delete(r)},e)),await s},Ga=async function(t,e,r){N(r<om,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=wo(t);try{return B(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Za(i)&&i.data&&r>=0&&e==="latest"&&s.to!=null&&at(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Lt(s.to,this);let c;try{c=pm(at(i.data,4))}catch(h){N(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}N(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);N(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const f={to:a,data:ct([c.selector,dm([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const h=await P(this,J,Ga).call(this,f,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:h}),h}}throw i}},Va=async function(t){const{value:e}=await Tt({network:this.getNetwork(),value:t});return e},si=async function(t,e,r){let s=this._getAddress(e),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await P(this,J,Va).call(this,P(this,J,Jt).call(this,Object.assign(t,{address:s,blockTag:i})))},Qa=async function(t,e){if(rt(t,32))return await P(this,J,Jt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await P(this,J,Jt).call(this,{method:"getBlock",blockTag:r,includeTransactions:e})},ii=async function(t,e){let r=await la(t,this);return r.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(r=await la({orphan:"drop-log",log:e[0]},this)),l(this,Ct).get(r.tag)||null},ro=async function(t){const e=await la(t,this),r=e.tag;let s=l(this,Ct).get(r);return s||(s={subscriber:this._getSubscriber(e),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},l(this,Ct).set(r,s)),s};function um(n,t){try{const e=za(n,t);if(e)return oo(e)}catch{}return null}function za(n,t){if(n==="0x")return null;try{const e=V(at(n,t,t+32)),r=V(at(n,e,e+32));return at(n,e+32,e+32+r)}catch{}return null}function Rl(n){const t=ht(n);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function fm(n){if(n.length%32===0)return n;const t=new Uint8Array(Math.ceil(n.length/32)*32);return t.set(n),t}const hm=new Uint8Array([]);function dm(n){const t=[];let e=0;for(let r=0;r<n.length;r++)t.push(hm),e+=32;for(let r=0;r<n.length;r++){const s=z(n[r]);t[r]=Rl(e),t.push(Rl(s.length)),t.push(fm(s)),e+=32+Math.ceil(s.length/32)*32}return ct(t)}const Tl="0x0000000000000000000000000000000000000000000000000000000000000000";function pm(n){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};N(Yr(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=at(n,0,32);N(at(e,0,12)===at(Tl,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=at(e,12);try{const r=[],s=V(at(n,32,64)),i=V(at(n,s,s+32)),o=at(n,s+32);for(let a=0;a<i;a++){const c=um(o,a*32);if(c==null)throw new Error("abort");r.push(c)}t.urls=r}catch{N(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=za(n,64);if(r==null)throw new Error("abort");t.calldata=r}catch{N(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}N(at(n,100,128)===at(Tl,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=at(n,96,100);try{const r=za(n,128);if(r==null)throw new Error("abort");t.extraData=r}catch{N(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function _n(n,t){if(n.provider)return n.provider;N(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Sl(n,t){let e=wo(t);if(e.to!=null&&(e.to=Lt(e.to,n)),e.from!=null){const r=e.from;e.from=Promise.all([n.getAddress(),Lt(r,n)]).then(([s,i])=>(g(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=n.getAddress();return await Tt(e)}class gm{constructor(t){y(this,"provider");M(this,{provider:t||null})}async getNonce(t){return _n(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Sl(this,t)}async populateTransaction(t){const e=_n(this,"populateTransaction"),r=await Sl(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=T(r.chainId);g(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?g(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&i&&g(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await e.getFeeData();N(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(N(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):N(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Tt(r)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await _n(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return _n(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return _n(this,"call").call(await this.populateCall(t))}async resolveName(t){return await _n(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=_n(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const s=lo.from(r);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){N(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function mm(n){return JSON.parse(JSON.stringify(n))}var Rt,Se,Ar,Un,Er,Fs,Qn,Ja,Ka;class vf{constructor(t){A(this,Qn);A(this,Rt);A(this,Se);A(this,Ar);A(this,Un);A(this,Er);A(this,Fs);d(this,Rt,t),d(this,Se,null),d(this,Ar,P(this,Qn,Ja).bind(this)),d(this,Un,!1),d(this,Er,null),d(this,Fs,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){l(this,Un)||(d(this,Un,!0),P(this,Qn,Ja).call(this,-2))}stop(){l(this,Un)&&(d(this,Un,!1),d(this,Fs,!0),P(this,Qn,Ka).call(this),l(this,Rt).off("block",l(this,Ar)))}pause(t){t&&P(this,Qn,Ka).call(this),l(this,Rt).off("block",l(this,Ar))}resume(){this.start()}}Rt=new WeakMap,Se=new WeakMap,Ar=new WeakMap,Un=new WeakMap,Er=new WeakMap,Fs=new WeakMap,Qn=new WeakSet,Ja=async function(t){try{l(this,Se)==null&&d(this,Se,this._subscribe(l(this,Rt)));let e=null;try{e=await l(this,Se)}catch(i){if(!Nt(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){d(this,Se,null),l(this,Rt)._recoverSubscriber(this,this._recover(l(this,Rt)));return}const r=await l(this,Rt).getNetwork();if(l(this,Er)||d(this,Er,r),l(this,Er).chainId!==r.chainId)throw new Error("chaid changed");if(l(this,Fs))return;const s=await l(this,Rt).send("eth_getFilterChanges",[e]);await this._emitResults(l(this,Rt),s)}catch(e){console.log("@TODO",e)}l(this,Rt).once("block",l(this,Ar))},Ka=function(){const t=l(this,Se);t&&(d(this,Se,null),t.then(e=>{l(this,Rt).destroyed||l(this,Rt).send("eth_uninstallFilter",[e])}))};var xr;class wm extends vf{constructor(e,r){super(e);A(this,xr);d(this,xr,mm(r))}_recover(e){return new dc(e,l(this,xr))}async _subscribe(e){return await e.send("eth_newFilter",[l(this,xr)])}async _emitResults(e,r){for(const s of r)e.emit(l(this,xr),e._wrapLog(s,e._network))}}xr=new WeakMap;class ym extends vf{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const bm="bigint,boolean,function,number,string,symbol".split(/,/g);function so(n){if(n==null||bm.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(so);if(typeof n=="object")return Object.keys(n).reduce((t,e)=>(t[e]=n[e],t),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function Am(n){return new Promise(t=>{setTimeout(t,n)})}function Gr(n){return n&&n.toLowerCase()}function Ol(n){return n&&typeof n.pollingInterval=="number"}const Rf={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class fa extends gm{constructor(e,r){super(e);y(this,"address");r=$(r),M(this,{address:r})}connect(e){N(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const r=so(e),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Lt(o,this.provider);g(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Lt(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const f=await this.provider.getTransaction(s);if(f!=null){i(f.replaceableTransaction(r));return}}catch(f){if(Nt(f,"CANCELLED")||Nt(f,"BAD_DATA")||Nt(f,"NETWORK_ERROR")||Nt(f,"UNSUPPORTED_OPERATION")){f.info==null&&(f.info={}),f.info.sendTransactionHash=s,o(f);return}if(Nt(f,"INVALID_ARGUMENT")&&(c++,f.info==null&&(f.info={}),f.info.sendTransactionHash=s,c>10)){o(f);return}this.provider.emit("error",it("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:f}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(e){const r=so(e);if(r.from){const i=await Lt(r.from,this.provider);g(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const r=typeof e=="string"?De(e):e;return await this.provider.send("personal_sign",[B(r),this.address.toLowerCase()])}async signTypedData(e,r,s){const i=so(s),o=await mo.resolveNames(e,r,i,async a=>{const c=await Lt(a);return g(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(mo.getPayload(o.domain,r,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const r=typeof e=="string"?De(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),B(r)])}}var Nr,Ds,$e,Oe,we,ie,Dt,Oi,_a;class Em extends lm{constructor(e,r){super(e,r);A(this,Oi);A(this,Nr);A(this,Ds);A(this,$e);A(this,Oe);A(this,we);A(this,ie);A(this,Dt);d(this,Ds,1),d(this,Nr,Object.assign({},Rf,r||{})),d(this,$e,[]),d(this,Oe,null),d(this,ie,null),d(this,Dt,null);{let i=null;const o=new Promise(a=>{i=a});d(this,we,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(g(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&e!=null&&d(this,ie,Fe.from(e))):s&&(g(e==null||s.matches(e),"staticNetwork MUST match network object","options",r),d(this,ie,s))}_getOption(e){return l(this,Nr)[e]}get _network(){return N(l(this,ie),"network is not available yet","NETWORK_ERROR"),l(this,ie)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&T(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(e);return r!=null?await this.send(r.method,r.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(l(this,ie))return l(this,ie)}else return e;return l(this,Dt)?await l(this,Dt):this.ready?(d(this,Dt,(async()=>{try{const r=Fe.from(T(await this.send("eth_chainId",[])));return d(this,Dt,null),r}catch(r){throw d(this,Dt,null),r}})()),await l(this,Dt)):(d(this,Dt,(async()=>{const r={id:qs(this,Ds)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],d(this,Dt,null)}catch(i){throw d(this,Dt,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Fe.from(T(s.result));throw this.getRpcError(r,s)})()),await l(this,Dt))}_start(){l(this,we)==null||l(this,we).resolve==null||(l(this,we).resolve(),d(this,we,null),(async()=>{for(;l(this,ie)==null&&!this.destroyed;)try{d(this,ie,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",it("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Am(1e3)}P(this,Oi,_a).call(this)})())}async _waitUntilReady(){if(l(this,we)!=null)return await l(this,we).promise}_getSubscriber(e){return e.type==="pending"?new ym(this):e.type==="event"?this._getOption("polling")?new dc(this,e.filter):new wm(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Bf("orphan"):super._getSubscriber(e)}get ready(){return l(this,we)==null}getRpcTransaction(e){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=ye(T(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(r[s]=B(e[s]))}),e.accessList&&(r.accessList=Sr(e.accessList)),e.blobVersionedHashes&&(r.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(r.authorizationList=e.authorizationList.map(s=>{const i=Tu(s);return{address:i.address,nonce:ye(i.nonce),chainId:ye(i.chainId),yParity:ye(i.signature.yParity),r:ye(i.signature.r),s:ye(i.signature.s)}})),r}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Gr(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Gr(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Gr(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Gr(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Gr):e.filter.address=Gr(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,r){const{method:s}=e,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return it("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return it("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Wa(i),u=yi.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return u.info={error:i,payload:e},u}const o=JSON.stringify(Nm(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return it("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return it("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return it("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return it("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return it("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?it("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):it("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,r){if(this.destroyed)return Promise.reject(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=qs(this,Ds)._++,i=new Promise((o,a)=>{l(this,$e).push({resolve:o,reject:a,payload:{method:e,params:r,id:s,jsonrpc:"2.0"}})});return P(this,Oi,_a).call(this),i}async getSigner(e){e==null&&(e=0);const r=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await r;if(e>=i.length)throw new Error("no such account");return new fa(this,i[e])}const{accounts:s}=await Tt({network:this.getNetwork(),accounts:r});e=$(e);for(const i of s)if($(i)===e)return new fa(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new fa(this,r))}destroy(){l(this,Oe)&&(clearTimeout(l(this,Oe)),d(this,Oe,null));for(const{payload:e,reject:r}of l(this,$e))r(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));d(this,$e,[]),super.destroy()}}Nr=new WeakMap,Ds=new WeakMap,$e=new WeakMap,Oe=new WeakMap,we=new WeakMap,ie=new WeakMap,Dt=new WeakMap,Oi=new WeakSet,_a=function(){if(l(this,Oe))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");d(this,Oe,setTimeout(()=>{d(this,Oe,null);const r=l(this,$e);for(d(this,$e,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==l(this,Nr).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>l(this,Nr).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of s){if(this.destroyed){c(it("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const f=o.filter(h=>h.id===u.id)[0];if(f==null){const h=it("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",h),c(h);continue}if("error"in f){c(this.getRpcError(u,f));continue}a(f.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},e))};var Fn;class xm extends Em{constructor(e,r){super(e,r);A(this,Fn);let s=this._getOption("pollingInterval");s==null&&(s=Rf.pollingInterval),d(this,Fn,s)}_getSubscriber(e){const r=super._getSubscriber(e);return Ol(r)&&(r.pollingInterval=l(this,Fn)),r}get pollingInterval(){return l(this,Fn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");d(this,Fn,e),this._forEachSubscriber(r=>{Ol(r)&&(r.pollingInterval=l(this,Fn))})}}Fn=new WeakMap;function Wa(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&rt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const t in n){const e=Wa(n[t]);if(e)return e}return null}if(typeof n=="string")try{return Wa(JSON.parse(n))}catch{}return null}function ja(n,t){if(n!=null){if(typeof n.message=="string"&&t.push(n.message),typeof n=="object")for(const e in n)ja(n[e],t);if(typeof n=="string")try{return ja(JSON.parse(n),t)}catch{}}}function Nm(n){const t=[];return ja(n,t),t}var Ms,Hs;const $n=class $n extends xm{constructor(e,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});g(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(r,i);A(this,Ms);A(this,Hs);d(this,Hs,null),s&&s.providerInfo&&d(this,Hs,s.providerInfo),d(this,Ms,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const f=new Error(u.message);throw f.code=u.code,f.data=u.data,f.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:f}),f}})}get providerInfo(){return l(this,Hs)}async send(e,r){return await this._start(),await super.send(e,r)}async _send(e){g(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const r=await l(this,Ms).call(this,e.method,e.params||[]);return[{id:e.id,result:r}]}catch(r){return[{id:e.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(e,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(e,r)}async hasSigner(e){e==null&&(e=0);const r=await this.send("eth_accounts",[]);return typeof e=="number"?r.length>e:(e=e.toLowerCase(),r.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await l(this,Ms).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new $n(e.provider);const r=e.window?e.window:typeof window<"u"?window:null;if(r==null)return null;const s=e.anyProvider;if(s&&r.ethereum)return new $n(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const u=p=>{c.push(p.detail),s&&f()},f=()=>{if(clearTimeout(h),c.length)if(e&&e.filter){const p=e.filter(c.map(m=>Object.assign({},m.info)));if(p==null)o(null);else if(p instanceof $n)o(p);else{let m=null;if(p.uuid&&(m=c.filter(w=>p.uuid===w.info.uuid)[0]),m){const{provider:b,info:w}=m;o(new $n(b,void 0,{providerInfo:w}))}else a(it("filter returned unknown info","UNSUPPORTED_OPERATION",{value:p}))}}else{const{provider:p,info:m}=c[0];o(new $n(p,void 0,{providerInfo:m}))}else o(null);r.removeEventListener("eip6963:announceProvider",u)},h=setTimeout(()=>{f()},i);r.addEventListener("eip6963:announceProvider",u),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Ms=new WeakMap,Hs=new WeakMap;let Ao=$n;const bn={address:"0x359220DbD1E7f2Fcb93f0A16776069e5a48bff79",network:"sepolia",chainId:11155111,abi:["constructor(address _vrfCoordinator, uint64 _subscriptionId, bytes32 _keyHash, address _creatorsAddress, address _emblemVaultAddress)","function getRound(uint256 roundId) external view returns (tuple(uint256 id, uint64 startTime, uint64 endTime, uint8 status, uint256 totalTickets, uint256 totalWeight, uint256 totalWagered, uint256 vrfRequestId, uint64 vrfRequestedAt, bool feesDistributed, uint256 participantCount))","function getUserStats(uint256 roundId, address user) external view returns (uint256 wagered, uint256 tickets, uint256 weight, bool hasProof)","function getRoundParticipants(uint256 roundId) external view returns (address[])","function getRoundWinners(uint256 roundId) external view returns (tuple(uint256 roundId, address wallet, uint8 prizeTier, uint256 vrfRequestId, uint256 blockNumber)[])","function currentRoundId() external view returns (uint256)","function nextRoundFunds() external view returns (uint256)","function creatorsAddress() external view returns (address)","function emblemVaultAddress() external view returns (address)","function vrfConfig() external view returns (tuple(address coordinator, uint64 subscriptionId, bytes32 keyHash, uint32 callbackGasLimit, uint16 requestConfirmations))","function userProofInRound(uint256, address) external view returns (tuple(address wallet, uint256 roundId, bytes32 proofHash, bool verified, uint64 submittedAt))","function paused() external view returns (bool)","function emergencyPaused() external view returns (bool)","function denylisted(address user) external view returns (bool)","function lastVRFRequestTime() external view returns (uint256)","function createRound() external","function openRound(uint256 roundId) external","function closeRound(uint256 roundId) external","function snapshotRound(uint256 roundId) external","function requestVRF(uint256 roundId) external","function setValidProof(uint256 roundId, bytes32 proofHash) external","function setDenylistStatus(address user, bool status) external","function setEmergencyPause(bool paused) external","function pause() external","function unpause() external","function updateVRFConfig(address coordinator, uint64 subscriptionId, bytes32 keyHash) external","function updateCreatorsAddress(address newAddress) external","function updateEmblemVaultAddress(address newAddress) external","function placeBet(uint256 tickets) external payable","function submitProof(bytes32 proofHash) external","function MIN_WAGER() external view returns (uint256)","function BUNDLE_5_PRICE() external view returns (uint256)","function BUNDLE_10_PRICE() external view returns (uint256)","function WALLET_CAP() external view returns (uint256)","function PROOF_MULTIPLIER() external view returns (uint256)","event RoundCreated(uint256 indexed roundId, uint64 startTime, uint64 endTime)","event RoundOpened(uint256 indexed roundId)","event RoundClosed(uint256 indexed roundId)","event RoundSnapshot(uint256 indexed roundId, uint256 totalTickets, uint256 totalWeight)","event BetPlaced(uint256 indexed roundId, address indexed user, uint256 amount, uint256 tickets, uint256 weight)","event ProofSubmitted(address indexed wallet, uint256 indexed roundId, bytes32 proofHash, uint256 newWeight)","event ProofRejected(address indexed wallet, uint256 indexed roundId, bytes32 proofHash)","event ValidProofSet(uint256 indexed roundId, bytes32 validProofHash)","event VRFRequested(uint256 indexed roundId, uint256 indexed requestId)","event PrizesDistributed(uint256 indexed roundId, uint256[] randomWords)","event EmblemVaultPrizeAssigned(uint256 indexed roundId, address indexed winner, uint256 indexed assetId, uint256 timestamp)","event RoundPrizesDistributed(uint256 indexed roundId, uint256 winnerCount, uint256 timestamp)","event FeesDistributed(uint256 indexed roundId, uint256 creatorsAmount, uint256 nextRoundAmount)","event AddressDenylisted(address indexed user, bool status)","event EmergencyPauseToggled(bool paused)","event VRFTimeoutDetected(uint256 indexed roundId, uint256 requestTime)","event CircuitBreakerTriggered(uint256 indexed roundId, string reason)","event SecurityValidationFailed(address indexed user, string reason)"]},qt={SUPPORTED_NETWORKS:[11155111],NETWORK_NAMES:{11155111:"Sepolia Testnet"},MAX_PROOF_LENGTH:1e3,MIN_PROOF_LENGTH:1,MIN_TX_INTERVAL:5e3,ENABLE_DENYLIST_CHECK:!0,ENABLE_PAUSE_CHECK:!0,ENABLE_NETWORK_VALIDATION:!0};function Pm(){return!bn.address.startsWith("0x")||bn.address.length!==42?(console.error("❌ Invalid contract address format!"),!1):(console.log("✅ Contract configuration valid:",bn.address),!0)}function Jo(n){const t=Number(n);if(!qt.SUPPORTED_NETWORKS.includes(t)){const e=qt.NETWORK_NAMES[t]||`Chain ID ${t}`,r=qt.SUPPORTED_NETWORKS.map(s=>qt.NETWORK_NAMES[s]||`Chain ID ${s}`).join(", ");throw new Error(`Unsupported network: ${e}. Please switch to: ${r}`)}return!0}function Im(n,t="string"){if(typeof n!="string")throw new Error("Input must be a string");const e=n.replace(/[\x00-\x1f\x7f-\x9f]/g,"");switch(t){case"proof":if(e.length<qt.MIN_PROOF_LENGTH)throw new Error(`Proof too short (minimum ${qt.MIN_PROOF_LENGTH} characters)`);if(e.length>qt.MAX_PROOF_LENGTH)throw new Error(`Proof too long (maximum ${qt.MAX_PROOF_LENGTH} characters)`);return e.trim();case"address":if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error("Invalid Ethereum address format");return e.toLowerCase();default:return e.trim()}}const Ll=new Map;function Tf(n){const t=Date.now(),e=Ll.get(n==null?void 0:n.toLowerCase());if(e&&t-e<qt.MIN_TX_INTERVAL){const r=Math.ceil((qt.MIN_TX_INTERVAL-(t-e))/1e3);throw new Error(`Please wait ${r} seconds before submitting another transaction`)}return Ll.set(n==null?void 0:n.toLowerCase(),t),!0}async function Sf(n,t){if(!n||!t)throw new Error("Contract and user address required for security validation");const e=[];return e.push(n.paused().then(r=>{if(r)throw new Error("Contract is currently paused")}),n.emergencyPaused().then(r=>{if(r)throw new Error("Contract is in emergency pause mode")})),e.push(n.denylisted(t).then(r=>{if(r)throw new Error("Address is denylisted and cannot interact with the contract")})),await Promise.all(e),!0}function Cm(){console.log("Initializing UI components..."),km(),Bm()}function km(){const n=window.location.pathname;document.querySelectorAll("nav a").forEach(e=>{e.classList.remove("active"),(e.getAttribute("href")===n||n==="/"&&e.getAttribute("href")==="/")&&e.classList.add("active")})}function Bm(){const n=document.getElementById("wallet-info");n&&(n.style.display="none");const t=document.getElementById("bet-summary");t&&(t.style.display="none"),vm()}function vm(){const n=document.getElementById("proof-input");n&&(n.value=""),document.querySelectorAll(".ticket-btn").forEach(e=>e.classList.remove("selected"))}async function pc(n,t){try{const e=document.getElementById("wallet-info"),r=document.getElementById("wallet-balance"),s=document.getElementById("wallet-address-display"),i=document.getElementById("connect-wallet");if(s&&(s.textContent=oi(n)),t&&r){const o=await t.getBalance(n),a=ai(o);r.textContent=parseFloat(a).toFixed(4)}if(t)try{const o=await t.getNetwork();Jo(o.chainId)}catch{Lm()}e&&(e.style.display="block"),i&&(i.style.display="none")}catch(e){console.error("Error updating wallet info:",e),U("Failed to update wallet information","error")}}async function fe(n){try{if(!n){const a=document.getElementById("time-remaining"),c=document.getElementById("total-tickets");document.querySelectorAll(".status-item").forEach(f=>{f.classList.remove("active"),Number(f.dataset.status)===1&&f.classList.add("active")}),a&&(a.textContent="7d 0h 0m 0s (Mock)"),c&&(c.textContent="1,234 (Mock)");return}const t=await n.currentRoundId();if(t.toString()==="0"){const a=document.getElementById("round-number");a&&(a.textContent=""),document.querySelectorAll(".status-item").forEach(u=>{u.classList.remove("active")});return}const e=await n.getRound(t),r=document.getElementById("round-number");r&&(r.textContent=`: ${t}`),document.querySelectorAll(".status-item").forEach(a=>{a.classList.remove("active"),Number(a.dataset.status)===Number(e.status)&&a.classList.add("active")});const i=document.getElementById("time-remaining");if(i){const a=Number(e.endTime)*1e3;Sm(i,a)}const o=document.getElementById("total-tickets");o&&(o.textContent=e.totalTickets.toString())}catch(t){console.error("Error updating round status:",t);const e=document.getElementById("round-status-text");e&&(e.textContent="Error Loading")}}async function Eo(n){try{const t=document.getElementById("ticket-progress"),e=document.getElementById("progress-text"),r=document.getElementById("progress-warning");if(!n){e&&(e.textContent="No contract loaded");return}const s=await n.currentRoundId();if(s.toString()==="0"){e&&(e.textContent="No active round"),r&&(r.style.display="none"),t&&(t.style.width="0%");return}const i=await n.getRound(s),o=Number(i.totalTickets),a=Math.min(o/10*100,100);t&&(t.style.width=a+"%",a<50?t.style.backgroundColor="#ef4444":a<100?t.style.backgroundColor="#f59e0b":t.style.backgroundColor="#10b981"),e&&(o>=10?e.textContent="PEPEDAWN Packs will be distributed this round !!":e.textContent=`${o}/10 tickets are required for distribution when round closes`),r&&(o<10?r.style.display="block":r.style.display="none")}catch(t){console.error("Error updating progress indicator:",t)}}async function Rm(n,t){var e,r;try{const s=await n.getRoundParticipants(t),i=await n.getRound(t),o=[];for(let a=0;a<s.length;a++){const c=s[a];try{const u=await n.getUserStats(t,c);o.push({address:c,weight:Number(u.weight)})}catch(u){console.warn(`Could not get stats for participant ${c}:`,u.message)}}return o.sort((a,c)=>c.weight-a.weight),{fakePackWinner:((e=o[0])==null?void 0:e.address)||null,kekPackWinner:((r=o[1])==null?void 0:r.address)||null,pepePackWinners:o.slice(2,10).map(a=>a.address)}}catch(s){return console.error("Error getting winners data:",s),null}}async function Tm(n){try{const t=document.getElementById("round-select");if(!t||!n)return;const e=await n.currentRoundId(),r=Number(e);t.innerHTML="";for(let i=Math.max(1,r-5);i<=r;i++){const o=document.createElement("option");o.value=i.toString(),o.textContent=`Round ${i}`,i===r&&(o.textContent+=" (Current)",o.selected=!0),t.appendChild(o)}const s=document.createElement("option");s.value=(r+1).toString(),s.textContent=`Round ${r+1} (Future)`,t.appendChild(s)}catch(t){console.error("Error populating round selector:",t)}}async function Dn(n,t=null){try{const e=document.getElementById("leaderboard-list"),r=document.getElementById("leaderboard-title");if(!e||!window.location.pathname.includes("leaderboard.html"))return;if(!n){const m=`
        <div class="leaderboard-header">
          <span>Rank</span>
          <span>Address</span>
          <span>Tickets</span>
          <span>Weight</span>
          <span>Winning Odds</span>
        </div>
        ${[{address:"0x1234...5678",tickets:50,weight:70,fakeOdds:"12.5%",hasVerifiedProof:!0},{address:"0xabcd...efgh",tickets:35,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!1},{address:"0x9876...4321",tickets:25,weight:35,fakeOdds:"8.7%",hasVerifiedProof:!0}].map((b,w)=>`
          <div class="leaderboard-entry">
            <span class="rank">#${w+1}</span>
            <span class="address">${b.address} (Mock)${b.hasVerifiedProof?" 🧩":""}</span>
            <span class="tickets">${b.tickets}</span>
            <span class="weight">${b.weight}</span>
            <span class="odds">${b.fakeOdds}</span>
          </div>
        `).join("")}
      `;e.innerHTML=m;return}let s,i=!1;if(t?(s=t,i=!1):(s=await n.currentRoundId(),i=!0),r&&(r.textContent=`Leaderboard Round: ${s}`),s.toString()==="0"){e.innerHTML="<p>No active round</p>";return}const o=await n.currentRoundId();if(Number(s)>Number(o)){e.innerHTML=`
        <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-secondary);">
          <h3>🚀 Future Round</h3>
          <p>Round ${s} hasn't started yet.</p>
          <p>This round will begin after Round ${o} ends.</p>
        </div>
      `;return}const a=await n.getRound(s);if(a.totalTickets.toString()==="0"){e.innerHTML="<p>No participants yet</p>";return}const c=Number(a.status)===5;let u="";if(c){const p=await Rm(n,s);p&&(u=`
          <div class="winners-section">
            <div class="winners-title">🎉 Round ${s} Winners 🎉</div>
            
            <div class="winner-tier">
              <div class="winner-tier-title fake-pack">🥇 Fake Pack Winner (3x PEPEDAWN)</div>
              <div class="winner-address">${p.fakePackWinner?oi(p.fakePackWinner):"No Winner"}</div>
            </div>
            
            <div class="winner-tier">
              <div class="winner-tier-title kek-pack">🥈 Kek Pack Winner (2x PEPEDAWN)</div>
              <div class="winner-address">${p.kekPackWinner?oi(p.kekPackWinner):"No Winner"}</div>
            </div>
            
            <div class="winner-tier">
              <div class="winner-tier-title pepe-pack">🥉 Pepe Pack Winners (1x PEPEDAWN)</div>
              <div class="pepe-winners-grid">
                ${p.pepePackWinners.map(m=>`<div class="winner-address">${oi(m)}</div>`).join("")}
              </div>
            </div>
          </div>
        `)}const f=[];try{const p=await n.getRoundParticipants(s);for(let m=0;m<p.length;m++){const b=p[m];try{const w=await n.getUserStats(s,b),E=a.totalWeight>0?(Number(w.weight)/Number(a.totalWeight)*100).toFixed(1):"0.0";let x=!1;if(w.hasProof)try{x=(await n.userProofInRound(s,b)).verified}catch{x=!1}f.push({address:b,tickets:Number(w.tickets),weight:Number(w.weight),fakeOdds:E+"%",hasVerifiedProof:x})}catch(w){console.warn(`Could not get stats for participant ${b}:`,w.message)}}}catch(p){!p.message.includes("execution reverted")&&!p.message.includes("Round not initialized")&&console.warn("Error fetching participants for leaderboard:",p)}f.sort((p,m)=>m.weight-p.weight);const h=`
      ${u}
      <div class="leaderboard-header">
        <span>Rank</span>
        <span>Address</span>
        <span>Tickets</span>
        <span>Weight</span>
        <span>Winning Odds</span>
      </div>
      ${f.map((p,m)=>`
        <div class="leaderboard-entry">
          <span class="rank">#${m+1}</span>
          <span class="address">${oi(p.address)}${p.hasVerifiedProof?" 🧩":""}</span>
          <span class="tickets">${p.tickets}</span>
          <span class="weight">${p.weight}</span>
          <span class="odds">${p.fakeOdds}</span>
        </div>
      `).join("")}
    `;e.innerHTML=h}catch(e){console.error("Error updating leaderboard:",e);const r=document.getElementById("leaderboard-list");r&&(r.innerHTML="<p>Error loading leaderboard</p>")}}async function rn(n,t){try{const e=document.getElementById("user-tickets"),r=document.getElementById("user-weight"),s=document.getElementById("user-proof-status"),i=document.getElementById("user-fake-odds"),o=document.getElementById("cap-remaining");if(!n||!t){e&&(e.textContent="0 (No Contract)"),r&&(r.textContent="0 (No Contract)"),s&&(s.textContent="No (No Contract)"),i&&(i.textContent="0% (No Contract)"),o&&(o.textContent="1.0 (No Contract)");return}const a=await n.currentRoundId();if(a.toString()==="0"){e&&(e.textContent="0"),r&&(r.textContent="0"),s&&(s.textContent="No Active Round"),i&&(i.textContent="0%"),o&&(o.textContent="1.0");return}let c,u;try{if(u=await n.getRound(a),!u||u.status===void 0)throw new Error("Round not initialized");c=await n.getUserStats(a,t)}catch(f){f.message.includes("execution reverted")||f.message.includes("Round not initialized")||f.message.includes("call revert exception")||f.code==="CALL_EXCEPTION"||console.warn("Unexpected error fetching round data:",f),e&&(e.textContent="0"),r&&(r.textContent="0"),s&&(s.textContent="Round Not Available"),i&&(i.textContent="0%"),o&&(o.textContent="1.0");return}if(e&&(e.textContent=c.tickets.toString()),r&&(r.textContent=c.weight.toString()),s)if(c.hasProof)try{(await n.userProofInRound(a,t)).verified?(s.textContent="Yes (+40%)",s.className="proof-success"):(s.innerHTML='Yes (<span style="color: red;">failed</span>)',s.className="proof-failed")}catch{s.textContent="Yes"}else s.textContent="No",s.className="";if(i)if(Number(u.totalWeight)>0&&Number(c.weight)>0){const f=(Number(c.weight)/Number(u.totalWeight)*100).toFixed(1);i.textContent=f+"%"}else i.textContent="0%";if(o){const h=(1-Number(ai(c.wagered||"0"))).toFixed(3);o.textContent=h}}catch(e){console.error("Error updating user stats:",e);const r=document.getElementById("user-tickets");r&&(r.textContent="Error")}}function Sm(n,t){function e(){const r=Date.now(),s=t-r;if(s<=0){n.textContent="Round Ended";return}const i=Math.floor(s/(24*60*60*1e3)),o=Math.floor(s%(24*60*60*1e3)/(60*60*1e3)),a=Math.floor(s%(60*60*1e3)/(60*1e3)),c=Math.floor(s%(60*1e3)/1e3);n.textContent=`${i}d ${o}h ${a}m ${c}s`}e(),setInterval(e,1e3)}function oi(n){return n?`${n.slice(0,6)}...${n.slice(-4)}`:""}function U(n,t="info"){let e=document.getElementById("tx-status");e||(e=document.createElement("div"),e.id="tx-status",e.className="tx-status",document.body.appendChild(e)),e.textContent=n,e.className=`tx-status ${t}`,e.style.display="block",(t==="success"||t==="error")&&setTimeout(()=>{e.style.display="none"},5e3)}function Om(){const n=document.getElementById("tx-status");n&&(n.style.display="none")}function Lm(){const t=`Please switch to a supported network: ${qt.SUPPORTED_NETWORKS.map(e=>qt.NETWORK_NAMES[e]||`Chain ID ${e}`).join(", ")}`;if(U(t,"warning"),window.ethereum&&window.ethereum.request){const e=document.createElement("button");e.textContent="Switch to Sepolia",e.className="switch-network-btn",e.onclick=async()=>{try{await Um(),Om()}catch(s){console.error("Failed to switch network:",s),U("Failed to switch network: "+s.message,"error")}};const r=document.getElementById("tx-status");r&&!r.querySelector(".switch-network-btn")&&r.appendChild(e)}}async function Um(){if(!window.ethereum)throw new Error("MetaMask not detected");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xaa36a7"}]})}catch(n){if(n.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Testnet",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});else throw n}}function an(n,t){if(!n||!t)return;const e=document.getElementById("security-status");e&&Promise.all([n.paused().catch(()=>!1),n.emergencyPaused().catch(()=>!1),n.denylisted(t).catch(()=>!1)]).then(([r,s,i])=>{let o="✅ All systems operational",a="security-status normal";i?(o="🚫 Address is denylisted",a="security-status error"):s?(o="⚠️ Emergency pause active",a="security-status warning"):r&&(o="⏸️ Contract paused",a="security-status warning"),e.textContent=o,e.className=a}).catch(r=>{console.error("Error checking security status:",r),e.textContent="❓ Security status unknown",e.className="security-status unknown"})}function Fm(n){const{amount:t,tickets:e,userAddress:r}=n;if(!t||isNaN(t)||t<=0)throw new Error("Invalid bet amount");if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid ticket count");if(!r||!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error("Invalid user address");return!0}function Of(n,t){console.error(`Transaction error (${t}):`,n);let e="Transaction failed",r="error";return n.message.includes("user rejected")?(e="Transaction cancelled by user",r="info"):n.message.includes("insufficient funds")?e="Insufficient ETH balance for transaction":n.message.includes("gas")?e="Transaction failed due to gas issues":n.message.includes("nonce")?e="Transaction nonce error - please try again":n.message.includes("network")?e="Network error - please check connection":n.code==="CALL_EXCEPTION"&&(e="Contract call failed - check requirements"),U(e,r),{message:e,type:r,originalError:n}}let Xt=null,cn=null,I=null,S=null,ha=null,Ei=!1;const At=new Set;function bt(n,t){console.log(`🎲 ${n}:`,t)}function Ul(n){return n?`${n.slice(0,6)}...${n.slice(-4)}`:""}async function Yt(){const n=document.getElementById("submit-proof"),t=document.getElementById("place-bet"),e=document.querySelectorAll(".ticket-btn"),r=document.getElementById("proof-input");if(!I){n&&(n.disabled=!0,n.title="Contract not available"),t&&(t.disabled=!0,t.title="Contract not available"),e.forEach(s=>{s.disabled=!0,s.title="Contract not available"});return}try{const s=await I.currentRoundId();if(s.toString()==="0"){ha=null,n&&(n.disabled=!0,n.title="No active round"),t&&(t.disabled=!0,t.title="No active round"),e.forEach(a=>{a.disabled=!0,a.title="No active round"});return}const i=await I.getRound(s);ha=Number(i.status);const o=ha===1;if(t&&(t.disabled=!o||!S,S?o?t.title="":t.title="Round is not open for betting":t.title="Connect wallet to place bets"),e.forEach(a=>{a.disabled=!o||!S,S?o?a.title="":a.title="Round is not open for betting":a.title="Connect wallet to place bets"}),n&&r){let a=!0,c="";if(!S)a=!0,c="Connect wallet to submit proof";else if(!o)a=!0,c="Round is not open for proof submission";else try{const u=await I.getUserStats(s,S);u.tickets.toString()==="0"?(a=!0,c="Place a bet before submitting proof"):u.hasProof?(a=!0,c="Proof already submitted for this round"):(a=!1,c="")}catch{a=!o,c=o?"":"Round is not open for proof submission"}n.disabled=a,n.title=c,r.disabled=a,a&&c?r.placeholder=c:r.placeholder="Paste your puzzle proof here..."}}catch(s){console.error("Error updating button states:",s),n&&(n.disabled=!0,n.title="Error checking round status"),t&&(t.disabled=!0,t.title="Error checking round status"),e.forEach(i=>{i.disabled=!0,i.title="Error checking round status"})}}window.toggleProofSection=function(){const n=document.getElementById("proof-form"),t=document.querySelector("#proof-section .collapse-icon");n.style.display==="none"?(n.style.display="block",t.textContent="▲"):(n.style.display="none",t.textContent="▼")};async function Fl(){if(console.log("Initializing PEPEDAWN application..."),Cm(),Dm(),window.location.pathname.includes("leaderboard.html")&&Mm(),window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await Hm()}catch(n){console.log("No wallet auto-connection:",n),n.message&&n.message.includes("ethereum")&&console.log("Wallet extension conflict detected - user should disable conflicting extensions")}await Ko(),Km()}function Dm(){const n=document.getElementById("connect-wallet");n&&n.addEventListener("click",Lf),document.querySelectorAll(".ticket-btn").forEach(s=>{s.addEventListener("click",Jm)});const e=document.getElementById("place-bet");e&&e.addEventListener("click",Ff);const r=document.getElementById("submit-proof");r&&r.addEventListener("click",Df)}function Mm(){const n=document.getElementById("round-select");n&&n.addEventListener("change",async function(){const t=this.value;I&&await Dn(I,t)})}async function Lf(){try{if(!window.ethereum){U("Please install MetaMask or another Web3 wallet","error");return}U("Connecting to wallet...","info"),await window.ethereum.request({method:"eth_requestAccounts"}),await Uf(!0)}catch(n){console.error("Error connecting wallet:",n),U("Failed to connect wallet: "+n.message,"error")}}async function Hm(){try{if(!window.ethereum)return;Xt=new Ao(window.ethereum),cn=await Xt.getSigner(),S=await cn.getAddress(),console.log("Wallet auto-connected:",S),await Uf(!1)}catch(n){console.log("Silent wallet connection failed:",n.message)}}async function Uf(n=!0){try{const t=await Xt.getNetwork();Jo(t.chainId),console.log("✅ Network validated:",qt.NETWORK_NAMES[Number(t.chainId)])}catch(t){console.warn("⚠️ Network validation failed:",t.message),U(t.message,"warning")}window.ethereum.on&&(window.ethereum.on("chainChanged",Gm),window.ethereum.on("accountsChanged",Vm)),await pc(S,Xt),await Ko(),I&&(await rn(I,S),an(I,S),await Yt(),window.location.pathname.includes("leaderboard.html")&&await Tm(I)),n&&U("Wallet connected successfully","success")}function Gm(n){console.log("Network changed to:",n);try{Jo(n),console.log("✅ Network change validated"),Ei=!1,At.clear(),Ko().then(()=>{S&&(pc(S,Xt),I&&(rn(I,S),an(I,S),Yt()))})}catch(t){console.warn("⚠️ Network change validation failed:",t.message),U(t.message,"warning")}}function Vm(n){if(console.log("Account changed:",n),n.length===0){S=null,cn=null,I=null,Ei=!1,At.clear();const t=document.getElementById("wallet-info");t&&(t.style.display="none");const e=document.getElementById("connect-wallet");e&&(e.textContent="Connect Wallet",e.disabled=!1,e.style.display="inline-block"),U("Wallet disconnected","info")}else Qm(n[0])}async function Qm(n){try{console.log("Reconnecting wallet for account:",n),U("Switching wallet...","info"),S=n,Xt=new Ao(window.ethereum),cn=await Xt.getSigner(),Ei=!1,At.clear(),await pc(S,Xt),await Ko(),I&&(await rn(I,S),an(I,S),await Yt(),await fe(I),await Eo(I),await Dn(I)),U("Wallet switched successfully","success")}catch(t){console.error("Error reconnecting wallet:",t),U("Failed to switch wallet: "+t.message,"error")}}async function Ko(){try{if(console.log("📝 Loading contract..."),!Pm()){console.log("Contract not configured - working in mock mode");return}if(Xt)try{const n=await Xt.getNetwork();Jo(n.chainId),console.log("✅ Network validated for contract loading")}catch(n){console.warn("⚠️ Network validation failed:",n.message),U(n.message,"warning");return}if(cn)I=new Cr(bn.address,bn.abi,cn);else if(Xt)I=new Cr(bn.address,bn.abi,Xt);else{console.log("⏳ Waiting for wallet connection to load contract");return}console.log("✅ Contract loaded:",bn.address);try{await I.currentRoundId(),console.log("✅ Contract accessibility verified")}catch(n){console.error("❌ Contract not accessible:",n.message),U("Contract not accessible. Please check deployment.","error");return}I&&zm()}catch(n){console.error("Error loading contract:",n),U("Failed to load contract: "+n.message,"error")}}function zm(){if(I){if(Ei){console.log("⏭️ Event listeners already set up, skipping...");return}try{console.log("🎧 Setting up enhanced contract event listeners..."),I.removeAllListeners(),Ei=!0,I.on("RoundCreated",(...n)=>{const t=n[n.length-1],[e,r,s]=n,i=`RoundCreated-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(i))return;At.add(i);const o={roundId:e.toString(),startTime:Number(r),endTime:Number(s),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🆕 Round created:",o),bt("RoundCreated",o),U(`New round #${o.roundId} created!`,"success"),fe(I),Yt()}),I.on("RoundOpened",(...n)=>{const t=n[n.length-1],[e]=n,r=`RoundOpened-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(r))return;At.add(r);const s={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🟢 Round opened:",s),bt("RoundOpened",s),U(`Round #${s.roundId} is now open for betting!`,"success"),fe(I),Yt()}),I.on("RoundClosed",(...n)=>{const t=n[n.length-1],[e]=n,r=`RoundClosed-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(r))return;At.add(r);const s={roundId:e.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🔴 Round closed:",s),bt("RoundClosed",s),U(`Round #${s.roundId} closed. No more bets accepted.`,"info"),fe(I),Yt()}),I.on("RoundSnapshot",(...n)=>{const t=n[n.length-1],[e,r,s]=n,i=`RoundSnapshot-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(i))return;At.add(i);const o={roundId:e.toString(),totalTickets:r.toString(),totalWeight:s.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("📸 Round snapshot:",o),bt("RoundSnapshot",o),U(`Round #${o.roundId} snapshot taken. Preparing for draw...`,"info"),fe(I)}),I.on("BetPlaced",(...n)=>{const t=n[n.length-1],[e,r,s,i,o]=n,a={roundId:e.toString(),user:r.toLowerCase(),amount:ai(s),tickets:i.toString(),weight:o.toString(),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🎲 Bet placed:",a),bt("BetPlaced",a),a.user===(S==null?void 0:S.toLowerCase())?(U(`✅ Your bet confirmed! ${a.tickets} tickets for ${a.amount} ETH`,"success"),rn(I,S),Yt()):U(`New bet: ${a.tickets} tickets by ${Ul(a.user)}`,"info"),fe(I),Eo(I),Dn(I)}),I.on("ProofSubmitted",(n,t,e,r)=>{const s={roundId:n.toString(),user:t.toLowerCase(),weight:e.toString(),blockNumber:r.blockNumber,transactionHash:r.transactionHash};if(console.log("🧩 Proof submitted:",s),bt("ProofSubmitted",s),s.user===(S==null?void 0:S.toLowerCase())){U("✅ Puzzle proof confirmed! Weight bonus applied.","success");const i=document.getElementById("proof-status");i&&(i.textContent="✅ Puzzle proof confirmed! Weight bonus applied.",i.className="success",i.style.display="block"),rn(I,S),Yt()}else U(`Puzzle solved by ${Ul(s.user)}!`,"info");Dn(I)}),I.on("ProofRejected",(n,t,e,r)=>{const s={roundId:t.toString(),user:n.toLowerCase(),proofHash:e,blockNumber:r.blockNumber,transactionHash:r.transactionHash};if(console.log("❌ Proof rejected:",s),bt("ProofRejected",s),s.user===(S==null?void 0:S.toLowerCase())){U("❌ Puzzle proof incorrect. No weight bonus applied.","warning");const i=document.getElementById("proof-status");i&&(i.textContent="❌ Puzzle proof incorrect. No weight bonus applied.",i.className="error",i.style.display="block"),rn(I,S),Yt()}Dn(I)}),I.on("VRFRequested",(n,t,e)=>{const r=`VRFRequested-${n.toString()}-${(e==null?void 0:e.transactionHash)||"unknown"}`;if(At.has(r))return;At.add(r);const s={roundId:n.toString(),requestId:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🎰 VRF requested:",s),bt("VRFRequested",s),U(`🎰 Random number requested for round #${s.roundId}. Drawing winners...`,"info"),fe(I)}),I.on("PrizesDistributed",(n,t,e)=>{const r={roundId:n.toString(),randomWords:t.map(s=>s.toString()),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🏆 Prizes distributed:",r),bt("PrizesDistributed",r),U(`🏆 Winners selected for round #${r.roundId}! Check results.`,"success"),fe(I),Dn(I)}),I.on("EmblemVaultPrizeAssigned",(...n)=>{const t=n[n.length-1],[e,r,s,i]=n,o=`EmblemVaultPrizeAssigned-${e.toString()}-${r.toLowerCase()}-${s.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(o))return;At.add(o);const a={roundId:e.toString(),winner:r.toLowerCase(),assetId:s.toString(),timestamp:Number(i),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🎁 Emblem Vault prize assigned:",a),bt("EmblemVaultPrizeAssigned",a),a.winner===(S==null?void 0:S.toLowerCase())&&U(`🎁 Congratulations! You won asset #${a.assetId}!`,"success")}),I.on("RoundPrizesDistributed",(...n)=>{const t=n[n.length-1],[e,r,s]=n,i=`RoundPrizesDistributed-${e.toString()}-${(t==null?void 0:t.transactionHash)||"unknown"}`;if(At.has(i))return;At.add(i);const o={roundId:e.toString(),winnerCount:Number(r),timestamp:Number(s),blockNumber:t==null?void 0:t.blockNumber,transactionHash:t==null?void 0:t.transactionHash};console.log("🏆 Round prizes distribution completed:",o),bt("RoundPrizesDistributed",o),U(`🏆 Round #${o.roundId} completed! ${o.winnerCount} prizes distributed.`,"success"),fe(I)}),I.on("FeesDistributed",(n,t,e,r)=>{const s={roundId:n.toString(),creatorsAmount:ai(t),nextRoundAmount:ai(e),blockNumber:r.blockNumber,transactionHash:r.transactionHash};console.log("💰 Fees distributed:",s),bt("FeesDistributed",s)}),I.on("AddressDenylisted",(n,t,e)=>{const r={user:n.toLowerCase(),status:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🚫 Address denylist status changed:",r),bt("AddressDenylisted",r),r.user===(S==null?void 0:S.toLowerCase())&&(U(t?"Your address has been denylisted":"Your address has been removed from denylist",t?"error":"success"),an(I,S))}),I.on("EmergencyPauseToggled",(n,t)=>{const e={paused:n,blockNumber:t.blockNumber,transactionHash:t.transactionHash};console.log("⚠️ Emergency pause toggled:",e),bt("EmergencyPauseToggled",e),U(n?"Emergency pause activated":"Emergency pause deactivated",n?"warning":"success"),S&&an(I,S)}),I.on("CircuitBreakerTriggered",(n,t,e)=>{const r={roundId:n.toString(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("🔒 Circuit breaker triggered:",r),bt("CircuitBreakerTriggered",r),U(`⚠️ Circuit breaker: ${r.reason}`,"warning")}),I.on("SecurityValidationFailed",(n,t,e)=>{const r={user:n.toLowerCase(),reason:t,blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("❌ Security validation failed:",r),bt("SecurityValidationFailed",r),r.user===(S==null?void 0:S.toLowerCase())&&U(`Security validation failed: ${r.reason}`,"error")}),I.on("VRFTimeoutDetected",(n,t,e)=>{const r={roundId:n.toString(),requestTime:t.toString(),blockNumber:e.blockNumber,transactionHash:e.transactionHash};console.log("⏰ VRF timeout detected:",r),bt("VRFTimeoutDetected",r),U(`⏰ VRF timeout detected for round #${r.roundId}`,"warning")}),console.log("✅ Contract event listeners set up successfully")}catch(n){console.error("❌ Error setting up contract event listeners:",n),U("Failed to set up event listeners","error")}}}function Jm(n){const t=n.target,e=parseInt(t.dataset.tickets),r=parseFloat(t.dataset.amount);document.getElementById("selected-tickets").textContent=String(e),document.getElementById("selected-amount").textContent=String(r),document.getElementById("bet-summary").style.display="block",document.querySelectorAll(".ticket-btn").forEach(s=>s.classList.remove("selected")),t.classList.add("selected")}async function Ff(){try{if(!I||!cn||!S){U("Please connect your wallet first","error");return}const n=parseInt(document.getElementById("selected-tickets").textContent),t=parseFloat(document.getElementById("selected-amount").textContent);if(!n||!t){U("Please select a ticket bundle first","error");return}try{Fm({amount:t,tickets:n,userAddress:S})}catch(r){U(r.message,"error");return}try{Tf(S)}catch(r){U(r.message,"warning");return}try{await Sf(I,S)}catch(r){U(r.message,"error");return}const e=fh(t.toString());console.log(`Placing bet: ${n} tickets for ${t} ETH`);try{U("Validating bet parameters...","info");const r=await I.currentRoundId();if(r.toString()==="0")throw new Error("No active round available");const s=await I.getRound(r),i=Number(s.status);if(console.log("Round status check:",{status:i,roundData:s}),i!==1)throw new Error(`Round is not currently open for betting (status: ${i})`);U("Submitting bet transaction...","info");const o=await I.placeBet(n,{value:e});U("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",o.hash);const a=await o.wait();console.log("Bet placed successfully:",a),U(`✅ Bet placed successfully! ${n} tickets for ${t} ETH`,"success"),document.getElementById("bet-summary").style.display="none",document.querySelectorAll(".ticket-btn").forEach(c=>c.classList.remove("selected")),await rn(I,S),an(I,S),await Yt()}catch(r){console.error("Contract error:",r),Of(r,"Place Bet")}}catch(n){console.error("Error placing bet:",n),U("Failed to place bet: "+n.message,"error")}}async function Df(){try{if(!I||!cn||!S){U("Please connect your wallet first","error");return}const n=document.getElementById("proof-input");if(!n)return;const t=n.value.trim();if(!t){U("Please enter your puzzle proof","error");return}let e;try{e=Im(t,"proof")}catch(r){U(r.message,"error");return}try{Tf(S)}catch(r){U(r.message,"warning");return}try{await Sf(I,S)}catch(r){U(r.message,"error");return}console.log("Submitting proof:",e.substring(0,50)+"...");try{U("Validating proof submission...","info");const r=await I.currentRoundId();if(r.toString()==="0")throw new Error("No active round available");const s=await I.getRound(r),i=Number(s.status);if(console.log("Round status check (proof):",{status:i,roundData:s}),i!==1)throw new Error(`Round is not currently open for proof submission (status: ${i})`);const o=await I.getUserStats(r,S);if(o.tickets.toString()==="0")throw new Error("You must place a bet before submitting a proof");if(o.hasProof)throw new Error("You have already submitted a proof for this round");U("Submitting puzzle proof...","info");const a=ft(De(e)),c=await I.submitProof(a);U("Transaction submitted, waiting for confirmation...","info"),console.log("Transaction hash:",c.hash);const u=await c.wait();console.log("Proof transaction confirmed:",u),U("Proof submitted, validating...","info"),n.value="";const f=document.getElementById("proof-status");f&&(f.style.display="none"),await rn(I,S),an(I,S),await Yt()}catch(r){console.error("Contract error:",r);const s=Of(r,"Submit Proof"),i=document.getElementById("proof-status");i&&(i.textContent=s.message,i.className="error",i.style.display="block")}}catch(n){console.error("Error submitting proof:",n),U("Failed to submit proof: "+n.message,"error")}}function Km(){setInterval(async()=>{if(I)try{await fe(I),await Eo(I),await Dn(I),S&&await rn(I,S),await Yt()}catch(n){n.message.includes("execution reverted")||n.message.includes("call revert exception")||n.code==="CALL_EXCEPTION"||n.code===3||console.error("Periodic update error:",n)}},6e4),setInterval(async()=>{if(I&&S)try{an(I,S)}catch(n){n.message.includes("execution reverted")||n.message.includes("call revert exception")||n.code==="CALL_EXCEPTION"||n.code===3||console.error("Security status error:",n)}},3e4),I&&(fe(I),Eo(I),Dn(I),S&&an(I,S),Yt())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Fl):Fl();window.pepedawn={provider:Xt,signer:cn,contract:I,userAddress:S,connectWallet:Lf,placeBet:Ff,submitProof:Df};
