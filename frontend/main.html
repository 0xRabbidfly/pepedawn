<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/PEPEDAWN_thumbnail.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PEPEDAWN</title>
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <div id="app">
      <header>
        <h1>PEPEDAWN</h1>
        <nav>
          <a href="/">Home</a>
          <a href="/main.html" class="active">Ticket Office</a>
          <a href="/leaderboard.html">Leaderboard</a>
          <a href="/rules.html">Rules</a>
        </nav>
      </header>

      <main>
        <section id="wallet-section">
          <button id="connect-wallet">Connect Wallet</button>
          <div id="wallet-info" style="display: none;">
            <div class="wallet-details">
              <span class="wallet-address" id="wallet-address-display"></span>
              <span class="wallet-balance">Balance: <span id="wallet-balance"></span> ETH</span>
            </div>
          </div>
        </section>

        <section id="round-status">
          <div class="round-header">
            <h2 id="current-round-title">Current Round</h2>
          </div>
          <hr>
          
          <div class="round-content">
            <!-- Left Column: Status Flow (vertical) -->
            <div class="status-column">
              <div class="status-item open-phase" data-status="1">
                <span class="status-icon">ğŸ¯</span>
                <span class="status-text">Open</span>
              </div>
              <div class="status-arrow-vertical">â†“</div>
              <div class="status-row-with-badge">
                <div class="merkle-badge" id="merkle-badge">
                  <div class="badge-icon">ğŸ”</div>
                  <div class="badge-text">Merkle Proof<br>Verified</div>
                </div>
                <div class="status-item drawing-phase" data-status="2,3,4,5">
                  <span class="status-icon">ğŸ²</span>
                  <span class="status-text">Drawing Winners</span>
                </div>
              </div>
              <div class="status-arrow-vertical">â†“</div>
              <div class="status-item claim-phase" data-status="6">
                <span class="status-icon">ğŸ¸</span>
                <span class="status-text">Winners Claiming</span>
              </div>
            </div>
            
            <!-- Right Column: Info + Dispenser -->
            <div class="info-column">
              <div class="info-section-vertical">
                <div class="info-item">
                  <div class="info-header">
                    <span class="info-icon">â°</span>
                    <span class="info-text">Time Remaining</span>
                  </div>
                  <span class="info-value" id="time-remaining">--</span>
                </div>
                <div class="info-section-grid">
                  <div class="info-item">
                    <div class="info-header">
                      <span class="info-icon">ğŸ«</span>
                      <span class="info-text">Total Tickets</span>
                    </div>
                    <span class="info-value" id="total-tickets">--</span>
                  </div>
                  <div class="info-item">
                    <div class="info-header">
                      <span class="info-icon">ğŸ’°</span>
                      <span class="info-text">$ETH</span>
                    </div>
                    <span class="info-value" id="vaulted-eth">--</span>
                  </div>
                </div>
              </div>
              
              <!-- Atomic Dispenser -->
              <div class="dispenser-container">
                <div class="ticket-graphic">
                  <div class="dispenser-label">
                    Atomic Dispenser 
                    <img src="/counterparty.png" alt="XCP" class="xcp-icon-img" onerror="this.style.display='none'">
                  </div>
                  <div class="ticket-icon" data-ticket="1">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="2">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="3">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="4">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="5">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="6">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="7">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="8">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="9">ğŸ«</div>
                  <div class="ticket-icon" data-ticket="10">ğŸ«</div>
                  <div id="dispenser-badge" class="dispenser-badge">
                    <span id="dispenser-text">minimum 10 tickets required</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="claims-section" style="display: none;">
          <h2>Prize Claims</h2>
          <div id="claims-container">
            <!-- Claims will be populated dynamically -->
          </div>
        </section>

        <section id="betting-section">
          <h2>Place Your Bet</h2>
          <div id="betting-form">
            <div class="ticket-options">
              <button class="ticket-btn" data-tickets="1" data-amount="0.005">
                1 Ticket - 0.005 ETH
              </button>
              <button class="ticket-btn" data-tickets="5" data-amount="0.0225">
                5 Tickets - 0.0225 ETH (10% discount)
              </button>
              <button class="ticket-btn" data-tickets="10" data-amount="0.04">
                10 Tickets - 0.04 ETH (20% discount)
              </button>
            </div>
            <div id="bet-summary" style="display: none;">
              <p>Tickets: <span id="selected-tickets">0</span></p>
              <p>Amount: <span id="selected-amount">0</span> ETH</p>
              <p>Your Cap Remaining: <span id="cap-remaining">1.0</span> ETH</p>
              <button id="place-bet">Ticket Office</button>
            </div>
          </div>
        </section>

        <section id="proof-section">
          <h2 class="collapsible-header" onclick="toggleProofSection()">
            <span class="collapse-icon">â–¼</span>
            Puzzle Proof Submission
          </h2>
          <div id="proof-form" class="collapsible-content" style="display: none;">
            <p>Submit one puzzle proof per round to get +40% weight multiplier</p>
            <textarea id="proof-input" placeholder="Paste your puzzle proof here..."></textarea>
            <button id="submit-proof">Submit Proof</button>
            <div id="proof-status"></div>
          </div>
        </section>

        <section id="status-panel">
          <h2>Your Status</h2>
          <div id="user-stats">
            <p>Your Tickets: <span id="user-tickets">0</span></p>
            <p>Your Weight: <span id="user-weight">0</span></p>
            <p>Proof Submitted: <span id="user-proof-status">No</span></p>
            <p>Winning Odds: <span id="user-fake-odds">0%</span></p>
          </div>
        </section>

        <section id="claims-section" style="display: none;">
          <h2>Prize Claims</h2>
          <div id="claims-container">
            <!-- Claims will be populated dynamically -->
          </div>
        </section>

        <section id="refund-section" style="display: none;">
          <h2>Refunds</h2>
          <div id="refund-container">
            <!-- Refund info will be populated dynamically -->
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
